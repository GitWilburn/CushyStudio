var sie=Object.create;var ex=Object.defineProperty;var aie=Object.getOwnPropertyDescriptor;var lie=Object.getOwnPropertyNames;var uie=Object.getPrototypeOf,cie=Object.prototype.hasOwnProperty;var tx=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var ky=(t,e)=>()=>(t&&(e=t(t=0)),e);var Y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),wu=(t,e)=>{for(var r in e)ex(t,r,{get:e[r],enumerable:!0})},R8=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of lie(e))!cie.call(t,i)&&i!==r&&ex(t,i,{get:()=>e[i],enumerable:!(n=aie(e,i))||n.enumerable});return t};var ie=(t,e,r)=>(r=t!=null?sie(uie(t)):{},R8(e||!t||!t.__esModule?ex(r,"default",{value:t,enumerable:!0}):r,t)),Vn=t=>R8(ex({},"__esModule",{value:!0}),t);var H8=Y(Xt=>{"use strict";var Ny=Symbol.for("react.element"),die=Symbol.for("react.portal"),pie=Symbol.for("react.fragment"),fie=Symbol.for("react.strict_mode"),mie=Symbol.for("react.profiler"),hie=Symbol.for("react.provider"),gie=Symbol.for("react.context"),yie=Symbol.for("react.forward_ref"),vie=Symbol.for("react.suspense"),_ie=Symbol.for("react.memo"),bie=Symbol.for("react.lazy"),P8=Symbol.iterator;function xie(t){return t===null||typeof t!="object"?null:(t=P8&&t[P8]||t["@@iterator"],typeof t=="function"?t:null)}var F8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U8=Object.assign,B8={};function Nm(t,e,r){this.props=t,this.context=e,this.refs=B8,this.updater=r||F8}Nm.prototype.isReactComponent={};Nm.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Nm.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function W8(){}W8.prototype=Nm.prototype;function VI(t,e,r){this.props=t,this.context=e,this.refs=B8,this.updater=r||F8}var KI=VI.prototype=new W8;KI.constructor=VI;U8(KI,Nm.prototype);KI.isPureReactComponent=!0;var L8=Array.isArray,j8=Object.prototype.hasOwnProperty,YI={current:null},z8={key:!0,ref:!0,__self:!0,__source:!0};function $8(t,e,r){var n,i={},o=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)j8.call(e,n)&&!z8.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Ny,type:t,key:o,ref:s,props:i,_owner:YI.current}}function Tie(t,e){return{$$typeof:Ny,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function XI(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ny}function wie(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var M8=/\/+/g;function GI(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wie(""+t.key):e.toString(36)}function nx(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Ny:case die:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+GI(s,0):n,L8(i)?(r="",t!=null&&(r=t.replace(M8,"$&/")+"/"),nx(i,e,r,"",function(c){return c})):i!=null&&(XI(i)&&(i=Tie(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(M8,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",L8(t))for(var a=0;a<t.length;a++){o=t[a];var l=n+GI(o,a);s+=nx(o,e,r,l,i)}else if(l=xie(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=n+GI(o,a++),s+=nx(o,e,r,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function rx(t,e,r){if(t==null)return t;var n=[],i=0;return nx(t,n,"","",function(o){return e.call(r,o,i++)}),n}function Sie(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var So={current:null},ix={transition:null},Eie={ReactCurrentDispatcher:So,ReactCurrentBatchConfig:ix,ReactCurrentOwner:YI};Xt.Children={map:rx,forEach:function(t,e,r){rx(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return rx(t,function(){e++}),e},toArray:function(t){return rx(t,function(e){return e})||[]},only:function(t){if(!XI(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Xt.Component=Nm;Xt.Fragment=pie;Xt.Profiler=mie;Xt.PureComponent=VI;Xt.StrictMode=fie;Xt.Suspense=vie;Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Eie;Xt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=U8({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=YI.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)j8.call(e,l)&&!z8.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Ny,type:t.type,key:i,ref:o,props:n,_owner:s}};Xt.createContext=function(t){return t={$$typeof:gie,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hie,_context:t},t.Consumer=t};Xt.createElement=$8;Xt.createFactory=function(t){var e=$8.bind(null,t);return e.type=t,e};Xt.createRef=function(){return{current:null}};Xt.forwardRef=function(t){return{$$typeof:yie,render:t}};Xt.isValidElement=XI;Xt.lazy=function(t){return{$$typeof:bie,_payload:{_status:-1,_result:t},_init:Sie}};Xt.memo=function(t,e){return{$$typeof:_ie,type:t,compare:e===void 0?null:e}};Xt.startTransition=function(t){var e=ix.transition;ix.transition={};try{t()}finally{ix.transition=e}};Xt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Xt.useCallback=function(t,e){return So.current.useCallback(t,e)};Xt.useContext=function(t){return So.current.useContext(t)};Xt.useDebugValue=function(){};Xt.useDeferredValue=function(t){return So.current.useDeferredValue(t)};Xt.useEffect=function(t,e){return So.current.useEffect(t,e)};Xt.useId=function(){return So.current.useId()};Xt.useImperativeHandle=function(t,e,r){return So.current.useImperativeHandle(t,e,r)};Xt.useInsertionEffect=function(t,e){return So.current.useInsertionEffect(t,e)};Xt.useLayoutEffect=function(t,e){return So.current.useLayoutEffect(t,e)};Xt.useMemo=function(t,e){return So.current.useMemo(t,e)};Xt.useReducer=function(t,e,r){return So.current.useReducer(t,e,r)};Xt.useRef=function(t){return So.current.useRef(t)};Xt.useState=function(t){return So.current.useState(t)};Xt.useSyncExternalStore=function(t,e,r){return So.current.useSyncExternalStore(t,e,r)};Xt.useTransition=function(){return So.current.useTransition()};Xt.version="18.2.0"});var ve=Y((mPe,q8)=>{"use strict";q8.exports=H8()});var t6=Y(Wr=>{"use strict";function ek(t,e){var r=t.length;t.push(e);e:for(;0<r;){var n=r-1>>>1,i=t[n];if(0<ox(i,e))t[n]=e,t[r]=i,r=n;else break e}}function za(t){return t.length===0?null:t[0]}function ax(t){if(t.length===0)return null;var e=t[0],r=t.pop();if(r!==e){t[0]=r;e:for(var n=0,i=t.length,o=i>>>1;n<o;){var s=2*(n+1)-1,a=t[s],l=s+1,c=t[l];if(0>ox(a,r))l<i&&0>ox(c,a)?(t[n]=c,t[l]=r,n=l):(t[n]=a,t[s]=r,n=s);else if(l<i&&0>ox(c,r))t[n]=c,t[l]=r,n=l;else break e}}return e}function ox(t,e){var r=t.sortIndex-e.sortIndex;return r!==0?r:t.id-e.id}typeof performance=="object"&&typeof performance.now=="function"?(G8=performance,Wr.unstable_now=function(){return G8.now()}):(JI=Date,V8=JI.now(),Wr.unstable_now=function(){return JI.now()-V8});var G8,JI,V8,Il=[],Hc=[],Cie=1,ia=null,eo=3,lx=!1,Vp=!1,Oy=!1,X8=typeof setTimeout=="function"?setTimeout:null,J8=typeof clearTimeout=="function"?clearTimeout:null,K8=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function tk(t){for(var e=za(Hc);e!==null;){if(e.callback===null)ax(Hc);else if(e.startTime<=t)ax(Hc),e.sortIndex=e.expirationTime,ek(Il,e);else break;e=za(Hc)}}function rk(t){if(Oy=!1,tk(t),!Vp)if(za(Il)!==null)Vp=!0,ik(nk);else{var e=za(Hc);e!==null&&ok(rk,e.startTime-t)}}function nk(t,e){Vp=!1,Oy&&(Oy=!1,J8(Ry),Ry=-1),lx=!0;var r=eo;try{for(tk(e),ia=za(Il);ia!==null&&(!(ia.expirationTime>e)||t&&!e6());){var n=ia.callback;if(typeof n=="function"){ia.callback=null,eo=ia.priorityLevel;var i=n(ia.expirationTime<=e);e=Wr.unstable_now(),typeof i=="function"?ia.callback=i:ia===za(Il)&&ax(Il),tk(e)}else ax(Il);ia=za(Il)}if(ia!==null)var o=!0;else{var s=za(Hc);s!==null&&ok(rk,s.startTime-e),o=!1}return o}finally{ia=null,eo=r,lx=!1}}var ux=!1,sx=null,Ry=-1,Q8=5,Z8=-1;function e6(){return!(Wr.unstable_now()-Z8<Q8)}function QI(){if(sx!==null){var t=Wr.unstable_now();Z8=t;var e=!0;try{e=sx(!0,t)}finally{e?Ay():(ux=!1,sx=null)}}else ux=!1}var Ay;typeof K8=="function"?Ay=function(){K8(QI)}:typeof MessageChannel<"u"?(ZI=new MessageChannel,Y8=ZI.port2,ZI.port1.onmessage=QI,Ay=function(){Y8.postMessage(null)}):Ay=function(){X8(QI,0)};var ZI,Y8;function ik(t){sx=t,ux||(ux=!0,Ay())}function ok(t,e){Ry=X8(function(){t(Wr.unstable_now())},e)}Wr.unstable_IdlePriority=5;Wr.unstable_ImmediatePriority=1;Wr.unstable_LowPriority=4;Wr.unstable_NormalPriority=3;Wr.unstable_Profiling=null;Wr.unstable_UserBlockingPriority=2;Wr.unstable_cancelCallback=function(t){t.callback=null};Wr.unstable_continueExecution=function(){Vp||lx||(Vp=!0,ik(nk))};Wr.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q8=0<t?Math.floor(1e3/t):5};Wr.unstable_getCurrentPriorityLevel=function(){return eo};Wr.unstable_getFirstCallbackNode=function(){return za(Il)};Wr.unstable_next=function(t){switch(eo){case 1:case 2:case 3:var e=3;break;default:e=eo}var r=eo;eo=e;try{return t()}finally{eo=r}};Wr.unstable_pauseExecution=function(){};Wr.unstable_requestPaint=function(){};Wr.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=eo;eo=t;try{return e()}finally{eo=r}};Wr.unstable_scheduleCallback=function(t,e,r){var n=Wr.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=r+i,t={id:Cie++,callback:e,priorityLevel:t,startTime:r,expirationTime:i,sortIndex:-1},r>n?(t.sortIndex=r,ek(Hc,t),za(Il)===null&&t===za(Hc)&&(Oy?(J8(Ry),Ry=-1):Oy=!0,ok(rk,r-n))):(t.sortIndex=i,ek(Il,t),Vp||lx||(Vp=!0,ik(nk))),t};Wr.unstable_shouldYield=e6;Wr.unstable_wrapCallback=function(t){var e=eo;return function(){var r=eo;eo=e;try{return t.apply(this,arguments)}finally{eo=r}}}});var cx=Y((gPe,r6)=>{"use strict";r6.exports=t6()});var l7=Y(ks=>{"use strict";var uF=ve(),Ds=cx();function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cF=new Set,tv={};function af(t,e){Jm(t,e),Jm(t+"Capture",e)}function Jm(t,e){for(tv[t]=e,t=0;t<e.length;t++)cF.add(e[t])}var ku=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ik=Object.prototype.hasOwnProperty,Die=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,n6={},i6={};function Iie(t){return Ik.call(i6,t)?!0:Ik.call(n6,t)?!1:Die.test(t)?i6[t]=!0:(n6[t]=!0,!1)}function kie(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Nie(t,e,r,n){if(e===null||typeof e>"u"||kie(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Do(t,e,r,n,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Li={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Li[t]=new Do(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Li[e]=new Do(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Li[t]=new Do(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Li[t]=new Do(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Li[t]=new Do(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Li[t]=new Do(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Li[t]=new Do(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Li[t]=new Do(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Li[t]=new Do(t,5,!1,t.toLowerCase(),null,!1,!1)});var bN=/[\-:]([a-z])/g;function xN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bN,xN);Li[e]=new Do(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bN,xN);Li[e]=new Do(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bN,xN);Li[e]=new Do(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Li[t]=new Do(t,1,!1,t.toLowerCase(),null,!1,!1)});Li.xlinkHref=new Do("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Li[t]=new Do(t,1,!1,t.toLowerCase(),null,!0,!0)});function TN(t,e,r,n){var i=Li.hasOwnProperty(e)?Li[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Nie(e,r,i,n)&&(r=null),n||i===null?Iie(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ru=uF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dx=Symbol.for("react.element"),Rm=Symbol.for("react.portal"),Pm=Symbol.for("react.fragment"),wN=Symbol.for("react.strict_mode"),kk=Symbol.for("react.profiler"),dF=Symbol.for("react.provider"),pF=Symbol.for("react.context"),SN=Symbol.for("react.forward_ref"),Nk=Symbol.for("react.suspense"),Ak=Symbol.for("react.suspense_list"),EN=Symbol.for("react.memo"),Gc=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var fF=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var o6=Symbol.iterator;function Py(t){return t===null||typeof t!="object"?null:(t=o6&&t[o6]||t["@@iterator"],typeof t=="function"?t:null)}var pn=Object.assign,sk;function zy(t){if(sk===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);sk=e&&e[1]||""}return`
`+sk+t}var ak=!1;function lk(t,e){if(!t||ak)return"";ak=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{ak=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?zy(t):""}function Aie(t){switch(t.tag){case 5:return zy(t.type);case 16:return zy("Lazy");case 13:return zy("Suspense");case 19:return zy("SuspenseList");case 0:case 2:case 15:return t=lk(t.type,!1),t;case 11:return t=lk(t.type.render,!1),t;case 1:return t=lk(t.type,!0),t;default:return""}}function Ok(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pm:return"Fragment";case Rm:return"Portal";case kk:return"Profiler";case wN:return"StrictMode";case Nk:return"Suspense";case Ak:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pF:return(t.displayName||"Context")+".Consumer";case dF:return(t._context.displayName||"Context")+".Provider";case SN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case EN:return e=t.displayName||null,e!==null?e:Ok(t.type)||"Memo";case Gc:e=t._payload,t=t._init;try{return Ok(t(e))}catch{}}return null}function Oie(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ok(e);case 8:return e===wN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sd(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mF(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Rie(t){var e=mF(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function px(t){t._valueTracker||(t._valueTracker=Rie(t))}function hF(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=mF(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Wx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rk(t,e){var r=e.checked;return pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function s6(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=sd(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gF(t,e){e=e.checked,e!=null&&TN(t,"checked",e,!1)}function Pk(t,e){gF(t,e);var r=sd(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lk(t,e.type,r):e.hasOwnProperty("defaultValue")&&Lk(t,e.type,sd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function a6(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Lk(t,e,r){(e!=="number"||Wx(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var $y=Array.isArray;function qm(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+sd(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Mk(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return pn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function l6(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Ee(92));if($y(r)){if(1<r.length)throw Error(Ee(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:sd(r)}}function yF(t,e){var r=sd(e.value),n=sd(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function u6(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vF(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fk(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vF(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fx,_F=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fx=fx||document.createElement("div"),fx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fx.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rv(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Gy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pie=["Webkit","ms","Moz","O"];Object.keys(Gy).forEach(function(t){Pie.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gy[e]=Gy[t]})});function bF(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Gy.hasOwnProperty(t)&&Gy[t]?(""+e).trim():e+"px"}function xF(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=bF(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var Lie=pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uk(t,e){if(e){if(Lie[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function Bk(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wk=null;function CN(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jk=null,Gm=null,Vm=null;function c6(t){if(t=bv(t)){if(typeof jk!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=m1(e),jk(t.stateNode,t.type,e))}}function TF(t){Gm?Vm?Vm.push(t):Vm=[t]:Gm=t}function wF(){if(Gm){var t=Gm,e=Vm;if(Vm=Gm=null,c6(t),e)for(t=0;t<e.length;t++)c6(e[t])}}function SF(t,e){return t(e)}function EF(){}var uk=!1;function CF(t,e,r){if(uk)return t(e,r);uk=!0;try{return SF(t,e,r)}finally{uk=!1,(Gm!==null||Vm!==null)&&(EF(),wF())}}function nv(t,e){var r=t.stateNode;if(r===null)return null;var n=m1(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Ee(231,e,typeof r));return r}var zk=!1;if(ku)try{Am={},Object.defineProperty(Am,"passive",{get:function(){zk=!0}}),window.addEventListener("test",Am,Am),window.removeEventListener("test",Am,Am)}catch{zk=!1}var Am;function Mie(t,e,r,n,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(p){this.onError(p)}}var Vy=!1,jx=null,zx=!1,$k=null,Fie={onError:function(t){Vy=!0,jx=t}};function Uie(t,e,r,n,i,o,s,a,l){Vy=!1,jx=null,Mie.apply(Fie,arguments)}function Bie(t,e,r,n,i,o,s,a,l){if(Uie.apply(this,arguments),Vy){if(Vy){var c=jx;Vy=!1,jx=null}else throw Error(Ee(198));zx||(zx=!0,$k=c)}}function lf(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function DF(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function d6(t){if(lf(t)!==t)throw Error(Ee(188))}function Wie(t){var e=t.alternate;if(!e){if(e=lf(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return d6(i),t;if(o===n)return d6(i),e;o=o.sibling}throw Error(Ee(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error(Ee(189))}}if(r.alternate!==n)throw Error(Ee(190))}if(r.tag!==3)throw Error(Ee(188));return r.stateNode.current===r?t:e}function IF(t){return t=Wie(t),t!==null?kF(t):null}function kF(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kF(t);if(e!==null)return e;t=t.sibling}return null}var NF=Ds.unstable_scheduleCallback,p6=Ds.unstable_cancelCallback,jie=Ds.unstable_shouldYield,zie=Ds.unstable_requestPaint,Rn=Ds.unstable_now,$ie=Ds.unstable_getCurrentPriorityLevel,DN=Ds.unstable_ImmediatePriority,AF=Ds.unstable_UserBlockingPriority,$x=Ds.unstable_NormalPriority,Hie=Ds.unstable_LowPriority,OF=Ds.unstable_IdlePriority,c1=null,Ol=null;function qie(t){if(Ol&&typeof Ol.onCommitFiberRoot=="function")try{Ol.onCommitFiberRoot(c1,t,void 0,(t.current.flags&128)===128)}catch{}}var Va=Math.clz32?Math.clz32:Kie,Gie=Math.log,Vie=Math.LN2;function Kie(t){return t>>>=0,t===0?32:31-(Gie(t)/Vie|0)|0}var mx=64,hx=4194304;function Hy(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hx(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,s=r&268435455;if(s!==0){var a=s&~i;a!==0?n=Hy(a):(o&=s,o!==0&&(n=Hy(o)))}else s=r&~i,s!==0?n=Hy(s):o!==0&&(n=Hy(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Va(e),i=1<<r,n|=t[r],e&=~i;return n}function Yie(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xie(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Va(o),a=1<<s,l=i[s];l===-1?(!(a&r)||a&n)&&(i[s]=Yie(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Hk(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function RF(){var t=mx;return mx<<=1,!(mx&4194240)&&(mx=64),t}function ck(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function vv(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Va(e),t[e]=r}function Jie(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Va(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}function IN(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Va(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Er=0;function PF(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var LF,kN,MF,FF,UF,qk=!1,gx=[],Qc=null,Zc=null,ed=null,iv=new Map,ov=new Map,Kc=[],Qie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function f6(t,e){switch(t){case"focusin":case"focusout":Qc=null;break;case"dragenter":case"dragleave":Zc=null;break;case"mouseover":case"mouseout":ed=null;break;case"pointerover":case"pointerout":iv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ov.delete(e.pointerId)}}function Ly(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=bv(e),e!==null&&kN(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Zie(t,e,r,n,i){switch(e){case"focusin":return Qc=Ly(Qc,t,e,r,n,i),!0;case"dragenter":return Zc=Ly(Zc,t,e,r,n,i),!0;case"mouseover":return ed=Ly(ed,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return iv.set(o,Ly(iv.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,ov.set(o,Ly(ov.get(o)||null,t,e,r,n,i)),!0}return!1}function BF(t){var e=Xp(t.target);if(e!==null){var r=lf(e);if(r!==null){if(e=r.tag,e===13){if(e=DF(r),e!==null){t.blockedOn=e,UF(t.priority,function(){MF(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nx(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Gk(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Wk=n,r.target.dispatchEvent(n),Wk=null}else return e=bv(r),e!==null&&kN(e),t.blockedOn=r,!1;e.shift()}return!0}function m6(t,e,r){Nx(t)&&r.delete(e)}function eoe(){qk=!1,Qc!==null&&Nx(Qc)&&(Qc=null),Zc!==null&&Nx(Zc)&&(Zc=null),ed!==null&&Nx(ed)&&(ed=null),iv.forEach(m6),ov.forEach(m6)}function My(t,e){t.blockedOn===e&&(t.blockedOn=null,qk||(qk=!0,Ds.unstable_scheduleCallback(Ds.unstable_NormalPriority,eoe)))}function sv(t){function e(i){return My(i,t)}if(0<gx.length){My(gx[0],t);for(var r=1;r<gx.length;r++){var n=gx[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Qc!==null&&My(Qc,t),Zc!==null&&My(Zc,t),ed!==null&&My(ed,t),iv.forEach(e),ov.forEach(e),r=0;r<Kc.length;r++)n=Kc[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Kc.length&&(r=Kc[0],r.blockedOn===null);)BF(r),r.blockedOn===null&&Kc.shift()}var Km=Ru.ReactCurrentBatchConfig,qx=!0;function toe(t,e,r,n){var i=Er,o=Km.transition;Km.transition=null;try{Er=1,NN(t,e,r,n)}finally{Er=i,Km.transition=o}}function roe(t,e,r,n){var i=Er,o=Km.transition;Km.transition=null;try{Er=4,NN(t,e,r,n)}finally{Er=i,Km.transition=o}}function NN(t,e,r,n){if(qx){var i=Gk(t,e,r,n);if(i===null)yk(t,e,n,Gx,r),f6(t,n);else if(Zie(i,t,e,r,n))n.stopPropagation();else if(f6(t,n),e&4&&-1<Qie.indexOf(t)){for(;i!==null;){var o=bv(i);if(o!==null&&LF(o),o=Gk(t,e,r,n),o===null&&yk(t,e,n,Gx,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else yk(t,e,n,null,r)}}var Gx=null;function Gk(t,e,r,n){if(Gx=null,t=CN(n),t=Xp(t),t!==null)if(e=lf(t),e===null)t=null;else if(r=e.tag,r===13){if(t=DF(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gx=t,null}function WF(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($ie()){case DN:return 1;case AF:return 4;case $x:case Hie:return 16;case OF:return 536870912;default:return 16}default:return 16}}var Xc=null,AN=null,Ax=null;function jF(){if(Ax)return Ax;var t,e=AN,r=e.length,n,i="value"in Xc?Xc.value:Xc.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[o-n];n++);return Ax=i.slice(t,1<n?1-n:void 0)}function Ox(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yx(){return!0}function h6(){return!1}function Is(t){function e(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?yx:h6,this.isPropagationStopped=h6,this}return pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yx)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yx)},persist:function(){},isPersistent:yx}),e}var ih={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ON=Is(ih),_v=pn({},ih,{view:0,detail:0}),noe=Is(_v),dk,pk,Fy,d1=pn({},_v,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:RN,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fy&&(Fy&&t.type==="mousemove"?(dk=t.screenX-Fy.screenX,pk=t.screenY-Fy.screenY):pk=dk=0,Fy=t),dk)},movementY:function(t){return"movementY"in t?t.movementY:pk}}),g6=Is(d1),ioe=pn({},d1,{dataTransfer:0}),ooe=Is(ioe),soe=pn({},_v,{relatedTarget:0}),fk=Is(soe),aoe=pn({},ih,{animationName:0,elapsedTime:0,pseudoElement:0}),loe=Is(aoe),uoe=pn({},ih,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),coe=Is(uoe),doe=pn({},ih,{data:0}),y6=Is(doe),poe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},foe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},moe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hoe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=moe[t])?!!e[t]:!1}function RN(){return hoe}var goe=pn({},_v,{key:function(t){if(t.key){var e=poe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ox(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?foe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:RN,charCode:function(t){return t.type==="keypress"?Ox(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ox(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yoe=Is(goe),voe=pn({},d1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v6=Is(voe),_oe=pn({},_v,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:RN}),boe=Is(_oe),xoe=pn({},ih,{propertyName:0,elapsedTime:0,pseudoElement:0}),Toe=Is(xoe),woe=pn({},d1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Soe=Is(woe),Eoe=[9,13,27,32],PN=ku&&"CompositionEvent"in window,Ky=null;ku&&"documentMode"in document&&(Ky=document.documentMode);var Coe=ku&&"TextEvent"in window&&!Ky,zF=ku&&(!PN||Ky&&8<Ky&&11>=Ky),_6=" ",b6=!1;function $F(t,e){switch(t){case"keyup":return Eoe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HF(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lm=!1;function Doe(t,e){switch(t){case"compositionend":return HF(e);case"keypress":return e.which!==32?null:(b6=!0,_6);case"textInput":return t=e.data,t===_6&&b6?null:t;default:return null}}function Ioe(t,e){if(Lm)return t==="compositionend"||!PN&&$F(t,e)?(t=jF(),Ax=AN=Xc=null,Lm=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zF&&e.locale!=="ko"?null:e.data;default:return null}}var koe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!koe[t.type]:e==="textarea"}function qF(t,e,r,n){TF(n),e=Vx(e,"onChange"),0<e.length&&(r=new ON("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Yy=null,av=null;function Noe(t){r9(t,0)}function p1(t){var e=Um(t);if(hF(e))return t}function Aoe(t,e){if(t==="change")return e}var GF=!1;ku&&(ku?(_x="oninput"in document,_x||(mk=document.createElement("div"),mk.setAttribute("oninput","return;"),_x=typeof mk.oninput=="function"),vx=_x):vx=!1,GF=vx&&(!document.documentMode||9<document.documentMode));var vx,_x,mk;function T6(){Yy&&(Yy.detachEvent("onpropertychange",VF),av=Yy=null)}function VF(t){if(t.propertyName==="value"&&p1(av)){var e=[];qF(e,av,t,CN(t)),CF(Noe,e)}}function Ooe(t,e,r){t==="focusin"?(T6(),Yy=e,av=r,Yy.attachEvent("onpropertychange",VF)):t==="focusout"&&T6()}function Roe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return p1(av)}function Poe(t,e){if(t==="click")return p1(e)}function Loe(t,e){if(t==="input"||t==="change")return p1(e)}function Moe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ya=typeof Object.is=="function"?Object.is:Moe;function lv(t,e){if(Ya(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Ik.call(e,i)||!Ya(t[i],e[i]))return!1}return!0}function w6(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function S6(t,e){var r=w6(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=w6(r)}}function KF(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?KF(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function YF(){for(var t=window,e=Wx();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Wx(t.document)}return e}function LN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Foe(t){var e=YF(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&KF(r.ownerDocument.documentElement,r)){if(n!==null&&LN(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=S6(r,o);var s=S6(r,n);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Uoe=ku&&"documentMode"in document&&11>=document.documentMode,Mm=null,Vk=null,Xy=null,Kk=!1;function E6(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Kk||Mm==null||Mm!==Wx(n)||(n=Mm,"selectionStart"in n&&LN(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xy&&lv(Xy,n)||(Xy=n,n=Vx(Vk,"onSelect"),0<n.length&&(e=new ON("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Mm)))}function bx(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Fm={animationend:bx("Animation","AnimationEnd"),animationiteration:bx("Animation","AnimationIteration"),animationstart:bx("Animation","AnimationStart"),transitionend:bx("Transition","TransitionEnd")},hk={},XF={};ku&&(XF=document.createElement("div").style,"AnimationEvent"in window||(delete Fm.animationend.animation,delete Fm.animationiteration.animation,delete Fm.animationstart.animation),"TransitionEvent"in window||delete Fm.transitionend.transition);function f1(t){if(hk[t])return hk[t];if(!Fm[t])return t;var e=Fm[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in XF)return hk[t]=e[r];return t}var JF=f1("animationend"),QF=f1("animationiteration"),ZF=f1("animationstart"),e9=f1("transitionend"),t9=new Map,C6="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ld(t,e){t9.set(t,e),af(e,[t])}for(xx=0;xx<C6.length;xx++)Tx=C6[xx],D6=Tx.toLowerCase(),I6=Tx[0].toUpperCase()+Tx.slice(1),ld(D6,"on"+I6);var Tx,D6,I6,xx;ld(JF,"onAnimationEnd");ld(QF,"onAnimationIteration");ld(ZF,"onAnimationStart");ld("dblclick","onDoubleClick");ld("focusin","onFocus");ld("focusout","onBlur");ld(e9,"onTransitionEnd");Jm("onMouseEnter",["mouseout","mouseover"]);Jm("onMouseLeave",["mouseout","mouseover"]);Jm("onPointerEnter",["pointerout","pointerover"]);Jm("onPointerLeave",["pointerout","pointerover"]);af("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));af("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));af("onBeforeInput",["compositionend","keypress","textInput","paste"]);af("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));af("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));af("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Boe=new Set("cancel close invalid load scroll toggle".split(" ").concat(qy));function k6(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Bie(n,e,void 0,t),t.currentTarget=null}function r9(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;k6(i,a,c),o=l}else for(s=0;s<n.length;s++){if(a=n[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;k6(i,a,c),o=l}}}if(zx)throw t=$k,zx=!1,$k=null,t}function Yr(t,e){var r=e[Zk];r===void 0&&(r=e[Zk]=new Set);var n=t+"__bubble";r.has(n)||(n9(e,t,2,!1),r.add(n))}function gk(t,e,r){var n=0;e&&(n|=4),n9(r,t,n,e)}var wx="_reactListening"+Math.random().toString(36).slice(2);function uv(t){if(!t[wx]){t[wx]=!0,cF.forEach(function(r){r!=="selectionchange"&&(Boe.has(r)||gk(r,!1,t),gk(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wx]||(e[wx]=!0,gk("selectionchange",!1,e))}}function n9(t,e,r,n){switch(WF(e)){case 1:var i=toe;break;case 4:i=roe;break;default:i=NN}r=i.bind(null,e,r,t),i=void 0,!zk||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function yk(t,e,r,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Xp(a),s===null)return;if(l=s.tag,l===5||l===6){n=o=s;continue e}a=a.parentNode}}n=n.return}CF(function(){var c=o,p=CN(r),f=[];e:{var m=t9.get(t);if(m!==void 0){var g=ON,v=t;switch(t){case"keypress":if(Ox(r)===0)break e;case"keydown":case"keyup":g=yoe;break;case"focusin":v="focus",g=fk;break;case"focusout":v="blur",g=fk;break;case"beforeblur":case"afterblur":g=fk;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=g6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ooe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=boe;break;case JF:case QF:case ZF:g=loe;break;case e9:g=Toe;break;case"scroll":g=noe;break;case"wheel":g=Soe;break;case"copy":case"cut":case"paste":g=coe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=v6}var _=(e&4)!==0,S=!_&&t==="scroll",T=_?m!==null?m+"Capture":null:m;_=[];for(var w=c,E;w!==null;){E=w;var I=E.stateNode;if(E.tag===5&&I!==null&&(E=I,T!==null&&(I=nv(w,T),I!=null&&_.push(cv(w,I,E)))),S)break;w=w.return}0<_.length&&(m=new g(m,v,null,r,p),f.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&r!==Wk&&(v=r.relatedTarget||r.fromElement)&&(Xp(v)||v[Nu]))break e;if((g||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=r.relatedTarget||r.toElement,g=c,v=v?Xp(v):null,v!==null&&(S=lf(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(_=g6,I="onMouseLeave",T="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(_=v6,I="onPointerLeave",T="onPointerEnter",w="pointer"),S=g==null?m:Um(g),E=v==null?m:Um(v),m=new _(I,w+"leave",g,r,p),m.target=S,m.relatedTarget=E,I=null,Xp(p)===c&&(_=new _(T,w+"enter",v,r,p),_.target=E,_.relatedTarget=S,I=_),S=I,g&&v)t:{for(_=g,T=v,w=0,E=_;E;E=Om(E))w++;for(E=0,I=T;I;I=Om(I))E++;for(;0<w-E;)_=Om(_),w--;for(;0<E-w;)T=Om(T),E--;for(;w--;){if(_===T||T!==null&&_===T.alternate)break t;_=Om(_),T=Om(T)}_=null}else _=null;g!==null&&N6(f,m,g,_,!1),v!==null&&S!==null&&N6(f,S,v,_,!0)}}e:{if(m=c?Um(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var N=Aoe;else if(x6(m))if(GF)N=Loe;else{N=Roe;var C=Ooe}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=Poe);if(N&&(N=N(t,c))){qF(f,N,r,p);break e}C&&C(t,m,c),t==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&Lk(m,"number",m.value)}switch(C=c?Um(c):window,t){case"focusin":(x6(C)||C.contentEditable==="true")&&(Mm=C,Vk=c,Xy=null);break;case"focusout":Xy=Vk=Mm=null;break;case"mousedown":Kk=!0;break;case"contextmenu":case"mouseup":case"dragend":Kk=!1,E6(f,r,p);break;case"selectionchange":if(Uoe)break;case"keydown":case"keyup":E6(f,r,p)}var k;if(PN)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else Lm?$F(t,r)&&(U="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(U="onCompositionStart");U&&(zF&&r.locale!=="ko"&&(Lm||U!=="onCompositionStart"?U==="onCompositionEnd"&&Lm&&(k=jF()):(Xc=p,AN="value"in Xc?Xc.value:Xc.textContent,Lm=!0)),C=Vx(c,U),0<C.length&&(U=new y6(U,t,null,r,p),f.push({event:U,listeners:C}),k?U.data=k:(k=HF(r),k!==null&&(U.data=k)))),(k=Coe?Doe(t,r):Ioe(t,r))&&(c=Vx(c,"onBeforeInput"),0<c.length&&(p=new y6("onBeforeInput","beforeinput",null,r,p),f.push({event:p,listeners:c}),p.data=k))}r9(f,e)})}function cv(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Vx(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=nv(t,r),o!=null&&n.unshift(cv(t,o,i)),o=nv(t,e),o!=null&&n.push(cv(t,o,i))),t=t.return}return n}function Om(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function N6(t,e,r,n,i){for(var o=e._reactName,s=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=nv(r,o),l!=null&&s.unshift(cv(r,l,a))):i||(l=nv(r,o),l!=null&&s.push(cv(r,l,a)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var Woe=/\r\n?/g,joe=/\u0000|\uFFFD/g;function A6(t){return(typeof t=="string"?t:""+t).replace(Woe,`
`).replace(joe,"")}function Sx(t,e,r){if(e=A6(e),A6(t)!==e&&r)throw Error(Ee(425))}function Kx(){}var Yk=null,Xk=null;function Jk(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qk=typeof setTimeout=="function"?setTimeout:void 0,zoe=typeof clearTimeout=="function"?clearTimeout:void 0,O6=typeof Promise=="function"?Promise:void 0,$oe=typeof queueMicrotask=="function"?queueMicrotask:typeof O6<"u"?function(t){return O6.resolve(null).then(t).catch(Hoe)}:Qk;function Hoe(t){setTimeout(function(){throw t})}function vk(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),sv(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);sv(e)}function td(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function R6(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var oh=Math.random().toString(36).slice(2),Al="__reactFiber$"+oh,dv="__reactProps$"+oh,Nu="__reactContainer$"+oh,Zk="__reactEvents$"+oh,qoe="__reactListeners$"+oh,Goe="__reactHandles$"+oh;function Xp(t){var e=t[Al];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Nu]||r[Al]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=R6(t);t!==null;){if(r=t[Al])return r;t=R6(t)}return e}t=r,r=t.parentNode}return null}function bv(t){return t=t[Al]||t[Nu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Um(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function m1(t){return t[dv]||null}var eN=[],Bm=-1;function ud(t){return{current:t}}function Xr(t){0>Bm||(t.current=eN[Bm],eN[Bm]=null,Bm--)}function jr(t,e){Bm++,eN[Bm]=t.current,t.current=e}var ad={},io=ud(ad),Qo=ud(!1),tf=ad;function Qm(t,e){var r=t.type.contextTypes;if(!r)return ad;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Zo(t){return t=t.childContextTypes,t!=null}function Yx(){Xr(Qo),Xr(io)}function P6(t,e,r){if(io.current!==ad)throw Error(Ee(168));jr(io,e),jr(Qo,r)}function i9(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Ee(108,Oie(t)||"Unknown",i));return pn({},r,n)}function Xx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ad,tf=io.current,jr(io,t),jr(Qo,Qo.current),!0}function L6(t,e,r){var n=t.stateNode;if(!n)throw Error(Ee(169));r?(t=i9(t,e,tf),n.__reactInternalMemoizedMergedChildContext=t,Xr(Qo),Xr(io),jr(io,t)):Xr(Qo),jr(Qo,r)}var Eu=null,h1=!1,_k=!1;function o9(t){Eu===null?Eu=[t]:Eu.push(t)}function Voe(t){h1=!0,o9(t)}function cd(){if(!_k&&Eu!==null){_k=!0;var t=0,e=Er;try{var r=Eu;for(Er=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Eu=null,h1=!1}catch(i){throw Eu!==null&&(Eu=Eu.slice(t+1)),NF(DN,cd),i}finally{Er=e,_k=!1}}return null}var Wm=[],jm=0,Jx=null,Qx=0,oa=[],sa=0,rf=null,Cu=1,Du="";function Kp(t,e){Wm[jm++]=Qx,Wm[jm++]=Jx,Jx=t,Qx=e}function s9(t,e,r){oa[sa++]=Cu,oa[sa++]=Du,oa[sa++]=rf,rf=t;var n=Cu;t=Du;var i=32-Va(n)-1;n&=~(1<<i),r+=1;var o=32-Va(e)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Cu=1<<32-Va(e)+i|r<<i|n,Du=o+t}else Cu=1<<o|r<<i|n,Du=t}function MN(t){t.return!==null&&(Kp(t,1),s9(t,1,0))}function FN(t){for(;t===Jx;)Jx=Wm[--jm],Wm[jm]=null,Qx=Wm[--jm],Wm[jm]=null;for(;t===rf;)rf=oa[--sa],oa[sa]=null,Du=oa[--sa],oa[sa]=null,Cu=oa[--sa],oa[sa]=null}var Cs=null,Es=null,Zr=!1,Ga=null;function a9(t,e){var r=aa(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function M6(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Cs=t,Es=td(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Cs=t,Es=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=rf!==null?{id:Cu,overflow:Du}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=aa(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Cs=t,Es=null,!0):!1;default:return!1}}function tN(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rN(t){if(Zr){var e=Es;if(e){var r=e;if(!M6(t,e)){if(tN(t))throw Error(Ee(418));e=td(r.nextSibling);var n=Cs;e&&M6(t,e)?a9(n,r):(t.flags=t.flags&-4097|2,Zr=!1,Cs=t)}}else{if(tN(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,Zr=!1,Cs=t}}}function F6(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cs=t}function Ex(t){if(t!==Cs)return!1;if(!Zr)return F6(t),Zr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jk(t.type,t.memoizedProps)),e&&(e=Es)){if(tN(t))throw l9(),Error(Ee(418));for(;e;)a9(t,e),e=td(e.nextSibling)}if(F6(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Es=td(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Es=null}}else Es=Cs?td(t.stateNode.nextSibling):null;return!0}function l9(){for(var t=Es;t;)t=td(t.nextSibling)}function Zm(){Es=Cs=null,Zr=!1}function UN(t){Ga===null?Ga=[t]:Ga.push(t)}var Koe=Ru.ReactCurrentBatchConfig;function Ha(t,e){if(t&&t.defaultProps){e=pn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Zx=ud(null),e1=null,zm=null,BN=null;function WN(){BN=zm=e1=null}function jN(t){var e=Zx.current;Xr(Zx),t._currentValue=e}function nN(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Ym(t,e){e1=t,BN=zm=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jo=!0),t.firstContext=null)}function ua(t){var e=t._currentValue;if(BN!==t)if(t={context:t,memoizedValue:e,next:null},zm===null){if(e1===null)throw Error(Ee(308));zm=t,e1.dependencies={lanes:0,firstContext:t}}else zm=zm.next=t;return e}var Jp=null;function zN(t){Jp===null?Jp=[t]:Jp.push(t)}function u9(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,zN(e)):(r.next=i.next,i.next=r),e.interleaved=r,Au(t,n)}function Au(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Vc=!1;function $N(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c9(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Iu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function rd(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,lr&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Au(t,r)}return i=n.interleaved,i===null?(e.next=e,zN(n)):(e.next=i.next,i.next=e),n.interleaved=e,Au(t,r)}function Rx(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,IN(t,r)}}function U6(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function t1(t,e,r,n){var i=t.updateQueue;Vc=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var p=t.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==s&&(a===null?p.firstBaseUpdate=c:a.next=c,p.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,p=c=l=null,a=o;do{var m=a.lane,g=a.eventTime;if((n&m)===m){p!==null&&(p=p.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,_=a;switch(m=e,g=r,_.tag){case 1:if(v=_.payload,typeof v=="function"){f=v.call(g,f,m);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,m=typeof v=="function"?v.call(g,f,m):v,m==null)break e;f=pn({},f,m);break e;case 2:Vc=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(c=p=g,l=f):p=p.next=g,s|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(p===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);of|=s,t.lanes=s,t.memoizedState=f}}function B6(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Ee(191,i));i.call(n)}}}var d9=new uF.Component().refs;function iN(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:pn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var g1={isMounted:function(t){return(t=t._reactInternals)?lf(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Co(),i=id(t),o=Iu(n,i);o.payload=e,r!=null&&(o.callback=r),e=rd(t,o,i),e!==null&&(Ka(e,t,i,n),Rx(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Co(),i=id(t),o=Iu(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=rd(t,o,i),e!==null&&(Ka(e,t,i,n),Rx(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Co(),n=id(t),i=Iu(r,n);i.tag=2,e!=null&&(i.callback=e),e=rd(t,i,n),e!==null&&(Ka(e,t,n,r),Rx(e,t,n))}};function W6(t,e,r,n,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,s):e.prototype&&e.prototype.isPureReactComponent?!lv(r,n)||!lv(i,o):!0}function p9(t,e,r){var n=!1,i=ad,o=e.contextType;return typeof o=="object"&&o!==null?o=ua(o):(i=Zo(e)?tf:io.current,n=e.contextTypes,o=(n=n!=null)?Qm(t,i):ad),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=g1,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function j6(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&g1.enqueueReplaceState(e,e.state,null)}function oN(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=d9,$N(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ua(o):(o=Zo(e)?tf:io.current,i.context=Qm(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(iN(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&g1.enqueueReplaceState(i,i.state,null),t1(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Uy(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ee(309));var n=r.stateNode}if(!n)throw Error(Ee(147,t));var i=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===d9&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(Ee(284));if(!r._owner)throw Error(Ee(290,t))}return t}function Cx(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function z6(t){var e=t._init;return e(t._payload)}function f9(t){function e(T,w){if(t){var E=T.deletions;E===null?(T.deletions=[w],T.flags|=16):E.push(w)}}function r(T,w){if(!t)return null;for(;w!==null;)e(T,w),w=w.sibling;return null}function n(T,w){for(T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function i(T,w){return T=od(T,w),T.index=0,T.sibling=null,T}function o(T,w,E){return T.index=E,t?(E=T.alternate,E!==null?(E=E.index,E<w?(T.flags|=2,w):E):(T.flags|=2,w)):(T.flags|=1048576,w)}function s(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,w,E,I){return w===null||w.tag!==6?(w=Ck(E,T.mode,I),w.return=T,w):(w=i(w,E),w.return=T,w)}function l(T,w,E,I){var N=E.type;return N===Pm?p(T,w,E.props.children,I,E.key):w!==null&&(w.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Gc&&z6(N)===w.type)?(I=i(w,E.props),I.ref=Uy(T,w,E),I.return=T,I):(I=Bx(E.type,E.key,E.props,null,T.mode,I),I.ref=Uy(T,w,E),I.return=T,I)}function c(T,w,E,I){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=Dk(E,T.mode,I),w.return=T,w):(w=i(w,E.children||[]),w.return=T,w)}function p(T,w,E,I,N){return w===null||w.tag!==7?(w=ef(E,T.mode,I,N),w.return=T,w):(w=i(w,E),w.return=T,w)}function f(T,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ck(""+w,T.mode,E),w.return=T,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case dx:return E=Bx(w.type,w.key,w.props,null,T.mode,E),E.ref=Uy(T,null,w),E.return=T,E;case Rm:return w=Dk(w,T.mode,E),w.return=T,w;case Gc:var I=w._init;return f(T,I(w._payload),E)}if($y(w)||Py(w))return w=ef(w,T.mode,E,null),w.return=T,w;Cx(T,w)}return null}function m(T,w,E,I){var N=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return N!==null?null:a(T,w,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case dx:return E.key===N?l(T,w,E,I):null;case Rm:return E.key===N?c(T,w,E,I):null;case Gc:return N=E._init,m(T,w,N(E._payload),I)}if($y(E)||Py(E))return N!==null?null:p(T,w,E,I,null);Cx(T,E)}return null}function g(T,w,E,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return T=T.get(E)||null,a(w,T,""+I,N);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case dx:return T=T.get(I.key===null?E:I.key)||null,l(w,T,I,N);case Rm:return T=T.get(I.key===null?E:I.key)||null,c(w,T,I,N);case Gc:var C=I._init;return g(T,w,E,C(I._payload),N)}if($y(I)||Py(I))return T=T.get(E)||null,p(w,T,I,N,null);Cx(w,I)}return null}function v(T,w,E,I){for(var N=null,C=null,k=w,U=w=0,$=null;k!==null&&U<E.length;U++){k.index>U?($=k,k=null):$=k.sibling;var G=m(T,k,E[U],I);if(G===null){k===null&&(k=$);break}t&&k&&G.alternate===null&&e(T,k),w=o(G,w,U),C===null?N=G:C.sibling=G,C=G,k=$}if(U===E.length)return r(T,k),Zr&&Kp(T,U),N;if(k===null){for(;U<E.length;U++)k=f(T,E[U],I),k!==null&&(w=o(k,w,U),C===null?N=k:C.sibling=k,C=k);return Zr&&Kp(T,U),N}for(k=n(T,k);U<E.length;U++)$=g(k,T,U,E[U],I),$!==null&&(t&&$.alternate!==null&&k.delete($.key===null?U:$.key),w=o($,w,U),C===null?N=$:C.sibling=$,C=$);return t&&k.forEach(function(K){return e(T,K)}),Zr&&Kp(T,U),N}function _(T,w,E,I){var N=Py(E);if(typeof N!="function")throw Error(Ee(150));if(E=N.call(E),E==null)throw Error(Ee(151));for(var C=N=null,k=w,U=w=0,$=null,G=E.next();k!==null&&!G.done;U++,G=E.next()){k.index>U?($=k,k=null):$=k.sibling;var K=m(T,k,G.value,I);if(K===null){k===null&&(k=$);break}t&&k&&K.alternate===null&&e(T,k),w=o(K,w,U),C===null?N=K:C.sibling=K,C=K,k=$}if(G.done)return r(T,k),Zr&&Kp(T,U),N;if(k===null){for(;!G.done;U++,G=E.next())G=f(T,G.value,I),G!==null&&(w=o(G,w,U),C===null?N=G:C.sibling=G,C=G);return Zr&&Kp(T,U),N}for(k=n(T,k);!G.done;U++,G=E.next())G=g(k,T,U,G.value,I),G!==null&&(t&&G.alternate!==null&&k.delete(G.key===null?U:G.key),w=o(G,w,U),C===null?N=G:C.sibling=G,C=G);return t&&k.forEach(function(X){return e(T,X)}),Zr&&Kp(T,U),N}function S(T,w,E,I){if(typeof E=="object"&&E!==null&&E.type===Pm&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case dx:e:{for(var N=E.key,C=w;C!==null;){if(C.key===N){if(N=E.type,N===Pm){if(C.tag===7){r(T,C.sibling),w=i(C,E.props.children),w.return=T,T=w;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Gc&&z6(N)===C.type){r(T,C.sibling),w=i(C,E.props),w.ref=Uy(T,C,E),w.return=T,T=w;break e}r(T,C);break}else e(T,C);C=C.sibling}E.type===Pm?(w=ef(E.props.children,T.mode,I,E.key),w.return=T,T=w):(I=Bx(E.type,E.key,E.props,null,T.mode,I),I.ref=Uy(T,w,E),I.return=T,T=I)}return s(T);case Rm:e:{for(C=E.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){r(T,w.sibling),w=i(w,E.children||[]),w.return=T,T=w;break e}else{r(T,w);break}else e(T,w);w=w.sibling}w=Dk(E,T.mode,I),w.return=T,T=w}return s(T);case Gc:return C=E._init,S(T,w,C(E._payload),I)}if($y(E))return v(T,w,E,I);if(Py(E))return _(T,w,E,I);Cx(T,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(r(T,w.sibling),w=i(w,E),w.return=T,T=w):(r(T,w),w=Ck(E,T.mode,I),w.return=T,T=w),s(T)):r(T,w)}return S}var eh=f9(!0),m9=f9(!1),xv={},Rl=ud(xv),pv=ud(xv),fv=ud(xv);function Qp(t){if(t===xv)throw Error(Ee(174));return t}function HN(t,e){switch(jr(fv,e),jr(pv,t),jr(Rl,xv),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fk(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fk(e,t)}Xr(Rl),jr(Rl,e)}function th(){Xr(Rl),Xr(pv),Xr(fv)}function h9(t){Qp(fv.current);var e=Qp(Rl.current),r=Fk(e,t.type);e!==r&&(jr(pv,t),jr(Rl,r))}function qN(t){pv.current===t&&(Xr(Rl),Xr(pv))}var cn=ud(0);function r1(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bk=[];function GN(){for(var t=0;t<bk.length;t++)bk[t]._workInProgressVersionPrimary=null;bk.length=0}var Px=Ru.ReactCurrentDispatcher,xk=Ru.ReactCurrentBatchConfig,nf=0,dn=null,ii=null,hi=null,n1=!1,Jy=!1,mv=0,Yoe=0;function to(){throw Error(Ee(321))}function VN(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ya(t[r],e[r]))return!1;return!0}function KN(t,e,r,n,i,o){if(nf=o,dn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Px.current=t===null||t.memoizedState===null?Zoe:ese,t=r(n,i),Jy){o=0;do{if(Jy=!1,mv=0,25<=o)throw Error(Ee(301));o+=1,hi=ii=null,e.updateQueue=null,Px.current=tse,t=r(n,i)}while(Jy)}if(Px.current=i1,e=ii!==null&&ii.next!==null,nf=0,hi=ii=dn=null,n1=!1,e)throw Error(Ee(300));return t}function YN(){var t=mv!==0;return mv=0,t}function Nl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?dn.memoizedState=hi=t:hi=hi.next=t,hi}function ca(){if(ii===null){var t=dn.alternate;t=t!==null?t.memoizedState:null}else t=ii.next;var e=hi===null?dn.memoizedState:hi.next;if(e!==null)hi=e,ii=t;else{if(t===null)throw Error(Ee(310));ii=t,t={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},hi===null?dn.memoizedState=hi=t:hi=hi.next=t}return hi}function hv(t,e){return typeof e=="function"?e(t):e}function Tk(t){var e=ca(),r=e.queue;if(r===null)throw Error(Ee(311));r.lastRenderedReducer=t;var n=ii,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var a=s=null,l=null,c=o;do{var p=c.lane;if((nf&p)===p)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var f={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,s=n):l=l.next=f,dn.lanes|=p,of|=p}c=c.next}while(c!==null&&c!==o);l===null?s=n:l.next=a,Ya(n,e.memoizedState)||(Jo=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do o=i.lane,dn.lanes|=o,of|=o,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function wk(t){var e=ca(),r=e.queue;if(r===null)throw Error(Ee(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Ya(o,e.memoizedState)||(Jo=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function g9(){}function y9(t,e){var r=dn,n=ca(),i=e(),o=!Ya(n.memoizedState,i);if(o&&(n.memoizedState=i,Jo=!0),n=n.queue,XN(b9.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||hi!==null&&hi.memoizedState.tag&1){if(r.flags|=2048,gv(9,_9.bind(null,r,n,i,e),void 0,null),gi===null)throw Error(Ee(349));nf&30||v9(r,e,i)}return i}function v9(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=dn.updateQueue,e===null?(e={lastEffect:null,stores:null},dn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function _9(t,e,r,n){e.value=r,e.getSnapshot=n,x9(e)&&T9(t)}function b9(t,e,r){return r(function(){x9(e)&&T9(t)})}function x9(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ya(t,r)}catch{return!0}}function T9(t){var e=Au(t,1);e!==null&&Ka(e,t,1,-1)}function $6(t){var e=Nl();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hv,lastRenderedState:t},e.queue=t,t=t.dispatch=Qoe.bind(null,dn,t),[e.memoizedState,t]}function gv(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=dn.updateQueue,e===null?(e={lastEffect:null,stores:null},dn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function w9(){return ca().memoizedState}function Lx(t,e,r,n){var i=Nl();dn.flags|=t,i.memoizedState=gv(1|e,r,void 0,n===void 0?null:n)}function y1(t,e,r,n){var i=ca();n=n===void 0?null:n;var o=void 0;if(ii!==null){var s=ii.memoizedState;if(o=s.destroy,n!==null&&VN(n,s.deps)){i.memoizedState=gv(e,r,o,n);return}}dn.flags|=t,i.memoizedState=gv(1|e,r,o,n)}function H6(t,e){return Lx(8390656,8,t,e)}function XN(t,e){return y1(2048,8,t,e)}function S9(t,e){return y1(4,2,t,e)}function E9(t,e){return y1(4,4,t,e)}function C9(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function D9(t,e,r){return r=r!=null?r.concat([t]):null,y1(4,4,C9.bind(null,e,t),r)}function JN(){}function I9(t,e){var r=ca();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&VN(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function k9(t,e){var r=ca();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&VN(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function N9(t,e,r){return nf&21?(Ya(r,e)||(r=RF(),dn.lanes|=r,of|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jo=!0),t.memoizedState=r)}function Xoe(t,e){var r=Er;Er=r!==0&&4>r?r:4,t(!0);var n=xk.transition;xk.transition={};try{t(!1),e()}finally{Er=r,xk.transition=n}}function A9(){return ca().memoizedState}function Joe(t,e,r){var n=id(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},O9(t))R9(e,r);else if(r=u9(t,e,r,n),r!==null){var i=Co();Ka(r,t,n,i),P9(r,e,n)}}function Qoe(t,e,r){var n=id(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(O9(t))R9(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,r);if(i.hasEagerState=!0,i.eagerState=a,Ya(a,s)){var l=e.interleaved;l===null?(i.next=i,zN(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=u9(t,e,i,n),r!==null&&(i=Co(),Ka(r,t,n,i),P9(r,e,n))}}function O9(t){var e=t.alternate;return t===dn||e!==null&&e===dn}function R9(t,e){Jy=n1=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function P9(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,IN(t,r)}}var i1={readContext:ua,useCallback:to,useContext:to,useEffect:to,useImperativeHandle:to,useInsertionEffect:to,useLayoutEffect:to,useMemo:to,useReducer:to,useRef:to,useState:to,useDebugValue:to,useDeferredValue:to,useTransition:to,useMutableSource:to,useSyncExternalStore:to,useId:to,unstable_isNewReconciler:!1},Zoe={readContext:ua,useCallback:function(t,e){return Nl().memoizedState=[t,e===void 0?null:e],t},useContext:ua,useEffect:H6,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Lx(4194308,4,C9.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Lx(4194308,4,t,e)},useInsertionEffect:function(t,e){return Lx(4,2,t,e)},useMemo:function(t,e){var r=Nl();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Nl();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Joe.bind(null,dn,t),[n.memoizedState,t]},useRef:function(t){var e=Nl();return t={current:t},e.memoizedState=t},useState:$6,useDebugValue:JN,useDeferredValue:function(t){return Nl().memoizedState=t},useTransition:function(){var t=$6(!1),e=t[0];return t=Xoe.bind(null,t[1]),Nl().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=dn,i=Nl();if(Zr){if(r===void 0)throw Error(Ee(407));r=r()}else{if(r=e(),gi===null)throw Error(Ee(349));nf&30||v9(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,H6(b9.bind(null,n,o,t),[t]),n.flags|=2048,gv(9,_9.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=Nl(),e=gi.identifierPrefix;if(Zr){var r=Du,n=Cu;r=(n&~(1<<32-Va(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=mv++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Yoe++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ese={readContext:ua,useCallback:I9,useContext:ua,useEffect:XN,useImperativeHandle:D9,useInsertionEffect:S9,useLayoutEffect:E9,useMemo:k9,useReducer:Tk,useRef:w9,useState:function(){return Tk(hv)},useDebugValue:JN,useDeferredValue:function(t){var e=ca();return N9(e,ii.memoizedState,t)},useTransition:function(){var t=Tk(hv)[0],e=ca().memoizedState;return[t,e]},useMutableSource:g9,useSyncExternalStore:y9,useId:A9,unstable_isNewReconciler:!1},tse={readContext:ua,useCallback:I9,useContext:ua,useEffect:XN,useImperativeHandle:D9,useInsertionEffect:S9,useLayoutEffect:E9,useMemo:k9,useReducer:wk,useRef:w9,useState:function(){return wk(hv)},useDebugValue:JN,useDeferredValue:function(t){var e=ca();return ii===null?e.memoizedState=t:N9(e,ii.memoizedState,t)},useTransition:function(){var t=wk(hv)[0],e=ca().memoizedState;return[t,e]},useMutableSource:g9,useSyncExternalStore:y9,useId:A9,unstable_isNewReconciler:!1};function rh(t,e){try{var r="",n=e;do r+=Aie(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Sk(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function sN(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var rse=typeof WeakMap=="function"?WeakMap:Map;function L9(t,e,r){r=Iu(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){s1||(s1=!0,gN=n),sN(t,e)},r}function M9(t,e,r){r=Iu(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){sN(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){sN(t,e),typeof n!="function"&&(nd===null?nd=new Set([this]):nd.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function q6(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new rse;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=gse.bind(null,t,e,r),e.then(t,t))}function G6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function V6(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Iu(-1,1),e.tag=2,rd(r,e,1))),r.lanes|=1),t)}var nse=Ru.ReactCurrentOwner,Jo=!1;function Eo(t,e,r,n){e.child=t===null?m9(e,null,r,n):eh(e,t.child,r,n)}function K6(t,e,r,n,i){r=r.render;var o=e.ref;return Ym(e,i),n=KN(t,e,r,n,o,i),r=YN(),t!==null&&!Jo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ou(t,e,i)):(Zr&&r&&MN(e),e.flags|=1,Eo(t,e,n,i),e.child)}function Y6(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!oA(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,F9(t,e,o,n,i)):(t=Bx(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(r=r.compare,r=r!==null?r:lv,r(s,n)&&t.ref===e.ref)return Ou(t,e,i)}return e.flags|=1,t=od(o,n),t.ref=e.ref,t.return=e,e.child=t}function F9(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(lv(o,n)&&t.ref===e.ref)if(Jo=!1,e.pendingProps=n=o,(t.lanes&i)!==0)t.flags&131072&&(Jo=!0);else return e.lanes=t.lanes,Ou(t,e,i)}return aN(t,e,r,n,i)}function U9(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},jr(Hm,Ss),Ss|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,jr(Hm,Ss),Ss|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,jr(Hm,Ss),Ss|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,jr(Hm,Ss),Ss|=n;return Eo(t,e,i,r),e.child}function B9(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function aN(t,e,r,n,i){var o=Zo(r)?tf:io.current;return o=Qm(e,o),Ym(e,i),r=KN(t,e,r,n,o,i),n=YN(),t!==null&&!Jo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ou(t,e,i)):(Zr&&n&&MN(e),e.flags|=1,Eo(t,e,r,i),e.child)}function X6(t,e,r,n,i){if(Zo(r)){var o=!0;Xx(e)}else o=!1;if(Ym(e,i),e.stateNode===null)Mx(t,e),p9(e,r,n),oN(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=r.contextType;typeof c=="object"&&c!==null?c=ua(c):(c=Zo(r)?tf:io.current,c=Qm(e,c));var p=r.getDerivedStateFromProps,f=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||l!==c)&&j6(e,s,n,c),Vc=!1;var m=e.memoizedState;s.state=m,t1(e,n,s,i),l=e.memoizedState,a!==n||m!==l||Qo.current||Vc?(typeof p=="function"&&(iN(e,r,p,n),l=e.memoizedState),(a=Vc||W6(e,r,a,n,m,l,c))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=c,n=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,c9(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ha(e.type,a),s.props=c,f=e.pendingProps,m=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=ua(l):(l=Zo(r)?tf:io.current,l=Qm(e,l));var g=r.getDerivedStateFromProps;(p=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||m!==l)&&j6(e,s,n,l),Vc=!1,m=e.memoizedState,s.state=m,t1(e,n,s,i);var v=e.memoizedState;a!==f||m!==v||Qo.current||Vc?(typeof g=="function"&&(iN(e,r,g,n),v=e.memoizedState),(c=Vc||W6(e,r,c,n,m,v,l)||!1)?(p||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,v,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),s.props=n,s.state=v,s.context=l,n=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return lN(t,e,r,n,o,i)}function lN(t,e,r,n,i,o){B9(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&L6(e,r,!1),Ou(t,e,o);n=e.stateNode,nse.current=e;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=eh(e,t.child,null,o),e.child=eh(e,null,a,o)):Eo(t,e,a,o),e.memoizedState=n.state,i&&L6(e,r,!0),e.child}function W9(t){var e=t.stateNode;e.pendingContext?P6(t,e.pendingContext,e.pendingContext!==e.context):e.context&&P6(t,e.context,!1),HN(t,e.containerInfo)}function J6(t,e,r,n,i){return Zm(),UN(i),e.flags|=256,Eo(t,e,r,n),e.child}var uN={dehydrated:null,treeContext:null,retryLane:0};function cN(t){return{baseLanes:t,cachePool:null,transitions:null}}function j9(t,e,r){var n=e.pendingProps,i=cn.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),jr(cn,i&1),t===null)return rN(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,o?(n=e.mode,o=e.child,s={mode:"hidden",children:s},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=b1(s,n,0,null),t=ef(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=cN(r),e.memoizedState=uN,t):QN(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return ise(t,e,s,n,a,i,r);if(o){o=n.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=od(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=od(a,o):(o=ef(o,s,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,s=t.child.memoizedState,s=s===null?cN(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~r,e.memoizedState=uN,n}return o=t.child,t=o.sibling,n=od(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function QN(t,e){return e=b1({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dx(t,e,r,n){return n!==null&&UN(n),eh(e,t.child,null,r),t=QN(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ise(t,e,r,n,i,o,s){if(r)return e.flags&256?(e.flags&=-257,n=Sk(Error(Ee(422))),Dx(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=b1({mode:"visible",children:n.children},i,0,null),o=ef(o,i,s,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&eh(e,t.child,null,s),e.child.memoizedState=cN(s),e.memoizedState=uN,o);if(!(e.mode&1))return Dx(t,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(Ee(419)),n=Sk(o,n,void 0),Dx(t,e,s,n)}if(a=(s&t.childLanes)!==0,Jo||a){if(n=gi,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Au(t,i),Ka(n,t,i,-1))}return iA(),n=Sk(Error(Ee(421))),Dx(t,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=yse.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Es=td(i.nextSibling),Cs=e,Zr=!0,Ga=null,t!==null&&(oa[sa++]=Cu,oa[sa++]=Du,oa[sa++]=rf,Cu=t.id,Du=t.overflow,rf=e),e=QN(e,n.children),e.flags|=4096,e)}function Q6(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),nN(t.return,e,r)}function Ek(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function z9(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(Eo(t,e,n.children,r),n=cn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Q6(t,r,e);else if(t.tag===19)Q6(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(jr(cn,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&r1(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Ek(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&r1(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Ek(e,!0,r,null,o);break;case"together":Ek(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mx(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ou(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),of|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,r=od(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=od(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function ose(t,e,r){switch(e.tag){case 3:W9(e),Zm();break;case 5:h9(e);break;case 1:Zo(e.type)&&Xx(e);break;case 4:HN(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;jr(Zx,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(jr(cn,cn.current&1),e.flags|=128,null):r&e.child.childLanes?j9(t,e,r):(jr(cn,cn.current&1),t=Ou(t,e,r),t!==null?t.sibling:null);jr(cn,cn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return z9(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),jr(cn,cn.current),n)break;return null;case 22:case 23:return e.lanes=0,U9(t,e,r)}return Ou(t,e,r)}var $9,dN,H9,q9;$9=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};dN=function(){};H9=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Qp(Rl.current);var o=null;switch(r){case"input":i=Rk(t,i),n=Rk(t,n),o=[];break;case"select":i=pn({},i,{value:void 0}),n=pn({},n,{value:void 0}),o=[];break;case"textarea":i=Mk(t,i),n=Mk(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Kx)}Uk(r,n);var s;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(tv.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in n){var l=n[c];if(a=i?.[c],n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(o||(o=[]),o.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(tv.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Yr("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};q9=function(t,e,r,n){r!==n&&(e.flags|=4)};function By(t,e){if(!Zr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ro(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function sse(t,e,r){var n=e.pendingProps;switch(FN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ro(e),null;case 1:return Zo(e.type)&&Yx(),ro(e),null;case 3:return n=e.stateNode,th(),Xr(Qo),Xr(io),GN(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ex(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ga!==null&&(_N(Ga),Ga=null))),dN(t,e),ro(e),null;case 5:qN(e);var i=Qp(fv.current);if(r=e.type,t!==null&&e.stateNode!=null)H9(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Ee(166));return ro(e),null}if(t=Qp(Rl.current),Ex(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Al]=e,n[dv]=o,t=(e.mode&1)!==0,r){case"dialog":Yr("cancel",n),Yr("close",n);break;case"iframe":case"object":case"embed":Yr("load",n);break;case"video":case"audio":for(i=0;i<qy.length;i++)Yr(qy[i],n);break;case"source":Yr("error",n);break;case"img":case"image":case"link":Yr("error",n),Yr("load",n);break;case"details":Yr("toggle",n);break;case"input":s6(n,o),Yr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Yr("invalid",n);break;case"textarea":l6(n,o),Yr("invalid",n)}Uk(r,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&Sx(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Sx(n.textContent,a,t),i=["children",""+a]):tv.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Yr("scroll",n)}switch(r){case"input":px(n),a6(n,o,!0);break;case"textarea":px(n),u6(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Kx)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vF(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[Al]=e,t[dv]=n,$9(t,e,!1,!1),e.stateNode=t;e:{switch(s=Bk(r,n),r){case"dialog":Yr("cancel",t),Yr("close",t),i=n;break;case"iframe":case"object":case"embed":Yr("load",t),i=n;break;case"video":case"audio":for(i=0;i<qy.length;i++)Yr(qy[i],t);i=n;break;case"source":Yr("error",t),i=n;break;case"img":case"image":case"link":Yr("error",t),Yr("load",t),i=n;break;case"details":Yr("toggle",t),i=n;break;case"input":s6(t,n),i=Rk(t,n),Yr("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=pn({},n,{value:void 0}),Yr("invalid",t);break;case"textarea":l6(t,n),i=Mk(t,n),Yr("invalid",t);break;default:i=n}Uk(r,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?xF(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_F(t,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&rv(t,l):typeof l=="number"&&rv(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(tv.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Yr("scroll",t):l!=null&&TN(t,o,l,s))}switch(r){case"input":px(t),a6(t,n,!1);break;case"textarea":px(t),u6(t);break;case"option":n.value!=null&&t.setAttribute("value",""+sd(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?qm(t,!!n.multiple,o,!1):n.defaultValue!=null&&qm(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Kx)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ro(e),null;case 6:if(t&&e.stateNode!=null)q9(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ee(166));if(r=Qp(fv.current),Qp(Rl.current),Ex(e)){if(n=e.stateNode,r=e.memoizedProps,n[Al]=e,(o=n.nodeValue!==r)&&(t=Cs,t!==null))switch(t.tag){case 3:Sx(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Sx(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Al]=e,e.stateNode=n}return ro(e),null;case 13:if(Xr(cn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Zr&&Es!==null&&e.mode&1&&!(e.flags&128))l9(),Zm(),e.flags|=98560,o=!1;else if(o=Ex(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(Ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ee(317));o[Al]=e}else Zm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ro(e),o=!1}else Ga!==null&&(_N(Ga),Ga=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||cn.current&1?oi===0&&(oi=3):iA())),e.updateQueue!==null&&(e.flags|=4),ro(e),null);case 4:return th(),dN(t,e),t===null&&uv(e.stateNode.containerInfo),ro(e),null;case 10:return jN(e.type._context),ro(e),null;case 17:return Zo(e.type)&&Yx(),ro(e),null;case 19:if(Xr(cn),o=e.memoizedState,o===null)return ro(e),null;if(n=(e.flags&128)!==0,s=o.rendering,s===null)if(n)By(o,!1);else{if(oi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=r1(t),s!==null){for(e.flags|=128,By(o,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return jr(cn,cn.current&1|2),e.child}t=t.sibling}o.tail!==null&&Rn()>nh&&(e.flags|=128,n=!0,By(o,!1),e.lanes=4194304)}else{if(!n)if(t=r1(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),By(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Zr)return ro(e),null}else 2*Rn()-o.renderingStartTime>nh&&r!==1073741824&&(e.flags|=128,n=!0,By(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(r=o.last,r!==null?r.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Rn(),e.sibling=null,r=cn.current,jr(cn,n?r&1|2:r&1),e):(ro(e),null);case 22:case 23:return nA(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ss&1073741824&&(ro(e),e.subtreeFlags&6&&(e.flags|=8192)):ro(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function ase(t,e){switch(FN(e),e.tag){case 1:return Zo(e.type)&&Yx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return th(),Xr(Qo),Xr(io),GN(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qN(e),null;case 13:if(Xr(cn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));Zm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xr(cn),null;case 4:return th(),null;case 10:return jN(e.type._context),null;case 22:case 23:return nA(),null;case 24:return null;default:return null}}var Ix=!1,no=!1,lse=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function $m(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){xn(t,e,n)}else r.current=null}function pN(t,e,r){try{r()}catch(n){xn(t,e,n)}}var Z6=!1;function use(t,e){if(Yk=qx,t=YF(),LN(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var s=0,a=-1,l=-1,c=0,p=0,f=t,m=null;t:for(;;){for(var g;f!==r||i!==0&&f.nodeType!==3||(a=s+i),f!==o||n!==0&&f.nodeType!==3||(l=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===r&&++c===i&&(a=s),m===o&&++p===n&&(l=s),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Xk={focusedElem:t,selectionRange:r},qx=!1,Xe=e;Xe!==null;)if(e=Xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Xe=t;else for(;Xe!==null;){e=Xe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,S=v.memoizedState,T=e.stateNode,w=T.getSnapshotBeforeUpdate(e.elementType===e.type?_:Ha(e.type,_),S);T.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(I){xn(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,Xe=t;break}Xe=e.return}return v=Z6,Z6=!1,v}function Qy(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&pN(e,r,o)}i=i.next}while(i!==n)}}function v1(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function fN(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function G9(t){var e=t.alternate;e!==null&&(t.alternate=null,G9(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Al],delete e[dv],delete e[Zk],delete e[qoe],delete e[Goe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function V9(t){return t.tag===5||t.tag===3||t.tag===4}function eF(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||V9(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mN(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Kx));else if(n!==4&&(t=t.child,t!==null))for(mN(t,e,r),t=t.sibling;t!==null;)mN(t,e,r),t=t.sibling}function hN(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(hN(t,e,r),t=t.sibling;t!==null;)hN(t,e,r),t=t.sibling}var Ri=null,qa=!1;function qc(t,e,r){for(r=r.child;r!==null;)K9(t,e,r),r=r.sibling}function K9(t,e,r){if(Ol&&typeof Ol.onCommitFiberUnmount=="function")try{Ol.onCommitFiberUnmount(c1,r)}catch{}switch(r.tag){case 5:no||$m(r,e);case 6:var n=Ri,i=qa;Ri=null,qc(t,e,r),Ri=n,qa=i,Ri!==null&&(qa?(t=Ri,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ri.removeChild(r.stateNode));break;case 18:Ri!==null&&(qa?(t=Ri,r=r.stateNode,t.nodeType===8?vk(t.parentNode,r):t.nodeType===1&&vk(t,r),sv(t)):vk(Ri,r.stateNode));break;case 4:n=Ri,i=qa,Ri=r.stateNode.containerInfo,qa=!0,qc(t,e,r),Ri=n,qa=i;break;case 0:case 11:case 14:case 15:if(!no&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&pN(r,e,s),i=i.next}while(i!==n)}qc(t,e,r);break;case 1:if(!no&&($m(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){xn(r,e,a)}qc(t,e,r);break;case 21:qc(t,e,r);break;case 22:r.mode&1?(no=(n=no)||r.memoizedState!==null,qc(t,e,r),no=n):qc(t,e,r);break;default:qc(t,e,r)}}function tF(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new lse),e.forEach(function(n){var i=vse.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function $a(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Ri=a.stateNode,qa=!1;break e;case 3:Ri=a.stateNode.containerInfo,qa=!0;break e;case 4:Ri=a.stateNode.containerInfo,qa=!0;break e}a=a.return}if(Ri===null)throw Error(Ee(160));K9(o,s,i),Ri=null,qa=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){xn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Y9(e,t),e=e.sibling}function Y9(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($a(e,t),kl(t),n&4){try{Qy(3,t,t.return),v1(3,t)}catch(_){xn(t,t.return,_)}try{Qy(5,t,t.return)}catch(_){xn(t,t.return,_)}}break;case 1:$a(e,t),kl(t),n&512&&r!==null&&$m(r,r.return);break;case 5:if($a(e,t),kl(t),n&512&&r!==null&&$m(r,r.return),t.flags&32){var i=t.stateNode;try{rv(i,"")}catch(_){xn(t,t.return,_)}}if(n&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=r!==null?r.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&gF(i,o),Bk(a,s);var c=Bk(a,o);for(s=0;s<l.length;s+=2){var p=l[s],f=l[s+1];p==="style"?xF(i,f):p==="dangerouslySetInnerHTML"?_F(i,f):p==="children"?rv(i,f):TN(i,p,f,c)}switch(a){case"input":Pk(i,o);break;case"textarea":yF(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?qm(i,!!o.multiple,g,!1):m!==!!o.multiple&&(o.defaultValue!=null?qm(i,!!o.multiple,o.defaultValue,!0):qm(i,!!o.multiple,o.multiple?[]:"",!1))}i[dv]=o}catch(_){xn(t,t.return,_)}}break;case 6:if($a(e,t),kl(t),n&4){if(t.stateNode===null)throw Error(Ee(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(_){xn(t,t.return,_)}}break;case 3:if($a(e,t),kl(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{sv(e.containerInfo)}catch(_){xn(t,t.return,_)}break;case 4:$a(e,t),kl(t);break;case 13:$a(e,t),kl(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(tA=Rn())),n&4&&tF(t);break;case 22:if(p=r!==null&&r.memoizedState!==null,t.mode&1?(no=(c=no)||p,$a(e,t),no=c):$a(e,t),kl(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!p&&t.mode&1)for(Xe=t,p=t.child;p!==null;){for(f=Xe=p;Xe!==null;){switch(m=Xe,g=m.child,m.tag){case 0:case 11:case 14:case 15:Qy(4,m,m.return);break;case 1:$m(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){xn(n,r,_)}}break;case 5:$m(m,m.return);break;case 22:if(m.memoizedState!==null){nF(f);continue}}g!==null?(g.return=m,Xe=g):nF(f)}p=p.sibling}e:for(p=null,f=t;;){if(f.tag===5){if(p===null){p=f;try{i=f.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=bF("display",s))}catch(_){xn(t,t.return,_)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){xn(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:$a(e,t),kl(t),n&4&&tF(t);break;case 21:break;default:$a(e,t),kl(t)}}function kl(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(V9(r)){var n=r;break e}r=r.return}throw Error(Ee(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(rv(i,""),n.flags&=-33);var o=eF(t);hN(t,o,i);break;case 3:case 4:var s=n.stateNode.containerInfo,a=eF(t);mN(t,a,s);break;default:throw Error(Ee(161))}}catch(l){xn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cse(t,e,r){Xe=t,X9(t,e,r)}function X9(t,e,r){for(var n=(t.mode&1)!==0;Xe!==null;){var i=Xe,o=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Ix;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||no;a=Ix;var c=no;if(Ix=s,(no=l)&&!c)for(Xe=i;Xe!==null;)s=Xe,l=s.child,s.tag===22&&s.memoizedState!==null?iF(i):l!==null?(l.return=s,Xe=l):iF(i);for(;o!==null;)Xe=o,X9(o,e,r),o=o.sibling;Xe=i,Ix=a,no=c}rF(t,e,r)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Xe=o):rF(t,e,r)}}function rF(t){for(;Xe!==null;){var e=Xe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:no||v1(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!no)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Ha(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&B6(e,o,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}B6(e,s,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var p=c.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&sv(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}no||e.flags&512&&fN(e)}catch(m){xn(e,e.return,m)}}if(e===t){Xe=null;break}if(r=e.sibling,r!==null){r.return=e.return,Xe=r;break}Xe=e.return}}function nF(t){for(;Xe!==null;){var e=Xe;if(e===t){Xe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Xe=r;break}Xe=e.return}}function iF(t){for(;Xe!==null;){var e=Xe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{v1(4,e)}catch(l){xn(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){xn(e,i,l)}}var o=e.return;try{fN(e)}catch(l){xn(e,o,l)}break;case 5:var s=e.return;try{fN(e)}catch(l){xn(e,s,l)}}}catch(l){xn(e,e.return,l)}if(e===t){Xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Xe=a;break}Xe=e.return}}var dse=Math.ceil,o1=Ru.ReactCurrentDispatcher,ZN=Ru.ReactCurrentOwner,la=Ru.ReactCurrentBatchConfig,lr=0,gi=null,Kn=null,Pi=0,Ss=0,Hm=ud(0),oi=0,yv=null,of=0,_1=0,eA=0,Zy=null,Xo=null,tA=0,nh=1/0,Su=null,s1=!1,gN=null,nd=null,kx=!1,Jc=null,a1=0,ev=0,yN=null,Fx=-1,Ux=0;function Co(){return lr&6?Rn():Fx!==-1?Fx:Fx=Rn()}function id(t){return t.mode&1?lr&2&&Pi!==0?Pi&-Pi:Koe.transition!==null?(Ux===0&&(Ux=RF()),Ux):(t=Er,t!==0||(t=window.event,t=t===void 0?16:WF(t.type)),t):1}function Ka(t,e,r,n){if(50<ev)throw ev=0,yN=null,Error(Ee(185));vv(t,r,n),(!(lr&2)||t!==gi)&&(t===gi&&(!(lr&2)&&(_1|=r),oi===4&&Yc(t,Pi)),es(t,n),r===1&&lr===0&&!(e.mode&1)&&(nh=Rn()+500,h1&&cd()))}function es(t,e){var r=t.callbackNode;Xie(t,e);var n=Hx(t,t===gi?Pi:0);if(n===0)r!==null&&p6(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&p6(r),e===1)t.tag===0?Voe(oF.bind(null,t)):o9(oF.bind(null,t)),$oe(function(){!(lr&6)&&cd()}),r=null;else{switch(PF(n)){case 1:r=DN;break;case 4:r=AF;break;case 16:r=$x;break;case 536870912:r=OF;break;default:r=$x}r=i7(r,J9.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function J9(t,e){if(Fx=-1,Ux=0,lr&6)throw Error(Ee(327));var r=t.callbackNode;if(Xm()&&t.callbackNode!==r)return null;var n=Hx(t,t===gi?Pi:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=l1(t,n);else{e=n;var i=lr;lr|=2;var o=Z9();(gi!==t||Pi!==e)&&(Su=null,nh=Rn()+500,Zp(t,e));do try{mse();break}catch(a){Q9(t,a)}while(!0);WN(),o1.current=o,lr=i,Kn!==null?e=0:(gi=null,Pi=0,e=oi)}if(e!==0){if(e===2&&(i=Hk(t),i!==0&&(n=i,e=vN(t,i))),e===1)throw r=yv,Zp(t,0),Yc(t,n),es(t,Rn()),r;if(e===6)Yc(t,n);else{if(i=t.current.alternate,!(n&30)&&!pse(i)&&(e=l1(t,n),e===2&&(o=Hk(t),o!==0&&(n=o,e=vN(t,o))),e===1))throw r=yv,Zp(t,0),Yc(t,n),es(t,Rn()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Ee(345));case 2:Yp(t,Xo,Su);break;case 3:if(Yc(t,n),(n&130023424)===n&&(e=tA+500-Rn(),10<e)){if(Hx(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Co(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Qk(Yp.bind(null,t,Xo,Su),e);break}Yp(t,Xo,Su);break;case 4:if(Yc(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-Va(n);o=1<<s,s=e[s],s>i&&(i=s),n&=~o}if(n=i,n=Rn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*dse(n/1960))-n,10<n){t.timeoutHandle=Qk(Yp.bind(null,t,Xo,Su),n);break}Yp(t,Xo,Su);break;case 5:Yp(t,Xo,Su);break;default:throw Error(Ee(329))}}}return es(t,Rn()),t.callbackNode===r?J9.bind(null,t):null}function vN(t,e){var r=Zy;return t.current.memoizedState.isDehydrated&&(Zp(t,e).flags|=256),t=l1(t,e),t!==2&&(e=Xo,Xo=r,e!==null&&_N(e)),t}function _N(t){Xo===null?Xo=t:Xo.push.apply(Xo,t)}function pse(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Ya(o(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yc(t,e){for(e&=~eA,e&=~_1,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Va(e),n=1<<r;t[r]=-1,e&=~n}}function oF(t){if(lr&6)throw Error(Ee(327));Xm();var e=Hx(t,0);if(!(e&1))return es(t,Rn()),null;var r=l1(t,e);if(t.tag!==0&&r===2){var n=Hk(t);n!==0&&(e=n,r=vN(t,n))}if(r===1)throw r=yv,Zp(t,0),Yc(t,e),es(t,Rn()),r;if(r===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yp(t,Xo,Su),es(t,Rn()),null}function rA(t,e){var r=lr;lr|=1;try{return t(e)}finally{lr=r,lr===0&&(nh=Rn()+500,h1&&cd())}}function sf(t){Jc!==null&&Jc.tag===0&&!(lr&6)&&Xm();var e=lr;lr|=1;var r=la.transition,n=Er;try{if(la.transition=null,Er=1,t)return t()}finally{Er=n,la.transition=r,lr=e,!(lr&6)&&cd()}}function nA(){Ss=Hm.current,Xr(Hm)}function Zp(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,zoe(r)),Kn!==null)for(r=Kn.return;r!==null;){var n=r;switch(FN(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Yx();break;case 3:th(),Xr(Qo),Xr(io),GN();break;case 5:qN(n);break;case 4:th();break;case 13:Xr(cn);break;case 19:Xr(cn);break;case 10:jN(n.type._context);break;case 22:case 23:nA()}r=r.return}if(gi=t,Kn=t=od(t.current,null),Pi=Ss=e,oi=0,yv=null,eA=_1=of=0,Xo=Zy=null,Jp!==null){for(e=0;e<Jp.length;e++)if(r=Jp[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var s=o.next;o.next=i,n.next=s}r.pending=n}Jp=null}return t}function Q9(t,e){do{var r=Kn;try{if(WN(),Px.current=i1,n1){for(var n=dn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}n1=!1}if(nf=0,hi=ii=dn=null,Jy=!1,mv=0,ZN.current=null,r===null||r.return===null){oi=1,yv=e,Kn=null;break}e:{var o=t,s=r.return,a=r,l=e;if(e=Pi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,p=a,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=G6(s);if(g!==null){g.flags&=-257,V6(g,s,a,o,e),g.mode&1&&q6(o,c,e),e=g,l=c;var v=e.updateQueue;if(v===null){var _=new Set;_.add(l),e.updateQueue=_}else v.add(l);break e}else{if(!(e&1)){q6(o,c,e),iA();break e}l=Error(Ee(426))}}else if(Zr&&a.mode&1){var S=G6(s);if(S!==null){!(S.flags&65536)&&(S.flags|=256),V6(S,s,a,o,e),UN(rh(l,a));break e}}o=l=rh(l,a),oi!==4&&(oi=2),Zy===null?Zy=[o]:Zy.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var T=L9(o,l,e);U6(o,T);break e;case 1:a=l;var w=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(nd===null||!nd.has(E)))){o.flags|=65536,e&=-e,o.lanes|=e;var I=M9(o,a,e);U6(o,I);break e}}o=o.return}while(o!==null)}t7(r)}catch(N){e=N,Kn===r&&r!==null&&(Kn=r=r.return);continue}break}while(!0)}function Z9(){var t=o1.current;return o1.current=i1,t===null?i1:t}function iA(){(oi===0||oi===3||oi===2)&&(oi=4),gi===null||!(of&268435455)&&!(_1&268435455)||Yc(gi,Pi)}function l1(t,e){var r=lr;lr|=2;var n=Z9();(gi!==t||Pi!==e)&&(Su=null,Zp(t,e));do try{fse();break}catch(i){Q9(t,i)}while(!0);if(WN(),lr=r,o1.current=n,Kn!==null)throw Error(Ee(261));return gi=null,Pi=0,oi}function fse(){for(;Kn!==null;)e7(Kn)}function mse(){for(;Kn!==null&&!jie();)e7(Kn)}function e7(t){var e=n7(t.alternate,t,Ss);t.memoizedProps=t.pendingProps,e===null?t7(t):Kn=e,ZN.current=null}function t7(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=ase(r,e),r!==null){r.flags&=32767,Kn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{oi=6,Kn=null;return}}else if(r=sse(r,e,Ss),r!==null){Kn=r;return}if(e=e.sibling,e!==null){Kn=e;return}Kn=e=t}while(e!==null);oi===0&&(oi=5)}function Yp(t,e,r){var n=Er,i=la.transition;try{la.transition=null,Er=1,hse(t,e,r,n)}finally{la.transition=i,Er=n}return null}function hse(t,e,r,n){do Xm();while(Jc!==null);if(lr&6)throw Error(Ee(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(Jie(t,o),t===gi&&(Kn=gi=null,Pi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||kx||(kx=!0,i7($x,function(){return Xm(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=la.transition,la.transition=null;var s=Er;Er=1;var a=lr;lr|=4,ZN.current=null,use(t,r),Y9(r,t),Foe(Xk),qx=!!Yk,Xk=Yk=null,t.current=r,cse(r,t,i),zie(),lr=a,Er=s,la.transition=o}else t.current=r;if(kx&&(kx=!1,Jc=t,a1=i),o=t.pendingLanes,o===0&&(nd=null),qie(r.stateNode,n),es(t,Rn()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(s1)throw s1=!1,t=gN,gN=null,t;return a1&1&&t.tag!==0&&Xm(),o=t.pendingLanes,o&1?t===yN?ev++:(ev=0,yN=t):ev=0,cd(),null}function Xm(){if(Jc!==null){var t=PF(a1),e=la.transition,r=Er;try{if(la.transition=null,Er=16>t?16:t,Jc===null)var n=!1;else{if(t=Jc,Jc=null,a1=0,lr&6)throw Error(Ee(331));var i=lr;for(lr|=4,Xe=t.current;Xe!==null;){var o=Xe,s=o.child;if(Xe.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Xe=c;Xe!==null;){var p=Xe;switch(p.tag){case 0:case 11:case 15:Qy(8,p,o)}var f=p.child;if(f!==null)f.return=p,Xe=f;else for(;Xe!==null;){p=Xe;var m=p.sibling,g=p.return;if(G9(p),p===c){Xe=null;break}if(m!==null){m.return=g,Xe=m;break}Xe=g}}}var v=o.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var S=_.sibling;_.sibling=null,_=S}while(_!==null)}}Xe=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Xe=s;else e:for(;Xe!==null;){if(o=Xe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Qy(9,o,o.return)}var T=o.sibling;if(T!==null){T.return=o.return,Xe=T;break e}Xe=o.return}}var w=t.current;for(Xe=w;Xe!==null;){s=Xe;var E=s.child;if(s.subtreeFlags&2064&&E!==null)E.return=s,Xe=E;else e:for(s=w;Xe!==null;){if(a=Xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:v1(9,a)}}catch(N){xn(a,a.return,N)}if(a===s){Xe=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,Xe=I;break e}Xe=a.return}}if(lr=i,cd(),Ol&&typeof Ol.onPostCommitFiberRoot=="function")try{Ol.onPostCommitFiberRoot(c1,t)}catch{}n=!0}return n}finally{Er=r,la.transition=e}}return!1}function sF(t,e,r){e=rh(r,e),e=L9(t,e,1),t=rd(t,e,1),e=Co(),t!==null&&(vv(t,1,e),es(t,e))}function xn(t,e,r){if(t.tag===3)sF(t,t,r);else for(;e!==null;){if(e.tag===3){sF(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(nd===null||!nd.has(n))){t=rh(r,t),t=M9(e,t,1),e=rd(e,t,1),t=Co(),e!==null&&(vv(e,1,t),es(e,t));break}}e=e.return}}function gse(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Co(),t.pingedLanes|=t.suspendedLanes&r,gi===t&&(Pi&r)===r&&(oi===4||oi===3&&(Pi&130023424)===Pi&&500>Rn()-tA?Zp(t,0):eA|=r),es(t,e)}function r7(t,e){e===0&&(t.mode&1?(e=hx,hx<<=1,!(hx&130023424)&&(hx=4194304)):e=1);var r=Co();t=Au(t,e),t!==null&&(vv(t,e,r),es(t,r))}function yse(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),r7(t,r)}function vse(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Ee(314))}n!==null&&n.delete(e),r7(t,r)}var n7;n7=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qo.current)Jo=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Jo=!1,ose(t,e,r);Jo=!!(t.flags&131072)}else Jo=!1,Zr&&e.flags&1048576&&s9(e,Qx,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Mx(t,e),t=e.pendingProps;var i=Qm(e,io.current);Ym(e,r),i=KN(null,e,n,t,i,r);var o=YN();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zo(n)?(o=!0,Xx(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$N(e),i.updater=g1,e.stateNode=i,i._reactInternals=e,oN(e,n,t,r),e=lN(null,e,n,!0,o,r)):(e.tag=0,Zr&&o&&MN(e),Eo(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Mx(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=bse(n),t=Ha(n,t),i){case 0:e=aN(null,e,n,t,r);break e;case 1:e=X6(null,e,n,t,r);break e;case 11:e=K6(null,e,n,t,r);break e;case 14:e=Y6(null,e,n,Ha(n.type,t),r);break e}throw Error(Ee(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ha(n,i),aN(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ha(n,i),X6(t,e,n,i,r);case 3:e:{if(W9(e),t===null)throw Error(Ee(387));n=e.pendingProps,o=e.memoizedState,i=o.element,c9(t,e),t1(e,n,null,r);var s=e.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=rh(Error(Ee(423)),e),e=J6(t,e,n,r,i);break e}else if(n!==i){i=rh(Error(Ee(424)),e),e=J6(t,e,n,r,i);break e}else for(Es=td(e.stateNode.containerInfo.firstChild),Cs=e,Zr=!0,Ga=null,r=m9(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Zm(),n===i){e=Ou(t,e,r);break e}Eo(t,e,n,r)}e=e.child}return e;case 5:return h9(e),t===null&&rN(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Jk(n,i)?s=null:o!==null&&Jk(n,o)&&(e.flags|=32),B9(t,e),Eo(t,e,s,r),e.child;case 6:return t===null&&rN(e),null;case 13:return j9(t,e,r);case 4:return HN(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=eh(e,null,n,r):Eo(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ha(n,i),K6(t,e,n,i,r);case 7:return Eo(t,e,e.pendingProps,r),e.child;case 8:return Eo(t,e,e.pendingProps.children,r),e.child;case 12:return Eo(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,jr(Zx,n._currentValue),n._currentValue=s,o!==null)if(Ya(o.value,s)){if(o.children===i.children&&!Qo.current){e=Ou(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=Iu(-1,r&-r),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var p=c.pending;p===null?l.next=l:(l.next=p.next,p.next=l),c.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),nN(o.return,r,e),a.lanes|=r;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Ee(341));s.lanes|=r,a=s.alternate,a!==null&&(a.lanes|=r),nN(s,r,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Eo(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Ym(e,r),i=ua(i),n=n(i),e.flags|=1,Eo(t,e,n,r),e.child;case 14:return n=e.type,i=Ha(n,e.pendingProps),i=Ha(n.type,i),Y6(t,e,n,i,r);case 15:return F9(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ha(n,i),Mx(t,e),e.tag=1,Zo(n)?(t=!0,Xx(e)):t=!1,Ym(e,r),p9(e,n,i),oN(e,n,i,r),lN(null,e,n,!0,t,r);case 19:return z9(t,e,r);case 22:return U9(t,e,r)}throw Error(Ee(156,e.tag))};function i7(t,e){return NF(t,e)}function _se(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function aa(t,e,r,n){return new _se(t,e,r,n)}function oA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bse(t){if(typeof t=="function")return oA(t)?1:0;if(t!=null){if(t=t.$$typeof,t===SN)return 11;if(t===EN)return 14}return 2}function od(t,e){var r=t.alternate;return r===null?(r=aa(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Bx(t,e,r,n,i,o){var s=2;if(n=t,typeof t=="function")oA(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Pm:return ef(r.children,i,o,e);case wN:s=8,i|=8;break;case kk:return t=aa(12,r,e,i|2),t.elementType=kk,t.lanes=o,t;case Nk:return t=aa(13,r,e,i),t.elementType=Nk,t.lanes=o,t;case Ak:return t=aa(19,r,e,i),t.elementType=Ak,t.lanes=o,t;case fF:return b1(r,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dF:s=10;break e;case pF:s=9;break e;case SN:s=11;break e;case EN:s=14;break e;case Gc:s=16,n=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=aa(s,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function ef(t,e,r,n){return t=aa(7,t,n,e),t.lanes=r,t}function b1(t,e,r,n){return t=aa(22,t,n,e),t.elementType=fF,t.lanes=r,t.stateNode={isHidden:!1},t}function Ck(t,e,r){return t=aa(6,t,null,e),t.lanes=r,t}function Dk(t,e,r){return e=aa(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xse(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ck(0),this.expirationTimes=ck(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ck(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sA(t,e,r,n,i,o,s,a,l){return t=new xse(t,e,r,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=aa(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$N(o),t}function Tse(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rm,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function o7(t){if(!t)return ad;t=t._reactInternals;e:{if(lf(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var r=t.type;if(Zo(r))return i9(t,r,e)}return e}function s7(t,e,r,n,i,o,s,a,l){return t=sA(r,n,!0,t,i,o,s,a,l),t.context=o7(null),r=t.current,n=Co(),i=id(r),o=Iu(n,i),o.callback=e??null,rd(r,o,i),t.current.lanes=i,vv(t,i,n),es(t,n),t}function x1(t,e,r,n){var i=e.current,o=Co(),s=id(i);return r=o7(r),e.context===null?e.context=r:e.pendingContext=r,e=Iu(o,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=rd(i,e,s),t!==null&&(Ka(t,i,s,o),Rx(t,i,s)),s}function u1(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function aF(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function aA(t,e){aF(t,e),(t=t.alternate)&&aF(t,e)}function wse(){return null}var a7=typeof reportError=="function"?reportError:function(t){console.error(t)};function lA(t){this._internalRoot=t}T1.prototype.render=lA.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));x1(t,e,null,null)};T1.prototype.unmount=lA.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;sf(function(){x1(null,t,null,null)}),e[Nu]=null}};function T1(t){this._internalRoot=t}T1.prototype.unstable_scheduleHydration=function(t){if(t){var e=FF();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Kc.length&&e!==0&&e<Kc[r].priority;r++);Kc.splice(r,0,t),r===0&&BF(t)}};function uA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function w1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lF(){}function Sse(t,e,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var c=u1(s);o.call(c)}}var s=s7(e,n,t,0,null,!1,!1,"",lF);return t._reactRootContainer=s,t[Nu]=s.current,uv(t.nodeType===8?t.parentNode:t),sf(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=u1(l);a.call(c)}}var l=sA(t,0,!1,null,null,!1,!1,"",lF);return t._reactRootContainer=l,t[Nu]=l.current,uv(t.nodeType===8?t.parentNode:t),sf(function(){x1(e,l,r,n)}),l}function S1(t,e,r,n,i){var o=r._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=u1(s);a.call(l)}}x1(e,s,t,i)}else s=Sse(r,e,t,i,n);return u1(s)}LF=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Hy(e.pendingLanes);r!==0&&(IN(e,r|1),es(e,Rn()),!(lr&6)&&(nh=Rn()+500,cd()))}break;case 13:sf(function(){var n=Au(t,1);if(n!==null){var i=Co();Ka(n,t,1,i)}}),aA(t,1)}};kN=function(t){if(t.tag===13){var e=Au(t,134217728);if(e!==null){var r=Co();Ka(e,t,134217728,r)}aA(t,134217728)}};MF=function(t){if(t.tag===13){var e=id(t),r=Au(t,e);if(r!==null){var n=Co();Ka(r,t,e,n)}aA(t,e)}};FF=function(){return Er};UF=function(t,e){var r=Er;try{return Er=t,e()}finally{Er=r}};jk=function(t,e,r){switch(e){case"input":if(Pk(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=m1(n);if(!i)throw Error(Ee(90));hF(n),Pk(n,i)}}}break;case"textarea":yF(t,r);break;case"select":e=r.value,e!=null&&qm(t,!!r.multiple,e,!1)}};SF=rA;EF=sf;var Ese={usingClientEntryPoint:!1,Events:[bv,Um,m1,TF,wF,rA]},Wy={findFiberByHostInstance:Xp,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Cse={bundleType:Wy.bundleType,version:Wy.version,rendererPackageName:Wy.rendererPackageName,rendererConfig:Wy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ru.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=IF(t),t===null?null:t.stateNode},findFiberByHostInstance:Wy.findFiberByHostInstance||wse,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(jy=__REACT_DEVTOOLS_GLOBAL_HOOK__,!jy.isDisabled&&jy.supportsFiber))try{c1=jy.inject(Cse),Ol=jy}catch{}var jy;ks.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ese;ks.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uA(e))throw Error(Ee(200));return Tse(t,e,null,r)};ks.createRoot=function(t,e){if(!uA(t))throw Error(Ee(299));var r=!1,n="",i=a7;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=sA(t,1,!1,null,null,r,!1,n,i),t[Nu]=e.current,uv(t.nodeType===8?t.parentNode:t),new lA(e)};ks.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=IF(e),t=t===null?null:t.stateNode,t};ks.flushSync=function(t){return sf(t)};ks.hydrate=function(t,e,r){if(!w1(e))throw Error(Ee(200));return S1(null,t,e,!0,r)};ks.hydrateRoot=function(t,e,r){if(!uA(t))throw Error(Ee(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",s=a7;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=s7(e,null,t,1,r??null,i,!1,o,s),t[Nu]=e.current,uv(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new T1(e)};ks.render=function(t,e,r){if(!w1(e))throw Error(Ee(200));return S1(null,t,e,!1,r)};ks.unmountComponentAtNode=function(t){if(!w1(t))throw Error(Ee(40));return t._reactRootContainer?(sf(function(){S1(null,null,t,!1,function(){t._reactRootContainer=null,t[Nu]=null})}),!0):!1};ks.unstable_batchedUpdates=rA;ks.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!w1(r))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return S1(t,e,r,!1,n)};ks.version="18.2.0-next-9e3b772b8-20220608"});var Pl=Y((vPe,c7)=>{"use strict";function u7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u7)}catch(t){console.error(t)}}u7(),c7.exports=l7()});var p7=Y(cA=>{"use strict";var d7=Pl();cA.createRoot=d7.createRoot,cA.hydrateRoot=d7.hydrateRoot;var _Pe});var y7=Y(g7=>{"use strict";var sh=ve();function Lae(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mae=typeof Object.is=="function"?Object.is:Lae,Fae=sh.useState,Uae=sh.useEffect,Bae=sh.useLayoutEffect,Wae=sh.useDebugValue;function jae(t,e){var r=e(),n=Fae({inst:{value:r,getSnapshot:e}}),i=n[0].inst,o=n[1];return Bae(function(){i.value=r,i.getSnapshot=e,vA(i)&&o({inst:i})},[t,r,e]),Uae(function(){return vA(i)&&o({inst:i}),t(function(){vA(i)&&o({inst:i})})},[t]),Wae(r),r}function vA(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Mae(t,r)}catch{return!0}}function zae(t,e){return e()}var $ae=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?zae:jae;g7.useSyncExternalStore=sh.useSyncExternalStore!==void 0?sh.useSyncExternalStore:$ae});var _7=Y((JPe,v7)=>{"use strict";v7.exports=y7()});var k7=Y(C1=>{"use strict";var Jae=ve(),Qae=Symbol.for("react.element"),Zae=Symbol.for("react.fragment"),ele=Object.prototype.hasOwnProperty,tle=Jae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rle={key:!0,ref:!0,__self:!0,__source:!0};function I7(t,e,r){var n,i={},o=null,s=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)ele.call(e,n)&&!rle.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Qae,type:t,key:o,ref:s,props:i,_owner:tle.current}}C1.Fragment=Zae;C1.jsx=I7;C1.jsxs=I7});var Cr=Y((W3e,N7)=>{"use strict";N7.exports=k7()});var TU=Y((Y5e,xU)=>{"use strict";xU.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var s=o[i];if(!t(e[s],r[s]))return!1}return!0}return e!==e&&r!==r}});var _h={};wu(_h,{Dir:()=>_de,Dirent:()=>pde,F_OK:()=>Tde,FileReadStream:()=>gde,FileWriteStream:()=>yde,R_OK:()=>wde,ReadStream:()=>mde,Stats:()=>fde,W_OK:()=>Sde,WriteStream:()=>hde,X_OK:()=>Ede,_toUnixTimestamp:()=>vde,access:()=>Gue,accessSync:()=>Vue,appendFile:()=>Hue,appendFileSync:()=>que,chmod:()=>Xue,chmodSync:()=>Jue,chown:()=>Kue,chownSync:()=>Yue,close:()=>Que,closeSync:()=>Zue,constants:()=>Cde,copyFile:()=>ece,copyFileSync:()=>pR,cp:()=>tce,cpSync:()=>rce,createReadStream:()=>nce,createWriteStream:()=>ice,default:()=>yt,exists:()=>oce,existsSync:()=>br,fchmod:()=>lce,fchmodSync:()=>uce,fchown:()=>sce,fchownSync:()=>ace,fdatasync:()=>cce,fdatasyncSync:()=>dce,fstat:()=>pce,fstatSync:()=>fce,fsync:()=>mce,fsyncSync:()=>hce,ftruncate:()=>gce,ftruncateSync:()=>yce,futimes:()=>vce,futimesSync:()=>_ce,lchmod:()=>Tce,lchmodSync:()=>wce,lchown:()=>bce,lchownSync:()=>xce,link:()=>Sce,linkSync:()=>Ece,lstat:()=>Cce,lstatSync:()=>jv,lutimes:()=>Dce,lutimesSync:()=>Ice,mkdir:()=>kce,mkdirSync:()=>lo,mkdtemp:()=>Nce,mkdtempSync:()=>Ace,open:()=>Oce,openAsBlob:()=>Pce,openSync:()=>Rce,opendir:()=>bde,opendirSync:()=>xde,promises:()=>Dde,read:()=>Mce,readFile:()=>Wce,readFileSync:()=>Pn,readSync:()=>Fce,readdir:()=>Lce,readdirSync:()=>ff,readlink:()=>jce,readlinkSync:()=>zce,readv:()=>Uce,readvSync:()=>Bce,realpath:()=>$ce,realpathSync:()=>Hce,rename:()=>qce,renameSync:()=>Gce,rm:()=>Vce,rmSync:()=>zv,rmdir:()=>Kce,rmdirSync:()=>fR,stat:()=>Yce,statSync:()=>mf,statfs:()=>Xce,statfsSync:()=>Jce,symlink:()=>Qce,symlinkSync:()=>Zce,truncate:()=>ede,truncateSync:()=>tde,unlink:()=>nde,unlinkSync:()=>mR,unwatchFile:()=>rde,utimes:()=>ide,utimesSync:()=>hR,watch:()=>ode,watchFile:()=>sde,write:()=>lde,writeFile:()=>ade,writeFileSync:()=>en,writeSync:()=>ude,writev:()=>cde,writevSync:()=>dde});var be,yt,Hue,que,Gue,Vue,Kue,Yue,Xue,Jue,Que,Zue,ece,pR,tce,rce,nce,ice,oce,br,sce,ace,lce,uce,cce,dce,pce,fce,mce,hce,gce,yce,vce,_ce,bce,xce,Tce,wce,Sce,Ece,Cce,jv,Dce,Ice,kce,lo,Nce,Ace,Oce,Rce,Pce,Lce,ff,Mce,Fce,Uce,Bce,Wce,Pn,jce,zce,$ce,Hce,qce,Gce,Vce,zv,Kce,fR,Yce,Xce,mf,Jce,Qce,Zce,ede,tde,rde,nde,mR,ide,hR,ode,sde,ade,en,lde,ude,cde,dde,pde,fde,mde,hde,gde,yde,vde,_de,bde,xde,Tde,wde,Sde,Ede,Cde,Dde,xr=ky(()=>{"use strict";be=window.require("fs"),yt=be,Hue=be.appendFile,que=be.appendFileSync,Gue=be.access,Vue=be.accessSync,Kue=be.chown,Yue=be.chownSync,Xue=be.chmod,Jue=be.chmodSync,Que=be.close,Zue=be.closeSync,ece=be.copyFile,pR=be.copyFileSync,tce=be.cp,rce=be.cpSync,nce=be.createReadStream,ice=be.createWriteStream,oce=be.exists,br=be.existsSync,sce=be.fchown,ace=be.fchownSync,lce=be.fchmod,uce=be.fchmodSync,cce=be.fdatasync,dce=be.fdatasyncSync,pce=be.fstat,fce=be.fstatSync,mce=be.fsync,hce=be.fsyncSync,gce=be.ftruncate,yce=be.ftruncateSync,vce=be.futimes,_ce=be.futimesSync,bce=be.lchown,xce=be.lchownSync,Tce=be.lchmod,wce=be.lchmodSync,Sce=be.link,Ece=be.linkSync,Cce=be.lstat,jv=be.lstatSync,Dce=be.lutimes,Ice=be.lutimesSync,kce=be.mkdir,lo=be.mkdirSync,Nce=be.mkdtemp,Ace=be.mkdtempSync,Oce=be.open,Rce=be.openSync,Pce=be.openAsBlob,Lce=be.readdir,ff=be.readdirSync,Mce=be.read,Fce=be.readSync,Uce=be.readv,Bce=be.readvSync,Wce=be.readFile,Pn=be.readFileSync,jce=be.readlink,zce=be.readlinkSync,$ce=be.realpath,Hce=be.realpathSync,qce=be.rename,Gce=be.renameSync,Vce=be.rm,zv=be.rmSync,Kce=be.rmdir,fR=be.rmdirSync,Yce=be.stat,Xce=be.statfs,mf=be.statSync,Jce=be.statfsSync,Qce=be.symlink,Zce=be.symlinkSync,ede=be.truncate,tde=be.truncateSync,rde=be.unwatchFile,nde=be.unlink,mR=be.unlinkSync,ide=be.utimes,hR=be.utimesSync,ode=be.watch,sde=be.watchFile,ade=be.writeFile,en=be.writeFileSync,lde=be.write,ude=be.writeSync,cde=be.writev,dde=be.writevSync,pde=be.Dirent,fde=be.Stats,mde=be.ReadStream,hde=be.WriteStream,gde=be.FileReadStream,yde=be.FileWriteStream,vde=be._toUnixTimestamp,_de=be.Dir,bde=be.opendir,xde=be.opendirSync,Tde=be.F_OK,wde=be.R_OK,Sde=be.W_OK,Ede=be.X_OK,Cde=be.constants,Dde=be.promises});var bh={};wu(bh,{_makeLong:()=>Bde,basename:()=>Hv,default:()=>Ln,delimiter:()=>Mde,dirname:()=>$v,extname:()=>Ode,format:()=>Rde,isAbsolute:()=>kde,join:()=>Nde,normalize:()=>Ide,parse:()=>Pde,posix:()=>Ude,relative:()=>vR,resolve:()=>xT,sep:()=>Lde,toNamespacedPath:()=>Ade,win32:()=>Fde});var Fi,Ln,xT,Ide,kde,Nde,vR,Ade,$v,Hv,Ode,Rde,Pde,Lde,Mde,Fde,Ude,Bde,Oo=ky(()=>{"use strict";Fi=window.require("path"),Ln=Fi,xT=Fi.resolve,Ide=Fi.normalize,kde=Fi.isAbsolute,Nde=Fi.join,vR=Fi.relative,Ade=Fi.toNamespacedPath,$v=Fi.dirname,Hv=Fi.basename,Ode=Fi.extname,Rde=Fi.format,Pde=Fi.parse,Lde=Fi.sep,Mde=Fi.delimiter,Fde=Fi.win32,Ude=Fi.posix,Bde=Fi._makeLong});var Ht=Y(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui._registerNode=Ui.Konva=Ui.glob=void 0;var Wde=Math.PI/180;function jde(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}Ui.glob=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{};Ui.Konva={_global:Ui.glob,version:"9.2.3",isBrowser:jde(),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle(t){return Ui.Konva.angleDeg?t*Wde:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Ui.Konva.DD.isDragging},isDragReady(){return!!Ui.Konva.DD.node},releaseCanvasOnDestroy:!0,document:Ui.glob.document,_injectGlobal(t){Ui.glob.Konva=t}};var zde=t=>{Ui.Konva[t.prototype.getClassName()]=t};Ui._registerNode=zde;Ui.Konva._injectGlobal(Ui.Konva)});var hn=Y(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.Util=Hr.Transform=void 0;var _R=Ht(),TR=class t{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new t(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var r=this.m;return{x:r[0]*e.x+r[2]*e.y+r[4],y:r[1]*e.x+r[3]*e.y+r[5]}}translate(e,r){return this.m[4]+=this.m[0]*e+this.m[2]*r,this.m[5]+=this.m[1]*e+this.m[3]*r,this}scale(e,r){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=r,this.m[3]*=r,this}rotate(e){var r=Math.cos(e),n=Math.sin(e),i=this.m[0]*r+this.m[2]*n,o=this.m[1]*r+this.m[3]*n,s=this.m[0]*-n+this.m[2]*r,a=this.m[1]*-n+this.m[3]*r;return this.m[0]=i,this.m[1]=o,this.m[2]=s,this.m[3]=a,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,r){var n=this.m[0]+this.m[2]*r,i=this.m[1]+this.m[3]*r,o=this.m[2]+this.m[0]*e,s=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=i,this.m[2]=o,this.m[3]=s,this}multiply(e){var r=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],i=this.m[0]*e.m[2]+this.m[2]*e.m[3],o=this.m[1]*e.m[2]+this.m[3]*e.m[3],s=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],a=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=r,this.m[1]=n,this.m[2]=i,this.m[3]=o,this.m[4]=s,this.m[5]=a,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),r=this.m[3]*e,n=-this.m[1]*e,i=-this.m[2]*e,o=this.m[0]*e,s=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=r,this.m[1]=n,this.m[2]=i,this.m[3]=o,this.m[4]=s,this.m[5]=a,this}getMatrix(){return this.m}decompose(){var e=this.m[0],r=this.m[1],n=this.m[2],i=this.m[3],o=this.m[4],s=this.m[5],a=e*i-r*n;let l={x:o,y:s,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||r!=0){var c=Math.sqrt(e*e+r*r);l.rotation=r>0?Math.acos(e/c):-Math.acos(e/c),l.scaleX=c,l.scaleY=a/c,l.skewX=(e*n+r*i)/a,l.skewY=0}else if(n!=0||i!=0){var p=Math.sqrt(n*n+i*i);l.rotation=Math.PI/2-(i>0?Math.acos(-n/p):-Math.acos(n/p)),l.scaleX=a/p,l.scaleY=p,l.skewX=0,l.skewY=(e*n+r*i)/a}return l.rotation=Hr.Util._getRotation(l.rotation),l}};Hr.Transform=TR;var $de="[object Array]",Hde="[object Number]",qde="[object String]",Gde="[object Boolean]",Vde=Math.PI/180,Kde=180/Math.PI,bR="#",Yde="",Xde="0",Jde="Konva warning: ",gW="Konva error: ",Qde="rgb(",xR={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Zde=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,TT=[],epe=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(t){setTimeout(t,60)};Hr.Util={_isElement(t){return!!(t&&t.nodeType==1)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===$de},_isNumber(t){return Object.prototype.toString.call(t)===Hde&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===qde},_isBoolean(t){return Object.prototype.toString.call(t)===Gde},isObject(t){return t instanceof Object},isValidSelector(t){if(typeof t!="string")return!1;var e=t[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(t){return t===0||t>0?1:-1},requestAnimFrame(t){TT.push(t),TT.length===1&&epe(function(){let e=TT;TT=[],e.forEach(function(r){r()})})},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch{}return t},createImageElement(){return document.createElement("img")},_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var r=Hr.Util.createImageElement();r.onload=function(){e(r)},r.src=t},_rgbToHex(t,e,r){return((1<<24)+(t<<16)+(e<<8)+r).toString(16).slice(1)},_hexToRgb(t){t=t.replace(bR,Yde);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var t=(Math.random()*16777215<<0).toString(16);t.length<6;)t=Xde+t;return bR+t},getRGB(t){var e;return t in xR?(e=xR[t],{r:e[0],g:e[1],b:e[2]}):t[0]===bR?this._hexToRgb(t.substring(1)):t.substr(0,4)===Qde?(e=Zde.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",Hr.Util._namedColorToRBA(t)||Hr.Util._hex3ColorToRGBA(t)||Hr.Util._hex4ColorToRGBA(t)||Hr.Util._hex6ColorToRGBA(t)||Hr.Util._hex8ColorToRGBA(t)||Hr.Util._rgbColorToRGBA(t)||Hr.Util._rgbaColorToRGBA(t)||Hr.Util._hslColorToRGBA(t)},_namedColorToRBA(t){var e=xR[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(t.indexOf("rgb(")===0){t=t.match(/rgb\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(t.indexOf("rgba(")===0){t=t.match(/rgba\(([^)]+)\)/)[1];var e=t.split(/ *, */).map((r,n)=>r.slice(-1)==="%"?n===3?parseInt(r)/100:parseInt(r)/100*255:Number(r));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(t){if(t[0]==="#"&&t.length===9)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA(t){if(t[0]==="#"&&t.length===7)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA(t){if(t[0]==="#"&&t.length===5)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA(t){if(t[0]==="#"&&t.length===4)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){let[e,...r]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),n=Number(r[0])/360,i=Number(r[1])/100,o=Number(r[2])/100,s,a,l;if(i===0)return l=o*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};o<.5?s=o*(1+i):s=o+i-o*i;let c=2*o-s,p=[0,0,0];for(let f=0;f<3;f++)a=n+1/3*-(f-1),a<0&&a++,a>1&&a--,6*a<1?l=c+(s-c)*6*a:2*a<1?l=s:3*a<2?l=c+(s-c)*(2/3-a)*6:l=c,p[f]=l*255;return{r:Math.round(p[0]),g:Math.round(p[1]),b:Math.round(p[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){var e={};for(var r in t)this._isPlainObject(t[r])?e[r]=this.cloneObject(t[r]):this._isArray(t[r])?e[r]=this.cloneArray(t[r]):e[r]=t[r];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*Vde},radToDeg(t){return t*Kde},_degToRad(t){return Hr.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),Hr.Util.degToRad(t)},_radToDeg(t){return Hr.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),Hr.Util.radToDeg(t)},_getRotation(t){return _R.Konva.angleDeg?Hr.Util.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(gW+t)},error(t){console.error(gW+t)},warn(t){_R.Konva.showWarnings&&console.warn(Jde+t)},each(t,e){for(var r in t)e(r,t[r])},_inRange(t,e,r){return e<=t&&t<r},_getProjectionToSegment(t,e,r,n,i,o){var s,a,l,c=(t-r)*(t-r)+(e-n)*(e-n);if(c==0)s=t,a=e,l=(i-r)*(i-r)+(o-n)*(o-n);else{var p=((i-t)*(r-t)+(o-e)*(n-e))/c;p<0?(s=t,a=e,l=(t-i)*(t-i)+(e-o)*(e-o)):p>1?(s=r,a=n,l=(r-i)*(r-i)+(n-o)*(n-o)):(s=t+p*(r-t),a=e+p*(n-e),l=(s-i)*(s-i)+(a-o)*(a-o))}return[s,a,l]},_getProjectionToLine(t,e,r){var n=Hr.Util.cloneObject(t),i=Number.MAX_VALUE;return e.forEach(function(o,s){if(!(!r&&s===e.length-1)){var a=e[(s+1)%e.length],l=Hr.Util._getProjectionToSegment(o.x,o.y,a.x,a.y,t.x,t.y),c=l[0],p=l[1],f=l[2];f<i&&(n.x=c,n.y=p,i=f)}}),n},_prepareArrayForTween(t,e,r){var n,i=[],o=[];if(t.length>e.length){var s=e;e=t,t=s}for(n=0;n<t.length;n+=2)i.push({x:t[n],y:t[n+1]});for(n=0;n<e.length;n+=2)o.push({x:e[n],y:e[n+1]});var a=[];return o.forEach(function(l){var c=Hr.Util._getProjectionToLine(l,i,r);a.push(c.x),a.push(c.y)}),a},_prepareToStringify(t){var e;t.visitedByCircularReferenceRemoval=!0;for(var r in t)if(t.hasOwnProperty(r)&&t[r]&&typeof t[r]=="object"){if(e=Object.getOwnPropertyDescriptor(t,r),t[r].visitedByCircularReferenceRemoval||Hr.Util._isElement(t[r]))if(e.configurable)delete t[r];else return null;else if(Hr.Util._prepareToStringify(t[r])===null)if(e.configurable)delete t[r];else return null}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var r in e)t[r]=e[r];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999},releaseCanvas(...t){_R.Konva.releaseCanvasOnDestroy&&t.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(t,e,r,n){let i=0,o=0,s=0,a=0;typeof n=="number"?i=o=s=a=Math.min(n,e/2,r/2):(i=Math.min(n[0]||0,e/2,r/2),o=Math.min(n[1]||0,e/2,r/2),a=Math.min(n[2]||0,e/2,r/2),s=Math.min(n[3]||0,e/2,r/2)),t.moveTo(i,0),t.lineTo(e-o,0),t.arc(e-o,o,o,Math.PI*3/2,0,!1),t.lineTo(e,r-a),t.arc(e-a,r-a,a,0,Math.PI/2,!1),t.lineTo(s,r),t.arc(s,r-s,s,Math.PI/2,Math.PI,!1),t.lineTo(0,i),t.arc(i,i,i,Math.PI,Math.PI*3/2,!1)}}});var Kt=Y(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.getComponentValidator=rn.getBooleanValidator=rn.getNumberArrayValidator=rn.getFunctionValidator=rn.getStringOrGradientValidator=rn.getStringValidator=rn.getNumberOrAutoValidator=rn.getNumberOrArrayOfNumbersValidator=rn.getNumberValidator=rn.alphaComponent=rn.RGBComponent=void 0;var Bu=Ht(),Tn=hn();function Wu(t){return Tn.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||Tn.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function tpe(t){return t>255?255:t<0?0:Math.round(t)}rn.RGBComponent=tpe;function rpe(t){return t>1?1:t<1e-4?1e-4:t}rn.alphaComponent=rpe;function npe(){if(Bu.Konva.isUnminified)return function(t,e){return Tn.Util._isNumber(t)||Tn.Util.warn(Wu(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}rn.getNumberValidator=npe;function ipe(t){if(Bu.Konva.isUnminified)return function(e,r){let n=Tn.Util._isNumber(e),i=Tn.Util._isArray(e)&&e.length==t;return!n&&!i&&Tn.Util.warn(Wu(e)+' is a not valid value for "'+r+'" attribute. The value should be a number or Array<number>('+t+")"),e}}rn.getNumberOrArrayOfNumbersValidator=ipe;function ope(){if(Bu.Konva.isUnminified)return function(t,e){var r=Tn.Util._isNumber(t),n=t==="auto";return r||n||Tn.Util.warn(Wu(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}rn.getNumberOrAutoValidator=ope;function spe(){if(Bu.Konva.isUnminified)return function(t,e){return Tn.Util._isString(t)||Tn.Util.warn(Wu(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}rn.getStringValidator=spe;function ape(){if(Bu.Konva.isUnminified)return function(t,e){let r=Tn.Util._isString(t),n=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return r||n||Tn.Util.warn(Wu(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}rn.getStringOrGradientValidator=ape;function lpe(){if(Bu.Konva.isUnminified)return function(t,e){return Tn.Util._isFunction(t)||Tn.Util.warn(Wu(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}rn.getFunctionValidator=lpe;function upe(){if(Bu.Konva.isUnminified)return function(t,e){let r=Int8Array?Object.getPrototypeOf(Int8Array):null;return r&&t instanceof r||(Tn.Util._isArray(t)?t.forEach(function(n){Tn.Util._isNumber(n)||Tn.Util.warn('"'+e+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):Tn.Util.warn(Wu(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}rn.getNumberArrayValidator=upe;function cpe(){if(Bu.Konva.isUnminified)return function(t,e){var r=t===!0||t===!1;return r||Tn.Util.warn(Wu(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}rn.getBooleanValidator=cpe;function dpe(t){if(Bu.Konva.isUnminified)return function(e,r){return e==null||Tn.Util.isObject(e)||Tn.Util.warn(Wu(e)+' is a not valid value for "'+r+'" attribute. The value should be an object with properties '+t),e}}rn.getComponentValidator=dpe});var qt=Y(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.Factory=void 0;var Fs=hn(),ppe=Kt(),qv="get",Gv="set";el.Factory={addGetterSetter(t,e,r,n,i){el.Factory.addGetter(t,e,r),el.Factory.addSetter(t,e,n,i),el.Factory.addOverloadedGetterSetter(t,e)},addGetter(t,e,r){var n=qv+Fs.Util._capitalize(e);t.prototype[n]=t.prototype[n]||function(){var i=this.attrs[e];return i===void 0?r:i}},addSetter(t,e,r,n){var i=Gv+Fs.Util._capitalize(e);t.prototype[i]||el.Factory.overWriteSetter(t,e,r,n)},overWriteSetter(t,e,r,n){var i=Gv+Fs.Util._capitalize(e);t.prototype[i]=function(o){return r&&o!==void 0&&o!==null&&(o=r.call(this,o,e)),this._setAttr(e,o),n&&n.call(this),this}},addComponentsGetterSetter(t,e,r,n,i){var o=r.length,s=Fs.Util._capitalize,a=qv+s(e),l=Gv+s(e),c,p;t.prototype[a]=function(){var m={};for(c=0;c<o;c++)p=r[c],m[p]=this.getAttr(e+s(p));return m};var f=(0,ppe.getComponentValidator)(r);t.prototype[l]=function(m){var g=this.attrs[e],v;n&&(m=n.call(this,m)),f&&f.call(this,m,e);for(v in m)m.hasOwnProperty(v)&&this._setAttr(e+s(v),m[v]);return m||r.forEach(_=>{this._setAttr(e+s(_),void 0)}),this._fireChangeEvent(e,g,m),i&&i.call(this),this},el.Factory.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var r=Fs.Util._capitalize(e),n=Gv+r,i=qv+r;t.prototype[e]=function(){return arguments.length?(this[n](arguments[0]),this):this[i]()}},addDeprecatedGetterSetter(t,e,r,n){Fs.Util.error("Adding deprecated "+e);var i=qv+Fs.Util._capitalize(e),o=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[i]=function(){Fs.Util.error(o);var s=this.attrs[e];return s===void 0?r:s},el.Factory.addSetter(t,e,n,function(){Fs.Util.error(o)}),el.Factory.addOverloadedGetterSetter(t,e)},backCompat(t,e){Fs.Util.each(e,function(r,n){var i=t.prototype[n],o=qv+Fs.Util._capitalize(r),s=Gv+Fs.Util._capitalize(r);function a(){i.apply(this,arguments),Fs.Util.error('"'+r+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}t.prototype[r]=a,t.prototype[o]=a,t.prototype[s]=a})},afterSetFilter(){this._filterUpToDate=!1}}});var ER=Y(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.HitContext=Cd.SceneContext=Cd.Context=void 0;var _W=hn(),fpe=Ht();function mpe(t){var e=[],r=t.length,n=_W.Util,i,o;for(i=0;i<r;i++)o=t[i],n._isNumber(o)?o=Math.round(o*1e3)/1e3:n._isString(o)||(o=o+""),e.push(o);return e}var yW=",",hpe="(",gpe=")",ype="([",vpe="])",_pe=";",bpe="()",xpe="=",vW=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Tpe=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],wpe=100,xh=class{constructor(e){this.canvas=e,fpe.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,r){var n=this.traceArr,i=n.length,o="",s,a,l,c;for(s=0;s<i;s++)a=n[s],l=a.method,l?(c=a.args,o+=l,e?o+=bpe:_W.Util._isArray(c[0])?o+=ype+c.join(yW)+vpe:(r&&(c=c.map(p=>typeof p=="number"?Math.floor(p):p)),o+=hpe+c.join(yW)+gpe)):(o+=a.property,e||(o+=xpe+a.val)),o+=_pe;return o}clearTrace(){this.traceArr=[]}_trace(e){var r=this.traceArr,n;r.push(e),n=r.length,n>=wpe&&r.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var r=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,r.getWidth()/r.pixelRatio,r.getHeight()/r.pixelRatio)}_applyLineCap(e){let r=e.attrs.lineCap;r&&this.setAttr("lineCap",r)}_applyOpacity(e){var r=e.getAbsoluteOpacity();r!==1&&this.setAttr("globalAlpha",r)}_applyLineJoin(e){let r=e.attrs.lineJoin;r&&this.setAttr("lineJoin",r)}setAttr(e,r){this._context[e]=r}arc(e,r,n,i,o,s){this._context.arc(e,r,n,i,o,s)}arcTo(e,r,n,i,o){this._context.arcTo(e,r,n,i,o)}beginPath(){this._context.beginPath()}bezierCurveTo(e,r,n,i,o,s){this._context.bezierCurveTo(e,r,n,i,o,s)}clearRect(e,r,n,i){this._context.clearRect(e,r,n,i)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,r){var n=arguments;if(n.length===2)return this._context.createImageData(e,r);if(n.length===1)return this._context.createImageData(e)}createLinearGradient(e,r,n,i){return this._context.createLinearGradient(e,r,n,i)}createPattern(e,r){return this._context.createPattern(e,r)}createRadialGradient(e,r,n,i,o,s){return this._context.createRadialGradient(e,r,n,i,o,s)}drawImage(e,r,n,i,o,s,a,l,c){var p=arguments,f=this._context;p.length===3?f.drawImage(e,r,n):p.length===5?f.drawImage(e,r,n,i,o):p.length===9&&f.drawImage(e,r,n,i,o,s,a,l,c)}ellipse(e,r,n,i,o,s,a,l){this._context.ellipse(e,r,n,i,o,s,a,l)}isPointInPath(e,r,n,i){return n?this._context.isPointInPath(n,e,r,i):this._context.isPointInPath(e,r,i)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,r,n,i){this._context.fillRect(e,r,n,i)}strokeRect(e,r,n,i){this._context.strokeRect(e,r,n,i)}fillText(e,r,n,i){i?this._context.fillText(e,r,n,i):this._context.fillText(e,r,n)}measureText(e){return this._context.measureText(e)}getImageData(e,r,n,i){return this._context.getImageData(e,r,n,i)}lineTo(e,r){this._context.lineTo(e,r)}moveTo(e,r){this._context.moveTo(e,r)}rect(e,r,n,i){this._context.rect(e,r,n,i)}putImageData(e,r,n){this._context.putImageData(e,r,n)}quadraticCurveTo(e,r,n,i){this._context.quadraticCurveTo(e,r,n,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,r){this._context.scale(e,r)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,r,n,i,o,s){this._context.setTransform(e,r,n,i,o,s)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,r,n,i){this._context.strokeText(e,r,n,i)}transform(e,r,n,i,o,s){this._context.transform(e,r,n,i,o,s)}translate(e,r){this._context.translate(e,r)}_enableTrace(){var e=this,r=vW.length,n=this.setAttr,i,o,s=function(a){var l=e[a],c;e[a]=function(){return o=mpe(Array.prototype.slice.call(arguments,0)),c=l.apply(e,arguments),e._trace({method:a,args:o}),c}};for(i=0;i<r;i++)s(vW[i]);e.setAttr=function(){n.apply(e,arguments);var a=arguments[0],l=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:a,val:l})}}_applyGlobalCompositeOperation(e){let r=e.attrs.globalCompositeOperation;var n=!r||r==="source-over";n||this.setAttr("globalCompositeOperation",r)}};Cd.Context=xh;Tpe.forEach(function(t){Object.defineProperty(xh.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});var wR=class extends xh{constructor(e,{willReadFrequently:r=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:r})}_fillColor(e){var r=e.fill();this.setAttr("fillStyle",r),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var r=e._getLinearGradient();r&&(this.setAttr("fillStyle",r),e._fillFunc(this))}_fillRadialGradient(e){let r=e._getRadialGradient();r&&(this.setAttr("fillStyle",r),e._fillFunc(this))}_fill(e){let r=e.fill(),n=e.getFillPriority();if(r&&n==="color"){this._fillColor(e);return}let i=e.getFillPatternImage();if(i&&n==="pattern"){this._fillPattern(e);return}let o=e.getFillLinearGradientColorStops();if(o&&n==="linear-gradient"){this._fillLinearGradient(e);return}let s=e.getFillRadialGradientColorStops();if(s&&n==="radial-gradient"){this._fillRadialGradient(e);return}r?this._fillColor(e):i?this._fillPattern(e):o?this._fillLinearGradient(e):s&&this._fillRadialGradient(e)}_strokeLinearGradient(e){let r=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(r.x,r.y,n.x,n.y);if(i){for(var s=0;s<i.length;s+=2)o.addColorStop(i[s],i[s+1]);this.setAttr("strokeStyle",o)}}_stroke(e){var r=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e),r&&e.dashEnabled()&&(this.setLineDash(r),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var o=e.getStrokeLinearGradientColorStops();o?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var r,n,i,o=(r=e.getShadowRGBA())!==null&&r!==void 0?r:"black",s=(n=e.getShadowBlur())!==null&&n!==void 0?n:5,a=(i=e.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},l=e.getAbsoluteScale(),c=this.canvas.getPixelRatio(),p=l.x*c,f=l.y*c;this.setAttr("shadowColor",o),this.setAttr("shadowBlur",s*Math.min(Math.abs(p),Math.abs(f))),this.setAttr("shadowOffsetX",a.x*p),this.setAttr("shadowOffsetY",a.y*f)}};Cd.SceneContext=wR;var SR=class extends xh{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){let o=e.getStrokeScaleEnabled();if(!o){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(e);var n=e.hitStrokeWidth(),i=n==="auto"?e.strokeWidth():n;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),o||this.restore()}}};Cd.HitContext=SR});var Vv=Y(Dd=>{"use strict";Object.defineProperty(Dd,"__esModule",{value:!0});Dd.HitCanvas=Dd.SceneCanvas=Dd.Canvas=void 0;var ST=hn(),bW=ER(),xW=Ht(),Spe=qt(),Epe=Kt(),wT;function Cpe(){if(wT)return wT;var t=ST.Util.createCanvasElement(),e=t.getContext("2d");return wT=function(){var r=xW.Konva._global.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}(),ST.Util.releaseCanvas(t),wT}var Th=class{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var r=e||{},n=r.pixelRatio||xW.Konva.pixelRatio||Cpe();this.pixelRatio=n,this._canvas=ST.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var r=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/r,this.getHeight()/r)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var r=this.pixelRatio,n=this.getContext()._context;n.scale(r,r)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var r=this.pixelRatio,n=this.getContext()._context;n.scale(r,r)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,r){this.setWidth(e||0),this.setHeight(r||0)}toDataURL(e,r){try{return this._canvas.toDataURL(e,r)}catch{try{return this._canvas.toDataURL()}catch(i){return ST.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Dd.Canvas=Th;Spe.Factory.addGetterSetter(Th,"pixelRatio",void 0,(0,Epe.getNumberValidator)());var CR=class extends Th{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new bW.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}};Dd.SceneCanvas=CR;var DR=class extends Th{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new bW.HitContext(this),this.setSize(e.width,e.height)}};Dd.HitCanvas=DR});var ET=Y(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.DD=void 0;var Kv=Ht(),Dpe=hn();Bi.DD={get isDragging(){var t=!1;return Bi.DD._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return Bi.DD._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){let e=[];Bi.DD._dragElements.forEach((r,n)=>{let{node:i}=r,o=i.getStage();o.setPointersPositions(t),r.pointerId===void 0&&(r.pointerId=Dpe.Util._getFirstPointerId(t));let s=o._changedPointerPositions.find(c=>c.id===r.pointerId);if(s){if(r.dragStatus!=="dragging"){var a=i.dragDistance(),l=Math.max(Math.abs(s.x-r.startPointerPos.x),Math.abs(s.y-r.startPointerPos.y));if(l<a||(i.startDrag({evt:t}),!i.isDragging()))return}i._setDragPosition(t,r),e.push(i)}}),e.forEach(r=>{r.fire("dragmove",{type:"dragmove",target:r,evt:t},!0)})},_endDragBefore(t){let e=[];Bi.DD._dragElements.forEach(r=>{let{node:n}=r,i=n.getStage();if(t&&i.setPointersPositions(t),!i._changedPointerPositions.find(a=>a.id===r.pointerId))return;(r.dragStatus==="dragging"||r.dragStatus==="stopped")&&(Bi.DD.justDragged=!0,Kv.Konva._mouseListenClick=!1,Kv.Konva._touchListenClick=!1,Kv.Konva._pointerListenClick=!1,r.dragStatus="stopped");let s=r.node.getLayer()||r.node instanceof Kv.Konva.Stage&&r.node;s&&e.indexOf(s)===-1&&e.push(s)}),e.forEach(r=>{r.draw()})},_endDragAfter(t){Bi.DD._dragElements.forEach((e,r)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),e.dragStatus!=="dragging"&&Bi.DD._dragElements.delete(r)})}};Kv.Konva.isBrowser&&(window.addEventListener("mouseup",Bi.DD._endDragBefore,!0),window.addEventListener("touchend",Bi.DD._endDragBefore,!0),window.addEventListener("mousemove",Bi.DD._drag),window.addEventListener("touchmove",Bi.DD._drag),window.addEventListener("mouseup",Bi.DD._endDragAfter,!1),window.addEventListener("touchend",Bi.DD._endDragAfter,!1))});var wn=Y(NT=>{"use strict";Object.defineProperty(NT,"__esModule",{value:!0});NT.Node=void 0;var Qt=hn(),Yv=qt(),CT=Vv(),hf=Ht(),ma=ET(),Mn=Kt(),IT="absoluteOpacity",DT="allEventListeners",ju="absoluteTransform",TW="absoluteScale",gf="canvas",Ipe="Change",kpe="children",Npe="konva",IR="listening",wW="mouseenter",SW="mouseleave",EW="set",CW="Shape",kT=" ",DW="stage",Id="transform",Ape="Stage",kR="visible",Ope=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(kT),Rpe=1,Et=class t{constructor(e){this._id=Rpe++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Id||e===ju)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,r){var n=this._cache.get(e),i=e===Id||e===ju,o=n===void 0||i&&n.dirty===!0;return o&&(n=r.call(this),this._cache.set(e,n)),n}_calculate(e,r,n){if(!this._attachedDepsListeners.get(e)){let i=r.map(o=>o+"Change.konva").join(kT);this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get(gf)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===ju&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(gf)){let{scene:e,filter:r,hit:n}=this._cache.get(gf);Qt.Util.releaseCanvas(e,r,n),this._cache.delete(gf)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var r=e||{},n={};(r.x===void 0||r.y===void 0||r.width===void 0||r.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var i=Math.ceil(r.width||n.width),o=Math.ceil(r.height||n.height),s=r.pixelRatio,a=r.x===void 0?Math.floor(n.x):r.x,l=r.y===void 0?Math.floor(n.y):r.y,c=r.offset||0,p=r.drawBorder||!1,f=r.hitCanvasPixelRatio||1;if(!i||!o){Qt.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}i+=c*2+1,o+=c*2+1,a-=c,l-=c;var m=new CT.SceneCanvas({pixelRatio:s,width:i,height:o}),g=new CT.SceneCanvas({pixelRatio:s,width:0,height:0,willReadFrequently:!0}),v=new CT.HitCanvas({pixelRatio:f,width:i,height:o}),_=m.getContext(),S=v.getContext();return v.isCache=!0,m.isCache=!0,this._cache.delete(gf),this._filterUpToDate=!1,r.imageSmoothingEnabled===!1&&(m.getContext()._context.imageSmoothingEnabled=!1,g.getContext()._context.imageSmoothingEnabled=!1),_.save(),S.save(),_.translate(-a,-l),S.translate(-a,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(IT),this._clearSelfAndDescendantCache(TW),this.drawScene(m,this),this.drawHit(v,this),this._isUnderCache=!1,_.restore(),S.restore(),p&&(_.save(),_.beginPath(),_.rect(0,0,i,o),_.closePath(),_.setAttr("strokeStyle","red"),_.setAttr("lineWidth",5),_.stroke(),_.restore()),this._cache.set(gf,{scene:m,filter:g,hit:v,x:a,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(gf)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,r){var n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],i=1/0,o=1/0,s=-1/0,a=-1/0,l=this.getAbsoluteTransform(r);return n.forEach(function(c){var p=l.point(c);i===void 0&&(i=s=p.x,o=a=p.y),i=Math.min(i,p.x),o=Math.min(o,p.y),s=Math.max(s,p.x),a=Math.max(a,p.y)}),{x:i,y:o,width:s-i,height:a-o}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);let r=this._getCanvasCache();e.translate(r.x,r.y);var n=this._getCachedSceneCanvas(),i=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/i,n.height/i),e.restore()}_drawCachedHitCanvas(e){var r=this._getCanvasCache(),n=r.hit;e.save(),e.translate(r.x,r.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),r=this._getCanvasCache(),n=r.scene,i=r.filter,o=i.getContext(),s,a,l,c;if(e){if(!this._filterUpToDate){var p=n.pixelRatio;i.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio);try{for(s=e.length,o.clear(),o.drawImage(n._canvas,0,0,n.getWidth()/p,n.getHeight()/p),a=o.getImageData(0,0,i.getWidth(),i.getHeight()),l=0;l<s;l++){if(c=e[l],typeof c!="function"){Qt.Util.error("Filter should be type of function, but got "+typeof c+" instead. Please check correct filters");continue}c.call(this,a),o.putImageData(a,0,0)}}catch(f){Qt.Util.error("Unable to apply filter. "+f.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return n}on(e,r){if(this._cache&&this._cache.delete(DT),arguments.length===3)return this._delegate.apply(this,arguments);var n=e.split(kT),i=n.length,o,s,a,l,c;for(o=0;o<i;o++)s=n[o],a=s.split("."),l=a[0],c=a[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:c,handler:r});return this}off(e,r){var n=(e||"").split(kT),i=n.length,o,s,a,l,c,p;if(this._cache&&this._cache.delete(DT),!e)for(s in this.eventListeners)this._off(s);for(o=0;o<i;o++)if(a=n[o],l=a.split("."),c=l[0],p=l[1],c)this.eventListeners[c]&&this._off(c,p,r);else for(s in this.eventListeners)this._off(s,p,r);return this}dispatchEvent(e){var r={target:this,type:e.type,evt:e};return this.fire(e.type,r),this}addEventListener(e,r){return this.on(e,function(n){r.call(this,n.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,r,n){var i=this;this.on(e,function(o){for(var s=o.target.findAncestors(r,!0,i),a=0;a<s.length;a++)o=Qt.Util.cloneObject(o),o.currentTarget=s[a],n.call(s[a],o)})}remove(){return this.isDragging()&&this.stopDrag(),ma.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ju),this._clearSelfAndDescendantCache(IT),this._clearSelfAndDescendantCache(TW),this._clearSelfAndDescendantCache(DW),this._clearSelfAndDescendantCache(kR),this._clearSelfAndDescendantCache(IR)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var r="get"+Qt.Util._capitalize(e);return Qt.Util._isFunction(this[r])?this[r]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),r=[];e;)r.push(e),e=e.getParent();return r}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var r,n;if(!e)return this;for(r in e)r!==kpe&&(n=EW+Qt.Util._capitalize(r),Qt.Util._isFunction(this[n])?this[n](e[r]):this._setAttr(r,e[r]))}),this}isListening(){return this._getCache(IR,this._isListening)}_isListening(e){if(!this.listening())return!1;let n=this.getParent();return n&&n!==e&&this!==e?n._isListening(e):!0}isVisible(){return this._getCache(kR,this._isVisible)}_isVisible(e){if(!this.visible())return!1;let n=this.getParent();return n&&n!==e&&this!==e?n._isVisible(e):!0}shouldDrawHit(e,r=!1){if(e)return this._isVisible(e)&&this._isListening(e);var n=this.getLayer(),i=!1;ma.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(s.node.nodeType==="Stage"||s.node.getLayer()===n)&&(i=!0)});var o=!r&&!hf.Konva.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!o}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),r=this,n=0,i,o,s,a;function l(p){for(i=[],o=p.length,s=0;s<o;s++)a=p[s],n++,a.nodeType!==CW&&(i=i.concat(a.getChildren().slice())),a._id===r._id&&(s=o);i.length>0&&i[0].getDepth()<=e&&l(i)}let c=this.getStage();return r.nodeType!==Ape&&c&&l(c.getChildren()),n}getDepth(){for(var e=0,r=this.parent;r;)e++,r=r.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Id),this._clearSelfAndDescendantCache(ju)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){let e=this.getStage();if(!e)return null;var r=e.getPointerPosition();if(!r)return null;var n=this.getAbsoluteTransform().copy();return n.invert(),n.point(r)}getAbsolutePosition(e){let r=!1,n=this.parent;for(;n;){if(n.isCached()){r=!0;break}n=n.parent}r&&!e&&(e=!0);var i=this.getAbsoluteTransform(e).getMatrix(),o=new Qt.Transform,s=this.offset();return o.m=i.slice(),o.translate(s.x,s.y),o.getTranslation()}setAbsolutePosition(e){let{x:r,y:n,...i}=this._clearTransform();this.attrs.x=r,this.attrs.y=n,this._clearCache(Id);var o=this._getAbsoluteTransform().copy();return o.invert(),o.translate(e.x,e.y),e={x:this.attrs.x+o.getTranslation().x,y:this.attrs.y+o.getTranslation().y},this._setTransform(i),this.setPosition({x:e.x,y:e.y}),this._clearCache(Id),this._clearSelfAndDescendantCache(ju),this}_setTransform(e){var r;for(r in e)this.attrs[r]=e[r]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var r=e.x,n=e.y,i=this.x(),o=this.y();return r!==void 0&&(i+=r),n!==void 0&&(o+=n),this.setPosition({x:i,y:o}),this}_eachAncestorReverse(e,r){var n=[],i=this.getParent(),o,s;if(!(r&&r._id===this._id)){for(n.unshift(this);i&&(!r||i._id!==r._id);)n.unshift(i),i=i.parent;for(o=n.length,s=0;s<o;s++)e(n[s])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Qt.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,r=this.parent.getChildren().length;return e<r-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Qt.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,r=this.parent.getChildren().length;return e<r-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Qt.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Qt.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Qt.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Qt.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var r=this.index;return this.parent.children.splice(r,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(IT,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),r=this.getParent();return r&&!r._isUnderCache&&(e*=r.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},r=this.getAttrs(),n,i,o,s,a;e.attrs={};for(n in r)i=r[n],a=Qt.Util.isObject(i)&&!Qt.Util._isPlainObject(i)&&!Qt.Util._isArray(i),!a&&(o=typeof this[n]=="function"&&this[n],delete r[n],s=o?o.call(this):null,r[n]=i,s!==i&&(e.attrs[n]=i));return e.className=this.getClassName(),Qt.Util._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,r,n){var i=[];r&&this._isMatch(e)&&i.push(this);for(var o=this.parent;o;){if(o===n)return i;o._isMatch(e)&&i.push(o),o=o.parent}return i}isAncestorOf(e){return!1}findAncestor(e,r,n){return this.findAncestors(e,r,n)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var r=e.replace(/ /g,"").split(","),n=r.length,i,o;for(i=0;i<n;i++)if(o=r[i],Qt.Util.isValidSelector(o)||(Qt.Util.warn('Selector "'+o+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Qt.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Qt.Util.warn("Konva is awesome, right?")),o.charAt(0)==="#"){if(this.id()===o.slice(1))return!0}else if(o.charAt(0)==="."){if(this.hasName(o.slice(1)))return!0}else if(this.className===o||this.nodeType===o)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(DW,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,r={},n){return r.target=r.target||this,n?this._fireAndBubble(e,r):this._fire(e,r),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(ju,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var r;if(e)return r=new Qt.Transform,this._eachAncestorReverse(function(i){var o=i.transformsEnabled();o==="all"?r.multiply(i.getTransform()):o==="position"&&r.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),r;r=this._cache.get(ju)||new Qt.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(r):r.reset();var n=this.transformsEnabled();if(n==="all")r.multiply(this.getTransform());else if(n==="position"){let i=this.attrs.x||0,o=this.attrs.y||0,s=this.attrs.offsetX||0,a=this.attrs.offsetY||0;r.translate(i-s,o-a)}return r.dirty=!1,r}getAbsoluteScale(e){for(var r=this;r;)r._isUnderCache&&(e=r),r=r.getParent();let i=this.getAbsoluteTransform(e).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Id,this._getTransform)}_getTransform(){var e,r,n=this._cache.get(Id)||new Qt.Transform;n.reset();var i=this.x(),o=this.y(),s=hf.Konva.getAngle(this.rotation()),a=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(r=this.attrs.scaleY)!==null&&r!==void 0?r:1,c=this.attrs.skewX||0,p=this.attrs.skewY||0,f=this.attrs.offsetX||0,m=this.attrs.offsetY||0;return(i!==0||o!==0)&&n.translate(i,o),s!==0&&n.rotate(s),(c!==0||p!==0)&&n.skew(c,p),(a!==1||l!==1)&&n.scale(a,l),(f!==0||m!==0)&&n.translate(-1*f,-1*m),n.dirty=!1,n}clone(e){var r=Qt.Util.cloneObject(this.attrs),n,i,o,s,a;for(n in e)r[n]=e[n];var l=new this.constructor(r);for(n in this.eventListeners)for(i=this.eventListeners[n],o=i.length,s=0;s<o;s++)a=i[s],a.name.indexOf(Npe)<0&&(l.eventListeners[n]||(l.eventListeners[n]=[]),l.eventListeners[n].push(a));return l}_toKonvaCanvas(e){e=e||{};var r=this.getClientRect(),n=this.getStage(),i=e.x!==void 0?e.x:Math.floor(r.x),o=e.y!==void 0?e.y:Math.floor(r.y),s=e.pixelRatio||1,a=new CT.SceneCanvas({width:e.width||Math.ceil(r.width)||(n?n.width():0),height:e.height||Math.ceil(r.height)||(n?n.height():0),pixelRatio:s}),l=a.getContext();return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(i||o)&&l.translate(-1*i,-1*o),this.drawScene(a),l.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var r=e.mimeType||null,n=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(r,n);return e.callback&&e.callback(i),i}toImage(e){return new Promise((r,n)=>{try{let i=e?.callback;i&&delete e.callback,Qt.Util._urlToImage(this.toDataURL(e),function(o){r(o),i?.(o)})}catch(i){n(i)}})}toBlob(e){return new Promise((r,n)=>{try{let i=e?.callback;i&&delete e.callback,this.toCanvas(e).toBlob(o=>{r(o),i?.(o)})}catch(i){n(i)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():hf.Konva.dragDistance}_off(e,r,n){var i=this.eventListeners[e],o,s,a;for(o=0;o<i.length;o++)if(s=i[o].name,a=i[o].handler,(s!=="konva"||r==="konva")&&(!r||s===r)&&(!n||n===a)){if(i.splice(o,1),i.length===0){delete this.eventListeners[e];break}o--}}_fireChangeEvent(e,r,n){this._fire(e+Ipe,{oldVal:r,newVal:n})}addName(e){if(!this.hasName(e)){var r=this.name(),n=r?r+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;let r=this.name();if(!r)return!1;var n=(r||"").split(/\s/g);return n.indexOf(e)!==-1}removeName(e){var r=(this.name()||"").split(/\s/g),n=r.indexOf(e);return n!==-1&&(r.splice(n,1),this.name(r.join(" "))),this}setAttr(e,r){var n=this[EW+Qt.Util._capitalize(e)];return Qt.Util._isFunction(n)?n.call(this,r):this._setAttr(e,r),this}_requestDraw(){if(hf.Konva.autoDrawEnabled){let e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,r){var n=this.attrs[e];n===r&&!Qt.Util.isObject(r)||(r==null?delete this.attrs[e]:this.attrs[e]=r,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,r),this._requestDraw())}_setComponentAttr(e,r,n){var i;n!==void 0&&(i=this.attrs[e],i||(this.attrs[e]=this.getAttr(e)),this.attrs[e][r]=n,this._fireChangeEvent(e,i,n))}_fireAndBubble(e,r,n){r&&this.nodeType===CW&&(r.target=this);var i=(e===wW||e===SW)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n);if(!i){this._fire(e,r);var o=(e===wW||e===SW)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(r&&!r.cancelBubble||!r)&&this.parent&&this.parent.isListening()&&!o&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,r,n):this._fireAndBubble.call(this.parent,e,r))}}_getProtoListeners(e){var r,n,i;let o=(r=this._cache.get(DT))!==null&&r!==void 0?r:{},s=o?.[e];if(s===void 0){s=[];let a=Object.getPrototypeOf(this);for(;a;){let l=(i=(n=a.eventListeners)===null||n===void 0?void 0:n[e])!==null&&i!==void 0?i:[];s.push(...l),a=Object.getPrototypeOf(a)}o[e]=s,this._cache.set(DT,o)}return s}_fire(e,r){r=r||{},r.currentTarget=this,r.type=e;let n=this._getProtoListeners(e);if(n)for(var i=0;i<n.length;i++)n[i].handler.call(this,r);let o=this.eventListeners[e];if(o)for(var i=0;i<o.length;i++)o[i].handler.call(this,r)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var r=e?e.pointerId:void 0,n=this.getStage(),i=this.getAbsolutePosition();if(n){var o=n._getPointerById(r)||n._changedPointerPositions[0]||i;ma.DD._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-i.x,y:o.y-i.y},dragStatus:"ready",pointerId:r})}}startDrag(e,r=!0){ma.DD._dragElements.has(this._id)||this._createDragElement(e);let n=ma.DD._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},r)}_setDragPosition(e,r){let n=this.getStage()._getPointerById(r.pointerId);if(n){var i={x:n.x-r.offset.x,y:n.y-r.offset.y},o=this.dragBoundFunc();if(o!==void 0){let s=o.call(this,i,e);s?i=s:Qt.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(e){let r=ma.DD._dragElements.get(this._id);r&&(r.dragStatus="stopped"),ma.DD._endDragBefore(e),ma.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){let e=ma.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var r=e.evt.button!==void 0,n=!r||hf.Konva.dragButtons.indexOf(e.evt.button)>=0;if(n&&!this.isDragging()){var i=!1;ma.DD._dragElements.forEach(o=>{this.isAncestorOf(o.node)&&(i=!0)}),i||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;let r=ma.DD._dragElements.get(this._id),n=r&&r.dragStatus==="dragging",i=r&&r.dragStatus==="ready";n?this.stopDrag():i&&ma.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){let r=this.getStage();if(!r)return!1;let n={x:-e.x,y:-e.y,width:r.width()+2*e.x,height:r.height()+2*e.y};return Qt.Util.haveIntersection(n,this.getClientRect())}static create(e,r){return Qt.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,r)}static _createNode(e,r){var n=t.prototype.getClassName.call(e),i=e.children,o,s,a;r&&(e.attrs.container=r),hf.Konva[n]||(Qt.Util.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");let l=hf.Konva[n];if(o=new l(e.attrs),i)for(s=i.length,a=0;a<s;a++)o.add(t._createNode(i[a]));return o}};NT.Node=Et;Et.prototype.nodeType="Node";Et.prototype._attrsAffectingSize=[];Et.prototype.eventListeners={};Et.prototype.on.call(Et.prototype,Ope,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Id),this._clearSelfAndDescendantCache(ju)});Et.prototype.on.call(Et.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(kR)});Et.prototype.on.call(Et.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(IR)});Et.prototype.on.call(Et.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(IT)});var Pr=Yv.Factory.addGetterSetter;Pr(Et,"zIndex");Pr(Et,"absolutePosition");Pr(Et,"position");Pr(Et,"x",0,(0,Mn.getNumberValidator)());Pr(Et,"y",0,(0,Mn.getNumberValidator)());Pr(Et,"globalCompositeOperation","source-over",(0,Mn.getStringValidator)());Pr(Et,"opacity",1,(0,Mn.getNumberValidator)());Pr(Et,"name","",(0,Mn.getStringValidator)());Pr(Et,"id","",(0,Mn.getStringValidator)());Pr(Et,"rotation",0,(0,Mn.getNumberValidator)());Yv.Factory.addComponentsGetterSetter(Et,"scale",["x","y"]);Pr(Et,"scaleX",1,(0,Mn.getNumberValidator)());Pr(Et,"scaleY",1,(0,Mn.getNumberValidator)());Yv.Factory.addComponentsGetterSetter(Et,"skew",["x","y"]);Pr(Et,"skewX",0,(0,Mn.getNumberValidator)());Pr(Et,"skewY",0,(0,Mn.getNumberValidator)());Yv.Factory.addComponentsGetterSetter(Et,"offset",["x","y"]);Pr(Et,"offsetX",0,(0,Mn.getNumberValidator)());Pr(Et,"offsetY",0,(0,Mn.getNumberValidator)());Pr(Et,"dragDistance",null,(0,Mn.getNumberValidator)());Pr(Et,"width",0,(0,Mn.getNumberValidator)());Pr(Et,"height",0,(0,Mn.getNumberValidator)());Pr(Et,"listening",!0,(0,Mn.getBooleanValidator)());Pr(Et,"preventDefault",!0,(0,Mn.getBooleanValidator)());Pr(Et,"filters",null,function(t){return this._filterUpToDate=!1,t});Pr(Et,"visible",!0,(0,Mn.getBooleanValidator)());Pr(Et,"transformsEnabled","all",(0,Mn.getStringValidator)());Pr(Et,"size");Pr(Et,"dragBoundFunc");Pr(Et,"draggable",!1,(0,Mn.getBooleanValidator)());Yv.Factory.backCompat(Et,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})});var Xv=Y(OT=>{"use strict";Object.defineProperty(OT,"__esModule",{value:!0});OT.Container=void 0;var wh=qt(),NR=wn(),AT=Kt(),zu=class extends NR.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];let r=this.children||[];var n=[];return r.forEach(function(i){e(i)&&n.push(i)}),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var r=0;r<e.length;r++)this.add(e[r]);return this}let n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var r=this._generalFind(e,!0);return r.length>0?r[0]:void 0}_generalFind(e,r){var n=[];return this._descendants(i=>{let o=i._isMatch(e);return o&&n.push(i),!!(o&&r)}),n}_descendants(e){let r=!1,n=this.getChildren();for(let i of n){if(r=e(i),r)return!0;if(i.hasChildren()&&(r=i._descendants(e),r))return!0}return!1}toObject(){var e=NR.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(r=>{e.children.push(r.toObject())}),e}isAncestorOf(e){for(var r=e.getParent();r;){if(r._id===this._id)return!0;r=r.getParent()}return!1}clone(e){var r=NR.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(n){r.add(n.clone())}),r}getAllIntersections(e){var r=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(e)&&r.push(n)}),r}_clearSelfAndDescendantCache(e){var r;super._clearSelfAndDescendantCache(e),!this.isCached()&&((r=this.children)===null||r===void 0||r.forEach(function(n){n._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(r,n){r.index=n}),this._requestDraw()}drawScene(e,r){var n=this.getLayer(),i=e||n&&n.getCanvas(),o=i&&i.getContext(),s=this._getCanvasCache(),a=s&&s.scene,l=i&&i.isCache;if(!this.isVisible()&&!l)return this;if(a){o.save();var c=this.getAbsoluteTransform(r).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,r);return this}drawHit(e,r){if(!this.shouldDrawHit(r))return this;var n=this.getLayer(),i=e||n&&n.hitCanvas,o=i&&i.getContext(),s=this._getCanvasCache(),a=s&&s.hit;if(a){o.save();var l=this.getAbsoluteTransform(r).getMatrix();o.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",i,r);return this}_drawChildren(e,r,n){var i,o=r&&r.getContext(),s=this.clipWidth(),a=this.clipHeight(),l=this.clipFunc(),c=s&&a||l;let p=n===this;if(c){o.save();var f=this.getAbsoluteTransform(n),m=f.getMatrix();o.transform(m[0],m[1],m[2],m[3],m[4],m[5]),o.beginPath();let S;if(l)S=l.call(this,o,this);else{var g=this.clipX(),v=this.clipY();o.rect(g,v,s,a)}o.clip.apply(o,S),m=f.copy().invert().getMatrix(),o.transform(m[0],m[1],m[2],m[3],m[4],m[5])}var _=!p&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";_&&(o.save(),o._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(S){S[e](r,n)}),_&&o.restore(),c&&o.restore()}getClientRect(e={}){var r,n=e.skipTransform,i=e.relativeTo,o,s,a,l,c={x:1/0,y:1/0,width:0,height:0},p=this;(r=this.children)===null||r===void 0||r.forEach(function(_){if(_.visible()){var S=_.getClientRect({relativeTo:p,skipShadow:e.skipShadow,skipStroke:e.skipStroke});S.width===0&&S.height===0||(o===void 0?(o=S.x,s=S.y,a=S.x+S.width,l=S.y+S.height):(o=Math.min(o,S.x),s=Math.min(s,S.y),a=Math.max(a,S.x+S.width),l=Math.max(l,S.y+S.height)))}});for(var f=this.find("Shape"),m=!1,g=0;g<f.length;g++){var v=f[g];if(v._isVisible(this)){m=!0;break}}return m&&o!==void 0?c={x:o,y:s,width:a-o,height:l-s}:c={x:0,y:0,width:0,height:0},n?c:this._transformedRect(c,i)}};OT.Container=zu;wh.Factory.addComponentsGetterSetter(zu,"clip",["x","y","width","height"]);wh.Factory.addGetterSetter(zu,"clipX",void 0,(0,AT.getNumberValidator)());wh.Factory.addGetterSetter(zu,"clipY",void 0,(0,AT.getNumberValidator)());wh.Factory.addGetterSetter(zu,"clipWidth",void 0,(0,AT.getNumberValidator)());wh.Factory.addGetterSetter(zu,"clipHeight",void 0,(0,AT.getNumberValidator)());wh.Factory.addGetterSetter(zu,"clipFunc")});var OR=Y(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.releaseCapture=ha.setPointerCapture=ha.hasPointerCapture=ha.createEvent=ha.getCapturedShape=void 0;var Ppe=Ht(),Jv=new Map,IW=Ppe.Konva._global.PointerEvent!==void 0;function Lpe(t){return Jv.get(t)}ha.getCapturedShape=Lpe;function AR(t){return{evt:t,pointerId:t.pointerId}}ha.createEvent=AR;function Mpe(t,e){return Jv.get(t)===e}ha.hasPointerCapture=Mpe;function Fpe(t,e){kW(t),e.getStage()&&(Jv.set(t,e),IW&&e._fire("gotpointercapture",AR(new PointerEvent("gotpointercapture"))))}ha.setPointerCapture=Fpe;function kW(t,e){let r=Jv.get(t);if(!r)return;let n=r.getStage();n&&n.content,Jv.delete(t),IW&&r._fire("lostpointercapture",AR(new PointerEvent("lostpointercapture")))}ha.releaseCapture=kW});var $W=Y(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.Stage=Hu.stages=void 0;var Ul=hn(),Upe=qt(),NW=Xv(),Ro=Ht(),RR=Vv(),Sh=ET(),Bpe=Ht(),$u=OR(),Wpe="Stage",jpe="string",AW="px",zpe="mouseout",RW="mouseleave",PW="mouseover",LW="mouseenter",MW="mousemove",FW="mousedown",UW="mouseup",Qv="pointermove",Zv="pointerdown",Ch="pointerup",e0="pointercancel",$pe="lostpointercapture",RT="pointerout",PT="pointerleave",LT="pointerover",MT="pointerenter",LR="contextmenu",BW="touchstart",WW="touchend",jW="touchmove",zW="touchcancel",MR="wheel",Hpe=5,qpe=[[LW,"_pointerenter"],[FW,"_pointerdown"],[MW,"_pointermove"],[UW,"_pointerup"],[RW,"_pointerleave"],[BW,"_pointerdown"],[jW,"_pointermove"],[WW,"_pointerup"],[zW,"_pointercancel"],[PW,"_pointerover"],[MR,"_wheel"],[LR,"_contextmenu"],[Zv,"_pointerdown"],[Qv,"_pointermove"],[Ch,"_pointerup"],[e0,"_pointercancel"],[$pe,"_lostpointercapture"]],PR={mouse:{[RT]:zpe,[PT]:RW,[LT]:PW,[MT]:LW,[Qv]:MW,[Zv]:FW,[Ch]:UW,[e0]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[RT]:"touchout",[PT]:"touchleave",[LT]:"touchover",[MT]:"touchenter",[Qv]:jW,[Zv]:BW,[Ch]:WW,[e0]:zW,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[RT]:RT,[PT]:PT,[LT]:LT,[MT]:MT,[Qv]:Qv,[Zv]:Zv,[Ch]:Ch,[e0]:e0,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},t0=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",Eh=t=>{let e=t0(t);if(e==="pointer")return Ro.Konva.pointerEventsEnabled&&PR.pointer;if(e==="touch")return PR.touch;if(e==="mouse")return PR.mouse};function OW(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&Ul.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}var Gpe="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";Hu.stages=[];var Dh=class extends NW.Container{constructor(e){super(OW(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Hu.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{OW(this.attrs)}),this._checkVisibility()}_validateAdd(e){let r=e.getType()==="Layer",n=e.getType()==="FastLayer";r||n||Ul.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;let e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===jpe){if(e.charAt(0)==="."){var r=e.slice(1);e=document.getElementsByClassName(r)[0]}else{var n;e.charAt(0)!=="#"?n=e:n=e.slice(1),e=document.getElementById(n)}if(!e)throw"Can not find container in document with id "+n}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,r=e.length,n;for(n=0;n<r;n++)e[n].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),NW.Container.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&Ul.Util._isInDocument(e)&&this.container().removeChild(e);var r=Hu.stages.indexOf(this);return r>-1&&Hu.stages.splice(r,1),Ul.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){let e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(Ul.Util.warn(Gpe),null)}_getPointerById(e){return this._pointerPositions.find(r=>r.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var r=new RR.SceneCanvas({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),n=r.getContext()._context,i=this.children;return(e.x||e.y)&&n.translate(-1*e.x,-1*e.y),i.forEach(function(o){if(o.isVisible()){var s=o._toKonvaCanvas(e);n.drawImage(s._canvas,e.x,e.y,s.getWidth()/s.getPixelRatio(),s.getHeight()/s.getPixelRatio())}}),r}getIntersection(e){if(!e)return null;var r=this.children,n=r.length,i=n-1,o;for(o=i;o>=0;o--){let s=r[o].getIntersection(e);if(s)return s}return null}_resizeDOM(){var e=this.width(),r=this.height();this.content&&(this.content.style.width=e+AW,this.content.style.height=r+AW),this.bufferCanvas.setSize(e,r),this.bufferHitCanvas.setSize(e,r),this.children.forEach(n=>{n.setSize({width:e,height:r}),n.draw()})}add(e,...r){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}super.add(e);var i=this.children.length;return i>Hpe&&Ul.Util.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),Ro.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return $u.hasPointerCapture(e,this)}setPointerCapture(e){$u.setPointerCapture(e,this)}releaseCapture(e){$u.releaseCapture(e,this)}getLayers(){return this.children}_bindContentEvents(){Ro.Konva.isBrowser&&qpe.forEach(([e,r])=>{this.content.addEventListener(e,n=>{this[r](n)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);let r=Eh(e.type);r&&this._fire(r.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);let r=Eh(e.type);r&&this._fire(r.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let r=this[e+"targetShape"];return r&&!r.getStage()&&(r=null),r}_pointerleave(e){let r=Eh(e.type),n=t0(e.type);if(r){this.setPointersPositions(e);var i=this._getTargetShape(n),o=!Sh.DD.isDragging||Ro.Konva.hitOnDragEnabled;i&&o?(i._fireAndBubble(r.pointerout,{evt:e}),i._fireAndBubble(r.pointerleave,{evt:e}),this._fire(r.pointerleave,{evt:e,target:this,currentTarget:this}),this[n+"targetShape"]=null):o&&(this._fire(r.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(r.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(e){let r=Eh(e.type),n=t0(e.type);if(r){this.setPointersPositions(e);var i=!1;this._changedPointerPositions.forEach(o=>{var s=this.getIntersection(o);if(Sh.DD.justDragged=!1,Ro.Konva["_"+n+"ListenClick"]=!0,!s||!s.isListening())return;Ro.Konva.capturePointerEventsEnabled&&s.setPointerCapture(o.id),this[n+"ClickStartShape"]=s,s._fireAndBubble(r.pointerdown,{evt:e,pointerId:o.id}),i=!0;let a=e.type.indexOf("touch")>=0;s.preventDefault()&&e.cancelable&&a&&e.preventDefault()}),i||this._fire(r.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){let r=Eh(e.type),n=t0(e.type);if(!r)return;Sh.DD.isDragging&&Sh.DD.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var i=!Sh.DD.isDragging||Ro.Konva.hitOnDragEnabled;if(!i)return;var o={};let s=!1;var a=this._getTargetShape(n);this._changedPointerPositions.forEach(l=>{let c=$u.getCapturedShape(l.id)||this.getIntersection(l),p=l.id,f={evt:e,pointerId:p};var m=a!==c;if(m&&a&&(a._fireAndBubble(r.pointerout,{...f},c),a._fireAndBubble(r.pointerleave,{...f},c)),c){if(o[c._id])return;o[c._id]=!0}c&&c.isListening()?(s=!0,m&&(c._fireAndBubble(r.pointerover,{...f},a),c._fireAndBubble(r.pointerenter,{...f},a),this[n+"targetShape"]=c),c._fireAndBubble(r.pointermove,{...f})):a&&(this._fire(r.pointerover,{evt:e,target:this,currentTarget:this,pointerId:p}),this[n+"targetShape"]=null)}),s||this._fire(r.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){let r=Eh(e.type),n=t0(e.type);if(!r)return;this.setPointersPositions(e);let i=this[n+"ClickStartShape"],o=this[n+"ClickEndShape"];var s={};let a=!1;this._changedPointerPositions.forEach(l=>{let c=$u.getCapturedShape(l.id)||this.getIntersection(l);if(c){if(c.releaseCapture(l.id),s[c._id])return;s[c._id]=!0}let p=l.id,f={evt:e,pointerId:p},m=!1;Ro.Konva["_"+n+"InDblClickWindow"]?(m=!0,clearTimeout(this[n+"DblTimeout"])):Sh.DD.justDragged||(Ro.Konva["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){Ro.Konva["_"+n+"InDblClickWindow"]=!1},Ro.Konva.dblClickWindow),c&&c.isListening()?(a=!0,this[n+"ClickEndShape"]=c,c._fireAndBubble(r.pointerup,{...f}),Ro.Konva["_"+n+"ListenClick"]&&i&&i===c&&(c._fireAndBubble(r.pointerclick,{...f}),m&&o&&o===c&&c._fireAndBubble(r.pointerdblclick,{...f}))):(this[n+"ClickEndShape"]=null,Ro.Konva["_"+n+"ListenClick"]&&this._fire(r.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:p}),m&&this._fire(r.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:p}))}),a||this._fire(r.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Ro.Konva["_"+n+"ListenClick"]=!1,e.cancelable&&n!=="touch"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var r=this.getIntersection(this.getPointerPosition());r&&r.isListening()?r._fireAndBubble(LR,{evt:e}):this._fire(LR,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var r=this.getIntersection(this.getPointerPosition());r&&r.isListening()?r._fireAndBubble(MR,{evt:e}):this._fire(MR,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);let r=$u.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());r&&r._fireAndBubble(Ch,$u.createEvent(e)),$u.releaseCapture(e.pointerId)}_lostpointercapture(e){$u.releaseCapture(e.pointerId)}setPointersPositions(e){var r=this._getContentPosition(),n=null,i=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,o=>{this._pointerPositions.push({id:o.identifier,x:(o.clientX-r.left)/r.scaleX,y:(o.clientY-r.top)/r.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,o=>{this._changedPointerPositions.push({id:o.identifier,x:(o.clientX-r.left)/r.scaleX,y:(o.clientY-r.top)/r.scaleY})})):(n=(e.clientX-r.left)/r.scaleX,i=(e.clientY-r.top)/r.scaleY,this.pointerPos={x:n,y:i},this._pointerPositions=[{x:n,y:i,id:Ul.Util._getFirstPointerId(e)}],this._changedPointerPositions=[{x:n,y:i,id:Ul.Util._getFirstPointerId(e)}])}_setPointerPosition(e){Ul.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new RR.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new RR.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!Ro.Konva.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return Ul.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};Hu.Stage=Dh;Dh.prototype.nodeType=Wpe;(0,Bpe._registerNode)(Dh);Upe.Factory.addGetterSetter(Dh,"container")});var li=Y(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.Shape=qu.shapes=void 0;var Vpe=Ht(),Bl=hn(),tt=qt(),HW=wn(),Xn=Kt(),Kpe=Ht(),FR=OR(),qW="hasShadow",GW="shadowRGBA",VW="patternImage",KW="linearGradient",YW="radialGradient",FT;function UR(){return FT||(FT=Bl.Util.createCanvasElement().getContext("2d"),FT)}qu.shapes={};function Ype(t){let e=this.attrs.fillRule;e?t.fill(e):t.fill()}function Xpe(t){t.stroke()}function Jpe(t){t.fill()}function Qpe(t){t.stroke()}function Zpe(){this._clearCache(qW)}function efe(){this._clearCache(GW)}function tfe(){this._clearCache(VW)}function rfe(){this._clearCache(KW)}function nfe(){this._clearCache(YW)}var Le=class extends HW.Node{constructor(e){super(e);let r;for(;r=Bl.Util.getRandomColor(),!(r&&!(r in qu.shapes)););this.colorKey=r,qu.shapes[r]=this}getContext(){return Bl.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return Bl.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(qW,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(VW,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=UR();let r=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(r&&r.setTransform){let n=new Bl.Transform;n.translate(this.fillPatternX(),this.fillPatternY()),n.rotate(Vpe.Konva.getAngle(this.fillPatternRotation())),n.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),n.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());let i=n.getMatrix(),o=typeof DOMMatrix>"u"?{a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]}:new DOMMatrix(i);r.setTransform(o)}return r}}_getLinearGradient(){return this._getCache(KW,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var r=UR(),n=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),o=r.createLinearGradient(n.x,n.y,i.x,i.y),s=0;s<e.length;s+=2)o.addColorStop(e[s],e[s+1]);return o}}_getRadialGradient(){return this._getCache(YW,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var r=UR(),n=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),o=r.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),s=0;s<e.length;s+=2)o.addColorStop(e[s],e[s+1]);return o}}getShadowRGBA(){return this._getCache(GW,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=Bl.Util.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){let e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var r=this.getStage();if(!r)return!1;let n=r.bufferHitCanvas;return n.getContext().clear(),this.drawHit(n,void 0,!0),n.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return HW.Node.prototype.destroy.call(this),delete qu.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var r;if(!this.getStage()||!((r=this.attrs.perfectDrawEnabled)!==null&&r!==void 0?r:!0))return!1;let i=e||this.hasFill(),o=this.hasStroke(),s=this.getAbsoluteOpacity()!==1;if(i&&o&&s)return!0;let a=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(i&&o&&a&&l)}setStrokeHitEnabled(e){Bl.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let r=e.skipTransform,n=e.relativeTo,i=this.getSelfRect(),s=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,a=i.width+s,l=i.height+s,c=!e.skipShadow&&this.hasShadow(),p=c?this.shadowOffsetX():0,f=c?this.shadowOffsetY():0,m=a+Math.abs(p),g=l+Math.abs(f),v=c&&this.shadowBlur()||0,_=m+v*2,S=g+v*2,T={width:_,height:S,x:-(s/2+v)+Math.min(p,0)+i.x,y:-(s/2+v)+Math.min(f,0)+i.y};return r?T:this._transformedRect(T,n)}drawScene(e,r){var n=this.getLayer(),i=e||n.getCanvas(),o=i.getContext(),s=this._getCanvasCache(),a=this.getSceneFunc(),l=this.hasShadow(),c,p,f,m=i.isCache,g=r===this;if(!this.isVisible()&&!g)return this;if(s){o.save();var v=this.getAbsoluteTransform(r).getMatrix();return o.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedSceneCanvas(o),o.restore(),this}if(!a)return this;if(o.save(),this._useBufferCanvas()&&!m){c=this.getStage(),p=c.bufferCanvas,f=p.getContext(),f.clear(),f.save(),f._applyLineJoin(this);var _=this.getAbsoluteTransform(r).getMatrix();f.transform(_[0],_[1],_[2],_[3],_[4],_[5]),a.call(this,f,this),f.restore();var S=p.pixelRatio;l&&o._applyShadow(this),o._applyOpacity(this),o._applyGlobalCompositeOperation(this),o.drawImage(p._canvas,0,0,p.width/S,p.height/S)}else{if(o._applyLineJoin(this),!g){var _=this.getAbsoluteTransform(r).getMatrix();o.transform(_[0],_[1],_[2],_[3],_[4],_[5]),o._applyOpacity(this),o._applyGlobalCompositeOperation(this)}l&&o._applyShadow(this),a.call(this,o,this)}return o.restore(),this}drawHit(e,r,n=!1){if(!this.shouldDrawHit(r,n))return this;var i=this.getLayer(),o=e||i.hitCanvas,s=o&&o.getContext(),a=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||Bl.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),c){s.save();var p=this.getAbsoluteTransform(r).getMatrix();return s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedHitCanvas(s),s.restore(),this}if(!a)return this;if(s.save(),s._applyLineJoin(this),!(this===r)){var m=this.getAbsoluteTransform(r).getMatrix();s.transform(m[0],m[1],m[2],m[3],m[4],m[5])}return a.call(this,s,this),s.restore(),this}drawHitFromCache(e=0){var r=this._getCanvasCache(),n=this._getCachedSceneCanvas(),i=r.hit,o=i.getContext(),s=i.getWidth(),a=i.getHeight(),l,c,p,f,m,g;o.clear(),o.drawImage(n._canvas,0,0,s,a);try{for(l=o.getImageData(0,0,s,a),c=l.data,p=c.length,f=Bl.Util._hexToRgb(this.colorKey),m=0;m<p;m+=4)g=c[m+3],g>e?(c[m]=f.r,c[m+1]=f.g,c[m+2]=f.b,c[m+3]=255):c[m+3]=0;o.putImageData(l,0,0)}catch(v){Bl.Util.error("Unable to draw hit graph from cached scene canvas. "+v.message)}return this}hasPointerCapture(e){return FR.hasPointerCapture(e,this)}setPointerCapture(e){FR.setPointerCapture(e,this)}releaseCapture(e){FR.releaseCapture(e,this)}};qu.Shape=Le;Le.prototype._fillFunc=Ype;Le.prototype._strokeFunc=Xpe;Le.prototype._fillFuncHit=Jpe;Le.prototype._strokeFuncHit=Qpe;Le.prototype._centroid=!1;Le.prototype.nodeType="Shape";(0,Kpe._registerNode)(Le);Le.prototype.eventListeners={};Le.prototype.on.call(Le.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Zpe);Le.prototype.on.call(Le.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",efe);Le.prototype.on.call(Le.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",tfe);Le.prototype.on.call(Le.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",rfe);Le.prototype.on.call(Le.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",nfe);tt.Factory.addGetterSetter(Le,"stroke",void 0,(0,Xn.getStringOrGradientValidator)());tt.Factory.addGetterSetter(Le,"strokeWidth",2,(0,Xn.getNumberValidator)());tt.Factory.addGetterSetter(Le,"fillAfterStrokeEnabled",!1);tt.Factory.addGetterSetter(Le,"hitStrokeWidth","auto",(0,Xn.getNumberOrAutoValidator)());tt.Factory.addGetterSetter(Le,"strokeHitEnabled",!0,(0,Xn.getBooleanValidator)());tt.Factory.addGetterSetter(Le,"perfectDrawEnabled",!0,(0,Xn.getBooleanValidator)());tt.Factory.addGetterSetter(Le,"shadowForStrokeEnabled",!0,(0,Xn.getBooleanValidator)());tt.Factory.addGetterSetter(Le,"lineJoin");tt.Factory.addGetterSetter(Le,"lineCap");tt.Factory.addGetterSetter(Le,"sceneFunc");tt.Factory.addGetterSetter(Le,"hitFunc");tt.Factory.addGetterSetter(Le,"dash");tt.Factory.addGetterSetter(Le,"dashOffset",0,(0,Xn.getNumberValidator)());tt.Factory.addGetterSetter(Le,"shadowColor",void 0,(0,Xn.getStringValidator)());tt.Factory.addGetterSetter(Le,"shadowBlur",0,(0,Xn.getNumberValidator)());tt.Factory.addGetterSetter(Le,"shadowOpacity",1,(0,Xn.getNumberValidator)());tt.Factory.addComponentsGetterSetter(Le,"shadowOffset",["x","y"]);tt.Factory.addGetterSetter(Le,"shadowOffsetX",0,(0,Xn.getNumberValidator)());tt.Factory.addGetterSetter(Le,"shadowOffsetY",0,(0,Xn.getNumberValidator)());tt.Factory.addGetterSetter(Le,"fillPatternImage");tt.Factory.addGetterSetter(Le,"fill",void 0,(0,Xn.getStringOrGradientValidator)());tt.Factory.addGetterSetter(Le,"fillPatternX",0,(0,Xn.getNumberValidator)());tt.Factory.addGetterSetter(Le,"fillPatternY",0,(0,Xn.getNumberValidator)());tt.Factory.addGetterSetter(Le,"fillLinearGradientColorStops");tt.Factory.addGetterSetter(Le,"strokeLinearGradientColorStops");tt.Factory.addGetterSetter(Le,"fillRadialGradientStartRadius",0);tt.Factory.addGetterSetter(Le,"fillRadialGradientEndRadius",0);tt.Factory.addGetterSetter(Le,"fillRadialGradientColorStops");tt.Factory.addGetterSetter(Le,"fillPatternRepeat","repeat");tt.Factory.addGetterSetter(Le,"fillEnabled",!0);tt.Factory.addGetterSetter(Le,"strokeEnabled",!0);tt.Factory.addGetterSetter(Le,"shadowEnabled",!0);tt.Factory.addGetterSetter(Le,"dashEnabled",!0);tt.Factory.addGetterSetter(Le,"strokeScaleEnabled",!0);tt.Factory.addGetterSetter(Le,"fillPriority","color");tt.Factory.addComponentsGetterSetter(Le,"fillPatternOffset",["x","y"]);tt.Factory.addGetterSetter(Le,"fillPatternOffsetX",0,(0,Xn.getNumberValidator)());tt.Factory.addGetterSetter(Le,"fillPatternOffsetY",0,(0,Xn.getNumberValidator)());tt.Factory.addComponentsGetterSetter(Le,"fillPatternScale",["x","y"]);tt.Factory.addGetterSetter(Le,"fillPatternScaleX",1,(0,Xn.getNumberValidator)());tt.Factory.addGetterSetter(Le,"fillPatternScaleY",1,(0,Xn.getNumberValidator)());tt.Factory.addComponentsGetterSetter(Le,"fillLinearGradientStartPoint",["x","y"]);tt.Factory.addComponentsGetterSetter(Le,"strokeLinearGradientStartPoint",["x","y"]);tt.Factory.addGetterSetter(Le,"fillLinearGradientStartPointX",0);tt.Factory.addGetterSetter(Le,"strokeLinearGradientStartPointX",0);tt.Factory.addGetterSetter(Le,"fillLinearGradientStartPointY",0);tt.Factory.addGetterSetter(Le,"strokeLinearGradientStartPointY",0);tt.Factory.addComponentsGetterSetter(Le,"fillLinearGradientEndPoint",["x","y"]);tt.Factory.addComponentsGetterSetter(Le,"strokeLinearGradientEndPoint",["x","y"]);tt.Factory.addGetterSetter(Le,"fillLinearGradientEndPointX",0);tt.Factory.addGetterSetter(Le,"strokeLinearGradientEndPointX",0);tt.Factory.addGetterSetter(Le,"fillLinearGradientEndPointY",0);tt.Factory.addGetterSetter(Le,"strokeLinearGradientEndPointY",0);tt.Factory.addComponentsGetterSetter(Le,"fillRadialGradientStartPoint",["x","y"]);tt.Factory.addGetterSetter(Le,"fillRadialGradientStartPointX",0);tt.Factory.addGetterSetter(Le,"fillRadialGradientStartPointY",0);tt.Factory.addComponentsGetterSetter(Le,"fillRadialGradientEndPoint",["x","y"]);tt.Factory.addGetterSetter(Le,"fillRadialGradientEndPointX",0);tt.Factory.addGetterSetter(Le,"fillRadialGradientEndPointY",0);tt.Factory.addGetterSetter(Le,"fillPatternRotation",0);tt.Factory.addGetterSetter(Le,"fillRule",void 0,(0,Xn.getStringValidator)());tt.Factory.backCompat(Le,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})});var jR=Y(UT=>{"use strict";Object.defineProperty(UT,"__esModule",{value:!0});UT.Layer=void 0;var Gu=hn(),BR=Xv(),Ih=wn(),WR=qt(),XW=Vv(),ife=Kt(),ofe=li(),sfe=Ht(),afe="#",lfe="beforeDraw",ufe="draw",JW=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],cfe=JW.length,kd=class extends BR.Container{constructor(e){super(e),this.canvas=new XW.SceneCanvas,this.hitCanvas=new XW.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var r=this.getStage();return r&&r.content&&(r.content.removeChild(this.getNativeCanvasElement()),e<r.children.length-1?r.content.insertBefore(this.getNativeCanvasElement(),r.children[e+1].getCanvas()._canvas):r.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Ih.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=Ih.Node.prototype.moveUp.call(this);if(!e)return!1;var r=this.getStage();return!r||!r.content?!1:(r.content.removeChild(this.getNativeCanvasElement()),this.index<r.children.length-1?r.content.insertBefore(this.getNativeCanvasElement(),r.children[this.index+1].getCanvas()._canvas):r.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Ih.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var r=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),r[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Ih.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var r=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),r[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return Ih.Node.prototype.remove.call(this),e&&e.parentNode&&Gu.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:r}){return this.canvas.setSize(e,r),this.hitCanvas.setSize(e,r),this._setSmoothEnabled(),this}_validateAdd(e){var r=e.getType();r!=="Group"&&r!=="Shape"&&Gu.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),Ih.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Gu.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Gu.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Gu.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var r=1,n=!1;;){for(let i=0;i<cfe;i++){let o=JW[i],s=this._getIntersection({x:e.x+o.x*r,y:e.y+o.y*r}),a=s.shape;if(a)return a;if(n=!!s.antialiased,!s.antialiased)break}if(n)r+=1;else return null}}_getIntersection(e){let r=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(e.x*r),Math.round(e.y*r),1,1).data,i=n[3];if(i===255){let o=Gu.Util._rgbToHex(n[0],n[1],n[2]),s=ofe.shapes[afe+o];return s?{shape:s}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(e,r){var n=this.getLayer(),i=e||n&&n.getCanvas();return this._fire(lfe,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),BR.Container.prototype.drawScene.call(this,i,r),this._fire(ufe,{node:this}),this}drawHit(e,r){var n=this.getLayer(),i=e||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),BR.Container.prototype.drawHit.call(this,i,r),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){Gu.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return Gu.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,r=!!this.hitCanvas._canvas.parentNode;r?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return Gu.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};UT.Layer=kd;kd.prototype.nodeType="Layer";(0,sfe._registerNode)(kd);WR.Factory.addGetterSetter(kd,"imageSmoothingEnabled",!0);WR.Factory.addGetterSetter(kd,"clearBeforeDraw",!0);WR.Factory.addGetterSetter(kd,"hitGraphEnabled",!0,(0,ife.getBooleanValidator)())});var QW=Y(BT=>{"use strict";Object.defineProperty(BT,"__esModule",{value:!0});BT.FastLayer=void 0;var dfe=hn(),pfe=jR(),ffe=Ht(),r0=class extends pfe.Layer{constructor(e){super(e),this.listening(!1),dfe.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};BT.FastLayer=r0;r0.prototype.nodeType="FastLayer";(0,ffe._registerNode)(r0)});var jT=Y(WT=>{"use strict";Object.defineProperty(WT,"__esModule",{value:!0});WT.Group=void 0;var mfe=hn(),hfe=Xv(),gfe=Ht(),n0=class extends hfe.Container{_validateAdd(e){var r=e.getType();r!=="Group"&&r!=="Shape"&&mfe.Util.throw("You may only add groups and shapes to groups.")}};WT.Group=n0;n0.prototype.nodeType="Group";(0,gfe._registerNode)(n0)});var $T=Y(zT=>{"use strict";Object.defineProperty(zT,"__esModule",{value:!0});zT.Animation=void 0;var zR=Ht(),ZW=hn(),$R=function(){return zR.glob.performance&&zR.glob.performance.now?function(){return zR.glob.performance.now()}:function(){return new Date().getTime()}}(),kh=class t{constructor(e,r){this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:$R(),frameRate:0},this.func=e,this.setLayers(r)}setLayers(e){let r=[];return e&&(r=Array.isArray(e)?e:[e]),this.layers=r,this}getLayers(){return this.layers}addLayer(e){let r=this.layers,n=r.length;for(let i=0;i<n;i++)if(r[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){let r=t.animations,n=r.length;for(let i=0;i<n;i++)if(r[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=$R(),t._addAnimation(this),this}stop(){return t._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){let r=e.id,n=this.animations,i=n.length;for(let o=0;o<i;o++)if(n[o].id===r){this.animations.splice(o,1);break}}static _runFrames(){let e={},r=this.animations;for(let n=0;n<r.length;n++){let i=r[n],o=i.layers,s=i.func;i._updateFrameObject($R());let a=o.length,l;if(s?l=s.call(i,i.frame)!==!1:l=!0,!!l)for(let c=0;c<a;c++){let p=o[c];p._id!==void 0&&(e[p._id]=p)}}for(let n in e)e.hasOwnProperty(n)&&e[n].batchDraw()}static _animationLoop(){let e=t;e.animations.length?(e._runFrames(),ZW.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,ZW.Util.requestAnimFrame(this._animationLoop))}};zT.Animation=kh;kh.animations=[];kh.animIdCounter=0;kh.animRunning=!1});var nj=Y(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.Easings=Wl.Tween=void 0;var Vu=hn(),yfe=$T(),vfe=wn(),_fe=Ht(),bfe={node:1,duration:1,easing:1,onFinish:1,yoyo:1},xfe=1,ej=2,tj=3,Tfe=0,rj=["fill","stroke","shadowColor"],HR=class{constructor(e,r,n,i,o,s,a){this.prop=e,this.propFunc=r,this.begin=i,this._pos=i,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=o-this.begin,this.pause()}fire(e){var r=this[e];r&&r()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=ej,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=tj,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===ej?this.setTime(e):this.state===tj&&this.setTime(this.duration-e)}pause(){this.state=xfe,this.fire("onPause")}getTimer(){return new Date().getTime()}},Nh=class t{constructor(e){var r=this,n=e.node,i=n._id,o,s=e.easing||Wl.Easings.Linear,a=!!e.yoyo,l;typeof e.duration>"u"?o=.3:e.duration===0?o=.001:o=e.duration,this.node=n,this._id=Tfe++;var c=n.getLayer()||(n instanceof _fe.Konva.Stage?n.getLayers():null);c||Vu.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new yfe.Animation(function(){r.tween.onEnterFrame()},c),this.tween=new HR(l,function(p){r._tweenFunc(p)},s,0,1,o*1e3,a),this._addListeners(),t.attrs[i]||(t.attrs[i]={}),t.attrs[i][this._id]||(t.attrs[i][this._id]={}),t.tweens[i]||(t.tweens[i]={});for(l in e)bfe[l]===void 0&&this._addAttr(l,e[l]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,r){var n=this.node,i=n._id,o,s,a,l,c,p,f,m;if(a=t.tweens[i][e],a&&delete t.attrs[i][a][e],o=n.getAttr(e),Vu.Util._isArray(r))if(s=[],c=Math.max(r.length,o.length),e==="points"&&r.length!==o.length&&(r.length>o.length?(f=o,o=Vu.Util._prepareArrayForTween(o,r,n.closed())):(p=r,r=Vu.Util._prepareArrayForTween(r,o,n.closed()))),e.indexOf("fill")===0)for(l=0;l<c;l++)if(l%2===0)s.push(r[l]-o[l]);else{var g=Vu.Util.colorToRGBA(o[l]);m=Vu.Util.colorToRGBA(r[l]),o[l]=g,s.push({r:m.r-g.r,g:m.g-g.g,b:m.b-g.b,a:m.a-g.a})}else for(l=0;l<c;l++)s.push(r[l]-o[l]);else rj.indexOf(e)!==-1?(o=Vu.Util.colorToRGBA(o),m=Vu.Util.colorToRGBA(r),s={r:m.r-o.r,g:m.g-o.g,b:m.b-o.b,a:m.a-o.a}):s=r-o;t.attrs[i][this._id][e]={start:o,diff:s,end:r,trueEnd:p,trueStart:f},t.tweens[i][e]=this._id}_tweenFunc(e){var r=this.node,n=t.attrs[r._id][this._id],i,o,s,a,l,c,p,f;for(i in n){if(o=n[i],s=o.start,a=o.diff,f=o.end,Vu.Util._isArray(s))if(l=[],p=Math.max(s.length,f.length),i.indexOf("fill")===0)for(c=0;c<p;c++)c%2===0?l.push((s[c]||0)+a[c]*e):l.push("rgba("+Math.round(s[c].r+a[c].r*e)+","+Math.round(s[c].g+a[c].g*e)+","+Math.round(s[c].b+a[c].b*e)+","+(s[c].a+a[c].a*e)+")");else for(c=0;c<p;c++)l.push((s[c]||0)+a[c]*e);else rj.indexOf(i)!==-1?l="rgba("+Math.round(s.r+a.r*e)+","+Math.round(s.g+a.g*e)+","+Math.round(s.b+a.b*e)+","+(s.a+a.a*e)+")":l=s+a*e;r.setAttr(i,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,r=t.attrs[e._id][this._id];r.points&&r.points.trueEnd&&e.setAttr("points",r.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,r=t.attrs[e._id][this._id];r.points&&r.points.trueStart&&e.points(r.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,r=this._id,n=t.tweens[e],i;this.pause();for(i in n)delete t.tweens[e][i];delete t.attrs[e][r]}};Wl.Tween=Nh;Nh.attrs={};Nh.tweens={};vfe.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};var r=new Nh(t);r.play()};Wl.Easings={BackEaseIn(t,e,r,n){var i=1.70158;return r*(t/=n)*t*((i+1)*t-i)+e},BackEaseOut(t,e,r,n){var i=1.70158;return r*((t=t/n-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut(t,e,r,n){var i=1.70158;return(t/=n/2)<1?r/2*(t*t*(((i*=1.525)+1)*t-i))+e:r/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},ElasticEaseIn(t,e,r,n,i,o){var s=0;return t===0?e:(t/=n)===1?e+r:(o||(o=n*.3),!i||i<Math.abs(r)?(i=r,s=o/4):s=o/(2*Math.PI)*Math.asin(r/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/o))+e)},ElasticEaseOut(t,e,r,n,i,o){var s=0;return t===0?e:(t/=n)===1?e+r:(o||(o=n*.3),!i||i<Math.abs(r)?(i=r,s=o/4):s=o/(2*Math.PI)*Math.asin(r/i),i*Math.pow(2,-10*t)*Math.sin((t*n-s)*(2*Math.PI)/o)+r+e)},ElasticEaseInOut(t,e,r,n,i,o){var s=0;return t===0?e:(t/=n/2)===2?e+r:(o||(o=n*(.3*1.5)),!i||i<Math.abs(r)?(i=r,s=o/4):s=o/(2*Math.PI)*Math.asin(r/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/o))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/o)*.5+r+e)},BounceEaseOut(t,e,r,n){return(t/=n)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,e,r,n){return r-Wl.Easings.BounceEaseOut(n-t,0,r,n)+e},BounceEaseInOut(t,e,r,n){return t<n/2?Wl.Easings.BounceEaseIn(t*2,0,r,n)*.5+e:Wl.Easings.BounceEaseOut(t*2-n,0,r,n)*.5+r*.5+e},EaseIn(t,e,r,n){return r*(t/=n)*t+e},EaseOut(t,e,r,n){return-r*(t/=n)*(t-2)+e},EaseInOut(t,e,r,n){return(t/=n/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,r,n){return r*(t/=n)*t*t*t*t+e},StrongEaseOut(t,e,r,n){return r*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,r,n){return(t/=n/2)<1?r/2*t*t*t*t*t+e:r/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,r,n){return r*t/n+e}}});var HT=Y(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});Ah.Konva=void 0;var wfe=Ht(),qR=hn(),Sfe=wn(),Efe=Xv(),ij=$W(),Cfe=jR(),Dfe=QW(),Ife=jT(),kfe=ET(),oj=li(),Nfe=$T(),sj=nj(),Afe=ER(),Ofe=Vv();Ah.Konva=qR.Util._assign(wfe.Konva,{Util:qR.Util,Transform:qR.Transform,Node:Sfe.Node,Container:Efe.Container,Stage:ij.Stage,stages:ij.stages,Layer:Cfe.Layer,FastLayer:Dfe.FastLayer,Group:Ife.Group,DD:kfe.DD,Shape:oj.Shape,shapes:oj.shapes,Animation:Nfe.Animation,Tween:sj.Tween,Easings:sj.Easings,Context:Afe.Context,Canvas:Ofe.Canvas});Ah.default=Ah.Konva});var lj=Y(VT=>{"use strict";Object.defineProperty(VT,"__esModule",{value:!0});VT.Arc=void 0;var qT=qt(),Rfe=li(),aj=Ht(),GT=Kt(),Pfe=Ht(),tl=class extends Rfe.Shape{_sceneFunc(e){var r=aj.Konva.getAngle(this.angle()),n=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,r,n),e.arc(0,0,this.innerRadius(),r,0,!n),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){let e=this.innerRadius(),r=this.outerRadius(),n=this.clockwise(),i=aj.Konva.getAngle(n?360-this.angle():this.angle()),o=Math.cos(Math.min(i,Math.PI)),s=1,a=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),l=Math.sin(Math.min(i,Math.PI/2)),c=o*(o>0?e:r),p=s*(s>0?r:e),f=a*(a>0?e:r),m=l*(l>0?r:e);return{x:c,y:n?-1*m:f,width:p-c,height:m-f}}};VT.Arc=tl;tl.prototype._centroid=!0;tl.prototype.className="Arc";tl.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Pfe._registerNode)(tl);qT.Factory.addGetterSetter(tl,"innerRadius",0,(0,GT.getNumberValidator)());qT.Factory.addGetterSetter(tl,"outerRadius",0,(0,GT.getNumberValidator)());qT.Factory.addGetterSetter(tl,"angle",0,(0,GT.getNumberValidator)());qT.Factory.addGetterSetter(tl,"clockwise",!1,(0,GT.getBooleanValidator)())});var VR=Y(YT=>{"use strict";Object.defineProperty(YT,"__esModule",{value:!0});YT.Line=void 0;var KT=qt(),Lfe=li(),cj=Kt(),Mfe=Ht();function GR(t,e,r,n,i,o,s){var a=Math.sqrt(Math.pow(r-t,2)+Math.pow(n-e,2)),l=Math.sqrt(Math.pow(i-r,2)+Math.pow(o-n,2)),c=s*a/(a+l),p=s*l/(a+l),f=r-c*(i-t),m=n-c*(o-e),g=r+p*(i-t),v=n+p*(o-e);return[f,m,g,v]}function uj(t,e){var r=t.length,n=[],i,o;for(i=2;i<r-2;i+=2)o=GR(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e),!isNaN(o[0])&&(n.push(o[0]),n.push(o[1]),n.push(t[i]),n.push(t[i+1]),n.push(o[2]),n.push(o[3]));return n}var jl=class extends Lfe.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var r=this.points(),n=r.length,i=this.tension(),o=this.closed(),s=this.bezier(),a,l,c;if(n){if(e.beginPath(),e.moveTo(r[0],r[1]),i!==0&&n>4){for(a=this.getTensionPoints(),l=a.length,c=o?0:4,o||e.quadraticCurveTo(a[0],a[1],a[2],a[3]);c<l-2;)e.bezierCurveTo(a[c++],a[c++],a[c++],a[c++],a[c++],a[c++]);o||e.quadraticCurveTo(a[l-2],a[l-1],r[n-2],r[n-1])}else if(s)for(c=2;c<n;)e.bezierCurveTo(r[c++],r[c++],r[c++],r[c++],r[c++],r[c++]);else for(c=2;c<n;c+=2)e.lineTo(r[c],r[c+1]);o?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():uj(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),r=e.length,n=this.tension(),i=GR(e[r-2],e[r-1],e[0],e[1],e[2],e[3],n),o=GR(e[r-4],e[r-3],e[r-2],e[r-1],e[0],e[1],n),s=uj(e,n),a=[i[2],i[3]].concat(s).concat([o[0],o[1],e[r-2],e[r-1],o[2],o[3],i[0],i[1],e[0],e[1]]);return a}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var r=e[0],n=e[0],i=e[1],o=e[1],s,a,l=0;l<e.length/2;l++)s=e[l*2],a=e[l*2+1],r=Math.min(r,s),n=Math.max(n,s),i=Math.min(i,a),o=Math.max(o,a);return{x:r,y:i,width:n-r,height:o-i}}};YT.Line=jl;jl.prototype.className="Line";jl.prototype._attrsAffectingSize=["points","bezier","tension"];(0,Mfe._registerNode)(jl);KT.Factory.addGetterSetter(jl,"closed",!1);KT.Factory.addGetterSetter(jl,"bezier",!1);KT.Factory.addGetterSetter(jl,"tension",0,(0,cj.getNumberValidator)());KT.Factory.addGetterSetter(jl,"points",[],(0,cj.getNumberArrayValidator)())});var dj=Y(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.t2length=Wi.getQuadraticArcLength=Wi.getCubicArcLength=Wi.binomialCoefficients=Wi.cValues=Wi.tValues=void 0;Wi.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]];Wi.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]];Wi.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];var Ffe=(t,e,r)=>{let n,i,o;n=r/2,i=0;for(let a=0;a<20;a++)o=n*Wi.tValues[20][a]+n,i+=Wi.cValues[20][a]*Bfe(t,e,o);return n*i};Wi.getCubicArcLength=Ffe;var Ufe=(t,e,r)=>{r===void 0&&(r=1);let n=t[0]-2*t[1]+t[2],i=e[0]-2*e[1]+e[2],o=2*t[1]-2*t[0],s=2*e[1]-2*e[0],a=4*(n*n+i*i),l=4*(n*o+i*s),c=o*o+s*s;if(a===0)return r*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));let p=l/(2*a),f=c/a,m=r+p,g=f-p*p,v=m*m+g>0?Math.sqrt(m*m+g):0,_=p*p+g>0?Math.sqrt(p*p+g):0,S=p+Math.sqrt(p*p+g)!==0?g*Math.log(Math.abs((m+v)/(p+_))):0;return Math.sqrt(a)/2*(m*v-p*_+S)};Wi.getQuadraticArcLength=Ufe;function Bfe(t,e,r){let n=KR(1,r,t),i=KR(1,r,e),o=n*n+i*i;return Math.sqrt(o)}var KR=(t,e,r)=>{let n=r.length-1,i,o;if(n===0)return 0;if(t===0){o=0;for(let s=0;s<=n;s++)o+=Wi.binomialCoefficients[n][s]*Math.pow(1-e,n-s)*Math.pow(e,s)*r[s];return o}else{i=new Array(n);for(let s=0;s<n;s++)i[s]=n*(r[s+1]-r[s]);return KR(t-1,e,i)}},Wfe=(t,e,r)=>{let n=1,i=t/e,o=(t-r(i))/e,s=0;for(;n>.001;){let a=r(i+o),l=Math.abs(t-a)/e;if(l<n)n=l,i+=o;else{let c=r(i-o),p=Math.abs(t-c)/e;p<n?(n=p,i-=o):o/=2}if(s++,s>500)break}return i};Wi.t2length=Wfe});var JT=Y(XT=>{"use strict";Object.defineProperty(XT,"__esModule",{value:!0});XT.Path=void 0;var jfe=qt(),zfe=li(),$fe=Ht(),Oh=dj(),yf=class t extends zfe.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=t.parsePathData(this.data()),this.pathLength=t.getPathLength(this.dataArray)}_sceneFunc(e){var r=this.dataArray;e.beginPath();for(var n=!1,i=0;i<r.length;i++){var o=r[i].command,s=r[i].points;switch(o){case"L":e.lineTo(s[0],s[1]);break;case"M":e.moveTo(s[0],s[1]);break;case"C":e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":e.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":var a=s[0],l=s[1],c=s[2],p=s[3],f=s[4],m=s[5],g=s[6],v=s[7],_=c>p?c:p,S=c>p?1:c/p,T=c>p?p/c:1;e.translate(a,l),e.rotate(g),e.scale(S,T),e.arc(0,0,_,f,f+m,1-v),e.scale(1/S,1/T),e.rotate(-g),e.translate(-a,-l);break;case"z":n=!0,e.closePath();break}}!n&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(c){if(c.command==="A"){var p=c.points[4],f=c.points[5],m=c.points[4]+f,g=Math.PI/180;if(Math.abs(p-m)<g&&(g=Math.abs(p-m)),f<0)for(let v=p-g;v>m;v-=g){let _=t.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],v,0);e.push(_.x,_.y)}else for(let v=p+g;v<m;v+=g){let _=t.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],v,0);e.push(_.x,_.y)}}else if(c.command==="C")for(let v=0;v<=1;v+=.01){let _=t.getPointOnCubicBezier(v,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);e.push(_.x,_.y)}else e=e.concat(c.points)});for(var r=e[0],n=e[0],i=e[1],o=e[1],s,a,l=0;l<e.length/2;l++)s=e[l*2],a=e[l*2+1],isNaN(s)||(r=Math.min(r,s),n=Math.max(n,s)),isNaN(a)||(i=Math.min(i,a),o=Math.max(o,a));return{x:r,y:i,width:n-r,height:o-i}}getLength(){return this.pathLength}getPointAtLength(e){return t.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,r,n,i){return Math.sqrt((n-e)*(n-e)+(i-r)*(i-r))}static getPathLength(e){let r=0;for(var n=0;n<e.length;++n)r+=e[n].pathLength;return r}static getPointAtLengthOfDataArray(e,r){var n,i=0,o=r.length;if(!o)return null;for(;i<o&&e>r[i].pathLength;)e-=r[i].pathLength,++i;if(i===o)return n=r[i-1].points.slice(-2),{x:n[0],y:n[1]};if(e<.01)return n=r[i].points.slice(0,2),{x:n[0],y:n[1]};var s=r[i],a=s.points;switch(s.command){case"L":return t.getPointOnLine(e,s.start.x,s.start.y,a[0],a[1]);case"C":return t.getPointOnCubicBezier((0,Oh.t2length)(e,t.getPathLength(r),_=>(0,Oh.getCubicArcLength)([s.start.x,a[0],a[2],a[4]],[s.start.y,a[1],a[3],a[5]],_)),s.start.x,s.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return t.getPointOnQuadraticBezier((0,Oh.t2length)(e,t.getPathLength(r),_=>(0,Oh.getQuadraticArcLength)([s.start.x,a[0],a[2]],[s.start.y,a[1],a[3]],_)),s.start.x,s.start.y,a[0],a[1],a[2],a[3]);case"A":var l=a[0],c=a[1],p=a[2],f=a[3],m=a[4],g=a[5],v=a[6];return m+=g*e/s.pathLength,t.getPointOnEllipticalArc(l,c,p,f,m,v)}return null}static getPointOnLine(e,r,n,i,o,s,a){s===void 0&&(s=r),a===void 0&&(a=n);var l=(o-n)/(i-r+1e-8),c=Math.sqrt(e*e/(1+l*l));i<r&&(c*=-1);var p=l*c,f;if(i===r)f={x:s,y:a+p};else if((a-n)/(s-r+1e-8)===l)f={x:s+c,y:a+p};else{var m,g,v=this.getLineLength(r,n,i,o),_=(s-r)*(i-r)+(a-n)*(o-n);_=_/(v*v),m=r+_*(i-r),g=n+_*(o-n);var S=this.getLineLength(s,a,m,g),T=Math.sqrt(e*e-S*S);c=Math.sqrt(T*T/(1+l*l)),i<r&&(c*=-1),p=l*c,f={x:m+c,y:g+p}}return f}static getPointOnCubicBezier(e,r,n,i,o,s,a,l,c){function p(S){return S*S*S}function f(S){return 3*S*S*(1-S)}function m(S){return 3*S*(1-S)*(1-S)}function g(S){return(1-S)*(1-S)*(1-S)}var v=l*p(e)+s*f(e)+i*m(e)+r*g(e),_=c*p(e)+a*f(e)+o*m(e)+n*g(e);return{x:v,y:_}}static getPointOnQuadraticBezier(e,r,n,i,o,s,a){function l(g){return g*g}function c(g){return 2*g*(1-g)}function p(g){return(1-g)*(1-g)}var f=s*l(e)+i*c(e)+r*p(e),m=a*l(e)+o*c(e)+n*p(e);return{x:f,y:m}}static getPointOnEllipticalArc(e,r,n,i,o,s){var a=Math.cos(s),l=Math.sin(s),c={x:n*Math.cos(o),y:i*Math.sin(o)};return{x:e+(c.x*a-c.y*l),y:r+(c.x*l+c.y*a)}}static parsePathData(e){if(!e)return[];var r=e,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];r=r.replace(new RegExp(" ","g"),",");for(var i=0;i<n.length;i++)r=r.replace(new RegExp(n[i],"g"),"|"+n[i]);var o=r.split("|"),s=[],a=[],l=0,c=0,p=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,f;for(i=1;i<o.length;i++){var m=o[i],g=m.charAt(0);for(m=m.slice(1),a.length=0;f=p.exec(m);)a.push(f[0]);for(var v=[],_=0,S=a.length;_<S;_++){if(a[_]==="00"){v.push(0,0);continue}var T=parseFloat(a[_]);isNaN(T)?v.push(0):v.push(T)}for(;v.length>0&&!isNaN(v[0]);){var w="",E=[],I=l,N=c,C,k,U,$,G,K,X,te,ne,H;switch(g){case"l":l+=v.shift(),c+=v.shift(),w="L",E.push(l,c);break;case"L":l=v.shift(),c=v.shift(),E.push(l,c);break;case"m":var re=v.shift(),W=v.shift();if(l+=re,c+=W,w="M",s.length>2&&s[s.length-1].command==="z"){for(var q=s.length-2;q>=0;q--)if(s[q].command==="M"){l=s[q].points[0]+re,c=s[q].points[1]+W;break}}E.push(l,c),g="l";break;case"M":l=v.shift(),c=v.shift(),w="M",E.push(l,c),g="L";break;case"h":l+=v.shift(),w="L",E.push(l,c);break;case"H":l=v.shift(),w="L",E.push(l,c);break;case"v":c+=v.shift(),w="L",E.push(l,c);break;case"V":c=v.shift(),w="L",E.push(l,c);break;case"C":E.push(v.shift(),v.shift(),v.shift(),v.shift()),l=v.shift(),c=v.shift(),E.push(l,c);break;case"c":E.push(l+v.shift(),c+v.shift(),l+v.shift(),c+v.shift()),l+=v.shift(),c+=v.shift(),w="C",E.push(l,c);break;case"S":k=l,U=c,C=s[s.length-1],C.command==="C"&&(k=l+(l-C.points[2]),U=c+(c-C.points[3])),E.push(k,U,v.shift(),v.shift()),l=v.shift(),c=v.shift(),w="C",E.push(l,c);break;case"s":k=l,U=c,C=s[s.length-1],C.command==="C"&&(k=l+(l-C.points[2]),U=c+(c-C.points[3])),E.push(k,U,l+v.shift(),c+v.shift()),l+=v.shift(),c+=v.shift(),w="C",E.push(l,c);break;case"Q":E.push(v.shift(),v.shift()),l=v.shift(),c=v.shift(),E.push(l,c);break;case"q":E.push(l+v.shift(),c+v.shift()),l+=v.shift(),c+=v.shift(),w="Q",E.push(l,c);break;case"T":k=l,U=c,C=s[s.length-1],C.command==="Q"&&(k=l+(l-C.points[0]),U=c+(c-C.points[1])),l=v.shift(),c=v.shift(),w="Q",E.push(k,U,l,c);break;case"t":k=l,U=c,C=s[s.length-1],C.command==="Q"&&(k=l+(l-C.points[0]),U=c+(c-C.points[1])),l+=v.shift(),c+=v.shift(),w="Q",E.push(k,U,l,c);break;case"A":$=v.shift(),G=v.shift(),K=v.shift(),X=v.shift(),te=v.shift(),ne=l,H=c,l=v.shift(),c=v.shift(),w="A",E=this.convertEndpointToCenterParameterization(ne,H,l,c,X,te,$,G,K);break;case"a":$=v.shift(),G=v.shift(),K=v.shift(),X=v.shift(),te=v.shift(),ne=l,H=c,l+=v.shift(),c+=v.shift(),w="A",E=this.convertEndpointToCenterParameterization(ne,H,l,c,X,te,$,G,K);break}s.push({command:w||g,points:E,start:{x:I,y:N},pathLength:this.calcLength(I,N,w||g,E)})}(g==="z"||g==="Z")&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(e,r,n,i){var o,s,a,l,c=t;switch(n){case"L":return c.getLineLength(e,r,i[0],i[1]);case"C":return(0,Oh.getCubicArcLength)([e,i[0],i[2],i[4]],[r,i[1],i[3],i[5]],1);case"Q":return(0,Oh.getQuadraticArcLength)([e,i[0],i[2]],[r,i[1],i[3]],1);case"A":o=0;var p=i[4],f=i[5],m=i[4]+f,g=Math.PI/180;if(Math.abs(p-m)<g&&(g=Math.abs(p-m)),s=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],p,0),f<0)for(l=p-g;l>m;l-=g)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),o+=c.getLineLength(s.x,s.y,a.x,a.y),s=a;else for(l=p+g;l<m;l+=g)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),o+=c.getLineLength(s.x,s.y,a.x,a.y),s=a;return a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],m,0),o+=c.getLineLength(s.x,s.y,a.x,a.y),o}return 0}static convertEndpointToCenterParameterization(e,r,n,i,o,s,a,l,c){var p=c*(Math.PI/180),f=Math.cos(p)*(e-n)/2+Math.sin(p)*(r-i)/2,m=-1*Math.sin(p)*(e-n)/2+Math.cos(p)*(r-i)/2,g=f*f/(a*a)+m*m/(l*l);g>1&&(a*=Math.sqrt(g),l*=Math.sqrt(g));var v=Math.sqrt((a*a*(l*l)-a*a*(m*m)-l*l*(f*f))/(a*a*(m*m)+l*l*(f*f)));o===s&&(v*=-1),isNaN(v)&&(v=0);var _=v*a*m/l,S=v*-l*f/a,T=(e+n)/2+Math.cos(p)*_-Math.sin(p)*S,w=(r+i)/2+Math.sin(p)*_+Math.cos(p)*S,E=function(G){return Math.sqrt(G[0]*G[0]+G[1]*G[1])},I=function(G,K){return(G[0]*K[0]+G[1]*K[1])/(E(G)*E(K))},N=function(G,K){return(G[0]*K[1]<G[1]*K[0]?-1:1)*Math.acos(I(G,K))},C=N([1,0],[(f-_)/a,(m-S)/l]),k=[(f-_)/a,(m-S)/l],U=[(-1*f-_)/a,(-1*m-S)/l],$=N(k,U);return I(k,U)<=-1&&($=Math.PI),I(k,U)>=1&&($=0),s===0&&$>0&&($=$-2*Math.PI),s===1&&$<0&&($=$+2*Math.PI),[T,w,a,l,C,$,p,s]}};XT.Path=yf;yf.prototype.className="Path";yf.prototype._attrsAffectingSize=["data"];(0,$fe._registerNode)(yf);jfe.Factory.addGetterSetter(yf,"data")});var mj=Y(ZT=>{"use strict";Object.defineProperty(ZT,"__esModule",{value:!0});ZT.Arrow=void 0;var QT=qt(),Hfe=VR(),fj=Kt(),qfe=Ht(),pj=JT(),Ku=class extends Hfe.Line{_sceneFunc(e){super._sceneFunc(e);var r=Math.PI*2,n=this.points(),i=n,o=this.tension()!==0&&n.length>4;o&&(i=this.getTensionPoints());var s=this.pointerLength(),a=n.length,l,c;if(o){let m=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],n[a-2],n[a-1]],g=pj.Path.calcLength(i[i.length-4],i[i.length-3],"C",m),v=pj.Path.getPointOnQuadraticBezier(Math.min(1,1-s/g),m[0],m[1],m[2],m[3],m[4],m[5]);l=n[a-2]-v.x,c=n[a-1]-v.y}else l=n[a-2]-n[a-4],c=n[a-1]-n[a-3];var p=(Math.atan2(c,l)+r)%r,f=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(n[a-2],n[a-1]),e.rotate(p),e.moveTo(0,0),e.lineTo(-s,f/2),e.lineTo(-s,-f/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(n[0],n[1]),o?(l=(i[0]+i[2])/2-n[0],c=(i[1]+i[3])/2-n[1]):(l=n[2]-n[0],c=n[3]-n[1]),e.rotate((Math.atan2(-c,-l)+r)%r),e.moveTo(0,0),e.lineTo(-s,f/2),e.lineTo(-s,-f/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var r=this.dashEnabled();r&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),r&&(this.attrs.dashEnabled=!0)}getSelfRect(){let e=super.getSelfRect(),r=this.pointerWidth()/2;return{x:e.x-r,y:e.y-r,width:e.width+r*2,height:e.height+r*2}}};ZT.Arrow=Ku;Ku.prototype.className="Arrow";(0,qfe._registerNode)(Ku);QT.Factory.addGetterSetter(Ku,"pointerLength",10,(0,fj.getNumberValidator)());QT.Factory.addGetterSetter(Ku,"pointerWidth",10,(0,fj.getNumberValidator)());QT.Factory.addGetterSetter(Ku,"pointerAtBeginning",!1);QT.Factory.addGetterSetter(Ku,"pointerAtEnding",!0)});var hj=Y(ew=>{"use strict";Object.defineProperty(ew,"__esModule",{value:!0});ew.Circle=void 0;var Gfe=qt(),Vfe=li(),Kfe=Kt(),Yfe=Ht(),Nd=class extends Vfe.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};ew.Circle=Nd;Nd.prototype._centroid=!0;Nd.prototype.className="Circle";Nd.prototype._attrsAffectingSize=["radius"];(0,Yfe._registerNode)(Nd);Gfe.Factory.addGetterSetter(Nd,"radius",0,(0,Kfe.getNumberValidator)())});var yj=Y(tw=>{"use strict";Object.defineProperty(tw,"__esModule",{value:!0});tw.Ellipse=void 0;var YR=qt(),Xfe=li(),gj=Kt(),Jfe=Ht(),zl=class extends Xfe.Shape{_sceneFunc(e){var r=this.radiusX(),n=this.radiusY();e.beginPath(),e.save(),r!==n&&e.scale(1,n/r),e.arc(0,0,r,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}};tw.Ellipse=zl;zl.prototype.className="Ellipse";zl.prototype._centroid=!0;zl.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,Jfe._registerNode)(zl);YR.Factory.addComponentsGetterSetter(zl,"radius",["x","y"]);YR.Factory.addGetterSetter(zl,"radiusX",0,(0,gj.getNumberValidator)());YR.Factory.addGetterSetter(zl,"radiusY",0,(0,gj.getNumberValidator)())});var vj=Y(rw=>{"use strict";Object.defineProperty(rw,"__esModule",{value:!0});rw.Image=void 0;var XR=hn(),vf=qt(),Qfe=li(),Zfe=Ht(),i0=Kt(),ga=class t extends Qfe.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){let e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){let r=this.getWidth(),n=this.getHeight(),i=this.cornerRadius(),o=this.attrs.image,s;if(o){let a=this.attrs.cropWidth,l=this.attrs.cropHeight;a&&l?s=[o,this.cropX(),this.cropY(),a,l,0,0,r,n]:s=[o,0,0,r,n]}(this.hasFill()||this.hasStroke()||i)&&(e.beginPath(),i?XR.Util.drawRoundedRectPath(e,r,n,i):e.rect(0,0,r,n),e.closePath(),e.fillStrokeShape(this)),o&&(i&&e.clip(),e.drawImage.apply(e,s))}_hitFunc(e){var r=this.width(),n=this.height(),i=this.cornerRadius();e.beginPath(),i?XR.Util.drawRoundedRectPath(e,r,n,i):e.rect(0,0,r,n),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,r;return(e=this.attrs.width)!==null&&e!==void 0?e:(r=this.image())===null||r===void 0?void 0:r.width}getHeight(){var e,r;return(e=this.attrs.height)!==null&&e!==void 0?e:(r=this.image())===null||r===void 0?void 0:r.height}static fromURL(e,r,n=null){var i=XR.Util.createImageElement();i.onload=function(){var o=new t({image:i});r(o)},i.onerror=n,i.crossOrigin="Anonymous",i.src=e}};rw.Image=ga;ga.prototype.className="Image";(0,Zfe._registerNode)(ga);vf.Factory.addGetterSetter(ga,"cornerRadius",0,(0,i0.getNumberOrArrayOfNumbersValidator)(4));vf.Factory.addGetterSetter(ga,"image");vf.Factory.addComponentsGetterSetter(ga,"crop",["x","y","width","height"]);vf.Factory.addGetterSetter(ga,"cropX",0,(0,i0.getNumberValidator)());vf.Factory.addGetterSetter(ga,"cropY",0,(0,i0.getNumberValidator)());vf.Factory.addGetterSetter(ga,"cropWidth",0,(0,i0.getNumberValidator)());vf.Factory.addGetterSetter(ga,"cropHeight",0,(0,i0.getNumberValidator)())});var xj=Y(Rh=>{"use strict";Object.defineProperty(Rh,"__esModule",{value:!0});Rh.Tag=Rh.Label=void 0;var nw=qt(),eme=li(),tme=jT(),tP=Kt(),_j=Ht(),bj=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],rme="Change.konva",nme="none",JR="up",QR="right",ZR="down",eP="left",ime=bj.length,o0=class extends tme.Group{constructor(e){super(e),this.on("add.konva",function(r){this._addListeners(r.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var r=this,n,i=function(){r._sync()};for(n=0;n<ime;n++)e.on(bj[n]+rme,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),r=this.getTag(),n,i,o,s,a,l,c;if(e&&r){switch(n=e.width(),i=e.height(),o=r.pointerDirection(),s=r.pointerWidth(),c=r.pointerHeight(),a=0,l=0,o){case JR:a=n/2,l=-1*c;break;case QR:a=n+s,l=i/2;break;case ZR:a=n/2,l=i+c;break;case eP:a=-1*s,l=i/2;break}r.setAttrs({x:-1*a,y:-1*l,width:n,height:i}),e.setAttrs({x:-1*a,y:-1*l})}}};Rh.Label=o0;o0.prototype.className="Label";(0,_j._registerNode)(o0);var Yu=class extends eme.Shape{_sceneFunc(e){var r=this.width(),n=this.height(),i=this.pointerDirection(),o=this.pointerWidth(),s=this.pointerHeight(),a=this.cornerRadius();let l=0,c=0,p=0,f=0;typeof a=="number"?l=c=p=f=Math.min(a,r/2,n/2):(l=Math.min(a[0]||0,r/2,n/2),c=Math.min(a[1]||0,r/2,n/2),f=Math.min(a[2]||0,r/2,n/2),p=Math.min(a[3]||0,r/2,n/2)),e.beginPath(),e.moveTo(l,0),i===JR&&(e.lineTo((r-o)/2,0),e.lineTo(r/2,-1*s),e.lineTo((r+o)/2,0)),e.lineTo(r-c,0),e.arc(r-c,c,c,Math.PI*3/2,0,!1),i===QR&&(e.lineTo(r,(n-s)/2),e.lineTo(r+o,n/2),e.lineTo(r,(n+s)/2)),e.lineTo(r,n-f),e.arc(r-f,n-f,f,0,Math.PI/2,!1),i===ZR&&(e.lineTo((r+o)/2,n),e.lineTo(r/2,n+s),e.lineTo((r-o)/2,n)),e.lineTo(p,n),e.arc(p,n-p,p,Math.PI/2,Math.PI,!1),i===eP&&(e.lineTo(0,(n+s)/2),e.lineTo(-1*o,n/2),e.lineTo(0,(n-s)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,r=0,n=this.pointerWidth(),i=this.pointerHeight(),o=this.pointerDirection(),s=this.width(),a=this.height();return o===JR?(r-=i,a+=i):o===ZR?a+=i:o===eP?(e-=n*1.5,s+=n):o===QR&&(s+=n*1.5),{x:e,y:r,width:s,height:a}}};Rh.Tag=Yu;Yu.prototype.className="Tag";(0,_j._registerNode)(Yu);nw.Factory.addGetterSetter(Yu,"pointerDirection",nme);nw.Factory.addGetterSetter(Yu,"pointerWidth",0,(0,tP.getNumberValidator)());nw.Factory.addGetterSetter(Yu,"pointerHeight",0,(0,tP.getNumberValidator)());nw.Factory.addGetterSetter(Yu,"cornerRadius",0,(0,tP.getNumberOrArrayOfNumbersValidator)(4))});var rP=Y(iw=>{"use strict";Object.defineProperty(iw,"__esModule",{value:!0});iw.Rect=void 0;var ome=qt(),sme=li(),ame=Ht(),lme=hn(),ume=Kt(),Ph=class extends sme.Shape{_sceneFunc(e){var r=this.cornerRadius(),n=this.width(),i=this.height();e.beginPath(),r?lme.Util.drawRoundedRectPath(e,n,i,r):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}};iw.Rect=Ph;Ph.prototype.className="Rect";(0,ame._registerNode)(Ph);ome.Factory.addGetterSetter(Ph,"cornerRadius",0,(0,ume.getNumberOrArrayOfNumbersValidator)(4))});var Sj=Y(ow=>{"use strict";Object.defineProperty(ow,"__esModule",{value:!0});ow.RegularPolygon=void 0;var Tj=qt(),cme=li(),wj=Kt(),dme=Ht(),Xu=class extends cme.Shape{_sceneFunc(e){let r=this._getPoints();e.beginPath(),e.moveTo(r[0].x,r[0].y);for(var n=1;n<r.length;n++)e.lineTo(r[n].x,r[n].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){let e=this.attrs.sides,r=this.attrs.radius||0,n=[];for(var i=0;i<e;i++)n.push({x:r*Math.sin(i*2*Math.PI/e),y:-1*r*Math.cos(i*2*Math.PI/e)});return n}getSelfRect(){let e=this._getPoints();var r=e[0].x,n=e[0].y,i=e[0].x,o=e[0].y;return e.forEach(s=>{r=Math.min(r,s.x),n=Math.max(n,s.x),i=Math.min(i,s.y),o=Math.max(o,s.y)}),{x:r,y:i,width:n-r,height:o-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};ow.RegularPolygon=Xu;Xu.prototype.className="RegularPolygon";Xu.prototype._centroid=!0;Xu.prototype._attrsAffectingSize=["radius"];(0,dme._registerNode)(Xu);Tj.Factory.addGetterSetter(Xu,"radius",0,(0,wj.getNumberValidator)());Tj.Factory.addGetterSetter(Xu,"sides",0,(0,wj.getNumberValidator)())});var Ij=Y(sw=>{"use strict";Object.defineProperty(sw,"__esModule",{value:!0});sw.Ring=void 0;var Cj=qt(),pme=li(),Dj=Kt(),fme=Ht(),Ej=Math.PI*2,Ju=class extends pme.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,Ej,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),Ej,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};sw.Ring=Ju;Ju.prototype.className="Ring";Ju.prototype._centroid=!0;Ju.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,fme._registerNode)(Ju);Cj.Factory.addGetterSetter(Ju,"innerRadius",0,(0,Dj.getNumberValidator)());Cj.Factory.addGetterSetter(Ju,"outerRadius",0,(0,Dj.getNumberValidator)())});var Nj=Y(aw=>{"use strict";Object.defineProperty(aw,"__esModule",{value:!0});aw.Sprite=void 0;var _f=qt(),mme=li(),hme=$T(),kj=Kt(),gme=Ht(),ya=class extends mme.Shape{constructor(e){super(e),this._updated=!0,this.anim=new hme.Animation(()=>{var r=this._updated;return this._updated=!1,r}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var r=this.animation(),n=this.frameIndex(),i=n*4,o=this.animations()[r],s=this.frameOffsets(),a=o[i+0],l=o[i+1],c=o[i+2],p=o[i+3],f=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,c,p),e.closePath(),e.fillStrokeShape(this)),f)if(s){var m=s[r],g=n*2;e.drawImage(f,a,l,c,p,m[g+0],m[g+1],c,p)}else e.drawImage(f,a,l,c,p,0,0,c,p)}_hitFunc(e){var r=this.animation(),n=this.frameIndex(),i=n*4,o=this.animations()[r],s=this.frameOffsets(),a=o[i+2],l=o[i+3];if(e.beginPath(),s){var c=s[r],p=n*2;e.rect(c[p+0],c[p+1],a,l)}else e.rect(0,0,a,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),r=this.animation(),n=this.animations(),i=n[r],o=i.length/4;e<o-1?this.frameIndex(e+1):this.frameIndex(0)}};aw.Sprite=ya;ya.prototype.className="Sprite";(0,gme._registerNode)(ya);_f.Factory.addGetterSetter(ya,"animation");_f.Factory.addGetterSetter(ya,"animations");_f.Factory.addGetterSetter(ya,"frameOffsets");_f.Factory.addGetterSetter(ya,"image");_f.Factory.addGetterSetter(ya,"frameIndex",0,(0,kj.getNumberValidator)());_f.Factory.addGetterSetter(ya,"frameRate",17,(0,kj.getNumberValidator)());_f.Factory.backCompat(ya,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"})});var Aj=Y(lw=>{"use strict";Object.defineProperty(lw,"__esModule",{value:!0});lw.Star=void 0;var nP=qt(),yme=li(),iP=Kt(),vme=Ht(),$l=class extends yme.Shape{_sceneFunc(e){var r=this.innerRadius(),n=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-n);for(var o=1;o<i*2;o++){var s=o%2===0?n:r,a=s*Math.sin(o*Math.PI/i),l=-1*s*Math.cos(o*Math.PI/i);e.lineTo(a,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};lw.Star=$l;$l.prototype.className="Star";$l.prototype._centroid=!0;$l.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,vme._registerNode)($l);nP.Factory.addGetterSetter($l,"numPoints",5,(0,iP.getNumberValidator)());nP.Factory.addGetterSetter($l,"innerRadius",0,(0,iP.getNumberValidator)());nP.Factory.addGetterSetter($l,"outerRadius",0,(0,iP.getNumberValidator)())});var lP=Y(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.Text=Mh.stringToArray=void 0;var aP=hn(),uo=qt(),_me=li(),Ad=Kt(),bme=Ht();function Mj(t){return Array.from(t)}Mh.stringToArray=Mj;var Lh="auto",xme="center",Fj="inherit",s0="justify",Tme="Change.konva",wme="2d",Oj="-",Uj="left",Sme="text",Eme="Text",Cme="top",Dme="bottom",Rj="middle",Bj="normal",Ime="px ",uw=" ",kme="right",Pj="rtl",Nme="word",Ame="char",Lj="none",oP="\u2026",Wj=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Ome=Wj.length;function Rme(t){return t.split(",").map(e=>{e=e.trim();let r=e.indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return r&&!n&&(e=`"${e}"`),e}).join(", ")}var cw;function sP(){return cw||(cw=aP.Util.createCanvasElement().getContext(wme),cw)}function Pme(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Lme(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Mme(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}var nn=class extends _me.Shape{constructor(e){super(Mme(e)),this._partialTextX=0,this._partialTextY=0;for(var r=0;r<Ome;r++)this.on(Wj[r]+Tme,this._setTextData);this._setTextData()}_sceneFunc(e){var r=this.textArr,n=r.length;if(this.text()){var i=this.padding(),o=this.fontSize(),s=this.lineHeight()*o,a=this.verticalAlign(),l=this.direction(),c=0,p=this.align(),f=this.getWidth(),m=this.letterSpacing(),g=this.fill(),v=this.textDecoration(),_=v.indexOf("underline")!==-1,S=v.indexOf("line-through")!==-1,T;l=l===Fj?e.direction:l;var w=0,w=s/2,E=0,I=0;for(l===Pj&&e.setAttr("direction",l),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",Rj),e.setAttr("textAlign",Uj),a===Rj?c=(this.getHeight()-n*s-i*2)/2:a===Dme&&(c=this.getHeight()-n*s-i*2),e.translate(i,c+i),T=0;T<n;T++){var E=0,I=0,N=r[T],C=N.text,k=N.width,U=N.lastInParagraph,$,G,K;if(e.save(),p===kme?E+=f-k-i*2:p===xme&&(E+=(f-k-i*2)/2),_){e.save(),e.beginPath(),e.moveTo(E,w+I+Math.round(o/2)),$=C.split(" ").length-1,G=$===0,K=p===s0&&!U?f-i*2:k,e.lineTo(E+Math.round(K),w+I+Math.round(o/2)),e.lineWidth=o/15;let W=this._getLinearGradient();e.strokeStyle=W||g,e.stroke(),e.restore()}if(S){e.save(),e.beginPath(),e.moveTo(E,w+I),$=C.split(" ").length-1,G=$===0,K=p===s0&&U&&!G?f-i*2:k,e.lineTo(E+Math.round(K),w+I),e.lineWidth=o/15;let W=this._getLinearGradient();e.strokeStyle=W||g,e.stroke(),e.restore()}if(l!==Pj&&(m!==0||p===s0)){$=C.split(" ").length-1;for(var X=Mj(C),te=0;te<X.length;te++){var ne=X[te];ne===" "&&!U&&p===s0&&(E+=(f-i*2-k)/$),this._partialTextX=E,this._partialTextY=w+I,this._partialText=ne,e.fillStrokeShape(this),E+=this.measureSize(ne).width+m}}else m!==0&&e.setAttr("letterSpacing",`${m}px`),this._partialTextX=E,this._partialTextY=w+I,this._partialText=C,e.fillStrokeShape(this);e.restore(),n>1&&(w+=s)}}}_hitFunc(e){var r=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,r,n),e.closePath(),e.fillStrokeShape(this)}setText(e){var r=aP.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(Sme,r),this}getWidth(){var e=this.attrs.width===Lh||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Lh||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return aP.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var r=sP(),n=this.fontSize(),i;return r.save(),r.font=this._getContextFont(),i=r.measureText(e),r.restore(),{width:i.width,height:n}}_getContextFont(){return this.fontStyle()+uw+this.fontVariant()+uw+(this.fontSize()+Ime)+Rme(this.fontFamily())}_addTextLine(e){this.align()===s0&&(e=e.trim());var n=this._getTextWidth(e);return this.textArr.push({text:e,width:n,lastInParagraph:!1})}_getTextWidth(e){var r=this.letterSpacing(),n=e.length;return sP().measureText(e).width+(n?r*(n-1):0)}_setTextData(){var e=this.text().split(`
`),r=+this.fontSize(),n=0,i=this.lineHeight()*r,o=this.attrs.width,s=this.attrs.height,a=o!==Lh&&o!==void 0,l=s!==Lh&&s!==void 0,c=this.padding(),p=o-c*2,f=s-c*2,m=0,g=this.wrap(),v=g!==Lj,_=g!==Ame&&v,S=this.ellipsis();this.textArr=[],sP().font=this._getContextFont();for(var T=S?this._getTextWidth(oP):0,w=0,E=e.length;w<E;++w){var I=e[w],N=this._getTextWidth(I);if(a&&N>p)for(;I.length>0;){for(var C=0,k=I.length,U="",$=0;C<k;){var G=C+k>>>1,K=I.slice(0,G+1),X=this._getTextWidth(K)+T;X<=p?(C=G+1,U=K,$=X):k=G}if(U){if(_){var te,ne=I[U.length],H=ne===uw||ne===Oj;H&&$<=p?te=U.length:te=Math.max(U.lastIndexOf(uw),U.lastIndexOf(Oj))+1,te>0&&(C=te,U=U.slice(0,C),$=this._getTextWidth(U))}U=U.trimRight(),this._addTextLine(U),n=Math.max(n,$),m+=i;var re=this._shouldHandleEllipsis(m);if(re){this._tryToAddEllipsisToLastLine();break}if(I=I.slice(C),I=I.trimLeft(),I.length>0&&(N=this._getTextWidth(I),N<=p)){this._addTextLine(I),m+=i,n=Math.max(n,N);break}}else break}else this._addTextLine(I),m+=i,n=Math.max(n,N),this._shouldHandleEllipsis(m)&&w<E-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&m+i>f)break}this.textHeight=r,this.textWidth=n}_shouldHandleEllipsis(e){var r=+this.fontSize(),n=this.lineHeight()*r,i=this.attrs.height,o=i!==Lh&&i!==void 0,s=this.padding(),a=i-s*2,l=this.wrap(),c=l!==Lj;return!c||o&&e+n>a}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,r=e!==Lh&&e!==void 0,n=this.padding(),i=e-n*2,o=this.ellipsis(),s=this.textArr[this.textArr.length-1];if(!(!s||!o)){if(r){var a=this._getTextWidth(s.text+oP)<i;a||(s.text=s.text.slice(0,s.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(s.text+oP)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){let e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,r=this.hasShadow();return e&&r?!0:super._useBufferCanvas()}};Mh.Text=nn;nn.prototype._fillFunc=Pme;nn.prototype._strokeFunc=Lme;nn.prototype.className=Eme;nn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,bme._registerNode)(nn);uo.Factory.overWriteSetter(nn,"width",(0,Ad.getNumberOrAutoValidator)());uo.Factory.overWriteSetter(nn,"height",(0,Ad.getNumberOrAutoValidator)());uo.Factory.addGetterSetter(nn,"direction",Fj);uo.Factory.addGetterSetter(nn,"fontFamily","Arial");uo.Factory.addGetterSetter(nn,"fontSize",12,(0,Ad.getNumberValidator)());uo.Factory.addGetterSetter(nn,"fontStyle",Bj);uo.Factory.addGetterSetter(nn,"fontVariant",Bj);uo.Factory.addGetterSetter(nn,"padding",0,(0,Ad.getNumberValidator)());uo.Factory.addGetterSetter(nn,"align",Uj);uo.Factory.addGetterSetter(nn,"verticalAlign",Cme);uo.Factory.addGetterSetter(nn,"lineHeight",1,(0,Ad.getNumberValidator)());uo.Factory.addGetterSetter(nn,"wrap",Nme);uo.Factory.addGetterSetter(nn,"ellipsis",!1,(0,Ad.getBooleanValidator)());uo.Factory.addGetterSetter(nn,"letterSpacing",0,(0,Ad.getNumberValidator)());uo.Factory.addGetterSetter(nn,"text","",(0,Ad.getStringValidator)());uo.Factory.addGetterSetter(nn,"textDecoration","")});var qj=Y(dw=>{"use strict";Object.defineProperty(dw,"__esModule",{value:!0});dw.TextPath=void 0;var uP=hn(),rl=qt(),Fme=li(),a0=JT(),cP=lP(),jj=Kt(),Ume=Ht(),Bme="",zj="normal";function $j(t){t.fillText(this.partialText,0,0)}function Hj(t){t.strokeText(this.partialText,0,0)}var Fn=class extends Fme.Shape{constructor(e){super(e),this.dummyCanvas=uP.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return a0.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;let r=this.pathLength;return e-1>r?null:a0.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=a0.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var r=this.textDecoration(),n=this.fill(),i=this.fontSize(),o=this.glyphInfo;r==="underline"&&e.beginPath();for(var s=0;s<o.length;s++){e.save();var a=o[s].p0;e.translate(a.x,a.y),e.rotate(o[s].rotation),this.partialText=o[s].text,e.fillStrokeShape(this),r==="underline"&&(s===0&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}r==="underline"&&(e.strokeStyle=n,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var r=this.glyphInfo;if(r.length>=1){var n=r[0].p0;e.moveTo(n.x,n.y)}for(var i=0;i<r.length;i++){var o=r[i].p1;e.lineTo(o.x,o.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return uP.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return cP.Text.prototype.setText.call(this,e)}_getContextFont(){return cP.Text.prototype._getContextFont.call(this)}_getTextSize(e){var r=this.dummyCanvas,n=r.getContext("2d");n.save(),n.font=this._getContextFont();var i=n.measureText(e);return n.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){let{width:e,height:r}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=r,this.glyphInfo=[],!this.attrs.data)return null;let n=this.letterSpacing(),i=this.align(),o=this.kerningFunc(),s=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0),a=0;i==="center"&&(a=Math.max(0,this.pathLength/2-s/2)),i==="right"&&(a=Math.max(0,this.pathLength-s));let l=(0,cP.stringToArray)(this.text()),c=a;for(var p=0;p<l.length;p++){let f=this._getPointAtLength(c);if(!f)return;let m=this._getTextSize(l[p]).width+n;if(l[p]===" "&&i==="justify"){let w=this.text().split(" ").length-1;m+=(this.pathLength-s)/w}let g=this._getPointAtLength(c+m);if(!g)return;let v=a0.Path.getLineLength(f.x,f.y,g.x,g.y),_=0;if(o)try{_=o(l[p-1],l[p])*this.fontSize()}catch{_=0}f.x+=_,g.x+=_,this.textWidth+=_;let S=a0.Path.getPointOnLine(_+v/2,f.x,f.y,g.x,g.y),T=Math.atan2(g.y-f.y,g.x-f.x);this.glyphInfo.push({transposeX:S.x,transposeY:S.y,text:l[p],rotation:T,p0:f,p1:g}),c+=m}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(p){e.push(p.p0.x),e.push(p.p0.y),e.push(p.p1.x),e.push(p.p1.y)});for(var r=e[0]||0,n=e[0]||0,i=e[1]||0,o=e[1]||0,s,a,l=0;l<e.length/2;l++)s=e[l*2],a=e[l*2+1],r=Math.min(r,s),n=Math.max(n,s),i=Math.min(i,a),o=Math.max(o,a);var c=this.fontSize();return{x:r-c/2,y:i-c/2,width:n-r+c,height:o-i+c}}destroy(){return uP.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};dw.TextPath=Fn;Fn.prototype._fillFunc=$j;Fn.prototype._strokeFunc=Hj;Fn.prototype._fillFuncHit=$j;Fn.prototype._strokeFuncHit=Hj;Fn.prototype.className="TextPath";Fn.prototype._attrsAffectingSize=["text","fontSize","data"];(0,Ume._registerNode)(Fn);rl.Factory.addGetterSetter(Fn,"data");rl.Factory.addGetterSetter(Fn,"fontFamily","Arial");rl.Factory.addGetterSetter(Fn,"fontSize",12,(0,jj.getNumberValidator)());rl.Factory.addGetterSetter(Fn,"fontStyle",zj);rl.Factory.addGetterSetter(Fn,"align","left");rl.Factory.addGetterSetter(Fn,"letterSpacing",0,(0,jj.getNumberValidator)());rl.Factory.addGetterSetter(Fn,"textBaseline","middle");rl.Factory.addGetterSetter(Fn,"fontVariant",zj);rl.Factory.addGetterSetter(Fn,"text",Bme);rl.Factory.addGetterSetter(Fn,"textDecoration",null);rl.Factory.addGetterSetter(Fn,"kerningFunc",null)});var Qj=Y(fw=>{"use strict";Object.defineProperty(fw,"__esModule",{value:!0});fw.Transformer=void 0;var kr=hn(),Tr=qt(),Gj=wn(),Wme=li(),jme=rP(),Vj=jT(),nl=Ht(),Od=Kt(),zme=Ht(),Xj="tr-konva",$me=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${Xj}`).join(" "),Kj="nodesRect",Hme=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],qme={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},Gme="ontouchstart"in nl.Konva._global;function Vme(t,e,r){if(t==="rotater")return r;e+=kr.Util.degToRad(qme[t]||0);var n=(kr.Util.radToDeg(e)%360+360)%360;return kr.Util._inRange(n,315+22.5,360)||kr.Util._inRange(n,0,22.5)?"ns-resize":kr.Util._inRange(n,45-22.5,45+22.5)?"nesw-resize":kr.Util._inRange(n,90-22.5,90+22.5)?"ew-resize":kr.Util._inRange(n,135-22.5,135+22.5)?"nwse-resize":kr.Util._inRange(n,180-22.5,180+22.5)?"ns-resize":kr.Util._inRange(n,225-22.5,225+22.5)?"nesw-resize":kr.Util._inRange(n,270-22.5,270+22.5)?"ew-resize":kr.Util._inRange(n,315-22.5,315+22.5)?"nwse-resize":(kr.Util.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}var pw=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],Yj=1e8;function Kme(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function Jj(t,e,r){let n=r.x+(t.x-r.x)*Math.cos(e)-(t.y-r.y)*Math.sin(e),i=r.y+(t.x-r.x)*Math.sin(e)+(t.y-r.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:n,y:i}}function Yme(t,e){let r=Kme(t);return Jj(t,e,r)}function Xme(t,e,r){let n=e;for(let i=0;i<t.length;i++){let o=nl.Konva.getAngle(t[i]),s=Math.abs(o-e)%(Math.PI*2);Math.min(s,Math.PI*2-s)<r&&(n=o)}return n}var Zt=class extends Vj.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on($me,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return kr.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Xj+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();let r=e.filter(i=>i.isAncestorOf(this)?(kr.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=e=r,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{let o=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},s=i._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");i.on(s,o),i.on(Hme.map(a=>a+`.${this._getEventNamespace()}`).join(" "),o),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,o),this._proxyDrag(i)}),this._resetTransformCache();var n=!!this.findOne(".top-left");return n&&this.update(),this}_proxyDrag(e){let r;e.on(`dragstart.${this._getEventNamespace()}`,n=>{r=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(n,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!r)return;let i=e.getAbsolutePosition(),o=i.x-r.x,s=i.y-r.y;this.nodes().forEach(a=>{if(a===e||a.isDragging())return;let l=a.getAbsolutePosition();a.setAbsolutePosition({x:l.x+o,y:l.y+s}),a.startDrag(n)}),r=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Kj),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Kj,this.__getNodeRect)}__getNodeShape(e,r=this.rotation(),n){var i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=e.getAbsoluteScale(n),s=e.getAbsolutePosition(n),a=i.x*o.x-e.offsetX()*o.x,l=i.y*o.y-e.offsetY()*o.y;let c=(nl.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),p={x:s.x+a*Math.cos(c)+l*Math.sin(-c),y:s.y+l*Math.cos(c)+a*Math.sin(c),width:i.width*o.x,height:i.height*o.y,rotation:c};return Jj(p,-nl.Konva.getAngle(r),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-Yj,y:-Yj,width:0,height:0,rotation:0};let r=[];this.nodes().map(c=>{let p=c.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var f=[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y},{x:p.x+p.width,y:p.y+p.height},{x:p.x,y:p.y+p.height}],m=c.getAbsoluteTransform();f.forEach(function(g){var v=m.point(g);r.push(v)})});let n=new kr.Transform;n.rotate(-nl.Konva.getAngle(this.rotation()));var i=1/0,o=1/0,s=-1/0,a=-1/0;r.forEach(function(c){var p=n.point(c);i===void 0&&(i=s=p.x,o=a=p.y),i=Math.min(i,p.x),o=Math.min(o,p.y),s=Math.max(s,p.x),a=Math.max(a,p.y)}),n.invert();let l=n.point({x:i,y:o});return{x:l.x,y:l.y,width:s-i,height:a-o,rotation:nl.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),pw.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){var r=new jme.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Gme?10:"auto"}),n=this;r.on("mousedown touchstart",function(i){n._handleMouseDown(i)}),r.on("dragstart",i=>{r.stopDrag(),i.cancelBubble=!0}),r.on("dragend",i=>{i.cancelBubble=!0}),r.on("mouseenter",()=>{var i=nl.Konva.getAngle(this.rotation()),o=this.rotateAnchorCursor(),s=Vme(e,i,o);r.getStage().content&&(r.getStage().content.style.cursor=s),this._cursorChange=!0}),r.on("mouseout",()=>{r.getStage().content&&(r.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(r)}_createBack(){var e=new Wme.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(r,n){var i=n.getParent(),o=i.padding();r.beginPath(),r.rect(-o,-o,n.width()+o*2,n.height()+o*2),r.moveTo(n.width()/2,-o),i.rotateEnabled()&&r.lineTo(n.width()/2,-i.rotateAnchorOffset()*kr.Util._sign(n.height())-o),r.fillStrokeShape(n)},hitFunc:(r,n)=>{if(this.shouldOverdrawWholeArea()){var i=this.padding();r.beginPath(),r.rect(-i,-i,n.width()+i*2,n.height()+i*2),r.fillStrokeShape(n)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",r=>{r.cancelBubble=!0}),e.on("dragmove",r=>{r.cancelBubble=!0}),e.on("dragend",r=>{r.cancelBubble=!0}),this.on("dragmove",r=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var r=this._getNodeRect(),n=r.width,i=r.height,o=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));this.sin=Math.abs(i/o),this.cos=Math.abs(n/o),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var s=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-s.x,y:a.y-s.y},this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:e.evt,target:l})})}_handleMouseMove(e){var r,n,i,o=this.findOne("."+this._movingAnchorName),s=o.getStage();s.setPointersPositions(e);let a=s.getPointerPosition(),l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y},c=o.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(c,l,e)),o.setAbsolutePosition(l);let p=o.getAbsolutePosition();if(!(c.x===p.x&&c.y===p.y)){if(this._movingAnchorName==="rotater"){var f=this._getNodeRect();r=o.x()-f.width/2,n=-o.y()+f.height/2;let te=Math.atan2(-n,r)+Math.PI/2;f.height<0&&(te-=Math.PI);var m=nl.Konva.getAngle(this.rotation());let ne=m+te,H=nl.Konva.getAngle(this.rotationSnapTolerance()),W=Xme(this.rotationSnaps(),ne,H)-f.rotation,q=Yme(f,W);this._fitNodesInto(q,e);return}var g=this.shiftBehavior(),v;g==="inverted"?v=this.keepRatio()&&!e.shiftKey:g==="none"?v=this.keepRatio():v=this.keepRatio()||e.shiftKey;var E=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(v){var _=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(_.x-o.x(),2)+Math.pow(_.y-o.y(),2));var S=this.findOne(".top-left").x()>_.x?-1:1,T=this.findOne(".top-left").y()>_.y?-1:1;r=i*this.cos*S,n=i*this.sin*T,this.findOne(".top-left").x(_.x-r),this.findOne(".top-left").y(_.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(v){var _=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(o.x()-_.x,2)+Math.pow(_.y-o.y(),2));var S=this.findOne(".top-right").x()<_.x?-1:1,T=this.findOne(".top-right").y()>_.y?-1:1;r=i*this.cos*S,n=i*this.sin*T,this.findOne(".top-right").x(_.x+r),this.findOne(".top-right").y(_.y-n)}var w=o.position();this.findOne(".top-left").y(w.y),this.findOne(".bottom-right").x(w.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(v){var _=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(_.x-o.x(),2)+Math.pow(o.y()-_.y,2));var S=_.x<o.x()?-1:1,T=o.y()<_.y?-1:1;r=i*this.cos*S,n=i*this.sin*T,o.x(_.x-r),o.y(_.y+n)}w=o.position(),this.findOne(".top-left").x(w.x),this.findOne(".bottom-right").y(w.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(v){var _=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(o.x()-_.x,2)+Math.pow(o.y()-_.y,2));var S=this.findOne(".bottom-right").x()<_.x?-1:1,T=this.findOne(".bottom-right").y()<_.y?-1:1;r=i*this.cos*S,n=i*this.sin*T,this.findOne(".bottom-right").x(_.x+r),this.findOne(".bottom-right").y(_.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var E=this.centeredScaling()||e.altKey;if(E){var I=this.findOne(".top-left"),N=this.findOne(".bottom-right"),C=I.x(),k=I.y(),U=this.getWidth()-N.x(),$=this.getHeight()-N.y();N.move({x:-C,y:-k}),I.move({x:U,y:$})}var G=this.findOne(".top-left").getAbsolutePosition();r=G.x,n=G.y;var K=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),X=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:r,y:n,width:K,height:X,rotation:nl.Konva.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var r=this.getNode();this._fire("transformend",{evt:e,target:r}),r&&this._nodes.forEach(n=>{n._fire("transformend",{evt:e,target:n})}),this._movingAnchorName=null}}_fitNodesInto(e,r){var n=this._getNodeRect();let i=1;if(kr.Util._inRange(e.width,-this.padding()*2-i,i)){this.update();return}if(kr.Util._inRange(e.height,-this.padding()*2-i,i)){this.update();return}var o=new kr.Transform;if(o.rotate(nl.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){let m=o.point({x:-this.padding()*2,y:0});e.x+=m.x,e.y+=m.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=m.x,this._anchorDragOffset.y-=m.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){let m=o.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=m.x,this._anchorDragOffset.y-=m.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){let m=o.point({x:0,y:-this.padding()*2});e.x+=m.x,e.y+=m.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=m.x,this._anchorDragOffset.y-=m.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){let m=o.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=m.x,this._anchorDragOffset.y-=m.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){let m=this.boundBoxFunc()(n,e);m?e=m:kr.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}let s=1e7,a=new kr.Transform;a.translate(n.x,n.y),a.rotate(n.rotation),a.scale(n.width/s,n.height/s);let l=new kr.Transform,c=e.width/s,p=e.height/s;this.flipEnabled()===!1?(l.translate(e.x,e.y),l.rotate(e.rotation),l.translate(e.width<0?e.width:0,e.height<0?e.height:0),l.scale(Math.abs(c),Math.abs(p))):(l.translate(e.x,e.y),l.rotate(e.rotation),l.scale(c,p));let f=l.multiply(a.invert());this._nodes.forEach(m=>{var g;let v=m.getParent().getAbsoluteTransform(),_=m.getTransform().copy();_.translate(m.offsetX(),m.offsetY());let S=new kr.Transform;S.multiply(v.copy().invert()).multiply(f).multiply(v).multiply(_);let T=S.decompose();m.setAttrs(T),this._fire("transform",{evt:r,target:m}),m._fire("transform",{evt:r,target:m}),(g=m.getLayer())===null||g===void 0||g.batchDraw()}),this.rotation(kr.Util._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,r){this.findOne(e).setAttrs(r)}update(){var e,r=this._getNodeRect();this.rotation(kr.Util._getRotation(r.rotation));var n=r.width,i=r.height,o=this.enabledAnchors(),s=this.resizeEnabled(),a=this.padding(),l=this.anchorSize();let c=this.find("._anchor");c.forEach(f=>{f.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+a,offsetY:l/2+a,visible:s&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:l/2+a,visible:s&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:l/2-a,offsetY:l/2+a,visible:s&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:l/2+a,visible:s&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:i/2,offsetX:l/2-a,visible:s&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:l/2+a,offsetY:l/2-a,visible:s&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:i,offsetY:l/2-a,visible:s&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:i,offsetX:l/2-a,offsetY:l/2-a,visible:s&&o.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*kr.Util._sign(i)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});let p=this.anchorStyleFunc();p&&c.forEach(f=>{p(f)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Vj.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Gj.Node.prototype.toObject.call(this)}clone(e){var r=Gj.Node.prototype.clone.call(this,e);return r}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};fw.Transformer=Zt;function Jme(t){return t instanceof Array||kr.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){pw.indexOf(e)===-1&&kr.Util.warn("Unknown anchor name: "+e+". Available names are: "+pw.join(", "))}),t||[]}Zt.prototype.className="Transformer";(0,zme._registerNode)(Zt);Tr.Factory.addGetterSetter(Zt,"enabledAnchors",pw,Jme);Tr.Factory.addGetterSetter(Zt,"flipEnabled",!0,(0,Od.getBooleanValidator)());Tr.Factory.addGetterSetter(Zt,"resizeEnabled",!0);Tr.Factory.addGetterSetter(Zt,"anchorSize",10,(0,Od.getNumberValidator)());Tr.Factory.addGetterSetter(Zt,"rotateEnabled",!0);Tr.Factory.addGetterSetter(Zt,"rotationSnaps",[]);Tr.Factory.addGetterSetter(Zt,"rotateAnchorOffset",50,(0,Od.getNumberValidator)());Tr.Factory.addGetterSetter(Zt,"rotateAnchorCursor","crosshair");Tr.Factory.addGetterSetter(Zt,"rotationSnapTolerance",5,(0,Od.getNumberValidator)());Tr.Factory.addGetterSetter(Zt,"borderEnabled",!0);Tr.Factory.addGetterSetter(Zt,"anchorStroke","rgb(0, 161, 255)");Tr.Factory.addGetterSetter(Zt,"anchorStrokeWidth",1,(0,Od.getNumberValidator)());Tr.Factory.addGetterSetter(Zt,"anchorFill","white");Tr.Factory.addGetterSetter(Zt,"anchorCornerRadius",0,(0,Od.getNumberValidator)());Tr.Factory.addGetterSetter(Zt,"borderStroke","rgb(0, 161, 255)");Tr.Factory.addGetterSetter(Zt,"borderStrokeWidth",1,(0,Od.getNumberValidator)());Tr.Factory.addGetterSetter(Zt,"borderDash");Tr.Factory.addGetterSetter(Zt,"keepRatio",!0);Tr.Factory.addGetterSetter(Zt,"shiftBehavior","default");Tr.Factory.addGetterSetter(Zt,"centeredScaling",!1);Tr.Factory.addGetterSetter(Zt,"ignoreStroke",!1);Tr.Factory.addGetterSetter(Zt,"padding",0,(0,Od.getNumberValidator)());Tr.Factory.addGetterSetter(Zt,"node");Tr.Factory.addGetterSetter(Zt,"nodes");Tr.Factory.addGetterSetter(Zt,"boundBoxFunc");Tr.Factory.addGetterSetter(Zt,"anchorDragBoundFunc");Tr.Factory.addGetterSetter(Zt,"anchorStyleFunc");Tr.Factory.addGetterSetter(Zt,"shouldOverdrawWholeArea",!1);Tr.Factory.addGetterSetter(Zt,"useSingleNodeRotation",!0);Tr.Factory.backCompat(Zt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"})});var ez=Y(hw=>{"use strict";Object.defineProperty(hw,"__esModule",{value:!0});hw.Wedge=void 0;var mw=qt(),Qme=li(),Zme=Ht(),Zj=Kt(),ehe=Ht(),il=class extends Qme.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Zme.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};hw.Wedge=il;il.prototype.className="Wedge";il.prototype._centroid=!0;il.prototype._attrsAffectingSize=["radius"];(0,ehe._registerNode)(il);mw.Factory.addGetterSetter(il,"radius",0,(0,Zj.getNumberValidator)());mw.Factory.addGetterSetter(il,"angle",0,(0,Zj.getNumberValidator)());mw.Factory.addGetterSetter(il,"clockwise",!1);mw.Factory.backCompat(il,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"})});var nz=Y(gw=>{"use strict";Object.defineProperty(gw,"__esModule",{value:!0});gw.Blur=void 0;var tz=qt(),the=wn(),rhe=Kt();function rz(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var nhe=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],ihe=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function ohe(t,e){var r=t.data,n=t.width,i=t.height,o,s,a,l,c,p,f,m,g,v,_,S,T,w,E,I,N,C,k,U,$,G,K,X,te=e+e+1,ne=n-1,H=i-1,re=e+1,W=re*(re+1)/2,q=new rz,se=null,J=q,ye=null,Ne=null,ae=nhe[e],Se=ihe[e];for(a=1;a<te;a++)J=J.next=new rz,a===re&&(se=J);for(J.next=q,f=p=0,s=0;s<i;s++){for(I=N=C=k=m=g=v=_=0,S=re*(U=r[p]),T=re*($=r[p+1]),w=re*(G=r[p+2]),E=re*(K=r[p+3]),m+=W*U,g+=W*$,v+=W*G,_+=W*K,J=q,a=0;a<re;a++)J.r=U,J.g=$,J.b=G,J.a=K,J=J.next;for(a=1;a<re;a++)l=p+((ne<a?ne:a)<<2),m+=(J.r=U=r[l])*(X=re-a),g+=(J.g=$=r[l+1])*X,v+=(J.b=G=r[l+2])*X,_+=(J.a=K=r[l+3])*X,I+=U,N+=$,C+=G,k+=K,J=J.next;for(ye=q,Ne=se,o=0;o<n;o++)r[p+3]=K=_*ae>>Se,K!==0?(K=255/K,r[p]=(m*ae>>Se)*K,r[p+1]=(g*ae>>Se)*K,r[p+2]=(v*ae>>Se)*K):r[p]=r[p+1]=r[p+2]=0,m-=S,g-=T,v-=w,_-=E,S-=ye.r,T-=ye.g,w-=ye.b,E-=ye.a,l=f+((l=o+e+1)<ne?l:ne)<<2,I+=ye.r=r[l],N+=ye.g=r[l+1],C+=ye.b=r[l+2],k+=ye.a=r[l+3],m+=I,g+=N,v+=C,_+=k,ye=ye.next,S+=U=Ne.r,T+=$=Ne.g,w+=G=Ne.b,E+=K=Ne.a,I-=U,N-=$,C-=G,k-=K,Ne=Ne.next,p+=4;f+=n}for(o=0;o<n;o++){for(N=C=k=I=g=v=_=m=0,p=o<<2,S=re*(U=r[p]),T=re*($=r[p+1]),w=re*(G=r[p+2]),E=re*(K=r[p+3]),m+=W*U,g+=W*$,v+=W*G,_+=W*K,J=q,a=0;a<re;a++)J.r=U,J.g=$,J.b=G,J.a=K,J=J.next;for(c=n,a=1;a<=e;a++)p=c+o<<2,m+=(J.r=U=r[p])*(X=re-a),g+=(J.g=$=r[p+1])*X,v+=(J.b=G=r[p+2])*X,_+=(J.a=K=r[p+3])*X,I+=U,N+=$,C+=G,k+=K,J=J.next,a<H&&(c+=n);for(p=o,ye=q,Ne=se,s=0;s<i;s++)l=p<<2,r[l+3]=K=_*ae>>Se,K>0?(K=255/K,r[l]=(m*ae>>Se)*K,r[l+1]=(g*ae>>Se)*K,r[l+2]=(v*ae>>Se)*K):r[l]=r[l+1]=r[l+2]=0,m-=S,g-=T,v-=w,_-=E,S-=ye.r,T-=ye.g,w-=ye.b,E-=ye.a,l=o+((l=s+re)<H?l:H)*n<<2,m+=I+=ye.r=r[l],g+=N+=ye.g=r[l+1],v+=C+=ye.b=r[l+2],_+=k+=ye.a=r[l+3],ye=ye.next,S+=U=Ne.r,T+=$=Ne.g,w+=G=Ne.b,E+=K=Ne.a,I-=U,N-=$,C-=G,k-=K,Ne=Ne.next,p+=n}}var she=function(e){var r=Math.round(this.blurRadius());r>0&&ohe(e,r)};gw.Blur=she;tz.Factory.addGetterSetter(the.Node,"blurRadius",0,(0,rhe.getNumberValidator)(),tz.Factory.afterSetFilter)});var oz=Y(yw=>{"use strict";Object.defineProperty(yw,"__esModule",{value:!0});yw.Brighten=void 0;var iz=qt(),ahe=wn(),lhe=Kt(),uhe=function(t){var e=this.brightness()*255,r=t.data,n=r.length,i;for(i=0;i<n;i+=4)r[i]+=e,r[i+1]+=e,r[i+2]+=e};yw.Brighten=uhe;iz.Factory.addGetterSetter(ahe.Node,"brightness",0,(0,lhe.getNumberValidator)(),iz.Factory.afterSetFilter)});var az=Y(vw=>{"use strict";Object.defineProperty(vw,"__esModule",{value:!0});vw.Contrast=void 0;var sz=qt(),che=wn(),dhe=Kt(),phe=function(t){var e=Math.pow((this.contrast()+100)/100,2),r=t.data,n=r.length,i=150,o=150,s=150,a;for(a=0;a<n;a+=4)i=r[a],o=r[a+1],s=r[a+2],i/=255,i-=.5,i*=e,i+=.5,i*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,s=s<0?0:s>255?255:s,r[a]=i,r[a+1]=o,r[a+2]=s};vw.Contrast=phe;sz.Factory.addGetterSetter(che.Node,"contrast",0,(0,dhe.getNumberValidator)(),sz.Factory.afterSetFilter)});var uz=Y(bw=>{"use strict";Object.defineProperty(bw,"__esModule",{value:!0});bw.Emboss=void 0;var Rd=qt(),_w=wn(),fhe=hn(),lz=Kt(),mhe=function(t){var e=this.embossStrength()*10,r=this.embossWhiteLevel()*255,n=this.embossDirection(),i=this.embossBlend(),o=0,s=0,a=t.data,l=t.width,c=t.height,p=l*4,f=c;switch(n){case"top-left":o=-1,s=-1;break;case"top":o=-1,s=0;break;case"top-right":o=-1,s=1;break;case"right":o=0,s=1;break;case"bottom-right":o=1,s=1;break;case"bottom":o=1,s=0;break;case"bottom-left":o=1,s=-1;break;case"left":o=0,s=-1;break;default:fhe.Util.error("Unknown emboss direction: "+n)}do{var m=(f-1)*p,g=o;f+g<1&&(g=0),f+g>c&&(g=0);var v=(f-1+g)*l*4,_=l;do{var S=m+(_-1)*4,T=s;_+T<1&&(T=0),_+T>l&&(T=0);var w=v+(_-1+T)*4,E=a[S]-a[w],I=a[S+1]-a[w+1],N=a[S+2]-a[w+2],C=E,k=C>0?C:-C,U=I>0?I:-I,$=N>0?N:-N;if(U>k&&(C=I),$>k&&(C=N),C*=e,i){var G=a[S]+C,K=a[S+1]+C,X=a[S+2]+C;a[S]=G>255?255:G<0?0:G,a[S+1]=K>255?255:K<0?0:K,a[S+2]=X>255?255:X<0?0:X}else{var te=r-C;te<0?te=0:te>255&&(te=255),a[S]=a[S+1]=a[S+2]=te}}while(--_)}while(--f)};bw.Emboss=mhe;Rd.Factory.addGetterSetter(_w.Node,"embossStrength",.5,(0,lz.getNumberValidator)(),Rd.Factory.afterSetFilter);Rd.Factory.addGetterSetter(_w.Node,"embossWhiteLevel",.5,(0,lz.getNumberValidator)(),Rd.Factory.afterSetFilter);Rd.Factory.addGetterSetter(_w.Node,"embossDirection","top-left",null,Rd.Factory.afterSetFilter);Rd.Factory.addGetterSetter(_w.Node,"embossBlend",!1,null,Rd.Factory.afterSetFilter)});var dz=Y(xw=>{"use strict";Object.defineProperty(xw,"__esModule",{value:!0});xw.Enhance=void 0;var cz=qt(),hhe=wn(),ghe=Kt();function dP(t,e,r,n,i){var o=r-e,s=i-n,a;return o===0?n+s/2:s===0?n:(a=(t-e)/o,a=s*a+n,a)}var yhe=function(t){var e=t.data,r=e.length,n=e[0],i=n,o,s=e[1],a=s,l,c=e[2],p=c,f,m,g=this.enhance();if(g!==0){for(m=0;m<r;m+=4)o=e[m+0],o<n?n=o:o>i&&(i=o),l=e[m+1],l<s?s=l:l>a&&(a=l),f=e[m+2],f<c?c=f:f>p&&(p=f);i===n&&(i=255,n=0),a===s&&(a=255,s=0),p===c&&(p=255,c=0);var v,_,S,T,w,E,I,N,C;for(g>0?(_=i+g*(255-i),S=n-g*(n-0),w=a+g*(255-a),E=s-g*(s-0),N=p+g*(255-p),C=c-g*(c-0)):(v=(i+n)*.5,_=i+g*(i-v),S=n+g*(n-v),T=(a+s)*.5,w=a+g*(a-T),E=s+g*(s-T),I=(p+c)*.5,N=p+g*(p-I),C=c+g*(c-I)),m=0;m<r;m+=4)e[m+0]=dP(e[m+0],n,i,S,_),e[m+1]=dP(e[m+1],s,a,E,w),e[m+2]=dP(e[m+2],c,p,C,N)}};xw.Enhance=yhe;cz.Factory.addGetterSetter(hhe.Node,"enhance",0,(0,ghe.getNumberValidator)(),cz.Factory.afterSetFilter)});var pz=Y(Tw=>{"use strict";Object.defineProperty(Tw,"__esModule",{value:!0});Tw.Grayscale=void 0;var vhe=function(t){var e=t.data,r=e.length,n,i;for(n=0;n<r;n+=4)i=.34*e[n]+.5*e[n+1]+.16*e[n+2],e[n]=i,e[n+1]=i,e[n+2]=i};Tw.Grayscale=vhe});var fz=Y(ww=>{"use strict";Object.defineProperty(ww,"__esModule",{value:!0});ww.HSL=void 0;var Fh=qt(),pP=wn(),fP=Kt();Fh.Factory.addGetterSetter(pP.Node,"hue",0,(0,fP.getNumberValidator)(),Fh.Factory.afterSetFilter);Fh.Factory.addGetterSetter(pP.Node,"saturation",0,(0,fP.getNumberValidator)(),Fh.Factory.afterSetFilter);Fh.Factory.addGetterSetter(pP.Node,"luminance",0,(0,fP.getNumberValidator)(),Fh.Factory.afterSetFilter);var _he=function(t){var e=t.data,r=e.length,n=1,i=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,s=this.luminance()*127,a,l=n*i*Math.cos(o*Math.PI/180),c=n*i*Math.sin(o*Math.PI/180),p=.299*n+.701*l+.167*c,f=.587*n-.587*l+.33*c,m=.114*n-.114*l-.497*c,g=.299*n-.299*l-.328*c,v=.587*n+.413*l+.035*c,_=.114*n-.114*l+.293*c,S=.299*n-.3*l+1.25*c,T=.587*n-.586*l-1.05*c,w=.114*n+.886*l-.2*c,E,I,N,C;for(a=0;a<r;a+=4)E=e[a+0],I=e[a+1],N=e[a+2],C=e[a+3],e[a+0]=p*E+f*I+m*N+s,e[a+1]=g*E+v*I+_*N+s,e[a+2]=S*E+T*I+w*N+s,e[a+3]=C};ww.HSL=_he});var mz=Y(Sw=>{"use strict";Object.defineProperty(Sw,"__esModule",{value:!0});Sw.HSV=void 0;var Uh=qt(),mP=wn(),hP=Kt(),bhe=function(t){var e=t.data,r=e.length,n=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,s,a=n*i*Math.cos(o*Math.PI/180),l=n*i*Math.sin(o*Math.PI/180),c=.299*n+.701*a+.167*l,p=.587*n-.587*a+.33*l,f=.114*n-.114*a-.497*l,m=.299*n-.299*a-.328*l,g=.587*n+.413*a+.035*l,v=.114*n-.114*a+.293*l,_=.299*n-.3*a+1.25*l,S=.587*n-.586*a-1.05*l,T=.114*n+.886*a-.2*l,w,E,I,N;for(s=0;s<r;s+=4)w=e[s+0],E=e[s+1],I=e[s+2],N=e[s+3],e[s+0]=c*w+p*E+f*I,e[s+1]=m*w+g*E+v*I,e[s+2]=_*w+S*E+T*I,e[s+3]=N};Sw.HSV=bhe;Uh.Factory.addGetterSetter(mP.Node,"hue",0,(0,hP.getNumberValidator)(),Uh.Factory.afterSetFilter);Uh.Factory.addGetterSetter(mP.Node,"saturation",0,(0,hP.getNumberValidator)(),Uh.Factory.afterSetFilter);Uh.Factory.addGetterSetter(mP.Node,"value",0,(0,hP.getNumberValidator)(),Uh.Factory.afterSetFilter)});var hz=Y(Ew=>{"use strict";Object.defineProperty(Ew,"__esModule",{value:!0});Ew.Invert=void 0;var xhe=function(t){var e=t.data,r=e.length,n;for(n=0;n<r;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2]};Ew.Invert=xhe});var _z=Y(Dw=>{"use strict";Object.defineProperty(Dw,"__esModule",{value:!0});Dw.Kaleidoscope=void 0;var Cw=qt(),yz=wn(),gz=hn(),vz=Kt(),The=function(t,e,r){var n=t.data,i=e.data,o=t.width,s=t.height,a=r.polarCenterX||o/2,l=r.polarCenterY||s/2,c,p,f,m=0,g=0,v=0,_=0,S,T=Math.sqrt(a*a+l*l);p=o-a,f=s-l,S=Math.sqrt(p*p+f*f),T=S>T?S:T;var w=s,E=o,I,N,C=360/E*Math.PI/180,k,U;for(N=0;N<E;N+=1)for(k=Math.sin(N*C),U=Math.cos(N*C),I=0;I<w;I+=1)p=Math.floor(a+T*I/w*U),f=Math.floor(l+T*I/w*k),c=(f*o+p)*4,m=n[c+0],g=n[c+1],v=n[c+2],_=n[c+3],c=(N+I*o)*4,i[c+0]=m,i[c+1]=g,i[c+2]=v,i[c+3]=_},whe=function(t,e,r){var n=t.data,i=e.data,o=t.width,s=t.height,a=r.polarCenterX||o/2,l=r.polarCenterY||s/2,c,p,f,m,g,v=0,_=0,S=0,T=0,w,E=Math.sqrt(a*a+l*l);p=o-a,f=s-l,w=Math.sqrt(p*p+f*f),E=w>E?w:E;var I=s,N=o,C,k,U=r.polarRotation||0,$,G;for(p=0;p<o;p+=1)for(f=0;f<s;f+=1)m=p-a,g=f-l,C=Math.sqrt(m*m+g*g)*I/E,k=(Math.atan2(g,m)*180/Math.PI+360+U)%360,k=k*N/360,$=Math.floor(k),G=Math.floor(C),c=(G*o+$)*4,v=n[c+0],_=n[c+1],S=n[c+2],T=n[c+3],c=(f*o+p)*4,i[c+0]=v,i[c+1]=_,i[c+2]=S,i[c+3]=T},She=function(t){var e=t.width,r=t.height,n,i,o,s,a,l,c,p,f,m,g=Math.round(this.kaleidoscopePower()),v=Math.round(this.kaleidoscopeAngle()),_=Math.floor(e*(v%360)/360);if(!(g<1)){var S=gz.Util.createCanvasElement();S.width=e,S.height=r;var T=S.getContext("2d").getImageData(0,0,e,r);gz.Util.releaseCanvas(S),The(t,T,{polarCenterX:e/2,polarCenterY:r/2});for(var w=e/Math.pow(2,g);w<=8;)w=w*2,g-=1;w=Math.ceil(w);var E=w,I=0,N=E,C=1;for(_+w>e&&(I=E,N=0,C=-1),i=0;i<r;i+=1)for(n=I;n!==N;n+=C)o=Math.round(n+_)%e,f=(e*i+o)*4,a=T.data[f+0],l=T.data[f+1],c=T.data[f+2],p=T.data[f+3],m=(e*i+n)*4,T.data[m+0]=a,T.data[m+1]=l,T.data[m+2]=c,T.data[m+3]=p;for(i=0;i<r;i+=1)for(E=Math.floor(w),s=0;s<g;s+=1){for(n=0;n<E+1;n+=1)f=(e*i+n)*4,a=T.data[f+0],l=T.data[f+1],c=T.data[f+2],p=T.data[f+3],m=(e*i+E*2-n-1)*4,T.data[m+0]=a,T.data[m+1]=l,T.data[m+2]=c,T.data[m+3]=p;E*=2}whe(T,t,{polarRotation:0})}};Dw.Kaleidoscope=She;Cw.Factory.addGetterSetter(yz.Node,"kaleidoscopePower",2,(0,vz.getNumberValidator)(),Cw.Factory.afterSetFilter);Cw.Factory.addGetterSetter(yz.Node,"kaleidoscopeAngle",0,(0,vz.getNumberValidator)(),Cw.Factory.afterSetFilter)});var xz=Y(kw=>{"use strict";Object.defineProperty(kw,"__esModule",{value:!0});kw.Mask=void 0;var bz=qt(),Ehe=wn(),Che=Kt();function Iw(t,e,r){var n=(r*t.width+e)*4,i=[];return i.push(t.data[n++],t.data[n++],t.data[n++],t.data[n++]),i}function l0(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function Dhe(t){for(var e=[0,0,0],r=0;r<t.length;r++)e[0]+=t[r][0],e[1]+=t[r][1],e[2]+=t[r][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function Ihe(t,e){var r=Iw(t,0,0),n=Iw(t,t.width-1,0),i=Iw(t,0,t.height-1),o=Iw(t,t.width-1,t.height-1),s=e||10;if(l0(r,n)<s&&l0(n,o)<s&&l0(o,i)<s&&l0(i,r)<s){for(var a=Dhe([n,r,o,i]),l=[],c=0;c<t.width*t.height;c++){var p=l0(a,[t.data[c*4],t.data[c*4+1],t.data[c*4+2]]);l[c]=p<s?0:255}return l}}function khe(t,e){for(var r=0;r<t.width*t.height;r++)t.data[4*r+3]=e[r]}function Nhe(t,e,r){for(var n=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(n.length)),o=Math.floor(i/2),s=[],a=0;a<r;a++)for(var l=0;l<e;l++){for(var c=a*e+l,p=0,f=0;f<i;f++)for(var m=0;m<i;m++){var g=a+f-o,v=l+m-o;if(g>=0&&g<r&&v>=0&&v<e){var _=g*e+v,S=n[f*i+m];p+=t[_]*S}}s[c]=p===255*8?255:0}return s}function Ahe(t,e,r){for(var n=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(n.length)),o=Math.floor(i/2),s=[],a=0;a<r;a++)for(var l=0;l<e;l++){for(var c=a*e+l,p=0,f=0;f<i;f++)for(var m=0;m<i;m++){var g=a+f-o,v=l+m-o;if(g>=0&&g<r&&v>=0&&v<e){var _=g*e+v,S=n[f*i+m];p+=t[_]*S}}s[c]=p>=255*4?255:0}return s}function Ohe(t,e,r){for(var n=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(n.length)),o=Math.floor(i/2),s=[],a=0;a<r;a++)for(var l=0;l<e;l++){for(var c=a*e+l,p=0,f=0;f<i;f++)for(var m=0;m<i;m++){var g=a+f-o,v=l+m-o;if(g>=0&&g<r&&v>=0&&v<e){var _=g*e+v,S=n[f*i+m];p+=t[_]*S}}s[c]=p}return s}var Rhe=function(t){var e=this.threshold(),r=Ihe(t,e);return r&&(r=Nhe(r,t.width,t.height),r=Ahe(r,t.width,t.height),r=Ohe(r,t.width,t.height),khe(t,r)),t};kw.Mask=Rhe;bz.Factory.addGetterSetter(Ehe.Node,"threshold",0,(0,Che.getNumberValidator)(),bz.Factory.afterSetFilter)});var wz=Y(Nw=>{"use strict";Object.defineProperty(Nw,"__esModule",{value:!0});Nw.Noise=void 0;var Tz=qt(),Phe=wn(),Lhe=Kt(),Mhe=function(t){var e=this.noise()*255,r=t.data,n=r.length,i=e/2,o;for(o=0;o<n;o+=4)r[o+0]+=i-2*i*Math.random(),r[o+1]+=i-2*i*Math.random(),r[o+2]+=i-2*i*Math.random()};Nw.Noise=Mhe;Tz.Factory.addGetterSetter(Phe.Node,"noise",.2,(0,Lhe.getNumberValidator)(),Tz.Factory.afterSetFilter)});var Ez=Y(Aw=>{"use strict";Object.defineProperty(Aw,"__esModule",{value:!0});Aw.Pixelate=void 0;var Sz=qt(),Fhe=hn(),Uhe=wn(),Bhe=Kt(),Whe=function(t){var e=Math.ceil(this.pixelSize()),r=t.width,n=t.height,i,o,s,a,l,c,p,f=Math.ceil(r/e),m=Math.ceil(n/e),g,v,_,S,T,w,E,I=t.data;if(e<=0){Fhe.Util.error("pixelSize value can not be <= 0");return}for(T=0;T<f;T+=1)for(w=0;w<m;w+=1){for(a=0,l=0,c=0,p=0,g=T*e,v=g+e,_=w*e,S=_+e,E=0,i=g;i<v;i+=1)if(!(i>=r))for(o=_;o<S;o+=1)o>=n||(s=(r*o+i)*4,a+=I[s+0],l+=I[s+1],c+=I[s+2],p+=I[s+3],E+=1);for(a=a/E,l=l/E,c=c/E,p=p/E,i=g;i<v;i+=1)if(!(i>=r))for(o=_;o<S;o+=1)o>=n||(s=(r*o+i)*4,I[s+0]=a,I[s+1]=l,I[s+2]=c,I[s+3]=p)}};Aw.Pixelate=Whe;Sz.Factory.addGetterSetter(Uhe.Node,"pixelSize",8,(0,Bhe.getNumberValidator)(),Sz.Factory.afterSetFilter)});var Dz=Y(Ow=>{"use strict";Object.defineProperty(Ow,"__esModule",{value:!0});Ow.Posterize=void 0;var Cz=qt(),jhe=wn(),zhe=Kt(),$he=function(t){var e=Math.round(this.levels()*254)+1,r=t.data,n=r.length,i=255/e,o;for(o=0;o<n;o+=1)r[o]=Math.floor(r[o]/i)*i};Ow.Posterize=$he;Cz.Factory.addGetterSetter(jhe.Node,"levels",.5,(0,zhe.getNumberValidator)(),Cz.Factory.afterSetFilter)});var Iz=Y(Pw=>{"use strict";Object.defineProperty(Pw,"__esModule",{value:!0});Pw.RGB=void 0;var Rw=qt(),gP=wn(),Hhe=Kt(),qhe=function(t){var e=t.data,r=e.length,n=this.red(),i=this.green(),o=this.blue(),s,a;for(s=0;s<r;s+=4)a=(.34*e[s]+.5*e[s+1]+.16*e[s+2])/255,e[s]=a*n,e[s+1]=a*i,e[s+2]=a*o,e[s+3]=e[s+3]};Pw.RGB=qhe;Rw.Factory.addGetterSetter(gP.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Rw.Factory.addGetterSetter(gP.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Rw.Factory.addGetterSetter(gP.Node,"blue",0,Hhe.RGBComponent,Rw.Factory.afterSetFilter)});var kz=Y(Mw=>{"use strict";Object.defineProperty(Mw,"__esModule",{value:!0});Mw.RGBA=void 0;var u0=qt(),Lw=wn(),Ghe=Kt(),Vhe=function(t){var e=t.data,r=e.length,n=this.red(),i=this.green(),o=this.blue(),s=this.alpha(),a,l;for(a=0;a<r;a+=4)l=1-s,e[a]=n*s+e[a]*l,e[a+1]=i*s+e[a+1]*l,e[a+2]=o*s+e[a+2]*l};Mw.RGBA=Vhe;u0.Factory.addGetterSetter(Lw.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});u0.Factory.addGetterSetter(Lw.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});u0.Factory.addGetterSetter(Lw.Node,"blue",0,Ghe.RGBComponent,u0.Factory.afterSetFilter);u0.Factory.addGetterSetter(Lw.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t})});var Nz=Y(Fw=>{"use strict";Object.defineProperty(Fw,"__esModule",{value:!0});Fw.Sepia=void 0;var Khe=function(t){var e=t.data,r=e.length,n,i,o,s;for(n=0;n<r;n+=4)i=e[n+0],o=e[n+1],s=e[n+2],e[n+0]=Math.min(255,i*.393+o*.769+s*.189),e[n+1]=Math.min(255,i*.349+o*.686+s*.168),e[n+2]=Math.min(255,i*.272+o*.534+s*.131)};Fw.Sepia=Khe});var Az=Y(Uw=>{"use strict";Object.defineProperty(Uw,"__esModule",{value:!0});Uw.Solarize=void 0;var Yhe=function(t){var e=t.data,r=t.width,n=t.height,i=r*4,o=n;do{var s=(o-1)*i,a=r;do{var l=s+(a-1)*4,c=e[l],p=e[l+1],f=e[l+2];c>127&&(c=255-c),p>127&&(p=255-p),f>127&&(f=255-f),e[l]=c,e[l+1]=p,e[l+2]=f}while(--a)}while(--o)};Uw.Solarize=Yhe});var Rz=Y(Bw=>{"use strict";Object.defineProperty(Bw,"__esModule",{value:!0});Bw.Threshold=void 0;var Oz=qt(),Xhe=wn(),Jhe=Kt(),Qhe=function(t){var e=this.threshold()*255,r=t.data,n=r.length,i;for(i=0;i<n;i+=1)r[i]=r[i]<e?0:255};Bw.Threshold=Qhe;Oz.Factory.addGetterSetter(Xhe.Node,"threshold",.5,(0,Jhe.getNumberValidator)(),Oz.Factory.afterSetFilter)});var Mz=Y(Ww=>{"use strict";Object.defineProperty(Ww,"__esModule",{value:!0});Ww.Konva=void 0;var Pz=HT(),Zhe=lj(),ege=mj(),tge=hj(),rge=yj(),nge=vj(),Lz=xj(),ige=VR(),oge=JT(),sge=rP(),age=Sj(),lge=Ij(),uge=Nj(),cge=Aj(),dge=lP(),pge=qj(),fge=Qj(),mge=ez(),hge=nz(),gge=oz(),yge=az(),vge=uz(),_ge=dz(),bge=pz(),xge=fz(),Tge=mz(),wge=hz(),Sge=_z(),Ege=xz(),Cge=wz(),Dge=Ez(),Ige=Dz(),kge=Iz(),Nge=kz(),Age=Nz(),Oge=Az(),Rge=Rz();Ww.Konva=Pz.Konva.Util._assign(Pz.Konva,{Arc:Zhe.Arc,Arrow:ege.Arrow,Circle:tge.Circle,Ellipse:rge.Ellipse,Image:nge.Image,Label:Lz.Label,Tag:Lz.Tag,Line:ige.Line,Path:oge.Path,Rect:sge.Rect,RegularPolygon:age.RegularPolygon,Ring:lge.Ring,Sprite:uge.Sprite,Star:cge.Star,Text:dge.Text,TextPath:pge.TextPath,Transformer:fge.Transformer,Wedge:mge.Wedge,Filters:{Blur:hge.Blur,Brighten:gge.Brighten,Contrast:yge.Contrast,Emboss:vge.Emboss,Enhance:_ge.Enhance,Grayscale:bge.Grayscale,HSL:xge.HSL,HSV:Tge.HSV,Invert:wge.Invert,Kaleidoscope:Sge.Kaleidoscope,Mask:Ege.Mask,Noise:Cge.Noise,Pixelate:Dge.Pixelate,Posterize:Ige.Posterize,RGB:kge.RGB,RGBA:Nge.RGBA,Sepia:Age.Sepia,Solarize:Oge.Solarize,Threshold:Rge.Threshold}})});var yP=Y((Fz,Uz)=>{"use strict";Object.defineProperty(Fz,"__esModule",{value:!0});var Pge=Mz();Uz.exports=Pge.Konva});var U$=Y((cHe,F$)=>{function E$(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{let r=t[e],n=typeof r;(n==="object"||n==="function")&&!Object.isFrozen(r)&&E$(r)}),t}var Qw=class{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}};function C$(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Fd(t,...e){let r=Object.create(null);for(let n in t)r[n]=t[n];return e.forEach(function(n){for(let i in n)r[i]=n[i]}),r}var Xye="</span>",_$=t=>!!t.scope,Jye=(t,{prefix:e})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){let r=t.split(".");return[`${e}${r.shift()}`,...r.map((n,i)=>`${n}${"_".repeat(i+1)}`)].join(" ")}return`${e}${t}`},kP=class{constructor(e,r){this.buffer="",this.classPrefix=r.classPrefix,e.walk(this)}addText(e){this.buffer+=C$(e)}openNode(e){if(!_$(e))return;let r=Jye(e.scope,{prefix:this.classPrefix});this.span(r)}closeNode(e){_$(e)&&(this.buffer+=Xye)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}},b$=(t={})=>{let e={children:[]};return Object.assign(e,t),e},NP=class t{constructor(){this.rootNode=b$(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){let r=b$({scope:e});this.add(r),this.stack.push(r)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,r){return typeof r=="string"?e.addText(r):r.children&&(e.openNode(r),r.children.forEach(n=>this._walk(e,n)),e.closeNode(r)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(r=>typeof r=="string")?e.children=[e.children.join("")]:e.children.forEach(r=>{t._collapse(r)}))}},AP=class extends NP{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,r){let n=e.root;r&&(n.scope=`language:${r}`),this.add(n)}toHTML(){return new kP(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}};function f0(t){return t?typeof t=="string"?t:t.source:null}function D$(t){return wf("(?=",t,")")}function Qye(t){return wf("(?:",t,")*")}function Zye(t){return wf("(?:",t,")?")}function wf(...t){return t.map(r=>f0(r)).join("")}function eve(t){let e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function RP(...t){return"("+(eve(t).capture?"":"?:")+t.map(n=>f0(n)).join("|")+")"}function I$(t){return new RegExp(t.toString()+"|").exec("").length-1}function tve(t,e){let r=t&&t.exec(e);return r&&r.index===0}var rve=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function PP(t,{joinWith:e}){let r=0;return t.map(n=>{r+=1;let i=r,o=f0(n),s="";for(;o.length>0;){let a=rve.exec(o);if(!a){s+=o;break}s+=o.substring(0,a.index),o=o.substring(a.index+a[0].length),a[0][0]==="\\"&&a[1]?s+="\\"+String(Number(a[1])+i):(s+=a[0],a[0]==="("&&r++)}return s}).map(n=>`(${n})`).join(e)}var nve=/\b\B/,k$="[a-zA-Z]\\w*",LP="[a-zA-Z_]\\w*",N$="\\b\\d+(\\.\\d+)?",A$="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",O$="\\b(0b[01]+)",ive="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",ove=(t={})=>{let e=/^#![ ]*\//;return t.binary&&(t.begin=wf(e,/.*\b/,t.binary,/\b.*/)),Fd({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(r,n)=>{r.index!==0&&n.ignoreMatch()}},t)},m0={begin:"\\\\[\\s\\S]",relevance:0},sve={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[m0]},ave={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[m0]},lve={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},eS=function(t,e,r={}){let n=Fd({scope:"comment",begin:t,end:e,contains:[]},r);n.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});let i=RP("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return n.contains.push({begin:wf(/[ ]+/,"(",i,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),n},uve=eS("//","$"),cve=eS("/\\*","\\*/"),dve=eS("#","$"),pve={scope:"number",begin:N$,relevance:0},fve={scope:"number",begin:A$,relevance:0},mve={scope:"number",begin:O$,relevance:0},hve={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[m0,{begin:/\[/,end:/\]/,relevance:0,contains:[m0]}]},gve={scope:"title",begin:k$,relevance:0},yve={scope:"title",begin:LP,relevance:0},vve={begin:"\\.\\s*"+LP,relevance:0},_ve=function(t){return Object.assign(t,{"on:begin":(e,r)=>{r.data._beginMatch=e[1]},"on:end":(e,r)=>{r.data._beginMatch!==e[1]&&r.ignoreMatch()}})},Jw=Object.freeze({__proto__:null,APOS_STRING_MODE:sve,BACKSLASH_ESCAPE:m0,BINARY_NUMBER_MODE:mve,BINARY_NUMBER_RE:O$,COMMENT:eS,C_BLOCK_COMMENT_MODE:cve,C_LINE_COMMENT_MODE:uve,C_NUMBER_MODE:fve,C_NUMBER_RE:A$,END_SAME_AS_BEGIN:_ve,HASH_COMMENT_MODE:dve,IDENT_RE:k$,MATCH_NOTHING_RE:nve,METHOD_GUARD:vve,NUMBER_MODE:pve,NUMBER_RE:N$,PHRASAL_WORDS_MODE:lve,QUOTE_STRING_MODE:ave,REGEXP_MODE:hve,RE_STARTERS_RE:ive,SHEBANG:ove,TITLE_MODE:gve,UNDERSCORE_IDENT_RE:LP,UNDERSCORE_TITLE_MODE:yve});function bve(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function xve(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function Tve(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=bve,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function wve(t,e){Array.isArray(t.illegal)&&(t.illegal=RP(...t.illegal))}function Sve(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function Eve(t,e){t.relevance===void 0&&(t.relevance=1)}var Cve=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");let r=Object.assign({},t);Object.keys(t).forEach(n=>{delete t[n]}),t.keywords=r.keywords,t.begin=wf(r.beforeMatch,D$(r.begin)),t.starts={relevance:0,contains:[Object.assign(r,{endsParent:!0})]},t.relevance=0,delete r.beforeMatch},Dve=["of","and","for","in","not","or","if","then","parent","list","value"],Ive="keyword";function R$(t,e,r=Ive){let n=Object.create(null);return typeof t=="string"?i(r,t.split(" ")):Array.isArray(t)?i(r,t):Object.keys(t).forEach(function(o){Object.assign(n,R$(t[o],e,o))}),n;function i(o,s){e&&(s=s.map(a=>a.toLowerCase())),s.forEach(function(a){let l=a.split("|");n[l[0]]=[o,kve(l[0],l[1])]})}}function kve(t,e){return e?Number(e):Nve(t)?0:1}function Nve(t){return Dve.includes(t.toLowerCase())}var x$={},Tf=t=>{console.error(t)},T$=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Wh=(t,e)=>{x$[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),x$[`${t}/${e}`]=!0)},Zw=new Error;function P$(t,e,{key:r}){let n=0,i=t[r],o={},s={};for(let a=1;a<=e.length;a++)s[a+n]=i[a],o[a+n]=!0,n+=I$(e[a-1]);t[r]=s,t[r]._emit=o,t[r]._multi=!0}function Ave(t){if(Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw Tf("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Zw;if(typeof t.beginScope!="object"||t.beginScope===null)throw Tf("beginScope must be object"),Zw;P$(t,t.begin,{key:"beginScope"}),t.begin=PP(t.begin,{joinWith:""})}}function Ove(t){if(Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw Tf("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Zw;if(typeof t.endScope!="object"||t.endScope===null)throw Tf("endScope must be object"),Zw;P$(t,t.end,{key:"endScope"}),t.end=PP(t.end,{joinWith:""})}}function Rve(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function Pve(t){Rve(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),Ave(t),Ove(t)}function Lve(t){function e(s,a){return new RegExp(f0(s),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(a?"g":""))}class r{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(a,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,a]),this.matchAt+=I$(a)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);let a=this.regexes.map(l=>l[1]);this.matcherRe=e(PP(a,{joinWith:"|"}),!0),this.lastIndex=0}exec(a){this.matcherRe.lastIndex=this.lastIndex;let l=this.matcherRe.exec(a);if(!l)return null;let c=l.findIndex((f,m)=>m>0&&f!==void 0),p=this.matchIndexes[c];return l.splice(0,c),Object.assign(l,p)}}class n{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(a){if(this.multiRegexes[a])return this.multiRegexes[a];let l=new r;return this.rules.slice(a).forEach(([c,p])=>l.addRule(c,p)),l.compile(),this.multiRegexes[a]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(a,l){this.rules.push([a,l]),l.type==="begin"&&this.count++}exec(a){let l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let c=l.exec(a);if(this.resumingScanAtSamePosition()&&!(c&&c.index===this.lastIndex)){let p=this.getMatcher(0);p.lastIndex=this.lastIndex+1,c=p.exec(a)}return c&&(this.regexIndex+=c.position+1,this.regexIndex===this.count&&this.considerAll()),c}}function i(s){let a=new n;return s.contains.forEach(l=>a.addRule(l.begin,{rule:l,type:"begin"})),s.terminatorEnd&&a.addRule(s.terminatorEnd,{type:"end"}),s.illegal&&a.addRule(s.illegal,{type:"illegal"}),a}function o(s,a){let l=s;if(s.isCompiled)return l;[xve,Sve,Pve,Cve].forEach(p=>p(s,a)),t.compilerExtensions.forEach(p=>p(s,a)),s.__beforeBegin=null,[Tve,wve,Eve].forEach(p=>p(s,a)),s.isCompiled=!0;let c=null;return typeof s.keywords=="object"&&s.keywords.$pattern&&(s.keywords=Object.assign({},s.keywords),c=s.keywords.$pattern,delete s.keywords.$pattern),c=c||/\w+/,s.keywords&&(s.keywords=R$(s.keywords,t.case_insensitive)),l.keywordPatternRe=e(c,!0),a&&(s.begin||(s.begin=/\B|\b/),l.beginRe=e(l.begin),!s.end&&!s.endsWithParent&&(s.end=/\B|\b/),s.end&&(l.endRe=e(l.end)),l.terminatorEnd=f0(l.end)||"",s.endsWithParent&&a.terminatorEnd&&(l.terminatorEnd+=(s.end?"|":"")+a.terminatorEnd)),s.illegal&&(l.illegalRe=e(s.illegal)),s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map(function(p){return Mve(p==="self"?s:p)})),s.contains.forEach(function(p){o(p,l)}),s.starts&&o(s.starts,a),l.matcher=i(l),l}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=Fd(t.classNameAliases||{}),o(t)}function L$(t){return t?t.endsWithParent||L$(t.starts):!1}function Mve(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return Fd(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:L$(t)?Fd(t,{starts:t.starts?Fd(t.starts):null}):Object.isFrozen(t)?Fd(t):t}var Fve="11.9.0",OP=class extends Error{constructor(e,r){super(e),this.name="HTMLInjectionError",this.html=r}},IP=C$,w$=Fd,S$=Symbol("nomatch"),Uve=7,M$=function(t){let e=Object.create(null),r=Object.create(null),n=[],i=!0,o="Could not find the language '{}', did you forget to load/include a language module?",s={disableAutodetect:!0,name:"Plain text",contains:[]},a={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:AP};function l(W){return a.noHighlightRe.test(W)}function c(W){let q=W.className+" ";q+=W.parentNode?W.parentNode.className:"";let se=a.languageDetectRe.exec(q);if(se){let J=$(se[1]);return J||(T$(o.replace("{}",se[1])),T$("Falling back to no-highlight mode for this block.",W)),J?se[1]:"no-highlight"}return q.split(/\s+/).find(J=>l(J)||$(J))}function p(W,q,se){let J="",ye="";typeof q=="object"?(J=W,se=q.ignoreIllegals,ye=q.language):(Wh("10.7.0","highlight(lang, code, ...args) has been deprecated."),Wh("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),ye=W,J=q),se===void 0&&(se=!0);let Ne={code:J,language:ye};H("before:highlight",Ne);let ae=Ne.result?Ne.result:f(Ne.language,Ne.code,se);return ae.code=Ne.code,H("after:highlight",ae),ae}function f(W,q,se,J){let ye=Object.create(null);function Ne(we,_e){return we.keywords[_e]}function ae(){if(!De.keywords){_t.addText(xt);return}let we=0;De.keywordPatternRe.lastIndex=0;let _e=De.keywordPatternRe.exec(xt),Ie="";for(;_e;){Ie+=xt.substring(we,_e.index);let O=Ae.case_insensitive?_e[0].toLowerCase():_e[0],R=Ne(De,O);if(R){let[L,je]=R;if(_t.addText(Ie),Ie="",ye[O]=(ye[O]||0)+1,ye[O]<=Uve&&(Bt+=je),L.startsWith("_"))Ie+=_e[0];else{let st=Ae.classNameAliases[L]||L;Pe(_e[0],st)}}else Ie+=_e[0];we=De.keywordPatternRe.lastIndex,_e=De.keywordPatternRe.exec(xt)}Ie+=xt.substring(we),_t.addText(Ie)}function Se(){if(xt==="")return;let we=null;if(typeof De.subLanguage=="string"){if(!e[De.subLanguage]){_t.addText(xt);return}we=f(De.subLanguage,xt,!0,it[De.subLanguage]),it[De.subLanguage]=we._top}else we=g(xt,De.subLanguage.length?De.subLanguage:null);De.relevance>0&&(Bt+=we.relevance),_t.__addSublanguage(we._emitter,we.language)}function Re(){De.subLanguage!=null?Se():ae(),xt=""}function Pe(we,_e){we!==""&&(_t.startScope(_e),_t.addText(we),_t.endScope())}function Oe(we,_e){let Ie=1,O=_e.length-1;for(;Ie<=O;){if(!we._emit[Ie]){Ie++;continue}let R=Ae.classNameAliases[we[Ie]]||we[Ie],L=_e[Ie];R?Pe(L,R):(xt=L,ae(),xt=""),Ie++}}function ct(we,_e){return we.scope&&typeof we.scope=="string"&&_t.openNode(Ae.classNameAliases[we.scope]||we.scope),we.beginScope&&(we.beginScope._wrap?(Pe(xt,Ae.classNameAliases[we.beginScope._wrap]||we.beginScope._wrap),xt=""):we.beginScope._multi&&(Oe(we.beginScope,_e),xt="")),De=Object.create(we,{parent:{value:De}}),De}function mt(we,_e,Ie){let O=tve(we.endRe,Ie);if(O){if(we["on:end"]){let R=new Qw(we);we["on:end"](_e,R),R.isMatchIgnored&&(O=!1)}if(O){for(;we.endsParent&&we.parent;)we=we.parent;return we}}if(we.endsWithParent)return mt(we.parent,_e,Ie)}function wt(we){return De.matcher.regexIndex===0?(xt+=we[0],1):(rt=!0,0)}function Me(we){let _e=we[0],Ie=we.rule,O=new Qw(Ie),R=[Ie.__beforeBegin,Ie["on:begin"]];for(let L of R)if(L&&(L(we,O),O.isMatchIgnored))return wt(_e);return Ie.skip?xt+=_e:(Ie.excludeBegin&&(xt+=_e),Re(),!Ie.returnBegin&&!Ie.excludeBegin&&(xt=_e)),ct(Ie,we),Ie.returnBegin?0:_e.length}function ue(we){let _e=we[0],Ie=q.substring(we.index),O=mt(De,we,Ie);if(!O)return S$;let R=De;De.endScope&&De.endScope._wrap?(Re(),Pe(_e,De.endScope._wrap)):De.endScope&&De.endScope._multi?(Re(),Oe(De.endScope,we)):R.skip?xt+=_e:(R.returnEnd||R.excludeEnd||(xt+=_e),Re(),R.excludeEnd&&(xt=_e));do De.scope&&_t.closeNode(),!De.skip&&!De.subLanguage&&(Bt+=De.relevance),De=De.parent;while(De!==O.parent);return O.starts&&ct(O.starts,we),R.returnEnd?0:_e.length}function Te(){let we=[];for(let _e=De;_e!==Ae;_e=_e.parent)_e.scope&&we.unshift(_e.scope);we.forEach(_e=>_t.openNode(_e))}let ce={};function xe(we,_e){let Ie=_e&&_e[0];if(xt+=we,Ie==null)return Re(),0;if(ce.type==="begin"&&_e.type==="end"&&ce.index===_e.index&&Ie===""){if(xt+=q.slice(_e.index,_e.index+1),!i){let O=new Error(`0 width match regex (${W})`);throw O.languageName=W,O.badRule=ce.rule,O}return 1}if(ce=_e,_e.type==="begin")return Me(_e);if(_e.type==="illegal"&&!se){let O=new Error('Illegal lexeme "'+Ie+'" for mode "'+(De.scope||"<unnamed>")+'"');throw O.mode=De,O}else if(_e.type==="end"){let O=ue(_e);if(O!==S$)return O}if(_e.type==="illegal"&&Ie==="")return 1;if(nt>1e5&&nt>_e.index*3)throw new Error("potential infinite loop, way more iterations than matches");return xt+=Ie,Ie.length}let Ae=$(W);if(!Ae)throw Tf(o.replace("{}",W)),new Error('Unknown language: "'+W+'"');let M=Lve(Ae),Ve="",De=J||M,it={},_t=new a.__emitter(a);Te();let xt="",Bt=0,fr=0,nt=0,rt=!1;try{if(Ae.__emitTokens)Ae.__emitTokens(q,_t);else{for(De.matcher.considerAll();;){nt++,rt?rt=!1:De.matcher.considerAll(),De.matcher.lastIndex=fr;let we=De.matcher.exec(q);if(!we)break;let _e=q.substring(fr,we.index),Ie=xe(_e,we);fr=we.index+Ie}xe(q.substring(fr))}return _t.finalize(),Ve=_t.toHTML(),{language:W,value:Ve,relevance:Bt,illegal:!1,_emitter:_t,_top:De}}catch(we){if(we.message&&we.message.includes("Illegal"))return{language:W,value:IP(q),illegal:!0,relevance:0,_illegalBy:{message:we.message,index:fr,context:q.slice(fr-100,fr+100),mode:we.mode,resultSoFar:Ve},_emitter:_t};if(i)return{language:W,value:IP(q),illegal:!1,relevance:0,errorRaised:we,_emitter:_t,_top:De};throw we}}function m(W){let q={value:IP(W),illegal:!1,relevance:0,_top:s,_emitter:new a.__emitter(a)};return q._emitter.addText(W),q}function g(W,q){q=q||a.languages||Object.keys(e);let se=m(W),J=q.filter($).filter(K).map(Re=>f(Re,W,!1));J.unshift(se);let ye=J.sort((Re,Pe)=>{if(Re.relevance!==Pe.relevance)return Pe.relevance-Re.relevance;if(Re.language&&Pe.language){if($(Re.language).supersetOf===Pe.language)return 1;if($(Pe.language).supersetOf===Re.language)return-1}return 0}),[Ne,ae]=ye,Se=Ne;return Se.secondBest=ae,Se}function v(W,q,se){let J=q&&r[q]||se;W.classList.add("hljs"),W.classList.add(`language-${J}`)}function _(W){let q=null,se=c(W);if(l(se))return;if(H("before:highlightElement",{el:W,language:se}),W.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",W);return}if(W.children.length>0&&(a.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(W)),a.throwUnescapedHTML))throw new OP("One of your code blocks includes unescaped HTML.",W.innerHTML);q=W;let J=q.textContent,ye=se?p(J,{language:se,ignoreIllegals:!0}):g(J);W.innerHTML=ye.value,W.dataset.highlighted="yes",v(W,se,ye.language),W.result={language:ye.language,re:ye.relevance,relevance:ye.relevance},ye.secondBest&&(W.secondBest={language:ye.secondBest.language,relevance:ye.secondBest.relevance}),H("after:highlightElement",{el:W,result:ye,text:J})}function S(W){a=w$(a,W)}let T=()=>{I(),Wh("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function w(){I(),Wh("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let E=!1;function I(){if(document.readyState==="loading"){E=!0;return}document.querySelectorAll(a.cssSelector).forEach(_)}function N(){E&&I()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",N,!1);function C(W,q){let se=null;try{se=q(t)}catch(J){if(Tf("Language definition for '{}' could not be registered.".replace("{}",W)),i)Tf(J);else throw J;se=s}se.name||(se.name=W),e[W]=se,se.rawDefinition=q.bind(null,t),se.aliases&&G(se.aliases,{languageName:W})}function k(W){delete e[W];for(let q of Object.keys(r))r[q]===W&&delete r[q]}function U(){return Object.keys(e)}function $(W){return W=(W||"").toLowerCase(),e[W]||e[r[W]]}function G(W,{languageName:q}){typeof W=="string"&&(W=[W]),W.forEach(se=>{r[se.toLowerCase()]=q})}function K(W){let q=$(W);return q&&!q.disableAutodetect}function X(W){W["before:highlightBlock"]&&!W["before:highlightElement"]&&(W["before:highlightElement"]=q=>{W["before:highlightBlock"](Object.assign({block:q.el},q))}),W["after:highlightBlock"]&&!W["after:highlightElement"]&&(W["after:highlightElement"]=q=>{W["after:highlightBlock"](Object.assign({block:q.el},q))})}function te(W){X(W),n.push(W)}function ne(W){let q=n.indexOf(W);q!==-1&&n.splice(q,1)}function H(W,q){let se=W;n.forEach(function(J){J[se]&&J[se](q)})}function re(W){return Wh("10.7.0","highlightBlock will be removed entirely in v12.0"),Wh("10.7.0","Please use highlightElement now."),_(W)}Object.assign(t,{highlight:p,highlightAuto:g,highlightAll:I,highlightElement:_,highlightBlock:re,configure:S,initHighlighting:T,initHighlightingOnLoad:w,registerLanguage:C,unregisterLanguage:k,listLanguages:U,getLanguage:$,registerAliases:G,autoDetection:K,inherit:w$,addPlugin:te,removePlugin:ne}),t.debugMode=function(){i=!1},t.safeMode=function(){i=!0},t.versionString=Fve,t.regex={concat:wf,lookahead:D$,either:RP,optional:Zye,anyNumberOfTimes:Qye};for(let W in Jw)typeof Jw[W]=="object"&&E$(Jw[W]);return Object.assign(t,Jw),t},jh=M$({});jh.newInstance=()=>M$({});F$.exports=jh;jh.HighlightJS=jh;jh.default=jh});var xa=Y(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.Type=j.JsonType=j.JavaScriptTypeBuilder=j.JsonTypeBuilder=j.TypeBuilder=j.TypeBuilderError=j.TransformEncodeBuilder=j.TransformDecodeBuilder=j.TemplateLiteralDslParser=j.TemplateLiteralGenerator=j.TemplateLiteralGeneratorError=j.TemplateLiteralFinite=j.TemplateLiteralFiniteError=j.TemplateLiteralParser=j.TemplateLiteralParserError=j.TemplateLiteralResolver=j.TemplateLiteralPattern=j.TemplateLiteralPatternError=j.UnionResolver=j.KeyArrayResolver=j.KeyArrayResolverError=j.KeyResolver=j.ObjectMap=j.Intrinsic=j.IndexedAccessor=j.TypeClone=j.TypeExtends=j.TypeExtendsResult=j.TypeExtendsError=j.ExtendsUndefined=j.TypeGuard=j.TypeGuardUnknownTypeError=j.ValueGuard=j.FormatRegistry=j.TypeBoxError=j.TypeRegistry=j.PatternStringExact=j.PatternNumberExact=j.PatternBooleanExact=j.PatternString=j.PatternNumber=j.PatternBoolean=j.Kind=j.Hint=j.Optional=j.Readonly=j.Transform=void 0;j.Transform=Symbol.for("TypeBox.Transform");j.Readonly=Symbol.for("TypeBox.Readonly");j.Optional=Symbol.for("TypeBox.Optional");j.Hint=Symbol.for("TypeBox.Hint");j.Kind=Symbol.for("TypeBox.Kind");j.PatternBoolean="(true|false)";j.PatternNumber="(0|[1-9][0-9]*)";j.PatternString="(.*)";j.PatternBooleanExact=`^${j.PatternBoolean}$`;j.PatternNumberExact=`^${j.PatternNumber}$`;j.PatternStringExact=`^${j.PatternString}$`;var QP;(function(t){let e=new Map;function r(){return new Map(e)}t.Entries=r;function n(){return e.clear()}t.Clear=n;function i(l){return e.delete(l)}t.Delete=i;function o(l){return e.has(l)}t.Has=o;function s(l,c){e.set(l,c)}t.Set=s;function a(l){return e.get(l)}t.Get=a})(QP||(j.TypeRegistry=QP={}));var ol=class extends Error{constructor(e){super(e)}};j.TypeBoxError=ol;var iq;(function(t){let e=new Map;function r(){return new Map(e)}t.Entries=r;function n(){return e.clear()}t.Clear=n;function i(l){return e.delete(l)}t.Delete=i;function o(l){return e.has(l)}t.Has=o;function s(l,c){e.set(l,c)}t.Set=s;function a(l){return e.get(l)}t.Get=a})(iq||(j.FormatRegistry=iq={}));var Be;(function(t){function e(f){return Array.isArray(f)}t.IsArray=e;function r(f){return typeof f=="bigint"}t.IsBigInt=r;function n(f){return typeof f=="boolean"}t.IsBoolean=n;function i(f){return f instanceof globalThis.Date}t.IsDate=i;function o(f){return f===null}t.IsNull=o;function s(f){return typeof f=="number"}t.IsNumber=s;function a(f){return typeof f=="object"&&f!==null}t.IsObject=a;function l(f){return typeof f=="string"}t.IsString=l;function c(f){return f instanceof globalThis.Uint8Array}t.IsUint8Array=c;function p(f){return f===void 0}t.IsUndefined=p})(Be||(j.ValueGuard=Be={}));var ZP=class extends ol{};j.TypeGuardUnknownTypeError=ZP;var z;(function(t){function e(M){try{return new RegExp(M),!0}catch{return!1}}function r(M){if(!Be.IsString(M))return!1;for(let Ve=0;Ve<M.length;Ve++){let De=M.charCodeAt(Ve);if(De>=7&&De<=13||De===27||De===127)return!1}return!0}function n(M){return s(M)||Ae(M)}function i(M){return Be.IsUndefined(M)||Be.IsBigInt(M)}function o(M){return Be.IsUndefined(M)||Be.IsNumber(M)}function s(M){return Be.IsUndefined(M)||Be.IsBoolean(M)}function a(M){return Be.IsUndefined(M)||Be.IsString(M)}function l(M){return Be.IsUndefined(M)||Be.IsString(M)&&r(M)&&e(M)}function c(M){return Be.IsUndefined(M)||Be.IsString(M)&&r(M)}function p(M){return Be.IsUndefined(M)||Ae(M)}function f(M){return C(M,"Any")&&a(M.$id)}t.TAny=f;function m(M){return C(M,"Array")&&M.type==="array"&&a(M.$id)&&Ae(M.items)&&o(M.minItems)&&o(M.maxItems)&&s(M.uniqueItems)&&p(M.contains)&&o(M.minContains)&&o(M.maxContains)}t.TArray=m;function g(M){return C(M,"AsyncIterator")&&M.type==="AsyncIterator"&&a(M.$id)&&Ae(M.items)}t.TAsyncIterator=g;function v(M){return C(M,"BigInt")&&M.type==="bigint"&&a(M.$id)&&i(M.exclusiveMaximum)&&i(M.exclusiveMinimum)&&i(M.maximum)&&i(M.minimum)&&i(M.multipleOf)}t.TBigInt=v;function _(M){return C(M,"Boolean")&&M.type==="boolean"&&a(M.$id)}t.TBoolean=_;function S(M){return C(M,"Constructor")&&M.type==="Constructor"&&a(M.$id)&&Be.IsArray(M.parameters)&&M.parameters.every(Ve=>Ae(Ve))&&Ae(M.returns)}t.TConstructor=S;function T(M){return C(M,"Date")&&M.type==="Date"&&a(M.$id)&&o(M.exclusiveMaximumTimestamp)&&o(M.exclusiveMinimumTimestamp)&&o(M.maximumTimestamp)&&o(M.minimumTimestamp)&&o(M.multipleOfTimestamp)}t.TDate=T;function w(M){return C(M,"Function")&&M.type==="Function"&&a(M.$id)&&Be.IsArray(M.parameters)&&M.parameters.every(Ve=>Ae(Ve))&&Ae(M.returns)}t.TFunction=w;function E(M){return C(M,"Integer")&&M.type==="integer"&&a(M.$id)&&o(M.exclusiveMaximum)&&o(M.exclusiveMinimum)&&o(M.maximum)&&o(M.minimum)&&o(M.multipleOf)}t.TInteger=E;function I(M){return C(M,"Intersect")&&!(Be.IsString(M.type)&&M.type!=="object")&&Be.IsArray(M.allOf)&&M.allOf.every(Ve=>Ae(Ve)&&!Re(Ve))&&a(M.type)&&(s(M.unevaluatedProperties)||p(M.unevaluatedProperties))&&a(M.$id)}t.TIntersect=I;function N(M){return C(M,"Iterator")&&M.type==="Iterator"&&a(M.$id)&&Ae(M.items)}t.TIterator=N;function C(M,Ve){return k(M)&&M[j.Kind]===Ve}t.TKindOf=C;function k(M){return Be.IsObject(M)&&j.Kind in M&&Be.IsString(M[j.Kind])}t.TKind=k;function U(M){return K(M)&&Be.IsString(M.const)}t.TLiteralString=U;function $(M){return K(M)&&Be.IsNumber(M.const)}t.TLiteralNumber=$;function G(M){return K(M)&&Be.IsBoolean(M.const)}t.TLiteralBoolean=G;function K(M){return C(M,"Literal")&&a(M.$id)&&(Be.IsBoolean(M.const)||Be.IsNumber(M.const)||Be.IsString(M.const))}t.TLiteral=K;function X(M){return C(M,"Never")&&Be.IsObject(M.not)&&Object.getOwnPropertyNames(M.not).length===0}t.TNever=X;function te(M){return C(M,"Not")&&Ae(M.not)}t.TNot=te;function ne(M){return C(M,"Null")&&M.type==="null"&&a(M.$id)}t.TNull=ne;function H(M){return C(M,"Number")&&M.type==="number"&&a(M.$id)&&o(M.exclusiveMaximum)&&o(M.exclusiveMinimum)&&o(M.maximum)&&o(M.minimum)&&o(M.multipleOf)}t.TNumber=H;function re(M){return C(M,"Object")&&M.type==="object"&&a(M.$id)&&Be.IsObject(M.properties)&&n(M.additionalProperties)&&o(M.minProperties)&&o(M.maxProperties)&&Object.entries(M.properties).every(([Ve,De])=>r(Ve)&&Ae(De))}t.TObject=re;function W(M){return C(M,"Promise")&&M.type==="Promise"&&a(M.$id)&&Ae(M.item)}t.TPromise=W;function q(M){return C(M,"Record")&&M.type==="object"&&a(M.$id)&&n(M.additionalProperties)&&Be.IsObject(M.patternProperties)&&(Ve=>{let De=Object.getOwnPropertyNames(Ve.patternProperties);return De.length===1&&e(De[0])&&Be.IsObject(Ve.patternProperties)&&Ae(Ve.patternProperties[De[0]])})(M)}t.TRecord=q;function se(M){return Be.IsObject(M)&&j.Hint in M&&M[j.Hint]==="Recursive"}t.TRecursive=se;function J(M){return C(M,"Ref")&&a(M.$id)&&Be.IsString(M.$ref)}t.TRef=J;function ye(M){return C(M,"String")&&M.type==="string"&&a(M.$id)&&o(M.minLength)&&o(M.maxLength)&&l(M.pattern)&&c(M.format)}t.TString=ye;function Ne(M){return C(M,"Symbol")&&M.type==="symbol"&&a(M.$id)}t.TSymbol=Ne;function ae(M){return C(M,"TemplateLiteral")&&M.type==="string"&&Be.IsString(M.pattern)&&M.pattern[0]==="^"&&M.pattern[M.pattern.length-1]==="$"}t.TTemplateLiteral=ae;function Se(M){return C(M,"This")&&a(M.$id)&&Be.IsString(M.$ref)}t.TThis=Se;function Re(M){return Be.IsObject(M)&&j.Transform in M}t.TTransform=Re;function Pe(M){return C(M,"Tuple")&&M.type==="array"&&a(M.$id)&&Be.IsNumber(M.minItems)&&Be.IsNumber(M.maxItems)&&M.minItems===M.maxItems&&(Be.IsUndefined(M.items)&&Be.IsUndefined(M.additionalItems)&&M.minItems===0||Be.IsArray(M.items)&&M.items.every(Ve=>Ae(Ve)))}t.TTuple=Pe;function Oe(M){return C(M,"Undefined")&&M.type==="undefined"&&a(M.$id)}t.TUndefined=Oe;function ct(M){return mt(M)&&M.anyOf.every(Ve=>U(Ve)||$(Ve))}t.TUnionLiteral=ct;function mt(M){return C(M,"Union")&&a(M.$id)&&Be.IsObject(M)&&Be.IsArray(M.anyOf)&&M.anyOf.every(Ve=>Ae(Ve))}t.TUnion=mt;function wt(M){return C(M,"Uint8Array")&&M.type==="Uint8Array"&&a(M.$id)&&o(M.minByteLength)&&o(M.maxByteLength)}t.TUint8Array=wt;function Me(M){return C(M,"Unknown")&&a(M.$id)}t.TUnknown=Me;function ue(M){return C(M,"Unsafe")}t.TUnsafe=ue;function Te(M){return C(M,"Void")&&M.type==="void"&&a(M.$id)}t.TVoid=Te;function ce(M){return Be.IsObject(M)&&M[j.Readonly]==="Readonly"}t.TReadonly=ce;function xe(M){return Be.IsObject(M)&&M[j.Optional]==="Optional"}t.TOptional=xe;function Ae(M){return Be.IsObject(M)&&(f(M)||m(M)||_(M)||v(M)||g(M)||S(M)||T(M)||w(M)||E(M)||I(M)||N(M)||K(M)||X(M)||te(M)||ne(M)||H(M)||re(M)||W(M)||q(M)||J(M)||ye(M)||Ne(M)||ae(M)||Se(M)||Pe(M)||Oe(M)||mt(M)||wt(M)||Me(M)||ue(M)||Te(M)||k(M)&&QP.Has(M[j.Kind]))}t.TSchema=Ae})(z||(j.TypeGuard=z={}));var oq;(function(t){function e(r){return r[j.Kind]==="Intersect"?r.allOf.every(n=>e(n)):r[j.Kind]==="Union"?r.anyOf.some(n=>e(n)):r[j.Kind]==="Undefined"?!0:r[j.Kind]==="Not"?!e(r.not):!1}t.Check=e})(oq||(j.ExtendsUndefined=oq={}));var fS=class extends ol{};j.TypeExtendsError=fS;var fe;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(fe||(j.TypeExtendsResult=fe={}));var Rf;(function(t){function e(O){return O===fe.False?O:fe.True}function r(O){throw new fS(O)}function n(O){return z.TNever(O)||z.TIntersect(O)||z.TUnion(O)||z.TUnknown(O)||z.TAny(O)}function i(O,R){return z.TNever(R)?C(O,R):z.TIntersect(R)?w(O,R):z.TUnion(R)?xt(O,R):z.TUnknown(R)?fr(O,R):z.TAny(R)?o(O,R):r("StructuralRight")}function o(O,R){return fe.True}function s(O,R){return z.TIntersect(R)?w(O,R):z.TUnion(R)&&R.anyOf.some(L=>z.TAny(L)||z.TUnknown(L))?fe.True:z.TUnion(R)?fe.Union:z.TUnknown(R)||z.TAny(R)?fe.True:fe.Union}function a(O,R){return z.TUnknown(O)?fe.False:z.TAny(O)?fe.Union:z.TNever(O)?fe.True:fe.False}function l(O,R){return z.TObject(R)&&ae(R)?fe.True:n(R)?i(O,R):z.TArray(R)?e(_e(O.items,R.items)):fe.False}function c(O,R){return n(R)?i(O,R):z.TAsyncIterator(R)?e(_e(O.items,R.items)):fe.False}function p(O,R){return n(R)?i(O,R):z.TObject(R)?Pe(O,R):z.TRecord(R)?Me(O,R):z.TBigInt(R)?fe.True:fe.False}function f(O,R){return z.TLiteral(O)&&Be.IsBoolean(O.const)||z.TBoolean(O)?fe.True:fe.False}function m(O,R){return n(R)?i(O,R):z.TObject(R)?Pe(O,R):z.TRecord(R)?Me(O,R):z.TBoolean(R)?fe.True:fe.False}function g(O,R){return n(R)?i(O,R):z.TObject(R)?Pe(O,R):z.TConstructor(R)?O.parameters.length>R.parameters.length?fe.False:O.parameters.every((L,je)=>e(_e(R.parameters[je],L))===fe.True)?e(_e(O.returns,R.returns)):fe.False:fe.False}function v(O,R){return n(R)?i(O,R):z.TObject(R)?Pe(O,R):z.TRecord(R)?Me(O,R):z.TDate(R)?fe.True:fe.False}function _(O,R){return n(R)?i(O,R):z.TObject(R)?Pe(O,R):z.TFunction(R)?O.parameters.length>R.parameters.length?fe.False:O.parameters.every((L,je)=>e(_e(R.parameters[je],L))===fe.True)?e(_e(O.returns,R.returns)):fe.False:fe.False}function S(O,R){return z.TLiteral(O)&&Be.IsNumber(O.const)||z.TNumber(O)||z.TInteger(O)?fe.True:fe.False}function T(O,R){return z.TInteger(R)||z.TNumber(R)?fe.True:n(R)?i(O,R):z.TObject(R)?Pe(O,R):z.TRecord(R)?Me(O,R):fe.False}function w(O,R){return R.allOf.every(L=>_e(O,L)===fe.True)?fe.True:fe.False}function E(O,R){return O.allOf.some(L=>_e(L,R)===fe.True)?fe.True:fe.False}function I(O,R){return n(R)?i(O,R):z.TIterator(R)?e(_e(O.items,R.items)):fe.False}function N(O,R){return z.TLiteral(R)&&R.const===O.const?fe.True:n(R)?i(O,R):z.TObject(R)?Pe(O,R):z.TRecord(R)?Me(O,R):z.TString(R)?Te(O,R):z.TNumber(R)?K(O,R):z.TInteger(R)?S(O,R):z.TBoolean(R)?f(O,R):fe.False}function C(O,R){return fe.False}function k(O,R){return fe.True}function U(O){let[R,L]=[O,0];for(;z.TNot(R);)R=R.not,L+=1;return L%2===0?R:j.Type.Unknown()}function $(O,R){return z.TNot(O)?_e(U(O),R):z.TNot(R)?_e(O,U(R)):r("Invalid fallthrough for Not")}function G(O,R){return n(R)?i(O,R):z.TObject(R)?Pe(O,R):z.TRecord(R)?Me(O,R):z.TNull(R)?fe.True:fe.False}function K(O,R){return z.TLiteralNumber(O)||z.TNumber(O)||z.TInteger(O)?fe.True:fe.False}function X(O,R){return n(R)?i(O,R):z.TObject(R)?Pe(O,R):z.TRecord(R)?Me(O,R):z.TInteger(R)||z.TNumber(R)?fe.True:fe.False}function te(O,R){return Object.getOwnPropertyNames(O.properties).length===R}function ne(O){return ae(O)}function H(O){return te(O,0)||te(O,1)&&"description"in O.properties&&z.TUnion(O.properties.description)&&O.properties.description.anyOf.length===2&&(z.TString(O.properties.description.anyOf[0])&&z.TUndefined(O.properties.description.anyOf[1])||z.TString(O.properties.description.anyOf[1])&&z.TUndefined(O.properties.description.anyOf[0]))}function re(O){return te(O,0)}function W(O){return te(O,0)}function q(O){return te(O,0)}function se(O){return te(O,0)}function J(O){return ae(O)}function ye(O){let R=j.Type.Number();return te(O,0)||te(O,1)&&"length"in O.properties&&e(_e(O.properties.length,R))===fe.True}function Ne(O){return te(O,0)}function ae(O){let R=j.Type.Number();return te(O,0)||te(O,1)&&"length"in O.properties&&e(_e(O.properties.length,R))===fe.True}function Se(O){let R=j.Type.Function([j.Type.Any()],j.Type.Any());return te(O,0)||te(O,1)&&"then"in O.properties&&e(_e(O.properties.then,R))===fe.True}function Re(O,R){return _e(O,R)===fe.False||z.TOptional(O)&&!z.TOptional(R)?fe.False:fe.True}function Pe(O,R){return z.TUnknown(O)?fe.False:z.TAny(O)?fe.Union:z.TNever(O)||z.TLiteralString(O)&&ne(R)||z.TLiteralNumber(O)&&re(R)||z.TLiteralBoolean(O)&&W(R)||z.TSymbol(O)&&H(R)||z.TBigInt(O)&&q(R)||z.TString(O)&&ne(R)||z.TSymbol(O)&&H(R)||z.TNumber(O)&&re(R)||z.TInteger(O)&&re(R)||z.TBoolean(O)&&W(R)||z.TUint8Array(O)&&J(R)||z.TDate(O)&&se(R)||z.TConstructor(O)&&Ne(R)||z.TFunction(O)&&ye(R)?fe.True:z.TRecord(O)&&z.TString(mt(O))?R[j.Hint]==="Record"?fe.True:fe.False:z.TRecord(O)&&z.TNumber(mt(O))?te(R,0)?fe.True:fe.False:fe.False}function Oe(O,R){return n(R)?i(O,R):z.TRecord(R)?Me(O,R):z.TObject(R)?(()=>{for(let L of Object.getOwnPropertyNames(R.properties)){if(!(L in O.properties)&&!z.TOptional(R.properties[L]))return fe.False;if(z.TOptional(R.properties[L]))return fe.True;if(Re(O.properties[L],R.properties[L])===fe.False)return fe.False}return fe.True})():fe.False}function ct(O,R){return n(R)?i(O,R):z.TObject(R)&&Se(R)?fe.True:z.TPromise(R)?e(_e(O.item,R.item)):fe.False}function mt(O){return j.PatternNumberExact in O.patternProperties?j.Type.Number():j.PatternStringExact in O.patternProperties?j.Type.String():r("Unknown record key pattern")}function wt(O){return j.PatternNumberExact in O.patternProperties?O.patternProperties[j.PatternNumberExact]:j.PatternStringExact in O.patternProperties?O.patternProperties[j.PatternStringExact]:r("Unable to get record value schema")}function Me(O,R){let[L,je]=[mt(R),wt(R)];return z.TLiteralString(O)&&z.TNumber(L)&&e(_e(O,je))===fe.True?fe.True:z.TUint8Array(O)&&z.TNumber(L)||z.TString(O)&&z.TNumber(L)||z.TArray(O)&&z.TNumber(L)?_e(O,je):z.TObject(O)?(()=>{for(let st of Object.getOwnPropertyNames(O.properties))if(Re(je,O.properties[st])===fe.False)return fe.False;return fe.True})():fe.False}function ue(O,R){return n(R)?i(O,R):z.TObject(R)?Pe(O,R):z.TRecord(R)?_e(wt(O),wt(R)):fe.False}function Te(O,R){return z.TLiteral(O)&&Be.IsString(O.const)||z.TString(O)?fe.True:fe.False}function ce(O,R){return n(R)?i(O,R):z.TObject(R)?Pe(O,R):z.TRecord(R)?Me(O,R):z.TString(R)?fe.True:fe.False}function xe(O,R){return n(R)?i(O,R):z.TObject(R)?Pe(O,R):z.TRecord(R)?Me(O,R):z.TSymbol(R)?fe.True:fe.False}function Ae(O,R){return z.TTemplateLiteral(O)?_e(ic.Resolve(O),R):z.TTemplateLiteral(R)?_e(O,ic.Resolve(R)):r("Invalid fallthrough for TemplateLiteral")}function M(O,R){return z.TArray(R)&&O.items!==void 0&&O.items.every(L=>_e(L,R.items)===fe.True)}function Ve(O,R){return z.TNever(O)?fe.True:z.TUnknown(O)?fe.False:z.TAny(O)?fe.Union:fe.False}function De(O,R){return n(R)?i(O,R):z.TObject(R)&&ae(R)||z.TArray(R)&&M(O,R)?fe.True:z.TTuple(R)?Be.IsUndefined(O.items)&&!Be.IsUndefined(R.items)||!Be.IsUndefined(O.items)&&Be.IsUndefined(R.items)?fe.False:Be.IsUndefined(O.items)&&!Be.IsUndefined(R.items)||O.items.every((L,je)=>_e(L,R.items[je])===fe.True)?fe.True:fe.False:fe.False}function it(O,R){return n(R)?i(O,R):z.TObject(R)?Pe(O,R):z.TRecord(R)?Me(O,R):z.TUint8Array(R)?fe.True:fe.False}function _t(O,R){return n(R)?i(O,R):z.TObject(R)?Pe(O,R):z.TRecord(R)?Me(O,R):z.TVoid(R)?rt(O,R):z.TUndefined(R)?fe.True:fe.False}function xt(O,R){return R.anyOf.some(L=>_e(O,L)===fe.True)?fe.True:fe.False}function Bt(O,R){return O.anyOf.every(L=>_e(L,R)===fe.True)?fe.True:fe.False}function fr(O,R){return fe.True}function nt(O,R){return z.TNever(R)?C(O,R):z.TIntersect(R)?w(O,R):z.TUnion(R)?xt(O,R):z.TAny(R)?o(O,R):z.TString(R)?Te(O,R):z.TNumber(R)?K(O,R):z.TInteger(R)?S(O,R):z.TBoolean(R)?f(O,R):z.TArray(R)?a(O,R):z.TTuple(R)?Ve(O,R):z.TObject(R)?Pe(O,R):z.TUnknown(R)?fe.True:fe.False}function rt(O,R){return z.TUndefined(O)||z.TUndefined(O)?fe.True:fe.False}function we(O,R){return z.TIntersect(R)?w(O,R):z.TUnion(R)?xt(O,R):z.TUnknown(R)?fr(O,R):z.TAny(R)?o(O,R):z.TObject(R)?Pe(O,R):z.TVoid(R)?fe.True:fe.False}function _e(O,R){return z.TTemplateLiteral(O)||z.TTemplateLiteral(R)?Ae(O,R):z.TNot(O)||z.TNot(R)?$(O,R):z.TAny(O)?s(O,R):z.TArray(O)?l(O,R):z.TBigInt(O)?p(O,R):z.TBoolean(O)?m(O,R):z.TAsyncIterator(O)?c(O,R):z.TConstructor(O)?g(O,R):z.TDate(O)?v(O,R):z.TFunction(O)?_(O,R):z.TInteger(O)?T(O,R):z.TIntersect(O)?E(O,R):z.TIterator(O)?I(O,R):z.TLiteral(O)?N(O,R):z.TNever(O)?k(O,R):z.TNull(O)?G(O,R):z.TNumber(O)?X(O,R):z.TObject(O)?Oe(O,R):z.TRecord(O)?ue(O,R):z.TString(O)?ce(O,R):z.TSymbol(O)?xe(O,R):z.TTuple(O)?De(O,R):z.TPromise(O)?ct(O,R):z.TUint8Array(O)?it(O,R):z.TUndefined(O)?_t(O,R):z.TUnion(O)?Bt(O,R):z.TUnknown(O)?nt(O,R):z.TVoid(O)?we(O,R):r(`Unknown left type operand '${O[j.Kind]}'`)}function Ie(O,R){return _e(O,R)}t.Extends=Ie})(Rf||(j.TypeExtends=Rf={}));var lt;(function(t){function e(l){return l.map(c=>o(c))}function r(l){return new Date(l.getTime())}function n(l){return new Uint8Array(l)}function i(l){let c=Object.getOwnPropertyNames(l).reduce((f,m)=>({...f,[m]:o(l[m])}),{}),p=Object.getOwnPropertySymbols(l).reduce((f,m)=>({...f,[m]:o(l[m])}),{});return{...c,...p}}function o(l){return Be.IsArray(l)?e(l):Be.IsDate(l)?r(l):Be.IsUint8Array(l)?n(l):Be.IsObject(l)?i(l):l}function s(l){return l.map(c=>a(c))}t.Rest=s;function a(l,c={}){return{...o(l),...c}}t.Type=a})(lt||(j.TypeClone=lt={}));var e3;(function(t){function e(g){return g.map(v=>{let{[j.Optional]:_,...S}=lt.Type(v);return S})}function r(g){return g.every(v=>z.TOptional(v))}function n(g){return g.some(v=>z.TOptional(v))}function i(g){return r(g.allOf)?j.Type.Optional(j.Type.Intersect(e(g.allOf))):g}function o(g){return n(g.anyOf)?j.Type.Optional(j.Type.Union(e(g.anyOf))):g}function s(g){return g[j.Kind]==="Intersect"?i(g):g[j.Kind]==="Union"?o(g):g}function a(g,v){let _=g.allOf.reduce((S,T)=>{let w=f(T,v);return w[j.Kind]==="Never"?S:[...S,w]},[]);return s(j.Type.Intersect(_))}function l(g,v){let _=g.anyOf.map(S=>f(S,v));return s(j.Type.Union(_))}function c(g,v){let _=g.properties[v];return Be.IsUndefined(_)?j.Type.Never():j.Type.Union([_])}function p(g,v){let _=g.items;if(Be.IsUndefined(_))return j.Type.Never();let S=_[v];return Be.IsUndefined(S)?j.Type.Never():S}function f(g,v){return g[j.Kind]==="Intersect"?a(g,v):g[j.Kind]==="Union"?l(g,v):g[j.Kind]==="Object"?c(g,v):g[j.Kind]==="Tuple"?p(g,v):j.Type.Never()}function m(g,v,_={}){let S=v.map(T=>f(g,T.toString()));return s(j.Type.Union(S,_))}t.Resolve=m})(e3||(j.IndexedAccessor=e3={}));var Yh;(function(t){function e(p){let[f,m]=[p.slice(0,1),p.slice(1)];return`${f.toLowerCase()}${m}`}function r(p){let[f,m]=[p.slice(0,1),p.slice(1)];return`${f.toUpperCase()}${m}`}function n(p){return p.toUpperCase()}function i(p){return p.toLowerCase()}function o(p,f){let m=Jh.ParseExact(p.pattern);if(!Qh.Check(m))return{...p,pattern:s(p.pattern,f)};let _=[...Zh.Generate(m)].map(w=>j.Type.Literal(w)),S=a(_,f),T=j.Type.Union(S);return j.Type.TemplateLiteral([T])}function s(p,f){return typeof p=="string"?f==="Uncapitalize"?e(p):f==="Capitalize"?r(p):f==="Uppercase"?n(p):f==="Lowercase"?i(p):p:p.toString()}function a(p,f){if(p.length===0)return[];let[m,...g]=p;return[c(m,f),...a(g,f)]}function l(p,f){return z.TTemplateLiteral(p)?o(p,f):z.TUnion(p)?j.Type.Union(a(p.anyOf,f)):z.TLiteral(p)?j.Type.Literal(s(p.const,f)):p}function c(p,f){return l(p,f)}t.Map=c})(Yh||(j.Intrinsic=Yh={}));var Xh;(function(t){function e(s,a){return j.Type.Intersect(s.allOf.map(l=>i(l,a)),{...s})}function r(s,a){return j.Type.Union(s.anyOf.map(l=>i(l,a)),{...s})}function n(s,a){return a(s)}function i(s,a){return s[j.Kind]==="Intersect"?e(s,a):s[j.Kind]==="Union"?r(s,a):s[j.Kind]==="Object"?n(s,a):s}function o(s,a,l){return{...i(lt.Type(s),a),...l}}t.Map=o})(Xh||(j.ObjectMap=Xh={}));var mS;(function(t){function e(c){return c[0]==="^"&&c[c.length-1]==="$"?c.slice(1,c.length-1):c}function r(c,p){return c.allOf.reduce((f,m)=>[...f,...s(m,p)],[])}function n(c,p){let f=c.anyOf.map(m=>s(m,p));return[...f.reduce((m,g)=>g.map(v=>f.every(_=>_.includes(v))?m.add(v):m)[0],new Set)]}function i(c,p){return Object.getOwnPropertyNames(c.properties)}function o(c,p){return p.includePatterns?Object.getOwnPropertyNames(c.patternProperties):[]}function s(c,p){return z.TIntersect(c)?r(c,p):z.TUnion(c)?n(c,p):z.TObject(c)?i(c,p):z.TRecord(c)?o(c,p):[]}function a(c,p){return[...new Set(s(c,p))]}t.ResolveKeys=a;function l(c){return`^(${a(c,{includePatterns:!0}).map(m=>`(${e(m)})`).join("|")})$`}t.ResolvePattern=l})(mS||(j.KeyResolver=mS={}));var hS=class extends ol{};j.KeyArrayResolverError=hS;var x0;(function(t){function e(r){return Array.isArray(r)?r:z.TUnionLiteral(r)?r.anyOf.map(n=>n.const.toString()):z.TLiteral(r)?[r.const]:z.TTemplateLiteral(r)?(()=>{let n=Jh.ParseExact(r.pattern);if(!Qh.Check(n))throw new hS("Cannot resolve keys from infinite template expression");return[...Zh.Generate(n)]})():[]}t.Resolve=e})(x0||(j.KeyArrayResolver=x0={}));var t3;(function(t){function*e(n){for(let i of n.anyOf)i[j.Kind]==="Union"?yield*e(i):yield i}function r(n){return j.Type.Union([...e(n)],{...n})}t.Resolve=r})(t3||(j.UnionResolver=t3={}));var gS=class extends ol{};j.TemplateLiteralPatternError=gS;var yS;(function(t){function e(o){throw new gS(o)}function r(o){return o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function n(o,s){return z.TTemplateLiteral(o)?o.pattern.slice(1,o.pattern.length-1):z.TUnion(o)?`(${o.anyOf.map(a=>n(a,s)).join("|")})`:z.TNumber(o)?`${s}${j.PatternNumber}`:z.TInteger(o)?`${s}${j.PatternNumber}`:z.TBigInt(o)?`${s}${j.PatternNumber}`:z.TString(o)?`${s}${j.PatternString}`:z.TLiteral(o)?`${s}${r(o.const.toString())}`:z.TBoolean(o)?`${s}${j.PatternBoolean}`:e(`Unexpected Kind '${o[j.Kind]}'`)}function i(o){return`^${o.map(s=>n(s,"")).join("")}$`}t.Create=i})(yS||(j.TemplateLiteralPattern=yS={}));var ic;(function(t){function e(r){let n=Jh.ParseExact(r.pattern);if(!Qh.Check(n))return j.Type.String();let i=[...Zh.Generate(n)].map(o=>j.Type.Literal(o));return j.Type.Union(i)}t.Resolve=e})(ic||(j.TemplateLiteralResolver=ic={}));var T0=class extends ol{};j.TemplateLiteralParserError=T0;var Jh;(function(t){function e(g,v,_){return g[v]===_&&g.charCodeAt(v-1)!==92}function r(g,v){return e(g,v,"(")}function n(g,v){return e(g,v,")")}function i(g,v){return e(g,v,"|")}function o(g){if(!(r(g,0)&&n(g,g.length-1)))return!1;let v=0;for(let _=0;_<g.length;_++)if(r(g,_)&&(v+=1),n(g,_)&&(v-=1),v===0&&_!==g.length-1)return!1;return!0}function s(g){return g.slice(1,g.length-1)}function a(g){let v=0;for(let _=0;_<g.length;_++)if(r(g,_)&&(v+=1),n(g,_)&&(v-=1),i(g,_)&&v===0)return!0;return!1}function l(g){for(let v=0;v<g.length;v++)if(r(g,v))return!0;return!1}function c(g){let[v,_]=[0,0],S=[];for(let w=0;w<g.length;w++)if(r(g,w)&&(v+=1),n(g,w)&&(v-=1),i(g,w)&&v===0){let E=g.slice(_,w);E.length>0&&S.push(f(E)),_=w+1}let T=g.slice(_);return T.length>0&&S.push(f(T)),S.length===0?{type:"const",const:""}:S.length===1?S[0]:{type:"or",expr:S}}function p(g){function v(T,w){if(!r(T,w))throw new T0("TemplateLiteralParser: Index must point to open parens");let E=0;for(let I=w;I<T.length;I++)if(r(T,I)&&(E+=1),n(T,I)&&(E-=1),E===0)return[w,I];throw new T0("TemplateLiteralParser: Unclosed group parens in expression")}function _(T,w){for(let E=w;E<T.length;E++)if(r(T,E))return[w,E];return[w,T.length]}let S=[];for(let T=0;T<g.length;T++)if(r(g,T)){let[w,E]=v(g,T),I=g.slice(w,E+1);S.push(f(I)),T=E}else{let[w,E]=_(g,T),I=g.slice(w,E);I.length>0&&S.push(f(I)),T=E-1}return S.length===0?{type:"const",const:""}:S.length===1?S[0]:{type:"and",expr:S}}function f(g){return o(g)?f(s(g)):a(g)?c(g):l(g)?p(g):{type:"const",const:g}}t.Parse=f;function m(g){return f(g.slice(1,g.length-1))}t.ParseExact=m})(Jh||(j.TemplateLiteralParser=Jh={}));var vS=class extends ol{};j.TemplateLiteralFiniteError=vS;var Qh;(function(t){function e(s){throw new vS(s)}function r(s){return s.type==="or"&&s.expr.length===2&&s.expr[0].type==="const"&&s.expr[0].const==="0"&&s.expr[1].type==="const"&&s.expr[1].const==="[1-9][0-9]*"}function n(s){return s.type==="or"&&s.expr.length===2&&s.expr[0].type==="const"&&s.expr[0].const==="true"&&s.expr[1].type==="const"&&s.expr[1].const==="false"}function i(s){return s.type==="const"&&s.const===".*"}function o(s){return n(s)?!0:r(s)||i(s)?!1:s.type==="and"?s.expr.every(a=>o(a)):s.type==="or"?s.expr.every(a=>o(a)):s.type==="const"?!0:e("Unknown expression type")}t.Check=o})(Qh||(j.TemplateLiteralFinite=Qh={}));var _S=class extends ol{};j.TemplateLiteralGeneratorError=_S;var Zh;(function(t){function*e(s){if(s.length===1)return yield*s[0];for(let a of s[0])for(let l of e(s.slice(1)))yield`${a}${l}`}function*r(s){return yield*e(s.expr.map(a=>[...o(a)]))}function*n(s){for(let a of s.expr)yield*o(a)}function*i(s){return yield s.const}function*o(s){return s.type==="and"?yield*r(s):s.type==="or"?yield*n(s):s.type==="const"?yield*i(s):(()=>{throw new _S("Unknown expression")})()}t.Generate=o})(Zh||(j.TemplateLiteralGenerator=Zh={}));var r3;(function(t){function*e(o){let s=o.trim().replace(/"|'/g,"");return s==="boolean"?yield j.Type.Boolean():s==="number"?yield j.Type.Number():s==="bigint"?yield j.Type.BigInt():s==="string"?yield j.Type.String():yield(()=>{let a=s.split("|").map(l=>j.Type.Literal(l.trim()));return a.length===0?j.Type.Never():a.length===1?a[0]:j.Type.Union(a)})()}function*r(o){if(o[1]!=="{"){let s=j.Type.Literal("$"),a=n(o.slice(1));return yield*[s,...a]}for(let s=2;s<o.length;s++)if(o[s]==="}"){let a=e(o.slice(2,s)),l=n(o.slice(s+1));return yield*[...a,...l]}yield j.Type.Literal(o)}function*n(o){for(let s=0;s<o.length;s++)if(o[s]==="$"){let a=j.Type.Literal(o.slice(0,s)),l=r(o.slice(s));return yield*[a,...l]}yield j.Type.Literal(o)}function i(o){return[...n(o)]}t.Parse=i})(r3||(j.TemplateLiteralDslParser=r3={}));var bS=class{constructor(e){this.schema=e}Decode(e){return new xS(this.schema,e)}};j.TransformDecodeBuilder=bS;var xS=class{constructor(e,r){this.schema=e,this.decode=r}Encode(e){let r=lt.Type(this.schema);return z.TTransform(r)?(()=>{let o={Encode:s=>r[j.Transform].Encode(e(s)),Decode:s=>this.decode(r[j.Transform].Decode(s))};return{...r,[j.Transform]:o}})():(()=>{let n={Decode:this.decode,Encode:e};return{...r,[j.Transform]:n}})()}};j.TransformEncodeBuilder=xS;var A0e=0,TS=class extends ol{};j.TypeBuilderError=TS;var wS=class{Create(e){return e}Throw(e){throw new TS(e)}Discard(e,r){return r.reduce((n,i)=>{let{[i]:o,...s}=n;return s},e)}Strict(e){return JSON.parse(JSON.stringify(e))}};j.TypeBuilder=wS;var w0=class extends wS{ReadonlyOptional(e){return this.Readonly(this.Optional(e))}Readonly(e){return{...lt.Type(e),[j.Readonly]:"Readonly"}}Optional(e){return{...lt.Type(e),[j.Optional]:"Optional"}}Any(e={}){return this.Create({...e,[j.Kind]:"Any"})}Array(e,r={}){return this.Create({...r,[j.Kind]:"Array",type:"array",items:lt.Type(e)})}Boolean(e={}){return this.Create({...e,[j.Kind]:"Boolean",type:"boolean"})}Capitalize(e,r={}){return{...Yh.Map(lt.Type(e),"Capitalize"),...r}}Composite(e,r){let n=j.Type.Intersect(e,{}),o=mS.ResolveKeys(n,{includePatterns:!1}).reduce((s,a)=>({...s,[a]:j.Type.Index(n,[a])}),{});return j.Type.Object(o,r)}Enum(e,r={}){if(Be.IsUndefined(e))return this.Throw("Enum undefined or empty");let n=Object.getOwnPropertyNames(e).filter(s=>isNaN(s)).map(s=>e[s]),o=[...new Set(n)].map(s=>j.Type.Literal(s));return this.Union(o,{...r,[j.Hint]:"Enum"})}Extends(e,r,n,i,o={}){switch(Rf.Extends(e,r)){case fe.Union:return this.Union([lt.Type(n,o),lt.Type(i,o)]);case fe.True:return lt.Type(n,o);case fe.False:return lt.Type(i,o)}}Exclude(e,r,n={}){return z.TTemplateLiteral(e)?this.Exclude(ic.Resolve(e),r,n):z.TTemplateLiteral(r)?this.Exclude(e,ic.Resolve(r),n):z.TUnion(e)?(()=>{let i=e.anyOf.filter(o=>Rf.Extends(o,r)===fe.False);return i.length===1?lt.Type(i[0],n):this.Union(i,n)})():Rf.Extends(e,r)!==fe.False?this.Never(n):lt.Type(e,n)}Extract(e,r,n={}){return z.TTemplateLiteral(e)?this.Extract(ic.Resolve(e),r,n):z.TTemplateLiteral(r)?this.Extract(e,ic.Resolve(r),n):z.TUnion(e)?(()=>{let i=e.anyOf.filter(o=>Rf.Extends(o,r)!==fe.False);return i.length===1?lt.Type(i[0],n):this.Union(i,n)})():Rf.Extends(e,r)!==fe.False?lt.Type(e,n):this.Never(n)}Index(e,r,n={}){return z.TArray(e)&&z.TNumber(r)?lt.Type(e.items,n):z.TTuple(e)&&z.TNumber(r)?(()=>{let o=(Be.IsUndefined(e.items)?[]:e.items).map(s=>lt.Type(s));return this.Union(o,n)})():(()=>{let i=x0.Resolve(r),o=lt.Type(e);return e3.Resolve(o,i,n)})()}Integer(e={}){return this.Create({...e,[j.Kind]:"Integer",type:"integer"})}Intersect(e,r={}){if(e.length===0)return j.Type.Never();if(e.length===1)return lt.Type(e[0],r);e.some(s=>z.TTransform(s))&&this.Throw("Cannot intersect transform types");let n=e.every(s=>z.TObject(s)),i=lt.Rest(e),o=z.TSchema(r.unevaluatedProperties)?{unevaluatedProperties:lt.Type(r.unevaluatedProperties)}:{};return r.unevaluatedProperties===!1||z.TSchema(r.unevaluatedProperties)||n?this.Create({...r,...o,[j.Kind]:"Intersect",type:"object",allOf:i}):this.Create({...r,...o,[j.Kind]:"Intersect",allOf:i})}KeyOf(e,r={}){return z.TRecord(e)?(()=>{let n=Object.getOwnPropertyNames(e.patternProperties)[0];return n===j.PatternNumberExact?this.Number(r):n===j.PatternStringExact?this.String(r):this.Throw("Unable to resolve key type from Record key pattern")})():z.TTuple(e)?(()=>{let i=(Be.IsUndefined(e.items)?[]:e.items).map((o,s)=>j.Type.Literal(s.toString()));return this.Union(i,r)})():z.TArray(e)?this.Number(r):(()=>{let n=mS.ResolveKeys(e,{includePatterns:!1});if(n.length===0)return this.Never(r);let i=n.map(o=>this.Literal(o));return this.Union(i,r)})()}Literal(e,r={}){return this.Create({...r,[j.Kind]:"Literal",const:e,type:typeof e})}Lowercase(e,r={}){return{...Yh.Map(lt.Type(e),"Lowercase"),...r}}Never(e={}){return this.Create({...e,[j.Kind]:"Never",not:{}})}Not(e,r){return this.Create({...r,[j.Kind]:"Not",not:lt.Type(e)})}Null(e={}){return this.Create({...e,[j.Kind]:"Null",type:"null"})}Number(e={}){return this.Create({...e,[j.Kind]:"Number",type:"number"})}Object(e,r={}){let n=Object.getOwnPropertyNames(e),i=n.filter(l=>z.TOptional(e[l])),o=n.filter(l=>!i.includes(l)),s=z.TSchema(r.additionalProperties)?{additionalProperties:lt.Type(r.additionalProperties)}:{},a=n.reduce((l,c)=>({...l,[c]:lt.Type(e[c])}),{});return o.length>0?this.Create({...r,...s,[j.Kind]:"Object",type:"object",properties:a,required:o}):this.Create({...r,...s,[j.Kind]:"Object",type:"object",properties:a})}Omit(e,r,n={}){let i=x0.Resolve(r);return Xh.Map(this.Discard(lt.Type(e),["$id",j.Transform]),o=>{Be.IsArray(o.required)&&(o.required=o.required.filter(s=>!i.includes(s)),o.required.length===0&&delete o.required);for(let s of Object.getOwnPropertyNames(o.properties))i.includes(s)&&delete o.properties[s];return this.Create(o)},n)}Partial(e,r={}){return Xh.Map(this.Discard(lt.Type(e),["$id",j.Transform]),n=>{let i=Object.getOwnPropertyNames(n.properties).reduce((o,s)=>({...o,[s]:this.Optional(n.properties[s])}),{});return this.Object(i,this.Discard(n,["required"]))},r)}Pick(e,r,n={}){let i=x0.Resolve(r);return Xh.Map(this.Discard(lt.Type(e),["$id",j.Transform]),o=>{Be.IsArray(o.required)&&(o.required=o.required.filter(s=>i.includes(s)),o.required.length===0&&delete o.required);for(let s of Object.getOwnPropertyNames(o.properties))i.includes(s)||delete o.properties[s];return this.Create(o)},n)}Record(e,r,n={}){return z.TTemplateLiteral(e)?(()=>{let i=Jh.ParseExact(e.pattern);return Qh.Check(i)?this.Object([...Zh.Generate(i)].reduce((o,s)=>({...o,[s]:lt.Type(r)}),{}),n):this.Create({...n,[j.Kind]:"Record",type:"object",patternProperties:{[e.pattern]:lt.Type(r)}})})():z.TUnion(e)?(()=>{let i=t3.Resolve(e);if(z.TUnionLiteral(i)){let o=i.anyOf.reduce((s,a)=>({...s,[a.const]:lt.Type(r)}),{});return this.Object(o,{...n,[j.Hint]:"Record"})}else this.Throw("Record key of type union contains non-literal types")})():z.TLiteral(e)?Be.IsString(e.const)||Be.IsNumber(e.const)?this.Object({[e.const]:lt.Type(r)},n):this.Throw("Record key of type literal is not of type string or number"):z.TInteger(e)||z.TNumber(e)?this.Create({...n,[j.Kind]:"Record",type:"object",patternProperties:{[j.PatternNumberExact]:lt.Type(r)}}):z.TString(e)?(()=>{let i=Be.IsUndefined(e.pattern)?j.PatternStringExact:e.pattern;return this.Create({...n,[j.Kind]:"Record",type:"object",patternProperties:{[i]:lt.Type(r)}})})():this.Never()}Recursive(e,r={}){Be.IsUndefined(r.$id)&&(r.$id=`T${A0e++}`);let n=e({[j.Kind]:"This",$ref:`${r.$id}`});return n.$id=r.$id,this.Create({...r,[j.Hint]:"Recursive",...n})}Ref(e,r={}){return Be.IsString(e)?this.Create({...r,[j.Kind]:"Ref",$ref:e}):(Be.IsUndefined(e.$id)&&this.Throw("Reference target type must specify an $id"),this.Create({...r,[j.Kind]:"Ref",$ref:e.$id}))}Required(e,r={}){return Xh.Map(this.Discard(lt.Type(e),["$id",j.Transform]),n=>{let i=Object.getOwnPropertyNames(n.properties).reduce((o,s)=>({...o,[s]:this.Discard(n.properties[s],[j.Optional])}),{});return this.Object(i,n)},r)}Rest(e){return z.TTuple(e)&&!Be.IsUndefined(e.items)?lt.Rest(e.items):z.TIntersect(e)?lt.Rest(e.allOf):z.TUnion(e)?lt.Rest(e.anyOf):[]}String(e={}){return this.Create({...e,[j.Kind]:"String",type:"string"})}TemplateLiteral(e,r={}){let n=Be.IsString(e)?yS.Create(r3.Parse(e)):yS.Create(e);return this.Create({...r,[j.Kind]:"TemplateLiteral",type:"string",pattern:n})}Transform(e){return new bS(e)}Tuple(e,r={}){let[n,i,o]=[!1,e.length,e.length],s=lt.Rest(e),a=e.length>0?{...r,[j.Kind]:"Tuple",type:"array",items:s,additionalItems:n,minItems:i,maxItems:o}:{...r,[j.Kind]:"Tuple",type:"array",minItems:i,maxItems:o};return this.Create(a)}Uncapitalize(e,r={}){return{...Yh.Map(lt.Type(e),"Uncapitalize"),...r}}Union(e,r={}){return z.TTemplateLiteral(e)?ic.Resolve(e):(()=>{let n=e;if(n.length===0)return this.Never(r);if(n.length===1)return this.Create(lt.Type(n[0],r));let i=lt.Rest(n);return this.Create({...r,[j.Kind]:"Union",anyOf:i})})()}Unknown(e={}){return this.Create({...e,[j.Kind]:"Unknown"})}Unsafe(e={}){return this.Create({...e,[j.Kind]:e[j.Kind]||"Unsafe"})}Uppercase(e,r={}){return{...Yh.Map(lt.Type(e),"Uppercase"),...r}}};j.JsonTypeBuilder=w0;var SS=class extends w0{AsyncIterator(e,r={}){return this.Create({...r,[j.Kind]:"AsyncIterator",type:"AsyncIterator",items:lt.Type(e)})}Awaited(e,r={}){let n=i=>i.length>0?(()=>{let[o,...s]=i;return[this.Awaited(o),...n(s)]})():i;return z.TIntersect(e)?j.Type.Intersect(n(e.allOf)):z.TUnion(e)?j.Type.Union(n(e.anyOf)):z.TPromise(e)?this.Awaited(e.item):lt.Type(e,r)}BigInt(e={}){return this.Create({...e,[j.Kind]:"BigInt",type:"bigint"})}ConstructorParameters(e,r={}){return this.Tuple([...e.parameters],{...r})}Constructor(e,r,n){let[i,o]=[lt.Rest(e),lt.Type(r)];return this.Create({...n,[j.Kind]:"Constructor",type:"Constructor",parameters:i,returns:o})}Date(e={}){return this.Create({...e,[j.Kind]:"Date",type:"Date"})}Function(e,r,n){let[i,o]=[lt.Rest(e),lt.Type(r)];return this.Create({...n,[j.Kind]:"Function",type:"Function",parameters:i,returns:o})}InstanceType(e,r={}){return lt.Type(e.returns,r)}Iterator(e,r={}){return this.Create({...r,[j.Kind]:"Iterator",type:"Iterator",items:lt.Type(e)})}Parameters(e,r={}){return this.Tuple(e.parameters,{...r})}Promise(e,r={}){return this.Create({...r,[j.Kind]:"Promise",type:"Promise",item:lt.Type(e)})}RegExp(e,r={}){let n=Be.IsString(e)?e:e.source;return this.Create({...r,[j.Kind]:"String",type:"string",pattern:n})}RegEx(e,r={}){return this.RegExp(e,r)}ReturnType(e,r={}){return lt.Type(e.returns,r)}Symbol(e){return this.Create({...e,[j.Kind]:"Symbol",type:"symbol"})}Undefined(e={}){return this.Create({...e,[j.Kind]:"Undefined",type:"undefined"})}Uint8Array(e={}){return this.Create({...e,[j.Kind]:"Uint8Array",type:"Uint8Array"})}Void(e={}){return this.Create({...e,[j.Kind]:"Void",type:"void"})}};j.JavaScriptTypeBuilder=SS;j.JsonType=new w0;j.Type=new SS});var Qq=Y(WS=>{"use strict";var Xq=ve();function C_e(t){let e=new URLSearchParams;e.append("code",t);for(let r=1;r<arguments.length;r++)e.append("v",arguments[r]);throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}var Jq=Xq.createContext(null);WS.LexicalComposerContext=Jq;WS.createLexicalComposerContext=function(t,e){let r=null;return t!=null&&(r=t[1]),{getTheme:function(){return e??(r!=null?r.getTheme():null)}}};WS.useLexicalComposerContext=function(){let t=Xq.useContext(Jq);return t==null&&C_e(8),t}});var Bs=Y((Fit,Zq)=>{"use strict";var D_e=Qq();Zq.exports=D_e});var al={};wu(al,{$INTERNAL_isPointSelection:()=>k_e,$addUpdateTag:()=>N_e,$applyNodeReplacement:()=>A_e,$copyNode:()=>O_e,$createLineBreakNode:()=>c3,$createNodeSelection:()=>R_e,$createParagraphNode:()=>jS,$createRangeSelection:()=>P_e,$createTabNode:()=>L_e,$createTextNode:()=>zS,$getAdjacentNode:()=>M_e,$getNearestNodeFromDOMNode:()=>F_e,$getNearestRootOrShadowRoot:()=>U_e,$getNodeByKey:()=>B_e,$getPreviousSelection:()=>W_e,$getRoot:()=>I0,$getSelection:()=>Pf,$getTextContent:()=>j_e,$hasAncestor:()=>z_e,$hasUpdateTag:()=>$_e,$insertNodes:()=>H_e,$isBlockElementNode:()=>q_e,$isDecoratorNode:()=>G_e,$isElementNode:()=>V_e,$isInlineElementOrDecoratorNode:()=>K_e,$isLeafNode:()=>Y_e,$isLineBreakNode:()=>X_e,$isNodeSelection:()=>d3,$isParagraphNode:()=>J_e,$isRangeSelection:()=>Lf,$isRootNode:()=>Q_e,$isRootOrShadowRoot:()=>Z_e,$isTabNode:()=>ebe,$isTextNode:()=>tbe,$nodesOfType:()=>rbe,$normalizeSelection__EXPERIMENTAL:()=>nbe,$parseSerializedNode:()=>ibe,$selectAll:()=>obe,$setCompositionKey:()=>sbe,$setSelection:()=>abe,$splitNode:()=>lbe,BLUR_COMMAND:()=>ube,CAN_REDO_COMMAND:()=>cbe,CAN_UNDO_COMMAND:()=>dbe,CLEAR_EDITOR_COMMAND:()=>pbe,CLEAR_HISTORY_COMMAND:()=>fbe,CLICK_COMMAND:()=>mbe,COMMAND_PRIORITY_CRITICAL:()=>hbe,COMMAND_PRIORITY_EDITOR:()=>gbe,COMMAND_PRIORITY_HIGH:()=>ybe,COMMAND_PRIORITY_LOW:()=>vbe,COMMAND_PRIORITY_NORMAL:()=>k0,CONTROLLED_TEXT_INSERTION_COMMAND:()=>_be,COPY_COMMAND:()=>p3,CUT_COMMAND:()=>f3,DELETE_CHARACTER_COMMAND:()=>bbe,DELETE_LINE_COMMAND:()=>xbe,DELETE_WORD_COMMAND:()=>Tbe,DEPRECATED_$computeGridMap:()=>wbe,DEPRECATED_$createGridSelection:()=>Sbe,DEPRECATED_$getGridCellNodeRect:()=>Ebe,DEPRECATED_$getNodeTriplet:()=>Cbe,DEPRECATED_$isGridCellNode:()=>Dbe,DEPRECATED_$isGridNode:()=>Ibe,DEPRECATED_$isGridRowNode:()=>kbe,DEPRECATED_$isGridSelection:()=>Nbe,DEPRECATED_GridCellNode:()=>Abe,DEPRECATED_GridNode:()=>Obe,DEPRECATED_GridRowNode:()=>Rbe,DRAGEND_COMMAND:()=>Pbe,DRAGOVER_COMMAND:()=>Lbe,DRAGSTART_COMMAND:()=>Mbe,DROP_COMMAND:()=>Fbe,DecoratorNode:()=>Lo,ElementNode:()=>Ube,FOCUS_COMMAND:()=>Bbe,FORMAT_ELEMENT_COMMAND:()=>Wbe,FORMAT_TEXT_COMMAND:()=>jbe,INDENT_CONTENT_COMMAND:()=>zbe,INSERT_LINE_BREAK_COMMAND:()=>$be,INSERT_PARAGRAPH_COMMAND:()=>Hbe,INSERT_TAB_COMMAND:()=>qbe,KEY_ARROW_DOWN_COMMAND:()=>Gbe,KEY_ARROW_LEFT_COMMAND:()=>Vbe,KEY_ARROW_RIGHT_COMMAND:()=>Kbe,KEY_ARROW_UP_COMMAND:()=>Ybe,KEY_BACKSPACE_COMMAND:()=>Xbe,KEY_DELETE_COMMAND:()=>Jbe,KEY_DOWN_COMMAND:()=>Qbe,KEY_ENTER_COMMAND:()=>m3,KEY_ESCAPE_COMMAND:()=>Zbe,KEY_MODIFIER_COMMAND:()=>exe,KEY_SPACE_COMMAND:()=>txe,KEY_TAB_COMMAND:()=>rxe,LineBreakNode:()=>nxe,MOVE_TO_END:()=>ixe,MOVE_TO_START:()=>oxe,OUTDENT_CONTENT_COMMAND:()=>sxe,PASTE_COMMAND:()=>h3,ParagraphNode:()=>axe,REDO_COMMAND:()=>lxe,REMOVE_TEXT_COMMAND:()=>uxe,RootNode:()=>cxe,SELECTION_CHANGE_COMMAND:()=>dxe,SELECT_ALL_COMMAND:()=>pxe,TabNode:()=>fxe,TextNode:()=>mxe,UNDO_COMMAND:()=>hxe,createCommand:()=>gxe,createEditor:()=>yxe,default:()=>I_e,getNearestEditorFromDOMNode:()=>vxe,isHTMLAnchorElement:()=>_xe,isHTMLElement:()=>bxe,isSelectionCapturedInDecoratorInput:()=>g3,isSelectionWithinEditor:()=>xxe});var ge,I_e,k_e,N_e,A_e,O_e,c3,R_e,jS,P_e,L_e,zS,M_e,F_e,U_e,B_e,W_e,I0,Pf,j_e,z_e,$_e,H_e,q_e,G_e,V_e,K_e,Y_e,X_e,d3,J_e,Lf,Q_e,Z_e,ebe,tbe,rbe,nbe,ibe,obe,sbe,abe,lbe,ube,cbe,dbe,pbe,fbe,mbe,hbe,gbe,ybe,vbe,k0,_be,p3,f3,bbe,xbe,Tbe,wbe,Sbe,Ebe,Cbe,Dbe,Ibe,kbe,Nbe,Abe,Obe,Rbe,Pbe,Lbe,Mbe,Fbe,Lo,Ube,Bbe,Wbe,jbe,zbe,$be,Hbe,qbe,Gbe,Vbe,Kbe,Ybe,Xbe,Jbe,Qbe,m3,Zbe,exe,txe,rxe,nxe,ixe,oxe,sxe,h3,axe,lxe,uxe,cxe,dxe,pxe,fxe,mxe,hxe,gxe,yxe,vxe,_xe,bxe,g3,xxe,Sn=ky(()=>{"use strict";ge=window.require("lexical"),I_e=ge,k_e=ge.$INTERNAL_isPointSelection,N_e=ge.$addUpdateTag,A_e=ge.$applyNodeReplacement,O_e=ge.$copyNode,c3=ge.$createLineBreakNode,R_e=ge.$createNodeSelection,jS=ge.$createParagraphNode,P_e=ge.$createRangeSelection,L_e=ge.$createTabNode,zS=ge.$createTextNode,M_e=ge.$getAdjacentNode,F_e=ge.$getNearestNodeFromDOMNode,U_e=ge.$getNearestRootOrShadowRoot,B_e=ge.$getNodeByKey,W_e=ge.$getPreviousSelection,I0=ge.$getRoot,Pf=ge.$getSelection,j_e=ge.$getTextContent,z_e=ge.$hasAncestor,$_e=ge.$hasUpdateTag,H_e=ge.$insertNodes,q_e=ge.$isBlockElementNode,G_e=ge.$isDecoratorNode,V_e=ge.$isElementNode,K_e=ge.$isInlineElementOrDecoratorNode,Y_e=ge.$isLeafNode,X_e=ge.$isLineBreakNode,d3=ge.$isNodeSelection,J_e=ge.$isParagraphNode,Lf=ge.$isRangeSelection,Q_e=ge.$isRootNode,Z_e=ge.$isRootOrShadowRoot,ebe=ge.$isTabNode,tbe=ge.$isTextNode,rbe=ge.$nodesOfType,nbe=ge.$normalizeSelection__EXPERIMENTAL,ibe=ge.$parseSerializedNode,obe=ge.$selectAll,sbe=ge.$setCompositionKey,abe=ge.$setSelection,lbe=ge.$splitNode,ube=ge.BLUR_COMMAND,cbe=ge.CAN_REDO_COMMAND,dbe=ge.CAN_UNDO_COMMAND,pbe=ge.CLEAR_EDITOR_COMMAND,fbe=ge.CLEAR_HISTORY_COMMAND,mbe=ge.CLICK_COMMAND,hbe=ge.COMMAND_PRIORITY_CRITICAL,gbe=ge.COMMAND_PRIORITY_EDITOR,ybe=ge.COMMAND_PRIORITY_HIGH,vbe=ge.COMMAND_PRIORITY_LOW,k0=ge.COMMAND_PRIORITY_NORMAL,_be=ge.CONTROLLED_TEXT_INSERTION_COMMAND,p3=ge.COPY_COMMAND,f3=ge.CUT_COMMAND,bbe=ge.DELETE_CHARACTER_COMMAND,xbe=ge.DELETE_LINE_COMMAND,Tbe=ge.DELETE_WORD_COMMAND,wbe=ge.DEPRECATED_$computeGridMap,Sbe=ge.DEPRECATED_$createGridSelection,Ebe=ge.DEPRECATED_$getGridCellNodeRect,Cbe=ge.DEPRECATED_$getNodeTriplet,Dbe=ge.DEPRECATED_$isGridCellNode,Ibe=ge.DEPRECATED_$isGridNode,kbe=ge.DEPRECATED_$isGridRowNode,Nbe=ge.DEPRECATED_$isGridSelection,Abe=ge.DEPRECATED_GridCellNode,Obe=ge.DEPRECATED_GridNode,Rbe=ge.DEPRECATED_GridRowNode,Pbe=ge.DRAGEND_COMMAND,Lbe=ge.DRAGOVER_COMMAND,Mbe=ge.DRAGSTART_COMMAND,Fbe=ge.DROP_COMMAND,Lo=ge.DecoratorNode,Ube=ge.ElementNode,Bbe=ge.FOCUS_COMMAND,Wbe=ge.FORMAT_ELEMENT_COMMAND,jbe=ge.FORMAT_TEXT_COMMAND,zbe=ge.INDENT_CONTENT_COMMAND,$be=ge.INSERT_LINE_BREAK_COMMAND,Hbe=ge.INSERT_PARAGRAPH_COMMAND,qbe=ge.INSERT_TAB_COMMAND,Gbe=ge.KEY_ARROW_DOWN_COMMAND,Vbe=ge.KEY_ARROW_LEFT_COMMAND,Kbe=ge.KEY_ARROW_RIGHT_COMMAND,Ybe=ge.KEY_ARROW_UP_COMMAND,Xbe=ge.KEY_BACKSPACE_COMMAND,Jbe=ge.KEY_DELETE_COMMAND,Qbe=ge.KEY_DOWN_COMMAND,m3=ge.KEY_ENTER_COMMAND,Zbe=ge.KEY_ESCAPE_COMMAND,exe=ge.KEY_MODIFIER_COMMAND,txe=ge.KEY_SPACE_COMMAND,rxe=ge.KEY_TAB_COMMAND,nxe=ge.LineBreakNode,ixe=ge.MOVE_TO_END,oxe=ge.MOVE_TO_START,sxe=ge.OUTDENT_CONTENT_COMMAND,h3=ge.PASTE_COMMAND,axe=ge.ParagraphNode,lxe=ge.REDO_COMMAND,uxe=ge.REMOVE_TEXT_COMMAND,cxe=ge.RootNode,dxe=ge.SELECTION_CHANGE_COMMAND,pxe=ge.SELECT_ALL_COMMAND,fxe=ge.TabNode,mxe=ge.TextNode,hxe=ge.UNDO_COMMAND,gxe=ge.createCommand,yxe=ge.createEditor,vxe=ge.getNearestEditorFromDOMNode,_xe=ge.isHTMLAnchorElement,bxe=ge.isHTMLElement,g3=ge.isSelectionCapturedInDecoratorInput,xxe=ge.isSelectionWithinEditor});var nG=Y(rG=>{"use strict";var eG=Bs(),N0=(Sn(),Vn(al)),HS=ve(),tG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Txe=tG?HS.useLayoutEffect:HS.useEffect,$S={tag:"history-merge"};function wxe(t,e){if(e!==null){if(e===void 0)t.update(()=>{var r=N0.$getRoot();if(r.isEmpty()){let n=N0.$createParagraphNode();r.append(n),r=tG?document.activeElement:null,(N0.$getSelection()!==null||r!==null&&r===t.getRootElement())&&n.select()}},$S);else if(e!==null)switch(typeof e){case"string":let r=t.parseEditorState(e);t.setEditorState(r,$S);break;case"object":t.setEditorState(e,$S);break;case"function":t.update(()=>{N0.$getRoot().isEmpty()&&e(t)},$S)}}}rG.LexicalComposer=function({initialConfig:t,children:e}){let r=HS.useMemo(()=>{let{theme:n,namespace:i,editor__DEPRECATED:o,nodes:s,onError:a,editorState:l,html:c}=t,p=eG.createLexicalComposerContext(null,n),f=o||null;if(f===null){let m=N0.createEditor({editable:t.editable,html:c,namespace:i,nodes:s,onError:g=>a(g,m),theme:n});wxe(m,l),f=m}return[f,p]},[]);return Txe(()=>{let n=t.editable,[i]=r;i.setEditable(n!==void 0?n:!0)},[]),HS.createElement(eG.LexicalComposerContext.Provider,{value:r},e)}});var oG=Y((Bit,iG)=>{"use strict";var Sxe=nG();iG.exports=Sxe});var aG=Y(sG=>{"use strict";var Exe=Bs(),A0=ve();function y3(){return y3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e],n;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},y3.apply(this,arguments)}var Cxe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?A0.useLayoutEffect:A0.useEffect;sG.ContentEditable=function({ariaActiveDescendant:t,ariaAutoComplete:e,ariaControls:r,ariaDescribedBy:n,ariaExpanded:i,ariaLabel:o,ariaLabelledBy:s,ariaMultiline:a,ariaOwns:l,ariaRequired:c,autoCapitalize:p,className:f,id:m,role:g="textbox",spellCheck:v=!0,style:_,tabIndex:S,"data-testid":T,...w}){let[E]=Exe.useLexicalComposerContext(),[I,N]=A0.useState(!1),C=A0.useCallback(k=>{E.setRootElement(k)},[E]);return Cxe(()=>(N(E.isEditable()),E.registerEditableListener(k=>{N(k)})),[E]),A0.createElement("div",y3({},w,{"aria-activedescendant":I?t:void 0,"aria-autocomplete":I?e:"none","aria-controls":I?r:void 0,"aria-describedby":n,"aria-expanded":I&&g==="combobox"?!!i:void 0,"aria-label":o,"aria-labelledby":s,"aria-multiline":a,"aria-owns":I?l:void 0,"aria-readonly":I?void 0:!0,"aria-required":c,autoCapitalize:p,className:f,contentEditable:I,"data-testid":T,id:m,ref:C,role:g,spellCheck:v,style:_,tabIndex:S}))}});var uG=Y((jit,lG)=>{"use strict";var Dxe=aG();lG.exports=Dxe});var pG=Y((zit,dG)=>{"use strict";var O0=ve();function v3(t,e){return v3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},v3(t,e)}function Ixe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,v3(t,e)}function kxe(t,e){return t===void 0&&(t=[]),e===void 0&&(e=[]),t.length!==e.length||t.some(function(r,n){return!Object.is(r,e[n])})}var cG={error:null},Nxe=function(t){function e(){for(var n,i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=t.call.apply(t,[this].concat(o))||this,n.state=cG,n.resetErrorBoundary=function(){for(var a,l=arguments.length,c=Array(l),p=0;p<l;p++)c[p]=arguments[p];n.props.onReset==null||(a=n.props).onReset.apply(a,c),n.reset()},n}Ixe(e,t),e.getDerivedStateFromError=function(n){return{error:n}};var r=e.prototype;return r.reset=function(){this.setState(cG)},r.componentDidCatch=function(n,i){var o,s;(o=(s=this.props).onError)==null||o.call(s,n,i)},r.componentDidUpdate=function(n,i){var o=this.props.resetKeys;if(this.state.error!==null&&i.error!==null&&kxe(n.resetKeys,o)){var s,a;(s=(a=this.props).onResetKeysChange)==null||s.call(a,n.resetKeys,o),this.reset()}},r.render=function(){var n=this.state.error,i=this.props,o=i.fallbackRender,s=i.FallbackComponent;if(i=i.fallback,n!==null){if(n={error:n,resetErrorBoundary:this.resetErrorBoundary},O0.isValidElement(i))return i;if(typeof o=="function")return o(n);if(s)return O0.createElement(s,n);throw Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},e}(O0.Component);dG.exports=function({children:t,onError:e}){return O0.createElement(Nxe,{fallback:O0.createElement("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"}},"An error was thrown."),onError:e},t)}});var mG=Y(($it,fG)=>{"use strict";var Axe=pG();fG.exports=Axe});var xG=Y(bi=>{"use strict";var ot=(Sn(),Vn(al)),qS=new Map;function hG(t){for(;t!=null;){if(t.nodeType===Node.TEXT_NODE)return t;t=t.firstChild}return null}function gG(t){let e=t.parentNode;if(e==null)throw Error("Should never happen");return[e,Array.from(e.childNodes).indexOf(t)]}function yG(t){let e={};t=t.split(";");for(let r of t)if(r!==""){let[n,i]=r.split(/:([^]+)/);n&&i&&(e[n.trim()]=i.trim())}return e}function GS(t){let e=qS.get(t);return e===void 0&&(e=yG(t),qS.set(t,e)),e}function Oxe(t){let e="";for(let r in t)r&&(e+=`${r}: ${t[r]};`);return e}function ig(t,e){var r=GS("getStyle"in t?t.getStyle():t.style);e=Object.entries(e).reduce((n,[i,o])=>(o===null?delete n[i]:n[i]=o,n),{...r}),r=Oxe(e),t.setStyle(r),qS.set(r,e)}function vG(t,e){var r=t.getNodes(),n=r.length;if(ot.DEPRECATED_$isGridSelection(t)){for(var i=ot.$createRangeSelection(),o=i.anchor,s=i.focus,a=0;a<n;a++){var l=r[a];ot.DEPRECATED_$isGridCellNode(l)&&(o.set(l.getKey(),0,"element"),s.set(l.getKey(),l.getChildrenSize(),"element"),vG(ot.$normalizeSelection__EXPERIMENTAL(i),e))}ot.$setSelection(t)}else if(--n,i=r[0],o=r[n],t.isCollapsed()&&ot.$isRangeSelection(t))ig(t,e);else{a=t.anchor;var c=t.focus;l=i.getTextContent().length;var p=c.offset,f=a.offset,m=a.isBefore(c);s=m?f:p,t=m?p:f;var g=m?a.type:c.type,v=m?c.type:a.type;if(c=m?c.key:a.key,ot.$isTextNode(i)&&s===l&&(m=i.getNextSibling(),ot.$isTextNode(m)&&(s=f=0,i=m)),r.length===1)ot.$isTextNode(i)&&(s=g==="element"?0:f>p?p:f,t=v==="element"?l:f>p?f:p,s!==t&&(s===0&&t===l?(ig(i,e),i.select(s,t)):(r=i.splitText(s,t),r=s===0?r[0]:r[1],ig(r,e),r.select(0,t-s))));else for(ot.$isTextNode(i)&&s<i.getTextContentSize()&&(s!==0&&(i=i.splitText(s)[1],s=0,a.set(i.getKey(),s,"text")),ig(i,e)),ot.$isTextNode(o)&&(s=o.getTextContent().length,o.__key!==c&&t!==0&&(t=s),t!==s&&([o]=o.splitText(t)),t!==0&&ig(o,e)),t=1;t<n;t++)s=r[t],a=s.getKey(),ot.$isTextNode(s)&&a!==i.getKey()&&a!==o.getKey()&&!s.isToken()&&ig(s,e)}}function Rxe(t){for(;t!==null&&!ot.$isRootOrShadowRoot(t);){let e=t.getLatest(),r=t.getParent();e.getChildrenSize()===0&&t.remove(!0),t=r}}function _3(t,e,r,n,i=null){if(e.length!==0){var o=e[0],s=new Map,a=[];o=ot.$isElementNode(o)?o:o.getParentOrThrow(),o.isInline()&&(o=o.getParentOrThrow());for(var l=!1;o!==null;){var c=o.getPreviousSibling();if(c!==null){o=c,l=!0;break}if(o=o.getParentOrThrow(),ot.$isRootOrShadowRoot(o))break}c=new Set;for(var p=0;p<r;p++){var f=e[p];ot.$isElementNode(f)&&f.getChildrenSize()===0&&c.add(f.getKey())}var m=new Set;for(p=0;p<r;p++){f=e[p];var g=f.getParent();if(g!==null&&g.isInline()&&(g=g.getParent()),g!==null&&ot.$isLeafNode(f)&&!m.has(f.getKey())){if(f=g.getKey(),s.get(f)===void 0){let v=n();v.setFormat(g.getFormatType()),v.setIndent(g.getIndent()),a.push(v),s.set(f,v),g.getChildren().forEach(_=>{v.append(_),m.add(_.getKey()),ot.$isElementNode(_)&&_.getChildrenKeys().forEach(S=>m.add(S))}),Rxe(g)}}else c.has(f.getKey())&&(g=n(),g.setFormat(f.getFormatType()),g.setIndent(f.getIndent()),a.push(g),f.remove(!0))}if(i!==null)for(e=0;e<a.length;e++)i.append(a[e]);if(e=null,ot.$isRootOrShadowRoot(o))if(l)if(i!==null)o.insertAfter(i);else for(i=a.length-1;0<=i;i--)o.insertAfter(a[i]);else if(l=o.getFirstChild(),ot.$isElementNode(l)&&(o=l),l===null)if(i)o.append(i);else for(i=0;i<a.length;i++)l=a[i],o.append(l),e=l;else if(i!==null)l.insertBefore(i);else for(o=0;o<a.length;o++)i=a[o],l.insertBefore(i),e=i;else if(i)o.insertAfter(i);else for(i=a.length-1;0<=i;i--)l=a[i],o.insertAfter(l),e=l;a=ot.$getPreviousSelection(),ot.$isRangeSelection(a)&&a.anchor.getNode().isAttached()&&a.focus.getNode().isAttached()?ot.$setSelection(a.clone()):e!==null?e.selectEnd():t.dirty=!0}}function _G(t,e,r,n){t.modify(e?"extend":"move",r,n)}function bG(t){return t=t.anchor.getNode(),(ot.$isRootNode(t)?t:t.getParentOrThrow()).getDirection()==="rtl"}function b3(t){if(ot.$isDecoratorNode(t)&&!t.isInline())return!0;if(!ot.$isElementNode(t)||ot.$isRootOrShadowRoot(t))return!1;var e=t.getFirstChild();return e=e===null||ot.$isLineBreakNode(e)||ot.$isTextNode(e)||e.isInline(),!t.isInline()&&t.canBeEmpty()!==!1&&e}bi.$addNodeStyle=function(t){t=t.getStyle();let e=yG(t);qS.set(t,e)};bi.$cloneWithProperties=function(t){let e=t.constructor.clone(t);return e.__parent=t.__parent,e.__next=t.__next,e.__prev=t.__prev,ot.$isElementNode(t)&&ot.$isElementNode(e)?(e.__first=t.__first,e.__last=t.__last,e.__size=t.__size,e.__format=t.__format,e.__indent=t.__indent,e.__dir=t.__dir,e):(ot.$isTextNode(t)&&ot.$isTextNode(e)&&(e.__format=t.__format,e.__style=t.__style,e.__mode=t.__mode,e.__detail=t.__detail),e)};bi.$getSelectionStyleValueForProperty=function(t,e,r=""){let n=null,i=t.getNodes();var o=t.anchor,s=t.focus,a=t.isBackward();let l=a?s.offset:o.offset;if(o=a?s.getNode():o.getNode(),t.isCollapsed()&&t.style!==""&&(t=GS(t.style),t!==null&&e in t))return t[e];for(t=0;t<i.length;t++){var c=i[t];if((t===0||l!==0||!c.is(o))&&ot.$isTextNode(c)){if(s=e,a=r,c=c.getStyle(),c=GS(c),s=c!==null&&c[s]||a,n===null)n=s;else if(n!==s){n="";break}}}return n===null?r:n};bi.$isAtNodeEnd=function(t){return t.type==="text"?t.offset===t.getNode().getTextContentSize():t.offset===t.getNode().getChildrenSize()};bi.$isParentElementRTL=bG;bi.$moveCaretSelection=_G;bi.$moveCharacter=function(t,e,r){let n=bG(t);_G(t,e,r?!n:n,"character")};bi.$patchStyleText=vG;bi.$selectAll=function(t){let e=t.anchor;t=t.focus;var r=e.getNode().getTopLevelElementOrThrow().getParentOrThrow();let n=r.getFirstDescendant();r=r.getLastDescendant();let i="element",o="element",s=0;ot.$isTextNode(n)?i="text":ot.$isElementNode(n)||n===null||(n=n.getParentOrThrow()),ot.$isTextNode(r)?(o="text",s=r.getTextContentSize()):ot.$isElementNode(r)||r===null||(r=r.getParentOrThrow()),n&&r&&(e.set(n.getKey(),0,i),t.set(r.getKey(),s,o))};bi.$setBlocksType=function(t,e){if(t.anchor.key==="root"){e=e();var r=ot.$getRoot();(t=r.getFirstChild())?t.replace(e,!0):r.append(e)}else{for(r=t.getNodes(),t=t.anchor.getNode();t!==null&&t.getParent()!==null&&!b3(t);)t=t.getParentOrThrow();for((t=b3(t)?t:null)&&r.indexOf(t)===-1&&r.push(t),t=0;t<r.length;t++){let n=r[t];if(!b3(n))continue;let i=e();i.setFormat(n.getFormatType()),i.setIndent(n.getIndent()),n.replace(i,!0)}}};bi.$shouldOverrideDefaultCharacterSelection=function(t,e){return t=ot.$getAdjacentNode(t.focus,e),ot.$isDecoratorNode(t)&&!t.isIsolated()||ot.$isElementNode(t)&&!t.isInline()&&!t.canBeEmpty()};bi.$sliceSelectedTextNodeContent=function(t,e){if(e.isSelected()&&!e.isSegmented()&&!e.isToken()&&ot.$INTERNAL_isPointSelection(t)){var r=t.anchor.getNode(),n=t.focus.getNode(),i=e.is(r),o=e.is(n);if(i||o){i=t.isBackward();let[s,a]=t.getCharacterOffsets();t=r.is(n),o=e.is(i?n:r),n=e.is(i?r:n),r=0;let l;t?(r=s>a?a:s,l=s>a?s:a):o?(r=i?a:s,l=void 0):n&&(i=i?s:a,r=0,l=i),e.__text=e.__text.slice(r,l)}}return e};bi.$wrapNodes=function(t,e,r=null){var n=t.getNodes();let i=n.length;var o=t.anchor;if(i===0||i===1&&o.type==="element"&&o.getNode().getChildrenSize()===0){t=o.type==="text"?o.getNode().getParentOrThrow():o.getNode(),n=t.getChildren();let a=e();a.setFormat(t.getFormatType()),a.setIndent(t.getIndent()),n.forEach(l=>a.append(l)),r&&(a=r.append(a)),t.replace(a)}else{o=null;var s=[];for(let a=0;a<i;a++){let l=n[a];ot.$isRootOrShadowRoot(l)?(_3(t,s,s.length,e,r),s=[],o=l):o===null||o!==null&&ot.$hasAncestor(l,o)?s.push(l):(_3(t,s,s.length,e,r),s=[l])}_3(t,s,s.length,e,r)}};bi.createDOMRange=function(t,e,r,n,i){let o=e.getKey(),s=n.getKey(),a=document.createRange(),l=t.getElementByKey(o);if(t=t.getElementByKey(s),ot.$isTextNode(e)&&(l=hG(l)),ot.$isTextNode(n)&&(t=hG(t)),e===void 0||n===void 0||l===null||t===null)return null;l.nodeName==="BR"&&([l,r]=gG(l)),t.nodeName==="BR"&&([t,i]=gG(t)),e=l.firstChild,l===t&&e!=null&&e.nodeName==="BR"&&r===0&&i===0&&(i=1);try{a.setStart(l,r),a.setEnd(t,i)}catch{return null}return!a.collapsed||r===i&&o===s||(a.setStart(t,i),a.setEnd(l,r)),a};bi.createRectsFromDOMRange=function(t,e){var r=t.getRootElement();if(r===null)return[];t=r.getBoundingClientRect(),r=getComputedStyle(r),r=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),e=Array.from(e.getClientRects());let n=e.length;e.sort((o,s)=>{let a=o.top-s.top;return 3>=Math.abs(a)?o.left-s.left:a});let i;for(let o=0;o<n;o++){let s=e[o],a=s.width+r===t.width;i&&i.top<=s.top&&i.top+i.height>s.top&&i.left+i.width>s.left||a?(e.splice(o--,1),n--):i=s}return e};bi.getStyleObjectFromCSS=GS;bi.trimTextContentFromAnchor=function(t,e,r){let n=e.getNode();if(ot.$isElementNode(n)){var i=n.getDescendantByIndex(e.offset);i!==null&&(n=i)}for(;0<r&&n!==null;){ot.$isElementNode(n)&&(i=n.getLastDescendant(),i!==null&&(n=i));var o=n.getPreviousSibling(),s=0;if(o===null){i=n.getParentOrThrow();for(var a=i.getPreviousSibling();a===null;){if(i=i.getParent(),i===null){o=null;break}a=i.getPreviousSibling()}i!==null&&(s=i.isInline()?0:2,o=a)}if(a=n.getTextContent(),a===""&&ot.$isElementNode(n)&&!n.isInline()&&(a=`

`),i=a.length,!ot.$isTextNode(n)||r>=i)a=n.getParent(),n.remove(),a==null||a.getChildrenSize()!==0||ot.$isRootNode(a)||a.remove(),r-=i+s,n=o;else{let l=n.getKey();s=t.getEditorState().read(()=>{let p=ot.$getNodeByKey(l);return ot.$isTextNode(p)&&p.isSimpleText()?p.getTextContent():null}),o=i-r;let c=a.slice(0,o);s!==null&&s!==a?(r=ot.$getPreviousSelection(),i=n,n.isSimpleText()?n.setTextContent(s):(i=ot.$createTextNode(s),n.replace(i)),ot.$isRangeSelection(r)&&r.isCollapsed()&&(r=r.anchor.offset,i.select(r,r))):n.isSimpleText()?(s=e.key===l,a=e.offset,a<r&&(a=i),r=s?a-r:0,i=s?a:o,s&&r===0?([r]=n.splitText(r,i),r.remove()):([,r]=n.splitText(r,i),r.remove())):(r=ot.$createTextNode(c),n.replace(r)),r=0}}}});var R0=Y((qit,TG)=>{"use strict";var Pxe=xG();TG.exports=Pxe});var IG=Y(En=>{"use strict";var wG=R0(),_n=(Sn(),Vn(al));function Lxe(t){let e=new URLSearchParams;e.append("code",t);for(let r=1;r<arguments.length;r++)e.append("v",arguments[r]);throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function SG(...t){return()=>{t.forEach(e=>e())}}var Mxe={attributes:!0,characterData:!0,childList:!0,subtree:!0};function EG(t,e,r){function n(){if(s===null)throw Error("Unexpected null rootDOMNode");if(a===null)throw Error("Unexpected null parentDOMNode");let{left:m,top:g}=s.getBoundingClientRect();var v=a;let _=wG.createRectsFromDOMRange(t,e);p.isConnected||v.append(p),v=!1;for(let w=0;w<_.length;w++){var S=_[w];let E=c[w]||document.createElement("div"),I=E.style;I.position!=="absolute"&&(I.position="absolute",v=!0);var T=`${S.left-m}px`;I.left!==T&&(I.left=T,v=!0),T=`${S.top-g}px`,I.top!==T&&(E.style.top=T,v=!0),T=`${S.width}px`,I.width!==T&&(E.style.width=T,v=!0),S=`${S.height}px`,I.height!==S&&(E.style.height=S,v=!0),E.parentNode!==p&&(p.append(E),v=!0),c[w]=E}for(;c.length>_.length;)c.pop();v&&r(c)}function i(){s=a=null,l!==null&&l.disconnect(),l=null,p.remove();for(let m of c)m.remove();c=[]}function o(){let m=t.getRootElement();if(m===null)return i();let g=m.parentElement;if(!(g instanceof HTMLElement))return i();i(),s=m,a=g,l=new MutationObserver(v=>{let _=t.getRootElement(),S=_&&_.parentElement;if(_!==s||S!==a)return o();for(let T of v)if(!p.contains(T.target))return n()}),l.observe(g,Mxe),n()}let s=null,a=null,l=null,c=[],p=document.createElement("div"),f=t.registerRootListener(o);return()=>{f(),i()}}function CG(t,e){for(let r of e)if(t.type.startsWith(r))return!0;return!1}function DG(t,e){for(;t!==_n.$getRoot()&&t!=null;){if(e(t))return t;t=t.getParent()}return null}En.$splitNode=_n.$splitNode;En.isHTMLAnchorElement=_n.isHTMLAnchorElement;En.isHTMLElement=_n.isHTMLElement;En.$dfs=function(t,e){let r=[];t=(t||_n.$getRoot()).getLatest(),e=e||(_n.$isElementNode(t)?t.getLastDescendant():t);for(var n=t,i=0;(n=n.getParent())!==null;)i++;for(n=i;t!==null&&!t.is(e);)if(r.push({depth:n,node:t}),_n.$isElementNode(t)&&0<t.getChildrenSize())t=t.getFirstChild(),n++;else for(i=null;i===null&&t!==null;)i=t.getNextSibling(),i===null?(t=t.getParent(),n--):t=i;return t!==null&&t.is(e)&&r.push({depth:n,node:t}),r};En.$filter=function(t,e){let r=[];for(let n=0;n<t.length;n++){let i=e(t[n]);i!==null&&r.push(i)}return r};En.$findMatchingParent=DG;En.$getNearestBlockElementAncestorOrThrow=function(t){let e=DG(t,r=>_n.$isElementNode(r)&&!r.isInline());return _n.$isElementNode(e)||Lxe(4,t.__key),e};En.$getNearestNodeOfType=function(t,e){for(;t!=null;){if(t instanceof e)return t;t=t.getParent()}return null};En.$insertFirst=function(t,e){let r=t.getFirstChild();r!==null?r.insertBefore(e):t.append(e)};En.$insertNodeToNearestRoot=function(t){var e=_n.$getSelection()||_n.$getPreviousSelection();if(_n.$isRangeSelection(e)){var{focus:r}=e;if(e=r.getNode(),r=r.offset,_n.$isRootOrShadowRoot(e))r=e.getChildAtIndex(r),r==null?e.append(t):r.insertBefore(t),t.selectNext();else{let n,i;_n.$isTextNode(e)?(n=e.getParentOrThrow(),i=e.getIndexWithinParent(),0<r&&(i+=1,e.splitText(r))):(n=e,i=r),[,e]=_n.$splitNode(n,i),e.insertBefore(t),e.selectStart()}}else e!=null?(e=e.getNodes(),e[e.length-1].getTopLevelElementOrThrow().insertAfter(t)):_n.$getRoot().append(t),e=_n.$createParagraphNode(),t.insertAfter(e),e.select();return t.getLatest()};En.$restoreEditorState=function(t,e){let r=new Map,n=t._pendingEditorState;for(let[i,o]of e._nodeMap){let s=wG.$cloneWithProperties(o);_n.$isTextNode(s)&&(s.__text=o.__text),r.set(i,s)}n&&(n._nodeMap=r),t._dirtyType=2,t=e._selection,_n.$setSelection(t===null?null:t.clone())};En.$wrapNodeInElement=function(t,e){return e=e(),t.replace(e),e.append(t),e};En.addClassNamesToElement=function(t,...e){e.forEach(r=>{typeof r=="string"&&(r=r.split(" ").filter(n=>n!==""),t.classList.add(...r))})};En.isMimeType=CG;En.markSelection=function(t,e){function r(l){l.read(()=>{var c=_n.$getSelection();if(_n.$isRangeSelection(c)){var{anchor:p,focus:f}=c;c=p.getNode();var m=c.getKey(),g=p.offset,v=f.getNode(),_=v.getKey(),S=f.offset,T=t.getElementByKey(m),w=t.getElementByKey(_);if(m=n===null||T===null||g!==i||m!==n.getKey()||c!==n&&(!(n instanceof _n.TextNode)||c.updateDOM(n,T,t._config)),_=o===null||w===null||S!==s||_!==o.getKey()||v!==o&&(!(o instanceof _n.TextNode)||v.updateDOM(o,w,t._config)),m||_){T=t.getElementByKey(p.getNode().getKey());var E=t.getElementByKey(f.getNode().getKey());if(T!==null&&E!==null&&T.tagName==="SPAN"&&E.tagName==="SPAN"){if(_=document.createRange(),f.isBefore(p)?(m=E,w=f.offset,E=T,T=p.offset):(m=T,w=p.offset,T=f.offset),m=m.firstChild,m===null||(E=E.firstChild,E===null))throw Error("Expected text node to be first child of span");_.setStart(m,w),_.setEnd(E,T),a(),a=EG(t,_,I=>{for(let N of I){let C=N.style;C.background!=="Highlight"&&(C.background="Highlight"),C.color!=="HighlightText"&&(C.color="HighlightText"),C.zIndex!=="-1"&&(C.zIndex="-1"),C.pointerEvents!=="none"&&(C.pointerEvents="none"),C.marginTop!=="-1.5px"&&(C.marginTop="-1.5px"),C.paddingTop!=="4px"&&(C.paddingTop="4px"),C.paddingBottom!=="0px"&&(C.paddingBottom="0px")}e!==void 0&&e(I)})}}n=c,i=g,o=v,s=S}else s=o=i=n=null,a(),a=()=>{}})}let n=null,i=null,o=null,s=null,a=()=>{};return r(t.getEditorState()),SG(t.registerUpdateListener(({editorState:l})=>r(l)),a,()=>{a()})};En.mediaFileReader=function(t,e){let r=t[Symbol.iterator]();return new Promise((n,i)=>{let o=[],s=()=>{let{done:a,value:l}=r.next();if(a)return n(o);let c=new FileReader;c.addEventListener("error",i),c.addEventListener("load",()=>{let p=c.result;typeof p=="string"&&o.push({file:l,result:p}),s()}),CG(l,e)?c.readAsDataURL(l):s()};s()})};En.mergeRegister=SG;En.objectKlassEquals=function(t,e){return t!==null?Object.getPrototypeOf(t).constructor.name===e.name:!1};En.positionNodeOnRange=EG;En.registerNestedElementResolver=function(t,e,r,n){return t.registerNodeTransform(e,i=>{e:{for(var o=i.getChildren(),s=0;s<o.length;s++)if(o[s]instanceof e){o=null;break e}for(o=i;o!==null;)if(s=o,o=o.getParent(),o instanceof e){o={child:s,parent:o};break e}o=null}if(o!==null){let{child:a,parent:l}=o;if(a.is(i)){if(n(l,i),i=a.getNextSiblings(),o=i.length,l.insertAfter(a),o!==0){s=r(l),a.insertAfter(s);for(let c=0;c<o;c++)s.append(i[c])}l.canBeEmpty()||l.getChildrenSize()!==0||l.remove()}}})};En.removeClassNamesFromElement=function(t,...e){e.forEach(r=>{typeof r=="string"&&t.classList.remove(...r.split(" "))})}});var ip=Y((Vit,kG)=>{"use strict";var Fxe=IG();kG.exports=Fxe});var NG=Y(x3=>{"use strict";var Uxe=ip(),Gr=(Sn(),Vn(al));function Bxe(t,e,r,n,i){if(t===null||r.size===0&&n.size===0&&!i)return 0;var o=e._selection,s=t._selection;if(i)return 1;if(!(Gr.$isRangeSelection(o)&&Gr.$isRangeSelection(s)&&s.isCollapsed()&&o.isCollapsed()))return 0;i=e._nodeMap;let a=[];for(let l of r)r=i.get(l),r!==void 0&&a.push(r);for(let[l,c]of n)c&&(n=i.get(l),n===void 0||Gr.$isRootNode(n)||a.push(n));return a.length===0?0:1<a.length?(n=e._nodeMap,e=n.get(o.anchor.key),s=n.get(s.anchor.key),e&&s&&!t._nodeMap.has(e.__key)&&Gr.$isTextNode(e)&&e.__text.length===1&&o.anchor.offset===1?2:0):(e=a[0],t=t._nodeMap.get(e.__key),!Gr.$isTextNode(t)||!Gr.$isTextNode(e)||t.__mode!==e.__mode||(t=t.__text,e=e.__text,t===e)||(o=o.anchor,s=s.anchor,o.key!==s.key||o.type!=="text")?0:(o=o.offset,s=s.offset,t=e.length-t.length,t===1&&s===o-1?2:t===-1&&s===o+1?3:t===-1&&s===o?4:0))}function Wxe(t,e){let r=Date.now(),n=0;return(i,o,s,a,l,c)=>{let p=Date.now();if(c.has("historic"))return n=0,r=p,2;let f=Bxe(i,o,a,l,t.isComposing()),m=(()=>{var g=s===null||s.editor===t,v=c.has("history-push");if(!v&&g&&c.has("history-merge"))return 0;if(i===null)return 1;var _=o._selection;if(!(0<a.size||0<l.size))return _!==null?0:2;if(v===!1&&f!==0&&f===n&&p<r+e&&g)return 0;if(a.size===1){{v=Array.from(a)[0],g=i._nodeMap.get(v),v=o._nodeMap.get(v),_=i._selection;let S=o._selection,T=!1;Gr.$isRangeSelection(_)&&Gr.$isRangeSelection(S)&&(T=_.anchor.type==="element"&&_.focus.type==="element"&&S.anchor.type==="text"&&S.focus.type==="text"),g=!T&&Gr.$isTextNode(g)&&Gr.$isTextNode(v)?g.__type===v.__type&&g.__text===v.__text&&g.__mode===v.__mode&&g.__detail===v.__detail&&g.__style===v.__style&&g.__format===v.__format&&g.__parent===v.__parent:!1}if(g)return 0}return 1})();return r=p,n=f,m}}x3.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]}};x3.registerHistory=function(t,e,r){let n=Wxe(t,r);r=({editorState:s,prevEditorState:a,dirtyLeaves:l,dirtyElements:c,tags:p})=>{let f=e.current,m=e.redoStack,g=e.undoStack,v=f===null?null:f.editorState;if(f===null||s!==v){if(a=n(a,s,f,l,c,p),a===1)m.length!==0&&(e.redoStack=[],t.dispatchCommand(Gr.CAN_REDO_COMMAND,!1)),f!==null&&(g.push({...f}),t.dispatchCommand(Gr.CAN_UNDO_COMMAND,!0));else if(a===2)return;e.current={editor:t,editorState:s}}};let i=Uxe.mergeRegister(t.registerCommand(Gr.UNDO_COMMAND,()=>{let s=e.redoStack,a=e.undoStack;if(a.length!==0){let l=e.current,c=a.pop();l!==null&&(s.push(l),t.dispatchCommand(Gr.CAN_REDO_COMMAND,!0)),a.length===0&&t.dispatchCommand(Gr.CAN_UNDO_COMMAND,!1),e.current=c||null,c&&c.editor.setEditorState(c.editorState,{tag:"historic"})}return!0},Gr.COMMAND_PRIORITY_EDITOR),t.registerCommand(Gr.REDO_COMMAND,()=>{let s=e.redoStack;var a=e.undoStack;if(s.length!==0){let l=e.current;l!==null&&(a.push(l),t.dispatchCommand(Gr.CAN_UNDO_COMMAND,!0)),a=s.pop(),s.length===0&&t.dispatchCommand(Gr.CAN_REDO_COMMAND,!1),e.current=a||null,a&&a.editor.setEditorState(a.editorState,{tag:"historic"})}return!0},Gr.COMMAND_PRIORITY_EDITOR),t.registerCommand(Gr.CLEAR_EDITOR_COMMAND,()=>(e.undoStack=[],e.redoStack=[],e.current=null,!1),Gr.COMMAND_PRIORITY_EDITOR),t.registerCommand(Gr.CLEAR_HISTORY_COMMAND,()=>(e.undoStack=[],e.redoStack=[],e.current=null,t.dispatchCommand(Gr.CAN_REDO_COMMAND,!1),t.dispatchCommand(Gr.CAN_UNDO_COMMAND,!1),!0),Gr.COMMAND_PRIORITY_EDITOR),t.registerUpdateListener(r)),o=t.registerUpdateListener(r);return()=>{i(),o()}}});var OG=Y((Yit,AG)=>{"use strict";var jxe=NG();AG.exports=jxe});var PG=Y(w3=>{"use strict";var zxe=Bs(),T3=OG(),RG=ve();function $xe(t,e,r=1e3){let n=RG.useMemo(()=>e||T3.createEmptyHistoryState(),[e]);RG.useEffect(()=>T3.registerHistory(t,n,r),[r,t,n])}w3.createEmptyHistoryState=T3.createEmptyHistoryState;w3.HistoryPlugin=function({externalHistoryState:t}){let[e]=zxe.useLexicalComposerContext();return $xe(e,t),null}});var MG=Y((Jit,LG)=>{"use strict";var Hxe=PG();LG.exports=Hxe});var BG=Y(UG=>{"use strict";var qxe=Bs(),FG=ve(),Gxe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?FG.useLayoutEffect:FG.useEffect;UG.OnChangePlugin=function({ignoreHistoryMergeTagChange:t=!0,ignoreSelectionChange:e=!1,onChange:r}){let[n]=qxe.useLexicalComposerContext();return Gxe(()=>{if(r)return n.registerUpdateListener(({editorState:i,dirtyElements:o,dirtyLeaves:s,prevEditorState:a,tags:l})=>{e&&o.size===0&&s.size===0||t&&l.has("history-merge")||a.isEmpty()||r(i,n,l)})},[n,t,e,r]),null}});var jG=Y((Zit,WG)=>{"use strict";var Vxe=BG();WG.exports=Vxe});var $G=Y((eot,zG)=>{"use strict";var Kxe=Bs(),P0=ve(),Yxe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?P0.useLayoutEffect:P0.useEffect;function Xxe(t){let[e]=Kxe.useLexicalComposerContext(),r=P0.useMemo(()=>t(e),[e,t]),n=P0.useRef(r.initialValueFn()),[i,o]=P0.useState(n.current);return Yxe(()=>{let{initialValueFn:s,subscribe:a}=r,l=s();return n.current!==l&&(n.current=l,o(l)),a(c=>{n.current=c,o(c)})},[r,t]),i}function Jxe(t){return{initialValueFn:()=>t.isEditable(),subscribe:e=>t.registerEditableListener(e)}}zG.exports=function(){return Xxe(Jxe)}});var qG=Y((tot,HG)=>{"use strict";var Qxe=$G();HG.exports=Qxe});var KG=Y(op=>{"use strict";var Mo=(Sn(),Vn(al));function S3(t,e=!0){return t?!1:(t=GG(),e&&(t=t.trim()),t==="")}function GG(){return Mo.$getRoot().getTextContent()}function VG(t){if(!S3(t,!1))return!1;t=Mo.$getRoot().getChildren();let e=t.length;if(1<e)return!1;for(let n=0;n<e;n++){var r=t[n];if(Mo.$isDecoratorNode(r))return!1;if(Mo.$isElementNode(r)){if(!Mo.$isParagraphNode(r)||r.__indent!==0)return!1;r=r.getChildren();let i=r.length;for(let o=0;o<i;o++)if(!Mo.$isTextNode(r[n]))return!1}}return!0}op.$canShowPlaceholder=VG;op.$canShowPlaceholderCurry=function(t){return()=>VG(t)};op.$findTextIntersectionFromCharacters=function(t,e){var r=t.getFirstChild();t=0;e:for(;r!==null;){if(Mo.$isElementNode(r)){var n=r.getFirstChild();if(n!==null){r=n;continue}}else if(Mo.$isTextNode(r)){if(n=r.getTextContentSize(),t+n>e)return{node:r,offset:e-t};t+=n}if(n=r.getNextSibling(),n!==null)r=n;else{for(r=r.getParent();r!==null;){if(n=r.getNextSibling(),n!==null){r=n;continue e}r=r.getParent()}break}}return null};op.$isRootTextContentEmpty=S3;op.$isRootTextContentEmptyCurry=function(t,e){return()=>S3(t,e)};op.$rootTextContent=GG;op.registerLexicalTextEntity=function(t,e,r,n){let i=s=>{let a=Mo.$createTextNode(s.getTextContent());a.setFormat(s.getFormat()),s.replace(a)},o=t.registerNodeTransform(Mo.TextNode,s=>{if(s.isSimpleText()){var a=s.getPreviousSibling(),l=s.getTextContent(),c=s;if(Mo.$isTextNode(a)){var p=a.getTextContent(),f=e(p+l);if(a instanceof r){if(f===null||a.getLatest().__mode!==0){i(a);return}if(f=f.end-p.length,0<f){c=l.slice(0,f),c=p+c,a.select(),a.setTextContent(c),f===l.length?s.remove():(a=l.slice(f),s.setTextContent(a));return}}else if(f===null||f.start<p.length)return}for(;;){if(s=e(l),l=f=s===null?"":l.slice(s.end),f===""){if(p=c.getNextSibling(),Mo.$isTextNode(p)){if(f=c.getTextContent()+p.getTextContent(),f=e(f),f===null){p instanceof r?i(p):p.markDirty();break}else if(f.start!==0)break}}else if(p=e(f),p!==null&&p.start===0)break;if(s===null)break;if(s.start===0&&Mo.$isTextNode(a)&&a.isTextEntity())continue;let m;if(s.start===0?[m,c]=c.splitText(s.end):[,m,c]=c.splitText(s.start,s.end),s=n(m),s.setFormat(m.getFormat()),m.replace(s),c==null)break}}});return t=t.registerNodeTransform(r,s=>{var a=s.getTextContent();let l=e(a);l===null||l.start!==0?i(s):a.length>l.end?s.splitText(l.end):(a=s.getPreviousSibling(),Mo.$isTextNode(a)&&a.isTextEntity()&&(i(a),i(s)),a=s.getNextSibling(),Mo.$isTextNode(a)&&a.isTextEntity()&&(i(a),s instanceof r&&i(s)))}),[o,t]}});var XG=Y((not,YG)=>{"use strict";var Zxe=KG();YG.exports=Zxe});var QG=Y(JG=>{"use strict";var VS=(Sn(),Vn(al));JG.registerDragonSupport=function(t){let e=window.location.origin,r=n=>{if(n.origin===e){var i=t.getRootElement();if(document.activeElement===i&&(i=n.data,typeof i=="string")){try{var o=JSON.parse(i)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"&&(o=o.payload)&&o.functionId==="makeChanges"&&(o=o.args)){let[s,a,l,c,p]=o;t.update(()=>{let f=VS.$getSelection();if(VS.$isRangeSelection(f)){var m=f.anchor;let g=m.getNode(),v=0,_=0;VS.$isTextNode(g)&&0<=s&&0<=a&&(v=s,_=s+a,f.setTextNodeRange(g,v,g,_)),(v!==_||l!=="")&&(f.insertRawText(l),g=m.getNode()),VS.$isTextNode(g)&&(v=c,_=c+p,m=g.getTextContentSize(),v=v>m?m:v,_=_>m?m:_,f.setTextNodeRange(g,v,g,_)),n.stopImmediatePropagation()}})}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}});var eV=Y((oot,ZG)=>{"use strict";var e1e=QG();ZG.exports=e1e});var oV=Y(E3=>{"use strict";var tV=R0(),t1e=ip(),og=(Sn(),Vn(al));function rV(t,e,r,n=null){let i=n!=null?e.isSelected(n):!0,o=og.$isElementNode(e)&&e.excludeFromCopy("html");var s=e;n!==null&&(s=tV.$cloneWithProperties(e),s=og.$isTextNode(s)&&n!=null?tV.$sliceSelectedTextNodeContent(n,s):s);let a=og.$isElementNode(s)?s.getChildren():[];var l=t._nodes.get(s.getType());l=l&&l.exportDOM!==void 0?l.exportDOM(t,s):s.exportDOM(t);let{element:c,after:p}=l;if(!c)return!1;l=document.createDocumentFragment();for(let f=0;f<a.length;f++){let m=a[f],g=rV(t,m,l,n);!i&&og.$isElementNode(e)&&g&&e.extractWithChild(m,n,"html")&&(i=!0)}return i&&!o?(t1e.isHTMLElement(c)&&c.append(l),r.append(c),p&&(t=p.call(s,c))&&c.replaceWith(t)):r.append(l),i}var nV=new Set(["STYLE","SCRIPT"]);function iV(t,e,r=new Map,n){let i=[];if(nV.has(t.nodeName))return i;let o=null;var s,{nodeName:a}=t,l=e._htmlConversions.get(a.toLowerCase());if(a=null,l!==void 0)for(s of l)l=s(t),l!==null&&(a===null||a.priority<l.priority)&&(a=l);if(a=(s=a!==null?a.conversion:null)?s(t):null,s=null,a!==null){if(s=a.after,l=a.node,o=Array.isArray(l)?l[l.length-1]:l,o!==null){for(var[,c]of r)if(o=c(o,n),!o)break;o&&i.push(...Array.isArray(l)?l:[o])}a.forChild!=null&&r.set(t.nodeName,a.forChild)}for(t=t.childNodes,n=[],c=0;c<t.length;c++)n.push(...iV(t[c],e,new Map(r),o));return s!=null&&(n=s(n)),o==null?i=i.concat(n):og.$isElementNode(o)&&o.append(...n),i}E3.$generateHtmlFromNodes=function(t,e){if(typeof document>"u"||typeof window>"u")throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let r=document.createElement("div"),n=og.$getRoot().getChildren();for(let i=0;i<n.length;i++)rV(t,n[i],r,e);return r.innerHTML};E3.$generateNodesFromDOM=function(t,e){e=e.body?e.body.childNodes:[];let r=[];for(let i=0;i<e.length;i++){var n=e[i];nV.has(n.nodeName)||(n=iV(n,t),n!==null&&(r=r.concat(n)))}return r}});var aV=Y((aot,sV)=>{"use strict";var r1e=oV();sV.exports=r1e});var gV=Y(cc=>{"use strict";var uV=aV(),C3=R0(),ag=ip(),$t=(Sn(),Vn(al));function sp(t){let e=new URLSearchParams;e.append("code",t);for(let r=1;r<arguments.length;r++)e.append("v",arguments[r]);throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}var cV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function dV(t){let e=$t.$getSelection();if(e==null)throw Error("Expected valid LexicalSelection");return $t.$isRangeSelection(e)&&e.isCollapsed()||e.getNodes().length===0?"":uV.$generateHtmlFromNodes(t,e)}function pV(t){let e=$t.$getSelection();if(e==null)throw Error("Expected valid LexicalSelection");return $t.$isRangeSelection(e)&&e.isCollapsed()||e.getNodes().length===0?null:JSON.stringify(mV(t,e))}function D3(t,e,r){let n=$t.DEPRECATED_$isGridSelection(r),i=$t.$isRangeSelection(r);(n||i&&ag.$findMatchingParent(r.anchor.getNode(),o=>$t.DEPRECATED_$isGridCellNode(o))!==null&&ag.$findMatchingParent(r.focus.getNode(),o=>$t.DEPRECATED_$isGridCellNode(o))!==null)&&e.length===1&&$t.DEPRECATED_$isGridNode(e[0])?n1e(e,r,!1,t):r.insertNodes(e)}function n1e(t,e,r,n){t.length===1&&$t.DEPRECATED_$isGridNode(t[0])||sp(42);var i=t[0];t=i.getChildren(),r=i.getFirstChildOrThrow().getChildrenSize();var o=i.getChildrenSize(),s=ag.$findMatchingParent(e.anchor.getNode(),g=>$t.DEPRECATED_$isGridCellNode(g));e=(i=s&&ag.$findMatchingParent(s,g=>$t.DEPRECATED_$isGridRowNode(g)))&&ag.$findMatchingParent(i,g=>$t.DEPRECATED_$isGridNode(g)),$t.DEPRECATED_$isGridCellNode(s)&&$t.DEPRECATED_$isGridRowNode(i)&&$t.DEPRECATED_$isGridNode(e)||sp(43);var a=i.getIndexWithinParent(),l=Math.min(e.getChildrenSize()-1,a+o-1);o=s.getIndexWithinParent(),s=Math.min(i.getChildrenSize()-1,o+r-1),r=Math.min(o,s),i=Math.min(a,l),o=Math.max(o,s),a=Math.max(a,l),l=e.getChildren(),s=0;let c,p;for(let g=i;g<=a;g++){var f=l[g];$t.DEPRECATED_$isGridRowNode(f)||sp(24);var m=t[s];$t.DEPRECATED_$isGridRowNode(m)||sp(24),f=f.getChildren(),m=m.getChildren();let v=0;for(let _=r;_<=o;_++){let S=f[_];$t.DEPRECATED_$isGridCellNode(S)||sp(25);let T=m[v];$t.DEPRECATED_$isGridCellNode(T)||sp(25),g===i&&_===r?c=S.getKey():g===a&&_===o&&(p=S.getKey());let w=S.getChildren();T.getChildren().forEach(E=>{$t.$isTextNode(E)&&$t.$createParagraphNode().append(E),S.append(E)}),w.forEach(E=>E.remove()),v++}s++}c&&p&&(t=$t.DEPRECATED_$createGridSelection(),t.set(e.getKey(),c,p),$t.$setSelection(t),n.dispatchCommand($t.SELECTION_CHANGE_COMMAND,void 0))}function fV(t,e,r,n=[]){let i=e!=null?r.isSelected(e):!0,o=$t.$isElementNode(r)&&r.excludeFromCopy("html");var s=r;if(e!==null){var a=C3.$cloneWithProperties(r);s=a=$t.$isTextNode(a)&&e!=null?C3.$sliceSelectedTextNodeContent(e,a):a}let l=$t.$isElementNode(s)?s.getChildren():[];var c=s;a=c.exportJSON();var p=c.constructor;a.type!==p.getType()&&sp(58,p.name);let f=a.children;for($t.$isElementNode(c)&&(Array.isArray(f)||sp(59,p.name)),$t.$isTextNode(s)&&(s=s.__text,0<s.length?a.text=s:i=!1),s=0;s<l.length;s++)c=l[s],p=fV(t,e,c,a.children),!i&&$t.$isElementNode(r)&&p&&r.extractWithChild(c,e,"clone")&&(i=!0);if(i&&!o)n.push(a);else if(Array.isArray(a.children))for(t=0;t<a.children.length;t++)n.push(a.children[t]);return i}function mV(t,e){let r=[],n=$t.$getRoot().getChildren();for(let i=0;i<n.length;i++)fV(t,e,n[i],r);return{namespace:t._config.namespace,nodes:r}}function hV(t){let e=[];for(let r=0;r<t.length;r++){let n=$t.$parseSerializedNode(t[r]);$t.$isTextNode(n)&&C3.$addNodeStyle(n),e.push(n)}return e}var sg=null;function lV(t,e){var r=cV?(t._window||window).getSelection():null;if(!r)return!1;var n=r.anchorNode;if(r=r.focusNode,n!==null&&r!==null&&!$t.isSelectionWithinEditor(t,n,r)||(e.preventDefault(),e=e.clipboardData,n=$t.$getSelection(),e===null||n===null))return!1;r=dV(t),t=pV(t);let i="";return n!==null&&(i=n.getTextContent()),r!==null&&e.setData("text/html",r),t!==null&&e.setData("application/x-lexical-editor",t),e.setData("text/plain",i),!0}cc.$generateJSONFromSelectedNodes=mV;cc.$generateNodesFromSerializedNodes=hV;cc.$getHtmlContent=dV;cc.$getLexicalContent=pV;cc.$insertDataTransferForPlainText=function(t,e){t=t.getData("text/plain")||t.getData("text/uri-list"),t!=null&&e.insertRawText(t)};cc.$insertDataTransferForRichText=function(t,e,r){var n=t.getData("application/x-lexical-editor");if(n)try{let o=JSON.parse(n);if(o.namespace===r._config.namespace&&Array.isArray(o.nodes)){let s=hV(o.nodes);return D3(r,s,e)}}catch{}if(n=t.getData("text/html"))try{var i=new DOMParser().parseFromString(n,"text/html");let o=uV.$generateNodesFromDOM(r,i);return D3(r,o,e)}catch{}if(t=t.getData("text/plain")||t.getData("text/uri-list"),t!=null)if($t.$isRangeSelection(e))for(t=t.split(/(\r?\n|\t)/),t[t.length-1]===""&&t.pop(),r=0;r<t.length;r++)i=t[r],i===`
`||i===`\r
`?e.insertParagraph():i==="	"?e.insertNodes([$t.$createTabNode()]):e.insertText(i);else e.insertRawText(t)};cc.$insertGeneratedNodes=D3;cc.copyToClipboard=async function(t,e){if(sg!==null)return!1;if(e!==null)return new Promise(s=>{t.update(()=>{s(lV(t,e))})});var r=t.getRootElement();let n=t._window==null?window.document:t._window.document,i=cV?(t._window||window).getSelection():null;if(r===null||i===null)return!1;let o=n.createElement("span");return o.style.cssText="position: fixed; top: -1000px;",o.append(n.createTextNode("#")),r.append(o),r=new Range,r.setStart(o,0),r.setEnd(o,1),i.removeAllRanges(),i.addRange(r),new Promise(s=>{let a=t.registerCommand($t.COPY_COMMAND,l=>(ag.objectKlassEquals(l,ClipboardEvent)&&(a(),sg!==null&&(window.clearTimeout(sg),sg=null),s(lV(t,l))),!0),$t.COMMAND_PRIORITY_CRITICAL);sg=window.setTimeout(()=>{a(),sg=null,s(!1)},50),n.execCommand("copy"),o.remove()})}});var I3=Y((uot,yV)=>{"use strict";var i1e=gV();yV.exports=i1e});var bV=Y(_V=>{"use strict";var k3=I3(),KS=R0(),o1e=ip(),Fe=(Sn(),Vn(al)),dc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",s1e=dc&&"documentMode"in document?document.documentMode:null;dc&&/Mac|iPod|iPhone|iPad/.test(navigator.platform);dc&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);var a1e=dc&&"InputEvent"in window&&!s1e?"getTargetRanges"in new window.InputEvent("input"):!1,l1e=dc&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),u1e=dc&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;dc&&/Android/.test(navigator.userAgent);var c1e=dc&&/^(?=.*Chrome).*/i.test(navigator.userAgent),d1e=dc&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!c1e;function vV(t,e){e.update(()=>{if(t!==null){let r=t instanceof KeyboardEvent?null:t.clipboardData,n=Fe.$getSelection();if(n!==null&&r!=null){t.preventDefault();let i=k3.$getHtmlContent(e);i!==null&&r.setData("text/html",i),r.setData("text/plain",n.getTextContent())}}})}function p1e(t,e){t.preventDefault(),e.update(()=>{let r=Fe.$getSelection(),{clipboardData:n}=t;n!=null&&Fe.$isRangeSelection(r)&&k3.$insertDataTransferForPlainText(n,r)},{tag:"paste"})}function f1e(t,e){vV(t,e),e.update(()=>{let r=Fe.$getSelection();Fe.$isRangeSelection(r)&&r.removeText()})}_V.registerPlainText=function(t){return o1e.mergeRegister(t.registerCommand(Fe.DELETE_CHARACTER_COMMAND,e=>{let r=Fe.$getSelection();return Fe.$isRangeSelection(r)?(r.deleteCharacter(e),!0):!1},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.DELETE_WORD_COMMAND,e=>{let r=Fe.$getSelection();return Fe.$isRangeSelection(r)?(r.deleteWord(e),!0):!1},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.DELETE_LINE_COMMAND,e=>{let r=Fe.$getSelection();return Fe.$isRangeSelection(r)?(r.deleteLine(e),!0):!1},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.CONTROLLED_TEXT_INSERTION_COMMAND,e=>{let r=Fe.$getSelection();if(!Fe.$isRangeSelection(r))return!1;if(typeof e=="string")r.insertText(e);else{let n=e.dataTransfer;n!=null?k3.$insertDataTransferForPlainText(n,r):(e=e.data)&&r.insertText(e)}return!0},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.REMOVE_TEXT_COMMAND,()=>{let e=Fe.$getSelection();return Fe.$isRangeSelection(e)?(e.removeText(),!0):!1},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.INSERT_LINE_BREAK_COMMAND,e=>{let r=Fe.$getSelection();return Fe.$isRangeSelection(r)?(r.insertLineBreak(e),!0):!1},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.INSERT_PARAGRAPH_COMMAND,()=>{let e=Fe.$getSelection();return Fe.$isRangeSelection(e)?(e.insertLineBreak(),!0):!1},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.KEY_ARROW_LEFT_COMMAND,e=>{let r=Fe.$getSelection();if(!Fe.$isRangeSelection(r))return!1;let n=e.shiftKey;return KS.$shouldOverrideDefaultCharacterSelection(r,!0)?(e.preventDefault(),KS.$moveCharacter(r,n,!0),!0):!1},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.KEY_ARROW_RIGHT_COMMAND,e=>{let r=Fe.$getSelection();if(!Fe.$isRangeSelection(r))return!1;let n=e.shiftKey;return KS.$shouldOverrideDefaultCharacterSelection(r,!1)?(e.preventDefault(),KS.$moveCharacter(r,n,!1),!0):!1},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.KEY_BACKSPACE_COMMAND,e=>{let r=Fe.$getSelection();return Fe.$isRangeSelection(r)?(e.preventDefault(),t.dispatchCommand(Fe.DELETE_CHARACTER_COMMAND,!0)):!1},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.KEY_DELETE_COMMAND,e=>{let r=Fe.$getSelection();return Fe.$isRangeSelection(r)?(e.preventDefault(),t.dispatchCommand(Fe.DELETE_CHARACTER_COMMAND,!1)):!1},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.KEY_ENTER_COMMAND,e=>{let r=Fe.$getSelection();if(!Fe.$isRangeSelection(r))return!1;if(e!==null){if((u1e||l1e||d1e)&&a1e)return!1;e.preventDefault()}return t.dispatchCommand(Fe.INSERT_LINE_BREAK_COMMAND,!1)},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.SELECT_ALL_COMMAND,()=>(Fe.$selectAll(),!0),Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.COPY_COMMAND,e=>{let r=Fe.$getSelection();return Fe.$isRangeSelection(r)?(vV(e,t),!0):!1},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.CUT_COMMAND,e=>{let r=Fe.$getSelection();return Fe.$isRangeSelection(r)?(f1e(e,t),!0):!1},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.PASTE_COMMAND,e=>{let r=Fe.$getSelection();return Fe.$isRangeSelection(r)?(p1e(e,t),!0):!1},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.DROP_COMMAND,e=>{let r=Fe.$getSelection();return Fe.$isRangeSelection(r)?(e.preventDefault(),!0):!1},Fe.COMMAND_PRIORITY_EDITOR),t.registerCommand(Fe.DRAGSTART_COMMAND,e=>{let r=Fe.$getSelection();return Fe.$isRangeSelection(r)?(e.preventDefault(),!0):!1},Fe.COMMAND_PRIORITY_EDITOR))}});var TV=Y((dot,xV)=>{"use strict";var m1e=bV();xV.exports=m1e});var IV=Y(DV=>{"use strict";var EV=Bs(),h1e=qG(),Ta=ve(),g1e=XG(),CV=ip(),wV=Pl(),y1e=eV(),v1e=TV(),N3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Ta.useLayoutEffect:Ta.useEffect;function SV(t){return t.getEditorState().read(g1e.$canShowPlaceholderCurry(t.isComposing()))}function _1e(t){let[e,r]=Ta.useState(()=>SV(t));return N3(()=>{function n(){let i=SV(t);r(i)}return n(),CV.mergeRegister(t.registerUpdateListener(()=>{n()}),t.registerEditableListener(()=>{n()}))},[t]),e}function b1e(t,e){let[r,n]=Ta.useState(()=>t.getDecorators());return N3(()=>t.registerDecoratorListener(i=>{wV.flushSync(()=>{n(i)})}),[t]),Ta.useEffect(()=>{n(t.getDecorators())},[t]),Ta.useMemo(()=>{let i=[],o=Object.keys(r);for(let s=0;s<o.length;s++){let a=o[s],l=Ta.createElement(e,{onError:p=>t._onError(p)},Ta.createElement(Ta.Suspense,{fallback:null},r[a])),c=t.getElementByKey(a);c!==null&&i.push(wV.createPortal(l,c,a))}return i},[e,r,t])}function x1e(t){N3(()=>CV.mergeRegister(v1e.registerPlainText(t),y1e.registerDragonSupport(t)),[t])}function T1e({content:t}){var[e]=EV.useLexicalComposerContext();e=_1e(e);let r=h1e();return e?typeof t=="function"?t(r):t:null}DV.PlainTextPlugin=function({contentEditable:t,placeholder:e,ErrorBoundary:r}){let[n]=EV.useLexicalComposerContext();return r=b1e(n,r),x1e(n),Ta.createElement(Ta.Fragment,null,t,Ta.createElement(T1e,{content:e}),r)}});var NV=Y((fot,kV)=>{"use strict";var w1e=IV();kV.exports=w1e});var VV=Y(ap=>{"use strict";var O3=Bs(),xi=(Sn(),Vn(al)),bn=ve(),zV=ip(),D1e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?bn.useLayoutEffect:bn.useEffect,A3=class{constructor(e){this.key=e,this.ref={current:null},this.setRefElement=this.setRefElement.bind(this)}setRefElement(e){this.ref={current:e}}},$V=t=>{let e=document.getElementById("typeahead-menu");if(e){var r=e.getBoundingClientRect();r.top+r.height>window.innerHeight&&e.scrollIntoView({block:"center"}),0>r.top&&e.scrollIntoView({block:"center"}),t.scrollIntoView({block:"nearest"})}};function I1e(t){var e=xi.$getSelection();if(!xi.$isRangeSelection(e)||!e.isCollapsed())return null;var r=e.anchor;if(r.type!=="text"||(e=r.getNode(),!e.isSimpleText()))return null;r=r.offset;let n=e.getTextContent().slice(0,r);var i=t.matchingString;t=t.replaceableString.length;for(let s=t;s<=i.length;s++)n.substr(-s)===i.substr(0,s)&&(t=s);if(t=r-t,0>t)return null;let o;return t===0?[o]=e.splitText(r):[,o]=e.splitText(t,r),o}function k1e(t,e){let r=getComputedStyle(t),n=r.position==="absolute";if(e=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r.position==="fixed")return document.body;for(;t=t.parentElement;)if(r=getComputedStyle(t),(!n||r.position!=="static")&&e.test(r.overflow+r.overflowY+r.overflowX))return t;return document.body}function HV(t,e){return t=t.getBoundingClientRect(),e=e.getBoundingClientRect(),t.top>e.top&&t.top<e.bottom}function GV(t,e,r,n){let[i]=O3.useLexicalComposerContext();bn.useEffect(()=>{if(e!=null&&t!=null){let o=i.getRootElement(),s=o!=null?k1e(o,!1):document.body,a=!1,l=HV(e,s),c=function(){a||(window.requestAnimationFrame(function(){r(),a=!1}),a=!0);let f=HV(e,s);f!==l&&(l=f,n?.(f))},p=new ResizeObserver(r);return window.addEventListener("resize",r),document.addEventListener("scroll",c,{capture:!0,passive:!0}),p.observe(e),()=>{p.unobserve(e),window.removeEventListener("resize",r),document.removeEventListener("scroll",c,!0)}}},[e,i,n,r,t])}var qV=xi.createCommand("SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND");function N1e({close:t,editor:e,anchorElementRef:r,resolution:n,options:i,menuRenderFn:o,onSelectOption:s,shouldSplitNodeWithQuery:a=!1,commandPriority:l=xi.COMMAND_PRIORITY_LOW}){let[c,p]=bn.useState(null);bn.useEffect(()=>{p(0)},[n.match&&n.match.matchingString]);let f=bn.useCallback(v=>{e.update(()=>{let _=n.match!=null&&a?I1e(n.match):null;s(v,_,t,n.match?n.match.matchingString:"")})},[e,a,n.match,s,t]),m=bn.useCallback(v=>{let _=e.getRootElement();_!==null&&(_.setAttribute("aria-activedescendant","typeahead-item-"+v),p(v))},[e]);bn.useEffect(()=>()=>{let v=e.getRootElement();v!==null&&v.removeAttribute("aria-activedescendant")},[e]),D1e(()=>{i===null?p(null):c===null&&m(0)},[i,c,m]),bn.useEffect(()=>zV.mergeRegister(e.registerCommand(qV,({option:v})=>v.ref&&v.ref.current!=null?($V(v.ref.current),!0):!1,l)),[e,m,l]),bn.useEffect(()=>zV.mergeRegister(e.registerCommand(xi.KEY_ARROW_DOWN_COMMAND,v=>{if(i!==null&&i.length&&c!==null){let _=c!==i.length-1?c+1:0;m(_);let S=i[_];S.ref!=null&&S.ref.current&&e.dispatchCommand(qV,{index:_,option:S}),v.preventDefault(),v.stopImmediatePropagation()}return!0},l),e.registerCommand(xi.KEY_ARROW_UP_COMMAND,v=>{if(i!==null&&i.length&&c!==null){var _=c!==0?c-1:i.length-1;m(_),_=i[_],_.ref!=null&&_.ref.current&&$V(_.ref.current),v.preventDefault(),v.stopImmediatePropagation()}return!0},l),e.registerCommand(xi.KEY_ESCAPE_COMMAND,v=>(v.preventDefault(),v.stopImmediatePropagation(),t(),!0),l),e.registerCommand(xi.KEY_TAB_COMMAND,v=>i===null||c===null||i[c]==null?!1:(v.preventDefault(),v.stopImmediatePropagation(),f(i[c]),!0),l),e.registerCommand(xi.KEY_ENTER_COMMAND,v=>i===null||c===null||i[c]==null?!1:(v!==null&&(v.preventDefault(),v.stopImmediatePropagation()),f(i[c]),!0),l)),[f,t,e,i,c,m,l]);let g=bn.useMemo(()=>({options:i,selectOptionAndCleanUp:f,selectedIndex:c,setHighlightedIndex:p}),[f,c,i]);return o(r,g,n.match?n.match.matchingString:"")}function A1e(t,e,r){let[n]=O3.useLexicalComposerContext(),i=bn.useRef(document.createElement("div")),o=bn.useCallback(()=>{i.current.style.top=i.current.style.bottom;let a=n.getRootElement(),l=i.current;var c=l.firstChild;if(a!==null&&t!==null){let{left:f,top:m,width:g,height:v}=t.getRect();if(l.style.top=`${m+window.pageYOffset+i.current.offsetHeight+3}px`,l.style.left=`${f+window.pageXOffset}px`,l.style.height=`${v}px`,l.style.width=`${g}px`,c!==null){c.style.top=`${m}`;var p=c.getBoundingClientRect();c=p.height,p=p.width;let _=a.getBoundingClientRect();f+p>_.right&&(l.style.left=`${_.right-p+window.pageXOffset}px`),(m+c>window.innerHeight||m+c>_.bottom)&&m-_.top>c&&(l.style.top=`${m-c+window.pageYOffset-v}px`)}l.isConnected||(r!=null&&(l.className=r),l.setAttribute("aria-label","Typeahead menu"),l.setAttribute("id","typeahead-menu"),l.setAttribute("role","listbox"),l.style.display="block",l.style.position="absolute",document.body.append(l)),i.current=l,a.setAttribute("aria-controls","typeahead-menu")}},[n,t,r]);bn.useEffect(()=>{let a=n.getRootElement();if(t!==null)return o(),()=>{a!==null&&a.removeAttribute("aria-controls");let l=i.current;l!==null&&l.isConnected&&l.remove()}},[n,o,t]);let s=bn.useCallback(a=>{t!==null&&(a||e(null))},[t,e]);return GV(t,i.current,o,s),i}function O1e(t,e,r){var n=r.getSelection();if(n===null||!n.isCollapsed||(r=n.anchorNode,n=n.anchorOffset,r==null||n==null))return!1;try{e.setStart(r,t),e.setEnd(r,n)}catch{return!1}return!0}function R1e(t){let e=null;return t.getEditorState().read(()=>{var r=xi.$getSelection();if(xi.$isRangeSelection(r)){var n=r.anchor;n.type!=="text"?e=null:(r=n.getNode(),r.isSimpleText()?(n=n.offset,e=r.getTextContent().slice(0,n)):e=null)}}),e}function P1e(t,e){return e!==0?!1:t.getEditorState().read(()=>{var r=xi.$getSelection();return xi.$isRangeSelection(r)?(r=r.anchor.getNode().getPreviousSibling(),xi.$isTextNode(r)&&r.isTextEntity()):!1})}function L1e(t){bn.startTransition?bn.startTransition(t):t()}var M1e=xi.createCommand("SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND");ap.LexicalTypeaheadMenuPlugin=function({options:t,onQueryChange:e,onSelectOption:r,onOpen:n,onClose:i,menuRenderFn:o,triggerFn:s,anchorClassName:a,commandPriority:l=xi.COMMAND_PRIORITY_LOW}){let[c]=O3.useLexicalComposerContext(),[p,f]=bn.useState(null);a=A1e(p,f,a);let m=bn.useCallback(()=>{f(null),i!=null&&p!==null&&i()},[i,p]),g=bn.useCallback(v=>{f(v),n!=null&&p===null&&n(v)},[n,p]);return bn.useEffect(()=>{let v=c.registerUpdateListener(()=>{c.getEditorState().read(()=>{let _=c._window||window,S=_.document.createRange(),T=xi.$getSelection(),w=R1e(c);if(xi.$isRangeSelection(T)&&T.isCollapsed()&&w!==null&&S!==null){var E=s(w,c);e(E?E.matchingString:null),E===null||P1e(c,E.leadOffset)||O1e(E.leadOffset,S,_)===null?m():L1e(()=>g({getRect:()=>S.getBoundingClientRect(),match:E}))}else m()})});return()=>{v()}},[c,s,e,p,m,g]),p===null||c===null?null:bn.createElement(N1e,{close:m,resolution:p,editor:c,anchorElementRef:a,options:t,menuRenderFn:o,shouldSplitNodeWithQuery:!0,onSelectOption:r,commandPriority:l})};ap.MenuOption=A3;ap.PUNCTUATION=`\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'"~=<>_:;`;ap.SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND=M1e;ap.getScrollParent=function(t,e){let r=getComputedStyle(t),n=r.position==="absolute";if(e=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r.position==="fixed")return document.body;for(;t=t.parentElement;)if(r=getComputedStyle(t),(!n||r.position!=="static")&&e.test(r.overflow+r.overflowY+r.overflowX))return t;return document.body};ap.useBasicTypeaheadTriggerMatch=function(t,{minLength:e=1,maxLength:r=75}){return bn.useCallback(n=>{if(n=new RegExp("(^|\\s|\\()(["+t+"]((?:[^"+(t+`\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'"~=<>_:;\\s]){0,`)+r+"}))$").exec(n),n!==null){let i=n[1],o=n[3];if(o.length>=e)return{leadOffset:n.index+i.length,matchingString:o,replaceableString:n[2]}}return null},[r,e,t])};ap.useDynamicPositioning=GV});var YV=Y((Pst,KV)=>{"use strict";var F1e=VV();KV.exports=F1e});var _K=Y((zlt,W3)=>{"use strict";var vK=(t,e,r)=>{let n=e<0?t.length+e:e;if(n>=0&&n<t.length){let i=r<0?t.length+r:r,[o]=t.splice(e,1);t.splice(i,0,o)}},H1e=(t,e,r)=>(t=[...t],vK(t,e,r),t);W3.exports=H1e;W3.exports.mutate=vK});var BK=Y((But,UK)=>{var Z1e="Expected a function",MK=NaN,eTe="[object Symbol]",tTe=/^\s+|\s+$/g,rTe=/^[-+]0x[0-9a-f]+$/i,nTe=/^0b[01]+$/i,iTe=/^0o[0-7]+$/i,oTe=parseInt,sTe=typeof global=="object"&&global&&global.Object===Object&&global,aTe=typeof self=="object"&&self&&self.Object===Object&&self,lTe=sTe||aTe||Function("return this")(),uTe=Object.prototype,cTe=uTe.toString,dTe=Math.max,pTe=Math.min,q3=function(){return lTe.Date.now()};function fTe(t,e,r){var n,i,o,s,a,l,c=0,p=!1,f=!1,m=!0;if(typeof t!="function")throw new TypeError(Z1e);e=FK(e)||0,G3(r)&&(p=!!r.leading,f="maxWait"in r,o=f?dTe(FK(r.maxWait)||0,e):o,m="trailing"in r?!!r.trailing:m);function g(C){var k=n,U=i;return n=i=void 0,c=C,s=t.apply(U,k),s}function v(C){return c=C,a=setTimeout(T,e),p?g(C):s}function _(C){var k=C-l,U=C-c,$=e-k;return f?pTe($,o-U):$}function S(C){var k=C-l,U=C-c;return l===void 0||k>=e||k<0||f&&U>=o}function T(){var C=q3();if(S(C))return w(C);a=setTimeout(T,_(C))}function w(C){return a=void 0,m&&n?g(C):(n=i=void 0,s)}function E(){a!==void 0&&clearTimeout(a),c=0,n=l=i=a=void 0}function I(){return a===void 0?s:w(q3())}function N(){var C=q3(),k=S(C);if(n=arguments,i=this,l=C,k){if(a===void 0)return v(l);if(f)return a=setTimeout(T,e),g(l)}return a===void 0&&(a=setTimeout(T,e)),s}return N.cancel=E,N.flush=I,N}function G3(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function mTe(t){return!!t&&typeof t=="object"}function hTe(t){return typeof t=="symbol"||mTe(t)&&cTe.call(t)==eTe}function FK(t){if(typeof t=="number")return t;if(hTe(t))return MK;if(G3(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=G3(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(tTe,"");var r=nTe.test(t);return r||iTe.test(t)?oTe(t.slice(2),r?2:8):rTe.test(t)?MK:+t}UK.exports=fTe});var J3=Y((uE,GK)=>{"use strict";Object.defineProperty(uE,"__esModule",{value:!0});uE.Konva=void 0;var yTe=HT();Object.defineProperty(uE,"Konva",{enumerable:!0,get:function(){return yTe.Konva}});var vTe=HT();GK.exports=vTe.Konva});var KK=Y((Cct,VK)=>{VK.exports=function(e){var r={},n=ve(),i=cx(),o=Object.assign;function s(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,y=1;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),E=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function C(u){return u===null||typeof u!="object"?null:(u=N&&u[N]||u["@@iterator"],typeof u=="function"?u:null)}function k(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case p:return"Fragment";case c:return"Portal";case m:return"Profiler";case f:return"StrictMode";case S:return"Suspense";case T:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case v:return(u.displayName||"Context")+".Consumer";case g:return(u._context.displayName||"Context")+".Provider";case _:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case w:return d=u.displayName||null,d!==null?d:k(u.type)||"Memo";case E:d=u._payload,u=u._init;try{return k(u(d))}catch{}}return null}function U(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k(d);case 8:return d===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function $(u){var d=u,y=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,d.flags&4098&&(y=d.return),u=d.return;while(u)}return d.tag===3?y:null}function G(u){if($(u)!==u)throw Error(s(188))}function K(u){var d=u.alternate;if(!d){if(d=$(u),d===null)throw Error(s(188));return d!==u?null:u}for(var y=u,b=d;;){var x=y.return;if(x===null)break;var D=x.alternate;if(D===null){if(b=x.return,b!==null){y=b;continue}break}if(x.child===D.child){for(D=x.child;D;){if(D===y)return G(x),u;if(D===b)return G(x),d;D=D.sibling}throw Error(s(188))}if(y.return!==b.return)y=x,b=D;else{for(var B=!1,Z=x.child;Z;){if(Z===y){B=!0,y=x,b=D;break}if(Z===b){B=!0,b=x,y=D;break}Z=Z.sibling}if(!B){for(Z=D.child;Z;){if(Z===y){B=!0,y=D,b=x;break}if(Z===b){B=!0,b=D,y=x;break}Z=Z.sibling}if(!B)throw Error(s(189))}}if(y.alternate!==b)throw Error(s(190))}if(y.tag!==3)throw Error(s(188));return y.stateNode.current===y?u:d}function X(u){return u=K(u),u!==null?te(u):null}function te(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=te(u);if(d!==null)return d;u=u.sibling}return null}function ne(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var d=ne(u);if(d!==null)return d}u=u.sibling}return null}var H=Array.isArray,re=e.getPublicInstance,W=e.getRootHostContext,q=e.getChildHostContext,se=e.prepareForCommit,J=e.resetAfterCommit,ye=e.createInstance,Ne=e.appendInitialChild,ae=e.finalizeInitialChildren,Se=e.prepareUpdate,Re=e.shouldSetTextContent,Pe=e.createTextInstance,Oe=e.scheduleTimeout,ct=e.cancelTimeout,mt=e.noTimeout,wt=e.isPrimaryRenderer,Me=e.supportsMutation,ue=e.supportsPersistence,Te=e.supportsHydration,ce=e.getInstanceFromNode,xe=e.preparePortalMount,Ae=e.getCurrentEventPriority,M=e.detachDeletedInstance,Ve=e.supportsMicrotasks,De=e.scheduleMicrotask,it=e.supportsTestSelectors,_t=e.findFiberRoot,xt=e.getBoundingRect,Bt=e.getTextContent,fr=e.isHiddenSubtree,nt=e.matchAccessibilityRole,rt=e.setFocusIfFocusable,we=e.setupIntersectionObserver,_e=e.appendChild,Ie=e.appendChildToContainer,O=e.commitTextUpdate,R=e.commitMount,L=e.commitUpdate,je=e.insertBefore,st=e.insertInContainerBefore,wr=e.removeChild,Di=e.removeChildFromContainer,Pa=e.resetTextContent,$o=e.hideInstance,sb=e.hideTextInstance,Mp=e.unhideInstance,fu=e.unhideTextInstance,Yt=e.clearContainer,ti=e.cloneInstance,mu=e.createContainerChildSet,yl=e.appendChildToContainerChildSet,vl=e.finalizeContainerChildren,bs=e.replaceContainerChildren,ab=e.cloneHiddenInstance,lb=e.cloneHiddenTextInstance,RD=e.canHydrateInstance,PD=e.canHydrateTextInstance,Q=e.canHydrateSuspenseInstance,he=e.isSuspenseInstancePending,Je=e.isSuspenseInstanceFallback,Ke=e.getSuspenseInstanceFallbackErrorDetails,ht=e.registerSuspenseInstanceRetry,Nt=e.getNextHydratableSibling,Gt=e.getFirstHydratableChild,Ii=e.getFirstHydratableChildWithinContainer,Nn=e.getFirstHydratableChildWithinSuspenseInstance,hu=e.hydrateInstance,Pc=e.hydrateTextInstance,xs=e.hydrateSuspenseInstance,Ys=e.getNextHydratableInstanceAfterSuspenseInstance,ki=e.commitHydratedContainer,Lc=e.commitHydratedSuspenseInstance,gm=e.clearSuspenseBoundary,LD=e.clearSuspenseBoundaryFromContainer,MD=e.shouldDeleteUnhydratedTailInstances,FD=e.didNotMatchHydratedContainerTextInstance,Sr=e.didNotMatchHydratedTextInstance,qn;function bt(u){if(qn===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);qn=d&&d[1]||""}return`
`+qn+u}var An=!1;function To(u,d){if(!u||An)return"";An=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ke){var b=ke}Reflect.construct(u,[],d)}else{try{d.call()}catch(ke){b=ke}u.call(d.prototype)}else{try{throw Error()}catch(ke){b=ke}u()}}catch(ke){if(ke&&b&&typeof ke.stack=="string"){for(var x=ke.stack.split(`
`),D=b.stack.split(`
`),B=x.length-1,Z=D.length-1;1<=B&&0<=Z&&x[B]!==D[Z];)Z--;for(;1<=B&&0<=Z;B--,Z--)if(x[B]!==D[Z]){if(B!==1||Z!==1)do if(B--,Z--,0>Z||x[B]!==D[Z]){var le=`
`+x[B].replace(" at new "," at ");return u.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",u.displayName)),le}while(1<=B&&0<=Z);break}}}finally{An=!1,Error.prepareStackTrace=y}return(u=u?u.displayName||u.name:"")?bt(u):""}var ci=Object.prototype.hasOwnProperty,La=[],Ki=-1;function Ni(u){return{current:u}}function ar(u){0>Ki||(u.current=La[Ki],La[Ki]=null,Ki--)}function mr(u,d){Ki++,La[Ki]=u.current,u.current=d}var _l={},Yi=Ni(_l),Ho=Ni(!1),Fp=_l;function ym(u,d){var y=u.type.contextTypes;if(!y)return _l;var b=u.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===d)return b.__reactInternalMemoizedMaskedChildContext;var x={},D;for(D in y)x[D]=d[D];return b&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=x),x}function qo(u){return u=u.childContextTypes,u!=null}function ub(){ar(Ho),ar(Yi)}function J4(u,d,y){if(Yi.current!==_l)throw Error(s(168));mr(Yi,d),mr(Ho,y)}function Q4(u,d,y){var b=u.stateNode;if(d=d.childContextTypes,typeof b.getChildContext!="function")return y;b=b.getChildContext();for(var x in b)if(!(x in d))throw Error(s(108,U(u)||"Unknown",x));return o({},y,b)}function cb(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||_l,Fp=Yi.current,mr(Yi,u),mr(Ho,Ho.current),!0}function Z4(u,d,y){var b=u.stateNode;if(!b)throw Error(s(169));y?(u=Q4(u,d,Fp),b.__reactInternalMemoizedMergedChildContext=u,ar(Ho),ar(Yi),mr(Yi,u)):ar(Ho),mr(Ho,y)}var Ma=Math.clz32?Math.clz32:yne,hne=Math.log,gne=Math.LN2;function yne(u){return u>>>=0,u===0?32:31-(hne(u)/gne|0)|0}var db=64,pb=4194304;function dy(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function fb(u,d){var y=u.pendingLanes;if(y===0)return 0;var b=0,x=u.suspendedLanes,D=u.pingedLanes,B=y&268435455;if(B!==0){var Z=B&~x;Z!==0?b=dy(Z):(D&=B,D!==0&&(b=dy(D)))}else B=y&~x,B!==0?b=dy(B):D!==0&&(b=dy(D));if(b===0)return 0;if(d!==0&&d!==b&&!(d&x)&&(x=b&-b,D=d&-d,x>=D||x===16&&(D&4194240)!==0))return d;if(b&4&&(b|=y&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=b;0<d;)y=31-Ma(d),x=1<<y,b|=u[y],d&=~x;return b}function vne(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _ne(u,d){for(var y=u.suspendedLanes,b=u.pingedLanes,x=u.expirationTimes,D=u.pendingLanes;0<D;){var B=31-Ma(D),Z=1<<B,le=x[B];le===-1?(!(Z&y)||Z&b)&&(x[B]=vne(Z,d)):le<=d&&(u.expiredLanes|=Z),D&=~Z}}function UD(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function eM(){var u=db;return db<<=1,!(db&4194240)&&(db=64),u}function BD(u){for(var d=[],y=0;31>y;y++)d.push(u);return d}function py(u,d,y){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-Ma(d),u[d]=y}function bne(u,d){var y=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var b=u.eventTimes;for(u=u.expirationTimes;0<y;){var x=31-Ma(y),D=1<<x;d[x]=0,b[x]=-1,u[x]=-1,y&=~D}}function WD(u,d){var y=u.entangledLanes|=d;for(u=u.entanglements;y;){var b=31-Ma(y),x=1<<b;x&d|u[b]&d&&(u[b]|=d),y&=~x}}var cr=0;function tM(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var jD=i.unstable_scheduleCallback,rM=i.unstable_cancelCallback,xne=i.unstable_shouldYield,Tne=i.unstable_requestPaint,di=i.unstable_now,zD=i.unstable_ImmediatePriority,wne=i.unstable_UserBlockingPriority,$D=i.unstable_NormalPriority,Sne=i.unstable_IdlePriority,mb=null,bl=null;function Ene(u){if(bl&&typeof bl.onCommitFiberRoot=="function")try{bl.onCommitFiberRoot(mb,u,void 0,(u.current.flags&128)===128)}catch{}}function Cne(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var Fa=typeof Object.is=="function"?Object.is:Cne,gu=null,hb=!1,HD=!1;function nM(u){gu===null?gu=[u]:gu.push(u)}function Dne(u){hb=!0,nM(u)}function xl(){if(!HD&&gu!==null){HD=!0;var u=0,d=cr;try{var y=gu;for(cr=1;u<y.length;u++){var b=y[u];do b=b(!0);while(b!==null)}gu=null,hb=!1}catch(x){throw gu!==null&&(gu=gu.slice(u+1)),jD(zD,xl),x}finally{cr=d,HD=!1}}return null}var vm=[],_m=0,gb=null,yb=0,Xs=[],Js=0,Up=null,yu=1,vu="";function Bp(u,d){vm[_m++]=yb,vm[_m++]=gb,gb=u,yb=d}function iM(u,d,y){Xs[Js++]=yu,Xs[Js++]=vu,Xs[Js++]=Up,Up=u;var b=yu;u=vu;var x=32-Ma(b)-1;b&=~(1<<x),y+=1;var D=32-Ma(d)+x;if(30<D){var B=x-x%5;D=(b&(1<<B)-1).toString(32),b>>=B,x-=B,yu=1<<32-Ma(d)+x|y<<x|b,vu=D+u}else yu=1<<D|y<<x|b,vu=u}function qD(u){u.return!==null&&(Bp(u,1),iM(u,1,0))}function GD(u){for(;u===gb;)gb=vm[--_m],vm[_m]=null,yb=vm[--_m],vm[_m]=null;for(;u===Up;)Up=Xs[--Js],Xs[Js]=null,vu=Xs[--Js],Xs[Js]=null,yu=Xs[--Js],Xs[Js]=null}var Ts=null,Qs=null,Jr=!1,fy=!1,Ua=null;function oM(u,d){var y=na(5,null,null,0);y.elementType="DELETED",y.stateNode=d,y.return=u,d=u.deletions,d===null?(u.deletions=[y],u.flags|=16):d.push(y)}function sM(u,d){switch(u.tag){case 5:return d=RD(d,u.type,u.pendingProps),d!==null?(u.stateNode=d,Ts=u,Qs=Gt(d),!0):!1;case 6:return d=PD(d,u.pendingProps),d!==null?(u.stateNode=d,Ts=u,Qs=null,!0):!1;case 13:if(d=Q(d),d!==null){var y=Up!==null?{id:yu,overflow:vu}:null;return u.memoizedState={dehydrated:d,treeContext:y,retryLane:1073741824},y=na(18,null,null,0),y.stateNode=d,y.return=u,u.child=y,Ts=u,Qs=null,!0}return!1;default:return!1}}function VD(u){return(u.mode&1)!==0&&(u.flags&128)===0}function KD(u){if(Jr){var d=Qs;if(d){var y=d;if(!sM(u,d)){if(VD(u))throw Error(s(418));d=Nt(y);var b=Ts;d&&sM(u,d)?oM(b,y):(u.flags=u.flags&-4097|2,Jr=!1,Ts=u)}}else{if(VD(u))throw Error(s(418));u.flags=u.flags&-4097|2,Jr=!1,Ts=u}}}function aM(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Ts=u}function vb(u){if(!Te||u!==Ts)return!1;if(!Jr)return aM(u),Jr=!0,!1;if(u.tag!==3&&(u.tag!==5||MD(u.type)&&!Re(u.type,u.memoizedProps))){var d=Qs;if(d){if(VD(u))throw lM(),Error(s(418));for(;d;)oM(u,d),d=Nt(d)}}if(aM(u),u.tag===13){if(!Te)throw Error(s(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));Qs=Ys(u)}else Qs=Ts?Nt(u.stateNode):null;return!0}function lM(){for(var u=Qs;u;)u=Nt(u)}function bm(){Te&&(Qs=Ts=null,fy=Jr=!1)}function YD(u){Ua===null?Ua=[u]:Ua.push(u)}var Ine=a.ReactCurrentBatchConfig;function _b(u,d){if(Fa(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var y=Object.keys(u),b=Object.keys(d);if(y.length!==b.length)return!1;for(b=0;b<y.length;b++){var x=y[b];if(!ci.call(d,x)||!Fa(u[x],d[x]))return!1}return!0}function kne(u){switch(u.tag){case 5:return bt(u.type);case 16:return bt("Lazy");case 13:return bt("Suspense");case 19:return bt("SuspenseList");case 0:case 2:case 15:return u=To(u.type,!1),u;case 11:return u=To(u.type.render,!1),u;case 1:return u=To(u.type,!0),u;default:return""}}function Ba(u,d){if(u&&u.defaultProps){d=o({},d),u=u.defaultProps;for(var y in u)d[y]===void 0&&(d[y]=u[y]);return d}return d}var bb=Ni(null),xb=null,xm=null,XD=null;function JD(){XD=xm=xb=null}function uM(u,d,y){wt?(mr(bb,d._currentValue),d._currentValue=y):(mr(bb,d._currentValue2),d._currentValue2=y)}function QD(u){var d=bb.current;ar(bb),wt?u._currentValue=d:u._currentValue2=d}function ZD(u,d,y){for(;u!==null;){var b=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),u===y)break;u=u.return}}function Tm(u,d){xb=u,XD=xm=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&d&&(Go=!0),u.firstContext=null)}function Zs(u){var d=wt?u._currentValue:u._currentValue2;if(XD!==u)if(u={context:u,memoizedValue:d,next:null},xm===null){if(xb===null)throw Error(s(308));xm=u,xb.dependencies={lanes:0,firstContext:u}}else xm=xm.next=u;return d}var Wp=null;function eI(u){Wp===null?Wp=[u]:Wp.push(u)}function cM(u,d,y,b){var x=d.interleaved;return x===null?(y.next=y,eI(d)):(y.next=x.next,x.next=y),d.interleaved=y,Tl(u,b)}function Tl(u,d){u.lanes|=d;var y=u.alternate;for(y!==null&&(y.lanes|=d),y=u,u=u.return;u!==null;)u.childLanes|=d,y=u.alternate,y!==null&&(y.childLanes|=d),y=u,u=u.return;return y.tag===3?y.stateNode:null}var Mc=!1;function tI(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dM(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function _u(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function Fc(u,d,y){var b=u.updateQueue;if(b===null)return null;if(b=b.shared,Vt&2){var x=b.pending;return x===null?d.next=d:(d.next=x.next,x.next=d),b.pending=d,Tl(u,y)}return x=b.interleaved,x===null?(d.next=d,eI(b)):(d.next=x.next,x.next=d),b.interleaved=d,Tl(u,y)}function Tb(u,d,y){if(d=d.updateQueue,d!==null&&(d=d.shared,(y&4194240)!==0)){var b=d.lanes;b&=u.pendingLanes,y|=b,d.lanes=y,WD(u,y)}}function pM(u,d){var y=u.updateQueue,b=u.alternate;if(b!==null&&(b=b.updateQueue,y===b)){var x=null,D=null;if(y=y.firstBaseUpdate,y!==null){do{var B={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};D===null?x=D=B:D=D.next=B,y=y.next}while(y!==null);D===null?x=D=d:D=D.next=d}else x=D=d;y={baseState:b.baseState,firstBaseUpdate:x,lastBaseUpdate:D,shared:b.shared,effects:b.effects},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=d:u.next=d,y.lastBaseUpdate=d}function wb(u,d,y,b){var x=u.updateQueue;Mc=!1;var D=x.firstBaseUpdate,B=x.lastBaseUpdate,Z=x.shared.pending;if(Z!==null){x.shared.pending=null;var le=Z,ke=le.next;le.next=null,B===null?D=ke:B.next=ke,B=le;var Qe=u.alternate;Qe!==null&&(Qe=Qe.updateQueue,Z=Qe.lastBaseUpdate,Z!==B&&(Z===null?Qe.firstBaseUpdate=ke:Z.next=ke,Qe.lastBaseUpdate=le))}if(D!==null){var At=x.baseState;B=0,Qe=ke=le=null,Z=D;do{var $e=Z.lane,Kr=Z.eventTime;if((b&$e)===$e){Qe!==null&&(Qe=Qe.next={eventTime:Kr,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var Or=u,Yo=Z;switch($e=d,Kr=y,Yo.tag){case 1:if(Or=Yo.payload,typeof Or=="function"){At=Or.call(Kr,At,$e);break e}At=Or;break e;case 3:Or.flags=Or.flags&-65537|128;case 0:if(Or=Yo.payload,$e=typeof Or=="function"?Or.call(Kr,At,$e):Or,$e==null)break e;At=o({},At,$e);break e;case 2:Mc=!0}}Z.callback!==null&&Z.lane!==0&&(u.flags|=64,$e=x.effects,$e===null?x.effects=[Z]:$e.push(Z))}else Kr={eventTime:Kr,lane:$e,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Qe===null?(ke=Qe=Kr,le=At):Qe=Qe.next=Kr,B|=$e;if(Z=Z.next,Z===null){if(Z=x.shared.pending,Z===null)break;$e=Z,Z=$e.next,$e.next=null,x.lastBaseUpdate=$e,x.shared.pending=null}}while(!0);if(Qe===null&&(le=At),x.baseState=le,x.firstBaseUpdate=ke,x.lastBaseUpdate=Qe,d=x.shared.interleaved,d!==null){x=d;do B|=x.lane,x=x.next;while(x!==d)}else D===null&&(x.shared.lanes=0);zp|=B,u.lanes=B,u.memoizedState=At}}function fM(u,d,y){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var b=u[d],x=b.callback;if(x!==null){if(b.callback=null,b=y,typeof x!="function")throw Error(s(191,x));x.call(b)}}}var mM=new n.Component().refs;function rI(u,d,y,b){d=u.memoizedState,y=y(b,d),y=y==null?d:o({},d,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var Sb={isMounted:function(u){return(u=u._reactInternals)?$(u)===u:!1},enqueueSetState:function(u,d,y){u=u._reactInternals;var b=Zi(),x=Wc(u),D=_u(b,x);D.payload=d,y!=null&&(D.callback=y),d=Fc(u,D,x),d!==null&&(ra(d,u,x,b),Tb(d,u,x))},enqueueReplaceState:function(u,d,y){u=u._reactInternals;var b=Zi(),x=Wc(u),D=_u(b,x);D.tag=1,D.payload=d,y!=null&&(D.callback=y),d=Fc(u,D,x),d!==null&&(ra(d,u,x,b),Tb(d,u,x))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var y=Zi(),b=Wc(u),x=_u(y,b);x.tag=2,d!=null&&(x.callback=d),d=Fc(u,x,b),d!==null&&(ra(d,u,b,y),Tb(d,u,b))}};function hM(u,d,y,b,x,D,B){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(b,D,B):d.prototype&&d.prototype.isPureReactComponent?!_b(y,b)||!_b(x,D):!0}function gM(u,d,y){var b=!1,x=_l,D=d.contextType;return typeof D=="object"&&D!==null?D=Zs(D):(x=qo(d)?Fp:Yi.current,b=d.contextTypes,D=(b=b!=null)?ym(u,x):_l),d=new d(y,D),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Sb,u.stateNode=d,d._reactInternals=u,b&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=x,u.__reactInternalMemoizedMaskedChildContext=D),d}function yM(u,d,y,b){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,b),d.state!==u&&Sb.enqueueReplaceState(d,d.state,null)}function nI(u,d,y,b){var x=u.stateNode;x.props=y,x.state=u.memoizedState,x.refs=mM,tI(u);var D=d.contextType;typeof D=="object"&&D!==null?x.context=Zs(D):(D=qo(d)?Fp:Yi.current,x.context=ym(u,D)),x.state=u.memoizedState,D=d.getDerivedStateFromProps,typeof D=="function"&&(rI(u,d,D,y),x.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(d=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),d!==x.state&&Sb.enqueueReplaceState(x,x.state,null),wb(u,y,x,b),x.state=u.memoizedState),typeof x.componentDidMount=="function"&&(u.flags|=4194308)}function my(u,d,y){if(u=y.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(s(309));var b=y.stateNode}if(!b)throw Error(s(147,u));var x=b,D=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===D?d.ref:(d=function(B){var Z=x.refs;Z===mM&&(Z=x.refs={}),B===null?delete Z[D]:Z[D]=B},d._stringRef=D,d)}if(typeof u!="string")throw Error(s(284));if(!y._owner)throw Error(s(290,u))}return u}function Eb(u,d){throw u=Object.prototype.toString.call(d),Error(s(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function vM(u){var d=u._init;return d(u._payload)}function _M(u){function d(oe,ee){if(u){var me=oe.deletions;me===null?(oe.deletions=[ee],oe.flags|=16):me.push(ee)}}function y(oe,ee){if(!u)return null;for(;ee!==null;)d(oe,ee),ee=ee.sibling;return null}function b(oe,ee){for(oe=new Map;ee!==null;)ee.key!==null?oe.set(ee.key,ee):oe.set(ee.index,ee),ee=ee.sibling;return oe}function x(oe,ee){return oe=zc(oe,ee),oe.index=0,oe.sibling=null,oe}function D(oe,ee,me){return oe.index=me,u?(me=oe.alternate,me!==null?(me=me.index,me<ee?(oe.flags|=2,ee):me):(oe.flags|=2,ee)):(oe.flags|=1048576,ee)}function B(oe){return u&&oe.alternate===null&&(oe.flags|=2),oe}function Z(oe,ee,me,qe){return ee===null||ee.tag!==6?(ee=HI(me,oe.mode,qe),ee.return=oe,ee):(ee=x(ee,me),ee.return=oe,ee)}function le(oe,ee,me,qe){var pt=me.type;return pt===p?Qe(oe,ee,me.props.children,qe,me.key):ee!==null&&(ee.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===E&&vM(pt)===ee.type)?(qe=x(ee,me.props),qe.ref=my(oe,ee,me),qe.return=oe,qe):(qe=Jb(me.type,me.key,me.props,null,oe.mode,qe),qe.ref=my(oe,ee,me),qe.return=oe,qe)}function ke(oe,ee,me,qe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==me.containerInfo||ee.stateNode.implementation!==me.implementation?(ee=qI(me,oe.mode,qe),ee.return=oe,ee):(ee=x(ee,me.children||[]),ee.return=oe,ee)}function Qe(oe,ee,me,qe,pt){return ee===null||ee.tag!==7?(ee=Gp(me,oe.mode,qe,pt),ee.return=oe,ee):(ee=x(ee,me),ee.return=oe,ee)}function At(oe,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=HI(""+ee,oe.mode,me),ee.return=oe,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case l:return me=Jb(ee.type,ee.key,ee.props,null,oe.mode,me),me.ref=my(oe,null,ee),me.return=oe,me;case c:return ee=qI(ee,oe.mode,me),ee.return=oe,ee;case E:var qe=ee._init;return At(oe,qe(ee._payload),me)}if(H(ee)||C(ee))return ee=Gp(ee,oe.mode,me,null),ee.return=oe,ee;Eb(oe,ee)}return null}function $e(oe,ee,me,qe){var pt=ee!==null?ee.key:null;if(typeof me=="string"&&me!==""||typeof me=="number")return pt!==null?null:Z(oe,ee,""+me,qe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case l:return me.key===pt?le(oe,ee,me,qe):null;case c:return me.key===pt?ke(oe,ee,me,qe):null;case E:return pt=me._init,$e(oe,ee,pt(me._payload),qe)}if(H(me)||C(me))return pt!==null?null:Qe(oe,ee,me,qe,null);Eb(oe,me)}return null}function Kr(oe,ee,me,qe,pt){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return oe=oe.get(me)||null,Z(ee,oe,""+qe,pt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case l:return oe=oe.get(qe.key===null?me:qe.key)||null,le(ee,oe,qe,pt);case c:return oe=oe.get(qe.key===null?me:qe.key)||null,ke(ee,oe,qe,pt);case E:var jt=qe._init;return Kr(oe,ee,me,jt(qe._payload),pt)}if(H(qe)||C(qe))return oe=oe.get(me)||null,Qe(ee,oe,qe,pt,null);Eb(ee,qe)}return null}function Or(oe,ee,me,qe){for(var pt=null,jt=null,Ot=ee,dr=ee=0,mi=null;Ot!==null&&dr<me.length;dr++){Ot.index>dr?(mi=Ot,Ot=null):mi=Ot.sibling;var pr=$e(oe,Ot,me[dr],qe);if(pr===null){Ot===null&&(Ot=mi);break}u&&Ot&&pr.alternate===null&&d(oe,Ot),ee=D(pr,ee,dr),jt===null?pt=pr:jt.sibling=pr,jt=pr,Ot=mi}if(dr===me.length)return y(oe,Ot),Jr&&Bp(oe,dr),pt;if(Ot===null){for(;dr<me.length;dr++)Ot=At(oe,me[dr],qe),Ot!==null&&(ee=D(Ot,ee,dr),jt===null?pt=Ot:jt.sibling=Ot,jt=Ot);return Jr&&Bp(oe,dr),pt}for(Ot=b(oe,Ot);dr<me.length;dr++)mi=Kr(Ot,oe,dr,me[dr],qe),mi!==null&&(u&&mi.alternate!==null&&Ot.delete(mi.key===null?dr:mi.key),ee=D(mi,ee,dr),jt===null?pt=mi:jt.sibling=mi,jt=mi);return u&&Ot.forEach(function($c){return d(oe,$c)}),Jr&&Bp(oe,dr),pt}function Yo(oe,ee,me,qe){var pt=C(me);if(typeof pt!="function")throw Error(s(150));if(me=pt.call(me),me==null)throw Error(s(151));for(var jt=pt=null,Ot=ee,dr=ee=0,mi=null,pr=me.next();Ot!==null&&!pr.done;dr++,pr=me.next()){Ot.index>dr?(mi=Ot,Ot=null):mi=Ot.sibling;var $c=$e(oe,Ot,pr.value,qe);if($c===null){Ot===null&&(Ot=mi);break}u&&Ot&&$c.alternate===null&&d(oe,Ot),ee=D($c,ee,dr),jt===null?pt=$c:jt.sibling=$c,jt=$c,Ot=mi}if(pr.done)return y(oe,Ot),Jr&&Bp(oe,dr),pt;if(Ot===null){for(;!pr.done;dr++,pr=me.next())pr=At(oe,pr.value,qe),pr!==null&&(ee=D(pr,ee,dr),jt===null?pt=pr:jt.sibling=pr,jt=pr);return Jr&&Bp(oe,dr),pt}for(Ot=b(oe,Ot);!pr.done;dr++,pr=me.next())pr=Kr(Ot,oe,dr,pr.value,qe),pr!==null&&(u&&pr.alternate!==null&&Ot.delete(pr.key===null?dr:pr.key),ee=D(pr,ee,dr),jt===null?pt=pr:jt.sibling=pr,jt=pr);return u&&Ot.forEach(function(oie){return d(oe,oie)}),Jr&&Bp(oe,dr),pt}function Tu(oe,ee,me,qe){if(typeof me=="object"&&me!==null&&me.type===p&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case l:e:{for(var pt=me.key,jt=ee;jt!==null;){if(jt.key===pt){if(pt=me.type,pt===p){if(jt.tag===7){y(oe,jt.sibling),ee=x(jt,me.props.children),ee.return=oe,oe=ee;break e}}else if(jt.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===E&&vM(pt)===jt.type){y(oe,jt.sibling),ee=x(jt,me.props),ee.ref=my(oe,jt,me),ee.return=oe,oe=ee;break e}y(oe,jt);break}else d(oe,jt);jt=jt.sibling}me.type===p?(ee=Gp(me.props.children,oe.mode,qe,me.key),ee.return=oe,oe=ee):(qe=Jb(me.type,me.key,me.props,null,oe.mode,qe),qe.ref=my(oe,ee,me),qe.return=oe,oe=qe)}return B(oe);case c:e:{for(jt=me.key;ee!==null;){if(ee.key===jt)if(ee.tag===4&&ee.stateNode.containerInfo===me.containerInfo&&ee.stateNode.implementation===me.implementation){y(oe,ee.sibling),ee=x(ee,me.children||[]),ee.return=oe,oe=ee;break e}else{y(oe,ee);break}else d(oe,ee);ee=ee.sibling}ee=qI(me,oe.mode,qe),ee.return=oe,oe=ee}return B(oe);case E:return jt=me._init,Tu(oe,ee,jt(me._payload),qe)}if(H(me))return Or(oe,ee,me,qe);if(C(me))return Yo(oe,ee,me,qe);Eb(oe,me)}return typeof me=="string"&&me!==""||typeof me=="number"?(me=""+me,ee!==null&&ee.tag===6?(y(oe,ee.sibling),ee=x(ee,me),ee.return=oe,oe=ee):(y(oe,ee),ee=HI(me,oe.mode,qe),ee.return=oe,oe=ee),B(oe)):y(oe,ee)}return Tu}var wm=_M(!0),bM=_M(!1),hy={},ea=Ni(hy),gy=Ni(hy),Sm=Ni(hy);function wl(u){if(u===hy)throw Error(s(174));return u}function iI(u,d){mr(Sm,d),mr(gy,u),mr(ea,hy),u=W(d),ar(ea),mr(ea,u)}function Em(){ar(ea),ar(gy),ar(Sm)}function xM(u){var d=wl(Sm.current),y=wl(ea.current);d=q(y,u.type,d),y!==d&&(mr(gy,u),mr(ea,d))}function oI(u){gy.current===u&&(ar(ea),ar(gy))}var ln=Ni(0);function Cb(u){for(var d=u;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||he(y)||Je(y)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var sI=[];function aI(){for(var u=0;u<sI.length;u++){var d=sI[u];wt?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}sI.length=0}var Db=a.ReactCurrentDispatcher,lI=a.ReactCurrentBatchConfig,jp=0,un=null,ri=null,pi=null,Ib=!1,yy=!1,vy=0,Nne=0;function Xi(){throw Error(s(321))}function uI(u,d){if(d===null)return!1;for(var y=0;y<d.length&&y<u.length;y++)if(!Fa(u[y],d[y]))return!1;return!0}function cI(u,d,y,b,x,D){if(jp=D,un=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Db.current=u===null||u.memoizedState===null?Pne:Lne,u=y(b,x),yy){D=0;do{if(yy=!1,vy=0,25<=D)throw Error(s(301));D+=1,pi=ri=null,d.updateQueue=null,Db.current=Mne,u=y(b,x)}while(yy)}if(Db.current=Ab,d=ri!==null&&ri.next!==null,jp=0,pi=ri=un=null,Ib=!1,d)throw Error(s(300));return u}function dI(){var u=vy!==0;return vy=0,u}function Sl(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pi===null?un.memoizedState=pi=u:pi=pi.next=u,pi}function ta(){if(ri===null){var u=un.alternate;u=u!==null?u.memoizedState:null}else u=ri.next;var d=pi===null?un.memoizedState:pi.next;if(d!==null)pi=d,ri=u;else{if(u===null)throw Error(s(310));ri=u,u={memoizedState:ri.memoizedState,baseState:ri.baseState,baseQueue:ri.baseQueue,queue:ri.queue,next:null},pi===null?un.memoizedState=pi=u:pi=pi.next=u}return pi}function _y(u,d){return typeof d=="function"?d(u):d}function pI(u){var d=ta(),y=d.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=u;var b=ri,x=b.baseQueue,D=y.pending;if(D!==null){if(x!==null){var B=x.next;x.next=D.next,D.next=B}b.baseQueue=x=D,y.pending=null}if(x!==null){D=x.next,b=b.baseState;var Z=B=null,le=null,ke=D;do{var Qe=ke.lane;if((jp&Qe)===Qe)le!==null&&(le=le.next={lane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),b=ke.hasEagerState?ke.eagerState:u(b,ke.action);else{var At={lane:Qe,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null};le===null?(Z=le=At,B=b):le=le.next=At,un.lanes|=Qe,zp|=Qe}ke=ke.next}while(ke!==null&&ke!==D);le===null?B=b:le.next=Z,Fa(b,d.memoizedState)||(Go=!0),d.memoizedState=b,d.baseState=B,d.baseQueue=le,y.lastRenderedState=b}if(u=y.interleaved,u!==null){x=u;do D=x.lane,un.lanes|=D,zp|=D,x=x.next;while(x!==u)}else x===null&&(y.lanes=0);return[d.memoizedState,y.dispatch]}function fI(u){var d=ta(),y=d.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=u;var b=y.dispatch,x=y.pending,D=d.memoizedState;if(x!==null){y.pending=null;var B=x=x.next;do D=u(D,B.action),B=B.next;while(B!==x);Fa(D,d.memoizedState)||(Go=!0),d.memoizedState=D,d.baseQueue===null&&(d.baseState=D),y.lastRenderedState=D}return[D,b]}function TM(){}function wM(u,d){var y=un,b=ta(),x=d(),D=!Fa(b.memoizedState,x);if(D&&(b.memoizedState=x,Go=!0),b=b.queue,mI(CM.bind(null,y,b,u),[u]),b.getSnapshot!==d||D||pi!==null&&pi.memoizedState.tag&1){if(y.flags|=2048,by(9,EM.bind(null,y,b,x,d),void 0,null),fi===null)throw Error(s(349));jp&30||SM(y,d,x)}return x}function SM(u,d,y){u.flags|=16384,u={getSnapshot:d,value:y},d=un.updateQueue,d===null?(d={lastEffect:null,stores:null},un.updateQueue=d,d.stores=[u]):(y=d.stores,y===null?d.stores=[u]:y.push(u))}function EM(u,d,y,b){d.value=y,d.getSnapshot=b,DM(d)&&IM(u)}function CM(u,d,y){return y(function(){DM(d)&&IM(u)})}function DM(u){var d=u.getSnapshot;u=u.value;try{var y=d();return!Fa(u,y)}catch{return!0}}function IM(u){var d=Tl(u,1);d!==null&&ra(d,u,1,-1)}function kM(u){var d=Sl();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_y,lastRenderedState:u},d.queue=u,u=u.dispatch=Rne.bind(null,un,u),[d.memoizedState,u]}function by(u,d,y,b){return u={tag:u,create:d,destroy:y,deps:b,next:null},d=un.updateQueue,d===null?(d={lastEffect:null,stores:null},un.updateQueue=d,d.lastEffect=u.next=u):(y=d.lastEffect,y===null?d.lastEffect=u.next=u:(b=y.next,y.next=u,u.next=b,d.lastEffect=u)),u}function NM(){return ta().memoizedState}function kb(u,d,y,b){var x=Sl();un.flags|=u,x.memoizedState=by(1|d,y,void 0,b===void 0?null:b)}function Nb(u,d,y,b){var x=ta();b=b===void 0?null:b;var D=void 0;if(ri!==null){var B=ri.memoizedState;if(D=B.destroy,b!==null&&uI(b,B.deps)){x.memoizedState=by(d,y,D,b);return}}un.flags|=u,x.memoizedState=by(1|d,y,D,b)}function AM(u,d){return kb(8390656,8,u,d)}function mI(u,d){return Nb(2048,8,u,d)}function OM(u,d){return Nb(4,2,u,d)}function RM(u,d){return Nb(4,4,u,d)}function PM(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function LM(u,d,y){return y=y!=null?y.concat([u]):null,Nb(4,4,PM.bind(null,d,u),y)}function hI(){}function MM(u,d){var y=ta();d=d===void 0?null:d;var b=y.memoizedState;return b!==null&&d!==null&&uI(d,b[1])?b[0]:(y.memoizedState=[u,d],u)}function FM(u,d){var y=ta();d=d===void 0?null:d;var b=y.memoizedState;return b!==null&&d!==null&&uI(d,b[1])?b[0]:(u=u(),y.memoizedState=[u,d],u)}function UM(u,d,y){return jp&21?(Fa(y,d)||(y=eM(),un.lanes|=y,zp|=y,u.baseState=!0),d):(u.baseState&&(u.baseState=!1,Go=!0),u.memoizedState=y)}function Ane(u,d){var y=cr;cr=y!==0&&4>y?y:4,u(!0);var b=lI.transition;lI.transition={};try{u(!1),d()}finally{cr=y,lI.transition=b}}function BM(){return ta().memoizedState}function One(u,d,y){var b=Wc(u);if(y={lane:b,action:y,hasEagerState:!1,eagerState:null,next:null},WM(u))jM(d,y);else if(y=cM(u,d,y,b),y!==null){var x=Zi();ra(y,u,b,x),zM(y,d,b)}}function Rne(u,d,y){var b=Wc(u),x={lane:b,action:y,hasEagerState:!1,eagerState:null,next:null};if(WM(u))jM(d,x);else{var D=u.alternate;if(u.lanes===0&&(D===null||D.lanes===0)&&(D=d.lastRenderedReducer,D!==null))try{var B=d.lastRenderedState,Z=D(B,y);if(x.hasEagerState=!0,x.eagerState=Z,Fa(Z,B)){var le=d.interleaved;le===null?(x.next=x,eI(d)):(x.next=le.next,le.next=x),d.interleaved=x;return}}catch{}finally{}y=cM(u,d,x,b),y!==null&&(x=Zi(),ra(y,u,b,x),zM(y,d,b))}}function WM(u){var d=u.alternate;return u===un||d!==null&&d===un}function jM(u,d){yy=Ib=!0;var y=u.pending;y===null?d.next=d:(d.next=y.next,y.next=d),u.pending=d}function zM(u,d,y){if(y&4194240){var b=d.lanes;b&=u.pendingLanes,y|=b,d.lanes=y,WD(u,y)}}var Ab={readContext:Zs,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useInsertionEffect:Xi,useLayoutEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useDeferredValue:Xi,useTransition:Xi,useMutableSource:Xi,useSyncExternalStore:Xi,useId:Xi,unstable_isNewReconciler:!1},Pne={readContext:Zs,useCallback:function(u,d){return Sl().memoizedState=[u,d===void 0?null:d],u},useContext:Zs,useEffect:AM,useImperativeHandle:function(u,d,y){return y=y!=null?y.concat([u]):null,kb(4194308,4,PM.bind(null,d,u),y)},useLayoutEffect:function(u,d){return kb(4194308,4,u,d)},useInsertionEffect:function(u,d){return kb(4,2,u,d)},useMemo:function(u,d){var y=Sl();return d=d===void 0?null:d,u=u(),y.memoizedState=[u,d],u},useReducer:function(u,d,y){var b=Sl();return d=y!==void 0?y(d):d,b.memoizedState=b.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},b.queue=u,u=u.dispatch=One.bind(null,un,u),[b.memoizedState,u]},useRef:function(u){var d=Sl();return u={current:u},d.memoizedState=u},useState:kM,useDebugValue:hI,useDeferredValue:function(u){return Sl().memoizedState=u},useTransition:function(){var u=kM(!1),d=u[0];return u=Ane.bind(null,u[1]),Sl().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,y){var b=un,x=Sl();if(Jr){if(y===void 0)throw Error(s(407));y=y()}else{if(y=d(),fi===null)throw Error(s(349));jp&30||SM(b,d,y)}x.memoizedState=y;var D={value:y,getSnapshot:d};return x.queue=D,AM(CM.bind(null,b,D,u),[u]),b.flags|=2048,by(9,EM.bind(null,b,D,y,d),void 0,null),y},useId:function(){var u=Sl(),d=fi.identifierPrefix;if(Jr){var y=vu,b=yu;y=(b&~(1<<32-Ma(b)-1)).toString(32)+y,d=":"+d+"R"+y,y=vy++,0<y&&(d+="H"+y.toString(32)),d+=":"}else y=Nne++,d=":"+d+"r"+y.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},Lne={readContext:Zs,useCallback:MM,useContext:Zs,useEffect:mI,useImperativeHandle:LM,useInsertionEffect:OM,useLayoutEffect:RM,useMemo:FM,useReducer:pI,useRef:NM,useState:function(){return pI(_y)},useDebugValue:hI,useDeferredValue:function(u){var d=ta();return UM(d,ri.memoizedState,u)},useTransition:function(){var u=pI(_y)[0],d=ta().memoizedState;return[u,d]},useMutableSource:TM,useSyncExternalStore:wM,useId:BM,unstable_isNewReconciler:!1},Mne={readContext:Zs,useCallback:MM,useContext:Zs,useEffect:mI,useImperativeHandle:LM,useInsertionEffect:OM,useLayoutEffect:RM,useMemo:FM,useReducer:fI,useRef:NM,useState:function(){return fI(_y)},useDebugValue:hI,useDeferredValue:function(u){var d=ta();return ri===null?d.memoizedState=u:UM(d,ri.memoizedState,u)},useTransition:function(){var u=fI(_y)[0],d=ta().memoizedState;return[u,d]},useMutableSource:TM,useSyncExternalStore:wM,useId:BM,unstable_isNewReconciler:!1};function Cm(u,d){try{var y="",b=d;do y+=kne(b),b=b.return;while(b);var x=y}catch(D){x=`
Error generating stack: `+D.message+`
`+D.stack}return{value:u,source:d,stack:x,digest:null}}function gI(u,d,y){return{value:u,source:null,stack:y??null,digest:d??null}}function yI(u,d){try{console.error(d.value)}catch(y){setTimeout(function(){throw y})}}var Fne=typeof WeakMap=="function"?WeakMap:Map;function $M(u,d,y){y=_u(-1,y),y.tag=3,y.payload={element:null};var b=d.value;return y.callback=function(){qb||(qb=!0,FI=b),yI(u,d)},y}function HM(u,d,y){y=_u(-1,y),y.tag=3;var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var x=d.value;y.payload=function(){return b(x)},y.callback=function(){yI(u,d)}}var D=u.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(y.callback=function(){yI(u,d),typeof b!="function"&&(Uc===null?Uc=new Set([this]):Uc.add(this));var B=d.stack;this.componentDidCatch(d.value,{componentStack:B!==null?B:""})}),y}function qM(u,d,y){var b=u.pingCache;if(b===null){b=u.pingCache=new Fne;var x=new Set;b.set(d,x)}else x=b.get(d),x===void 0&&(x=new Set,b.set(d,x));x.has(y)||(x.add(y),u=Jne.bind(null,u,d,y),d.then(u,u))}function GM(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function VM(u,d,y,b,x){return u.mode&1?(u.flags|=65536,u.lanes=x,u):(u===d?u.flags|=65536:(u.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(d=_u(-1,1),d.tag=2,Fc(y,d,1))),y.lanes|=1),u)}var Une=a.ReactCurrentOwner,Go=!1;function wo(u,d,y,b){d.child=u===null?bM(d,null,y,b):wm(d,u.child,y,b)}function KM(u,d,y,b,x){y=y.render;var D=d.ref;return Tm(d,x),b=cI(u,d,y,b,D,x),y=dI(),u!==null&&!Go?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~x,bu(u,d,x)):(Jr&&y&&qD(d),d.flags|=1,wo(u,d,b,x),d.child)}function YM(u,d,y,b,x){if(u===null){var D=y.type;return typeof D=="function"&&!$I(D)&&D.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(d.tag=15,d.type=D,XM(u,d,D,b,x)):(u=Jb(y.type,null,b,d,d.mode,x),u.ref=d.ref,u.return=d,d.child=u)}if(D=u.child,!(u.lanes&x)){var B=D.memoizedProps;if(y=y.compare,y=y!==null?y:_b,y(B,b)&&u.ref===d.ref)return bu(u,d,x)}return d.flags|=1,u=zc(D,b),u.ref=d.ref,u.return=d,d.child=u}function XM(u,d,y,b,x){if(u!==null){var D=u.memoizedProps;if(_b(D,b)&&u.ref===d.ref)if(Go=!1,d.pendingProps=b=D,(u.lanes&x)!==0)u.flags&131072&&(Go=!0);else return d.lanes=u.lanes,bu(u,d,x)}return vI(u,d,y,b,x)}function JM(u,d,y){var b=d.pendingProps,x=b.children,D=u!==null?u.memoizedState:null;if(b.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},mr(Im,ws),ws|=y;else{if(!(y&1073741824))return u=D!==null?D.baseLanes|y:y,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null,transitions:null},d.updateQueue=null,mr(Im,ws),ws|=u,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=D!==null?D.baseLanes:y,mr(Im,ws),ws|=b}else D!==null?(b=D.baseLanes|y,d.memoizedState=null):b=y,mr(Im,ws),ws|=b;return wo(u,d,x,y),d.child}function QM(u,d){var y=d.ref;(u===null&&y!==null||u!==null&&u.ref!==y)&&(d.flags|=512,d.flags|=2097152)}function vI(u,d,y,b,x){var D=qo(y)?Fp:Yi.current;return D=ym(d,D),Tm(d,x),y=cI(u,d,y,b,D,x),b=dI(),u!==null&&!Go?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~x,bu(u,d,x)):(Jr&&b&&qD(d),d.flags|=1,wo(u,d,y,x),d.child)}function ZM(u,d,y,b,x){if(qo(y)){var D=!0;cb(d)}else D=!1;if(Tm(d,x),d.stateNode===null)Rb(u,d),gM(d,y,b),nI(d,y,b,x),b=!0;else if(u===null){var B=d.stateNode,Z=d.memoizedProps;B.props=Z;var le=B.context,ke=y.contextType;typeof ke=="object"&&ke!==null?ke=Zs(ke):(ke=qo(y)?Fp:Yi.current,ke=ym(d,ke));var Qe=y.getDerivedStateFromProps,At=typeof Qe=="function"||typeof B.getSnapshotBeforeUpdate=="function";At||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Z!==b||le!==ke)&&yM(d,B,b,ke),Mc=!1;var $e=d.memoizedState;B.state=$e,wb(d,b,B,x),le=d.memoizedState,Z!==b||$e!==le||Ho.current||Mc?(typeof Qe=="function"&&(rI(d,y,Qe,b),le=d.memoizedState),(Z=Mc||hM(d,y,Z,b,$e,le,ke))?(At||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(d.flags|=4194308)):(typeof B.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=le),B.props=b,B.state=le,B.context=ke,b=Z):(typeof B.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{B=d.stateNode,dM(u,d),Z=d.memoizedProps,ke=d.type===d.elementType?Z:Ba(d.type,Z),B.props=ke,At=d.pendingProps,$e=B.context,le=y.contextType,typeof le=="object"&&le!==null?le=Zs(le):(le=qo(y)?Fp:Yi.current,le=ym(d,le));var Kr=y.getDerivedStateFromProps;(Qe=typeof Kr=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Z!==At||$e!==le)&&yM(d,B,b,le),Mc=!1,$e=d.memoizedState,B.state=$e,wb(d,b,B,x);var Or=d.memoizedState;Z!==At||$e!==Or||Ho.current||Mc?(typeof Kr=="function"&&(rI(d,y,Kr,b),Or=d.memoizedState),(ke=Mc||hM(d,y,ke,b,$e,Or,le)||!1)?(Qe||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(b,Or,le),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(b,Or,le)),typeof B.componentDidUpdate=="function"&&(d.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof B.componentDidUpdate!="function"||Z===u.memoizedProps&&$e===u.memoizedState||(d.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Z===u.memoizedProps&&$e===u.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=Or),B.props=b,B.state=Or,B.context=le,b=ke):(typeof B.componentDidUpdate!="function"||Z===u.memoizedProps&&$e===u.memoizedState||(d.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Z===u.memoizedProps&&$e===u.memoizedState||(d.flags|=1024),b=!1)}return _I(u,d,y,b,D,x)}function _I(u,d,y,b,x,D){QM(u,d);var B=(d.flags&128)!==0;if(!b&&!B)return x&&Z4(d,y,!1),bu(u,d,D);b=d.stateNode,Une.current=d;var Z=B&&typeof y.getDerivedStateFromError!="function"?null:b.render();return d.flags|=1,u!==null&&B?(d.child=wm(d,u.child,null,D),d.child=wm(d,null,Z,D)):wo(u,d,Z,D),d.memoizedState=b.state,x&&Z4(d,y,!0),d.child}function e8(u){var d=u.stateNode;d.pendingContext?J4(u,d.pendingContext,d.pendingContext!==d.context):d.context&&J4(u,d.context,!1),iI(u,d.containerInfo)}function t8(u,d,y,b,x){return bm(),YD(x),d.flags|=256,wo(u,d,y,b),d.child}var bI={dehydrated:null,treeContext:null,retryLane:0};function xI(u){return{baseLanes:u,cachePool:null,transitions:null}}function r8(u,d,y){var b=d.pendingProps,x=ln.current,D=!1,B=(d.flags&128)!==0,Z;if((Z=B)||(Z=u!==null&&u.memoizedState===null?!1:(x&2)!==0),Z?(D=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(x|=1),mr(ln,x&1),u===null)return KD(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(d.mode&1?Je(u)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(B=b.children,u=b.fallback,D?(b=d.mode,D=d.child,B={mode:"hidden",children:B},!(b&1)&&D!==null?(D.childLanes=0,D.pendingProps=B):D=Qb(B,b,0,null),u=Gp(u,b,y,null),D.return=d,u.return=d,D.sibling=u,d.child=D,d.child.memoizedState=xI(y),d.memoizedState=bI,u):TI(d,B));if(x=u.memoizedState,x!==null&&(Z=x.dehydrated,Z!==null))return Bne(u,d,B,b,Z,x,y);if(D){D=b.fallback,B=d.mode,x=u.child,Z=x.sibling;var le={mode:"hidden",children:b.children};return!(B&1)&&d.child!==x?(b=d.child,b.childLanes=0,b.pendingProps=le,d.deletions=null):(b=zc(x,le),b.subtreeFlags=x.subtreeFlags&14680064),Z!==null?D=zc(Z,D):(D=Gp(D,B,y,null),D.flags|=2),D.return=d,b.return=d,b.sibling=D,d.child=b,b=D,D=d.child,B=u.child.memoizedState,B=B===null?xI(y):{baseLanes:B.baseLanes|y,cachePool:null,transitions:B.transitions},D.memoizedState=B,D.childLanes=u.childLanes&~y,d.memoizedState=bI,b}return D=u.child,u=D.sibling,b=zc(D,{mode:"visible",children:b.children}),!(d.mode&1)&&(b.lanes=y),b.return=d,b.sibling=null,u!==null&&(y=d.deletions,y===null?(d.deletions=[u],d.flags|=16):y.push(u)),d.child=b,d.memoizedState=null,b}function TI(u,d){return d=Qb({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function Ob(u,d,y,b){return b!==null&&YD(b),wm(d,u.child,null,y),u=TI(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function Bne(u,d,y,b,x,D,B){if(y)return d.flags&256?(d.flags&=-257,b=gI(Error(s(422))),Ob(u,d,B,b)):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(D=b.fallback,x=d.mode,b=Qb({mode:"visible",children:b.children},x,0,null),D=Gp(D,x,B,null),D.flags|=2,b.return=d,D.return=d,b.sibling=D,d.child=b,d.mode&1&&wm(d,u.child,null,B),d.child.memoizedState=xI(B),d.memoizedState=bI,D);if(!(d.mode&1))return Ob(u,d,B,null);if(Je(x))return b=Ke(x).digest,D=Error(s(419)),b=gI(D,b,void 0),Ob(u,d,B,b);if(y=(B&u.childLanes)!==0,Go||y){if(b=fi,b!==null){switch(B&-B){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=x&(b.suspendedLanes|B)?0:x,x!==0&&x!==D.retryLane&&(D.retryLane=x,Tl(u,x),ra(b,u,x,-1))}return zI(),b=gI(Error(s(421))),Ob(u,d,B,b)}return he(x)?(d.flags|=128,d.child=u.child,d=Qne.bind(null,u),ht(x,d),null):(u=D.treeContext,Te&&(Qs=Nn(x),Ts=d,Jr=!0,Ua=null,fy=!1,u!==null&&(Xs[Js++]=yu,Xs[Js++]=vu,Xs[Js++]=Up,yu=u.id,vu=u.overflow,Up=d)),d=TI(d,b.children),d.flags|=4096,d)}function n8(u,d,y){u.lanes|=d;var b=u.alternate;b!==null&&(b.lanes|=d),ZD(u.return,d,y)}function wI(u,d,y,b,x){var D=u.memoizedState;D===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:y,tailMode:x}:(D.isBackwards=d,D.rendering=null,D.renderingStartTime=0,D.last=b,D.tail=y,D.tailMode=x)}function i8(u,d,y){var b=d.pendingProps,x=b.revealOrder,D=b.tail;if(wo(u,d,b.children,y),b=ln.current,b&2)b=b&1|2,d.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&n8(u,y,d);else if(u.tag===19)n8(u,y,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}b&=1}if(mr(ln,b),!(d.mode&1))d.memoizedState=null;else switch(x){case"forwards":for(y=d.child,x=null;y!==null;)u=y.alternate,u!==null&&Cb(u)===null&&(x=y),y=y.sibling;y=x,y===null?(x=d.child,d.child=null):(x=y.sibling,y.sibling=null),wI(d,!1,x,y,D);break;case"backwards":for(y=null,x=d.child,d.child=null;x!==null;){if(u=x.alternate,u!==null&&Cb(u)===null){d.child=x;break}u=x.sibling,x.sibling=y,y=x,x=u}wI(d,!0,y,null,D);break;case"together":wI(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Rb(u,d){!(d.mode&1)&&u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2)}function bu(u,d,y){if(u!==null&&(d.dependencies=u.dependencies),zp|=d.lanes,!(y&d.childLanes))return null;if(u!==null&&d.child!==u.child)throw Error(s(153));if(d.child!==null){for(u=d.child,y=zc(u,u.pendingProps),d.child=y,y.return=d;u.sibling!==null;)u=u.sibling,y=y.sibling=zc(u,u.pendingProps),y.return=d;y.sibling=null}return d.child}function Wne(u,d,y){switch(d.tag){case 3:e8(d),bm();break;case 5:xM(d);break;case 1:qo(d.type)&&cb(d);break;case 4:iI(d,d.stateNode.containerInfo);break;case 10:uM(d,d.type._context,d.memoizedProps.value);break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(mr(ln,ln.current&1),d.flags|=128,null):y&d.child.childLanes?r8(u,d,y):(mr(ln,ln.current&1),u=bu(u,d,y),u!==null?u.sibling:null);mr(ln,ln.current&1);break;case 19:if(b=(y&d.childLanes)!==0,u.flags&128){if(b)return i8(u,d,y);d.flags|=128}var x=d.memoizedState;if(x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),mr(ln,ln.current),b)break;return null;case 22:case 23:return d.lanes=0,JM(u,d,y)}return bu(u,d,y)}function El(u){u.flags|=4}function o8(u,d){if(u!==null&&u.child===d.child)return!0;if(d.flags&16)return!1;for(u=d.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var xy,Ty,Pb,Lb;if(Me)xy=function(u,d){for(var y=d.child;y!==null;){if(y.tag===5||y.tag===6)Ne(u,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},Ty=function(){},Pb=function(u,d,y,b,x){if(u=u.memoizedProps,u!==b){var D=d.stateNode,B=wl(ea.current);y=Se(D,y,u,b,x,B),(d.updateQueue=y)&&El(d)}},Lb=function(u,d,y,b){y!==b&&El(d)};else if(ue){xy=function(u,d,y,b){for(var x=d.child;x!==null;){if(x.tag===5){var D=x.stateNode;y&&b&&(D=ab(D,x.type,x.memoizedProps,x)),Ne(u,D)}else if(x.tag===6)D=x.stateNode,y&&b&&(D=lb(D,x.memoizedProps,x)),Ne(u,D);else if(x.tag!==4){if(x.tag===22&&x.memoizedState!==null)D=x.child,D!==null&&(D.return=x),xy(u,x,!0,!0);else if(x.child!==null){x.child.return=x,x=x.child;continue}}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}};var s8=function(u,d,y,b){for(var x=d.child;x!==null;){if(x.tag===5){var D=x.stateNode;y&&b&&(D=ab(D,x.type,x.memoizedProps,x)),yl(u,D)}else if(x.tag===6)D=x.stateNode,y&&b&&(D=lb(D,x.memoizedProps,x)),yl(u,D);else if(x.tag!==4){if(x.tag===22&&x.memoizedState!==null)D=x.child,D!==null&&(D.return=x),s8(u,x,!0,!0);else if(x.child!==null){x.child.return=x,x=x.child;continue}}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}};Ty=function(u,d){var y=d.stateNode;if(!o8(u,d)){u=y.containerInfo;var b=mu(u);s8(b,d,!1,!1),y.pendingChildren=b,El(d),vl(u,b)}},Pb=function(u,d,y,b,x){var D=u.stateNode,B=u.memoizedProps;if((u=o8(u,d))&&B===b)d.stateNode=D;else{var Z=d.stateNode,le=wl(ea.current),ke=null;B!==b&&(ke=Se(Z,y,B,b,x,le)),u&&ke===null?d.stateNode=D:(D=ti(D,ke,y,B,b,d,u,Z),ae(D,y,b,x,le)&&El(d),d.stateNode=D,u?El(d):xy(D,d,!1,!1))}},Lb=function(u,d,y,b){y!==b?(u=wl(Sm.current),y=wl(ea.current),d.stateNode=Pe(b,u,y,d),El(d)):d.stateNode=u.stateNode}}else Ty=function(){},Pb=function(){},Lb=function(){};function wy(u,d){if(!Jr)switch(u.tailMode){case"hidden":d=u.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var b=null;y!==null;)y.alternate!==null&&(b=y),y=y.sibling;b===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:b.sibling=null}}function Ji(u){var d=u.alternate!==null&&u.alternate.child===u.child,y=0,b=0;if(d)for(var x=u.child;x!==null;)y|=x.lanes|x.childLanes,b|=x.subtreeFlags&14680064,b|=x.flags&14680064,x.return=u,x=x.sibling;else for(x=u.child;x!==null;)y|=x.lanes|x.childLanes,b|=x.subtreeFlags,b|=x.flags,x.return=u,x=x.sibling;return u.subtreeFlags|=b,u.childLanes=y,d}function jne(u,d,y){var b=d.pendingProps;switch(GD(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ji(d),null;case 1:return qo(d.type)&&ub(),Ji(d),null;case 3:return y=d.stateNode,Em(),ar(Ho),ar(Yi),aI(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(u===null||u.child===null)&&(vb(d)?El(d):u===null||u.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,Ua!==null&&(WI(Ua),Ua=null))),Ty(u,d),Ji(d),null;case 5:oI(d),y=wl(Sm.current);var x=d.type;if(u!==null&&d.stateNode!=null)Pb(u,d,x,b,y),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!b){if(d.stateNode===null)throw Error(s(166));return Ji(d),null}if(u=wl(ea.current),vb(d)){if(!Te)throw Error(s(175));u=hu(d.stateNode,d.type,d.memoizedProps,y,u,d,!fy),d.updateQueue=u,u!==null&&El(d)}else{var D=ye(x,b,y,u,d);xy(D,d,!1,!1),d.stateNode=D,ae(D,x,b,y,u)&&El(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Ji(d),null;case 6:if(u&&d.stateNode!=null)Lb(u,d,u.memoizedProps,b);else{if(typeof b!="string"&&d.stateNode===null)throw Error(s(166));if(u=wl(Sm.current),y=wl(ea.current),vb(d)){if(!Te)throw Error(s(176));if(u=d.stateNode,y=d.memoizedProps,(b=Pc(u,y,d,!fy))&&(x=Ts,x!==null))switch(x.tag){case 3:FD(x.stateNode.containerInfo,u,y,(x.mode&1)!==0);break;case 5:Sr(x.type,x.memoizedProps,x.stateNode,u,y,(x.mode&1)!==0)}b&&El(d)}else d.stateNode=Pe(b,u,y,d)}return Ji(d),null;case 13:if(ar(ln),b=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(Jr&&Qs!==null&&d.mode&1&&!(d.flags&128))lM(),bm(),d.flags|=98560,x=!1;else if(x=vb(d),b!==null&&b.dehydrated!==null){if(u===null){if(!x)throw Error(s(318));if(!Te)throw Error(s(344));if(x=d.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(s(317));xs(x,d)}else bm(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;Ji(d),x=!1}else Ua!==null&&(WI(Ua),Ua=null),x=!0;if(!x)return d.flags&65536?d:null}return d.flags&128?(d.lanes=y,d):(y=b!==null,y!==(u!==null&&u.memoizedState!==null)&&y&&(d.child.flags|=8192,d.mode&1&&(u===null||ln.current&1?ni===0&&(ni=3):zI())),d.updateQueue!==null&&(d.flags|=4),Ji(d),null);case 4:return Em(),Ty(u,d),u===null&&xe(d.stateNode.containerInfo),Ji(d),null;case 10:return QD(d.type._context),Ji(d),null;case 17:return qo(d.type)&&ub(),Ji(d),null;case 19:if(ar(ln),x=d.memoizedState,x===null)return Ji(d),null;if(b=(d.flags&128)!==0,D=x.rendering,D===null)if(b)wy(x,!1);else{if(ni!==0||u!==null&&u.flags&128)for(u=d.child;u!==null;){if(D=Cb(u),D!==null){for(d.flags|=128,wy(x,!1),u=D.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),d.subtreeFlags=0,u=y,y=d.child;y!==null;)b=y,x=u,b.flags&=14680066,D=b.alternate,D===null?(b.childLanes=0,b.lanes=x,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=D.childLanes,b.lanes=D.lanes,b.child=D.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=D.memoizedProps,b.memoizedState=D.memoizedState,b.updateQueue=D.updateQueue,b.type=D.type,x=D.dependencies,b.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext}),y=y.sibling;return mr(ln,ln.current&1|2),d.child}u=u.sibling}x.tail!==null&&di()>MI&&(d.flags|=128,b=!0,wy(x,!1),d.lanes=4194304)}else{if(!b)if(u=Cb(D),u!==null){if(d.flags|=128,b=!0,u=u.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),wy(x,!0),x.tail===null&&x.tailMode==="hidden"&&!D.alternate&&!Jr)return Ji(d),null}else 2*di()-x.renderingStartTime>MI&&y!==1073741824&&(d.flags|=128,b=!0,wy(x,!1),d.lanes=4194304);x.isBackwards?(D.sibling=d.child,d.child=D):(u=x.last,u!==null?u.sibling=D:d.child=D,x.last=D)}return x.tail!==null?(d=x.tail,x.rendering=d,x.tail=d.sibling,x.renderingStartTime=di(),d.sibling=null,u=ln.current,mr(ln,b?u&1|2:u&1),d):(Ji(d),null);case 22:case 23:return jI(),y=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==y&&(d.flags|=8192),y&&d.mode&1?ws&1073741824&&(Ji(d),Me&&d.subtreeFlags&6&&(d.flags|=8192)):Ji(d),null;case 24:return null;case 25:return null}throw Error(s(156,d.tag))}function zne(u,d){switch(GD(d),d.tag){case 1:return qo(d.type)&&ub(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return Em(),ar(Ho),ar(Yi),aI(),u=d.flags,u&65536&&!(u&128)?(d.flags=u&-65537|128,d):null;case 5:return oI(d),null;case 13:if(ar(ln),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(s(340));bm()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return ar(ln),null;case 4:return Em(),null;case 10:return QD(d.type._context),null;case 22:case 23:return jI(),null;case 24:return null;default:return null}}var Mb=!1,Qi=!1,$ne=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Dm(u,d){var y=u.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(b){Qr(u,d,b)}else y.current=null}function SI(u,d,y){try{y()}catch(b){Qr(u,d,b)}}var a8=!1;function Hne(u,d){for(se(u.containerInfo),Ye=d;Ye!==null;)if(u=Ye,d=u.child,(u.subtreeFlags&1028)!==0&&d!==null)d.return=u,Ye=d;else for(;Ye!==null;){u=Ye;try{var y=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,x=y.memoizedState,D=u.stateNode,B=D.getSnapshotBeforeUpdate(u.elementType===u.type?b:Ba(u.type,b),x);D.__reactInternalSnapshotBeforeUpdate=B}break;case 3:Me&&Yt(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Z){Qr(u,u.return,Z)}if(d=u.sibling,d!==null){d.return=u.return,Ye=d;break}Ye=u.return}return y=a8,a8=!1,y}function Sy(u,d,y){var b=d.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var x=b=b.next;do{if((x.tag&u)===u){var D=x.destroy;x.destroy=void 0,D!==void 0&&SI(d,y,D)}x=x.next}while(x!==b)}}function Fb(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var y=d=d.next;do{if((y.tag&u)===u){var b=y.create;y.destroy=b()}y=y.next}while(y!==d)}}function EI(u){var d=u.ref;if(d!==null){var y=u.stateNode;switch(u.tag){case 5:u=re(y);break;default:u=y}typeof d=="function"?d(u):d.current=u}}function l8(u){var d=u.alternate;d!==null&&(u.alternate=null,l8(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&M(d)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function u8(u){return u.tag===5||u.tag===3||u.tag===4}function c8(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||u8(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function CI(u,d,y){var b=u.tag;if(b===5||b===6)u=u.stateNode,d?st(y,u,d):Ie(y,u);else if(b!==4&&(u=u.child,u!==null))for(CI(u,d,y),u=u.sibling;u!==null;)CI(u,d,y),u=u.sibling}function DI(u,d,y){var b=u.tag;if(b===5||b===6)u=u.stateNode,d?je(y,u,d):_e(y,u);else if(b!==4&&(u=u.child,u!==null))for(DI(u,d,y),u=u.sibling;u!==null;)DI(u,d,y),u=u.sibling}var Ai=null,Wa=!1;function Cl(u,d,y){for(y=y.child;y!==null;)II(u,d,y),y=y.sibling}function II(u,d,y){if(bl&&typeof bl.onCommitFiberUnmount=="function")try{bl.onCommitFiberUnmount(mb,y)}catch{}switch(y.tag){case 5:Qi||Dm(y,d);case 6:if(Me){var b=Ai,x=Wa;Ai=null,Cl(u,d,y),Ai=b,Wa=x,Ai!==null&&(Wa?Di(Ai,y.stateNode):wr(Ai,y.stateNode))}else Cl(u,d,y);break;case 18:Me&&Ai!==null&&(Wa?LD(Ai,y.stateNode):gm(Ai,y.stateNode));break;case 4:Me?(b=Ai,x=Wa,Ai=y.stateNode.containerInfo,Wa=!0,Cl(u,d,y),Ai=b,Wa=x):(ue&&(b=y.stateNode.containerInfo,x=mu(b),bs(b,x)),Cl(u,d,y));break;case 0:case 11:case 14:case 15:if(!Qi&&(b=y.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){x=b=b.next;do{var D=x,B=D.destroy;D=D.tag,B!==void 0&&(D&2||D&4)&&SI(y,d,B),x=x.next}while(x!==b)}Cl(u,d,y);break;case 1:if(!Qi&&(Dm(y,d),b=y.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=y.memoizedProps,b.state=y.memoizedState,b.componentWillUnmount()}catch(Z){Qr(y,d,Z)}Cl(u,d,y);break;case 21:Cl(u,d,y);break;case 22:y.mode&1?(Qi=(b=Qi)||y.memoizedState!==null,Cl(u,d,y),Qi=b):Cl(u,d,y);break;default:Cl(u,d,y)}}function d8(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var y=u.stateNode;y===null&&(y=u.stateNode=new $ne),d.forEach(function(b){var x=Zne.bind(null,u,b);y.has(b)||(y.add(b),b.then(x,x))})}}function ja(u,d){var y=d.deletions;if(y!==null)for(var b=0;b<y.length;b++){var x=y[b];try{var D=u,B=d;if(Me){var Z=B;e:for(;Z!==null;){switch(Z.tag){case 5:Ai=Z.stateNode,Wa=!1;break e;case 3:Ai=Z.stateNode.containerInfo,Wa=!0;break e;case 4:Ai=Z.stateNode.containerInfo,Wa=!0;break e}Z=Z.return}if(Ai===null)throw Error(s(160));II(D,B,x),Ai=null,Wa=!1}else II(D,B,x);var le=x.alternate;le!==null&&(le.return=null),x.return=null}catch(ke){Qr(x,d,ke)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)p8(d,u),d=d.sibling}function p8(u,d){var y=u.alternate,b=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(ja(d,u),Dl(u),b&4){try{Sy(3,u,u.return),Fb(3,u)}catch($e){Qr(u,u.return,$e)}try{Sy(5,u,u.return)}catch($e){Qr(u,u.return,$e)}}break;case 1:ja(d,u),Dl(u),b&512&&y!==null&&Dm(y,y.return);break;case 5:if(ja(d,u),Dl(u),b&512&&y!==null&&Dm(y,y.return),Me){if(u.flags&32){var x=u.stateNode;try{Pa(x)}catch($e){Qr(u,u.return,$e)}}if(b&4&&(x=u.stateNode,x!=null)){var D=u.memoizedProps;if(y=y!==null?y.memoizedProps:D,b=u.type,d=u.updateQueue,u.updateQueue=null,d!==null)try{L(x,d,b,y,D,u)}catch($e){Qr(u,u.return,$e)}}}break;case 6:if(ja(d,u),Dl(u),b&4&&Me){if(u.stateNode===null)throw Error(s(162));x=u.stateNode,D=u.memoizedProps,y=y!==null?y.memoizedProps:D;try{O(x,y,D)}catch($e){Qr(u,u.return,$e)}}break;case 3:if(ja(d,u),Dl(u),b&4){if(Me&&Te&&y!==null&&y.memoizedState.isDehydrated)try{ki(d.containerInfo)}catch($e){Qr(u,u.return,$e)}if(ue){x=d.containerInfo,D=d.pendingChildren;try{bs(x,D)}catch($e){Qr(u,u.return,$e)}}}break;case 4:if(ja(d,u),Dl(u),b&4&&ue){D=u.stateNode,x=D.containerInfo,D=D.pendingChildren;try{bs(x,D)}catch($e){Qr(u,u.return,$e)}}break;case 13:ja(d,u),Dl(u),x=u.child,x.flags&8192&&(D=x.memoizedState!==null,x.stateNode.isHidden=D,!D||x.alternate!==null&&x.alternate.memoizedState!==null||(LI=di())),b&4&&d8(u);break;case 22:var B=y!==null&&y.memoizedState!==null;if(u.mode&1?(Qi=(y=Qi)||B,ja(d,u),Qi=y):ja(d,u),Dl(u),b&8192){if(y=u.memoizedState!==null,(u.stateNode.isHidden=y)&&!B&&u.mode&1)for(Ye=u,b=u.child;b!==null;){for(d=Ye=b;Ye!==null;){B=Ye;var Z=B.child;switch(B.tag){case 0:case 11:case 14:case 15:Sy(4,B,B.return);break;case 1:Dm(B,B.return);var le=B.stateNode;if(typeof le.componentWillUnmount=="function"){var ke=B,Qe=B.return;try{var At=ke;le.props=At.memoizedProps,le.state=At.memoizedState,le.componentWillUnmount()}catch($e){Qr(ke,Qe,$e)}}break;case 5:Dm(B,B.return);break;case 22:if(B.memoizedState!==null){h8(d);continue}}Z!==null?(Z.return=B,Ye=Z):h8(d)}b=b.sibling}if(Me){e:if(b=null,Me)for(d=u;;){if(d.tag===5){if(b===null){b=d;try{x=d.stateNode,y?$o(x):Mp(d.stateNode,d.memoizedProps)}catch($e){Qr(u,u.return,$e)}}}else if(d.tag===6){if(b===null)try{D=d.stateNode,y?sb(D):fu(D,d.memoizedProps)}catch($e){Qr(u,u.return,$e)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===u)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break e;for(;d.sibling===null;){if(d.return===null||d.return===u)break e;b===d&&(b=null),d=d.return}b===d&&(b=null),d.sibling.return=d.return,d=d.sibling}}}break;case 19:ja(d,u),Dl(u),b&4&&d8(u);break;case 21:break;default:ja(d,u),Dl(u)}}function Dl(u){var d=u.flags;if(d&2){try{if(Me){e:{for(var y=u.return;y!==null;){if(u8(y)){var b=y;break e}y=y.return}throw Error(s(160))}switch(b.tag){case 5:var x=b.stateNode;b.flags&32&&(Pa(x),b.flags&=-33);var D=c8(u);DI(u,D,x);break;case 3:case 4:var B=b.stateNode.containerInfo,Z=c8(u);CI(u,Z,B);break;default:throw Error(s(161))}}}catch(le){Qr(u,u.return,le)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function qne(u,d,y){Ye=u,f8(u,d,y)}function f8(u,d,y){for(var b=(u.mode&1)!==0;Ye!==null;){var x=Ye,D=x.child;if(x.tag===22&&b){var B=x.memoizedState!==null||Mb;if(!B){var Z=x.alternate,le=Z!==null&&Z.memoizedState!==null||Qi;Z=Mb;var ke=Qi;if(Mb=B,(Qi=le)&&!ke)for(Ye=x;Ye!==null;)B=Ye,le=B.child,B.tag===22&&B.memoizedState!==null?g8(x):le!==null?(le.return=B,Ye=le):g8(x);for(;D!==null;)Ye=D,f8(D,d,y),D=D.sibling;Ye=x,Mb=Z,Qi=ke}m8(u,d,y)}else x.subtreeFlags&8772&&D!==null?(D.return=x,Ye=D):m8(u,d,y)}}function m8(u){for(;Ye!==null;){var d=Ye;if(d.flags&8772){var y=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:Qi||Fb(5,d);break;case 1:var b=d.stateNode;if(d.flags&4&&!Qi)if(y===null)b.componentDidMount();else{var x=d.elementType===d.type?y.memoizedProps:Ba(d.type,y.memoizedProps);b.componentDidUpdate(x,y.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var D=d.updateQueue;D!==null&&fM(d,D,b);break;case 3:var B=d.updateQueue;if(B!==null){if(y=null,d.child!==null)switch(d.child.tag){case 5:y=re(d.child.stateNode);break;case 1:y=d.child.stateNode}fM(d,B,y)}break;case 5:var Z=d.stateNode;y===null&&d.flags&4&&R(Z,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(Te&&d.memoizedState===null){var le=d.alternate;if(le!==null){var ke=le.memoizedState;if(ke!==null){var Qe=ke.dehydrated;Qe!==null&&Lc(Qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Qi||d.flags&512&&EI(d)}catch(At){Qr(d,d.return,At)}}if(d===u){Ye=null;break}if(y=d.sibling,y!==null){y.return=d.return,Ye=y;break}Ye=d.return}}function h8(u){for(;Ye!==null;){var d=Ye;if(d===u){Ye=null;break}var y=d.sibling;if(y!==null){y.return=d.return,Ye=y;break}Ye=d.return}}function g8(u){for(;Ye!==null;){var d=Ye;try{switch(d.tag){case 0:case 11:case 15:var y=d.return;try{Fb(4,d)}catch(le){Qr(d,y,le)}break;case 1:var b=d.stateNode;if(typeof b.componentDidMount=="function"){var x=d.return;try{b.componentDidMount()}catch(le){Qr(d,x,le)}}var D=d.return;try{EI(d)}catch(le){Qr(d,D,le)}break;case 5:var B=d.return;try{EI(d)}catch(le){Qr(d,B,le)}}}catch(le){Qr(d,d.return,le)}if(d===u){Ye=null;break}var Z=d.sibling;if(Z!==null){Z.return=d.return,Ye=Z;break}Ye=d.return}}var Ub=0,Bb=1,Wb=2,jb=3,zb=4;if(typeof Symbol=="function"&&Symbol.for){var Ey=Symbol.for;Ub=Ey("selector.component"),Bb=Ey("selector.has_pseudo_class"),Wb=Ey("selector.role"),jb=Ey("selector.test_id"),zb=Ey("selector.text")}function kI(u){var d=ce(u);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(s(364));return d}if(u=_t(u),u===null)throw Error(s(362));return u.stateNode.current}function NI(u,d){switch(d.$$typeof){case Ub:if(u.type===d.value)return!0;break;case Bb:e:{d=d.value,u=[u,0];for(var y=0;y<u.length;){var b=u[y++],x=u[y++],D=d[x];if(b.tag!==5||!fr(b)){for(;D!=null&&NI(b,D);)x++,D=d[x];if(x===d.length){d=!0;break e}else for(b=b.child;b!==null;)u.push(b,x),b=b.sibling}}d=!1}return d;case Wb:if(u.tag===5&&nt(u.stateNode,d.value))return!0;break;case zb:if((u.tag===5||u.tag===6)&&(u=Bt(u),u!==null&&0<=u.indexOf(d.value)))return!0;break;case jb:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function AI(u){switch(u.$$typeof){case Ub:return"<"+(k(u.value)||"Unknown")+">";case Bb:return":has("+(AI(u)||"")+")";case Wb:return'[role="'+u.value+'"]';case zb:return'"'+u.value+'"';case jb:return'[data-testname="'+u.value+'"]';default:throw Error(s(365))}}function y8(u,d){var y=[];u=[u,0];for(var b=0;b<u.length;){var x=u[b++],D=u[b++],B=d[D];if(x.tag!==5||!fr(x)){for(;B!=null&&NI(x,B);)D++,B=d[D];if(D===d.length)y.push(x);else for(x=x.child;x!==null;)u.push(x,D),x=x.sibling}}return y}function OI(u,d){if(!it)throw Error(s(363));u=kI(u),u=y8(u,d),d=[],u=Array.from(u);for(var y=0;y<u.length;){var b=u[y++];if(b.tag===5)fr(b)||d.push(b.stateNode);else for(b=b.child;b!==null;)u.push(b),b=b.sibling}return d}var Gne=Math.ceil,$b=a.ReactCurrentDispatcher,RI=a.ReactCurrentOwner,On=a.ReactCurrentBatchConfig,Vt=0,fi=null,Gn=null,Oi=0,ws=0,Im=Ni(0),ni=0,Cy=null,zp=0,Hb=0,PI=0,Dy=null,Vo=null,LI=0,MI=1/0,xu=null;function km(){MI=di()+500}var qb=!1,FI=null,Uc=null,Gb=!1,Bc=null,Vb=0,Iy=0,UI=null,Kb=-1,Yb=0;function Zi(){return Vt&6?di():Kb!==-1?Kb:Kb=di()}function Wc(u){return u.mode&1?Vt&2&&Oi!==0?Oi&-Oi:Ine.transition!==null?(Yb===0&&(Yb=eM()),Yb):(u=cr,u!==0?u:Ae()):1}function ra(u,d,y,b){if(50<Iy)throw Iy=0,UI=null,Error(s(185));py(u,y,b),(!(Vt&2)||u!==fi)&&(u===fi&&(!(Vt&2)&&(Hb|=y),ni===4&&jc(u,Oi)),Ko(u,b),y===1&&Vt===0&&!(d.mode&1)&&(km(),hb&&xl()))}function Ko(u,d){var y=u.callbackNode;_ne(u,d);var b=fb(u,u===fi?Oi:0);if(b===0)y!==null&&rM(y),u.callbackNode=null,u.callbackPriority=0;else if(d=b&-b,u.callbackPriority!==d){if(y!=null&&rM(y),d===1)u.tag===0?Dne(_8.bind(null,u)):nM(_8.bind(null,u)),Ve?De(function(){!(Vt&6)&&xl()}):jD(zD,xl),y=null;else{switch(tM(b)){case 1:y=zD;break;case 4:y=wne;break;case 16:y=$D;break;case 536870912:y=Sne;break;default:y=$D}y=I8(y,v8.bind(null,u))}u.callbackPriority=d,u.callbackNode=y}}function v8(u,d){if(Kb=-1,Yb=0,Vt&6)throw Error(s(327));var y=u.callbackNode;if(qp()&&u.callbackNode!==y)return null;var b=fb(u,u===fi?Oi:0);if(b===0)return null;if(b&30||b&u.expiredLanes||d)d=Xb(u,b);else{d=b;var x=Vt;Vt|=2;var D=T8();(fi!==u||Oi!==d)&&(xu=null,km(),$p(u,d));do try{Yne();break}catch(Z){x8(u,Z)}while(!0);JD(),$b.current=D,Vt=x,Gn!==null?d=0:(fi=null,Oi=0,d=ni)}if(d!==0){if(d===2&&(x=UD(u),x!==0&&(b=x,d=BI(u,x))),d===1)throw y=Cy,$p(u,0),jc(u,b),Ko(u,di()),y;if(d===6)jc(u,b);else{if(x=u.current.alternate,!(b&30)&&!Vne(x)&&(d=Xb(u,b),d===2&&(D=UD(u),D!==0&&(b=D,d=BI(u,D))),d===1))throw y=Cy,$p(u,0),jc(u,b),Ko(u,di()),y;switch(u.finishedWork=x,u.finishedLanes=b,d){case 0:case 1:throw Error(s(345));case 2:Hp(u,Vo,xu);break;case 3:if(jc(u,b),(b&130023424)===b&&(d=LI+500-di(),10<d)){if(fb(u,0)!==0)break;if(x=u.suspendedLanes,(x&b)!==b){Zi(),u.pingedLanes|=u.suspendedLanes&x;break}u.timeoutHandle=Oe(Hp.bind(null,u,Vo,xu),d);break}Hp(u,Vo,xu);break;case 4:if(jc(u,b),(b&4194240)===b)break;for(d=u.eventTimes,x=-1;0<b;){var B=31-Ma(b);D=1<<B,B=d[B],B>x&&(x=B),b&=~D}if(b=x,b=di()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*Gne(b/1960))-b,10<b){u.timeoutHandle=Oe(Hp.bind(null,u,Vo,xu),b);break}Hp(u,Vo,xu);break;case 5:Hp(u,Vo,xu);break;default:throw Error(s(329))}}}return Ko(u,di()),u.callbackNode===y?v8.bind(null,u):null}function BI(u,d){var y=Dy;return u.current.memoizedState.isDehydrated&&($p(u,d).flags|=256),u=Xb(u,d),u!==2&&(d=Vo,Vo=y,d!==null&&WI(d)),u}function WI(u){Vo===null?Vo=u:Vo.push.apply(Vo,u)}function Vne(u){for(var d=u;;){if(d.flags&16384){var y=d.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var b=0;b<y.length;b++){var x=y[b],D=x.getSnapshot;x=x.value;try{if(!Fa(D(),x))return!1}catch{return!1}}}if(y=d.child,d.subtreeFlags&16384&&y!==null)y.return=d,d=y;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function jc(u,d){for(d&=~PI,d&=~Hb,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var y=31-Ma(d),b=1<<y;u[y]=-1,d&=~b}}function _8(u){if(Vt&6)throw Error(s(327));qp();var d=fb(u,0);if(!(d&1))return Ko(u,di()),null;var y=Xb(u,d);if(u.tag!==0&&y===2){var b=UD(u);b!==0&&(d=b,y=BI(u,b))}if(y===1)throw y=Cy,$p(u,0),jc(u,d),Ko(u,di()),y;if(y===6)throw Error(s(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,Hp(u,Vo,xu),Ko(u,di()),null}function b8(u){Bc!==null&&Bc.tag===0&&!(Vt&6)&&qp();var d=Vt;Vt|=1;var y=On.transition,b=cr;try{if(On.transition=null,cr=1,u)return u()}finally{cr=b,On.transition=y,Vt=d,!(Vt&6)&&xl()}}function jI(){ws=Im.current,ar(Im)}function $p(u,d){u.finishedWork=null,u.finishedLanes=0;var y=u.timeoutHandle;if(y!==mt&&(u.timeoutHandle=mt,ct(y)),Gn!==null)for(y=Gn.return;y!==null;){var b=y;switch(GD(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&ub();break;case 3:Em(),ar(Ho),ar(Yi),aI();break;case 5:oI(b);break;case 4:Em();break;case 13:ar(ln);break;case 19:ar(ln);break;case 10:QD(b.type._context);break;case 22:case 23:jI()}y=y.return}if(fi=u,Gn=u=zc(u.current,null),Oi=ws=d,ni=0,Cy=null,PI=Hb=zp=0,Vo=Dy=null,Wp!==null){for(d=0;d<Wp.length;d++)if(y=Wp[d],b=y.interleaved,b!==null){y.interleaved=null;var x=b.next,D=y.pending;if(D!==null){var B=D.next;D.next=x,b.next=B}y.pending=b}Wp=null}return u}function x8(u,d){do{var y=Gn;try{if(JD(),Db.current=Ab,Ib){for(var b=un.memoizedState;b!==null;){var x=b.queue;x!==null&&(x.pending=null),b=b.next}Ib=!1}if(jp=0,pi=ri=un=null,yy=!1,vy=0,RI.current=null,y===null||y.return===null){ni=1,Cy=d,Gn=null;break}e:{var D=u,B=y.return,Z=y,le=d;if(d=Oi,Z.flags|=32768,le!==null&&typeof le=="object"&&typeof le.then=="function"){var ke=le,Qe=Z,At=Qe.tag;if(!(Qe.mode&1)&&(At===0||At===11||At===15)){var $e=Qe.alternate;$e?(Qe.updateQueue=$e.updateQueue,Qe.memoizedState=$e.memoizedState,Qe.lanes=$e.lanes):(Qe.updateQueue=null,Qe.memoizedState=null)}var Kr=GM(B);if(Kr!==null){Kr.flags&=-257,VM(Kr,B,Z,D,d),Kr.mode&1&&qM(D,ke,d),d=Kr,le=ke;var Or=d.updateQueue;if(Or===null){var Yo=new Set;Yo.add(le),d.updateQueue=Yo}else Or.add(le);break e}else{if(!(d&1)){qM(D,ke,d),zI();break e}le=Error(s(426))}}else if(Jr&&Z.mode&1){var Tu=GM(B);if(Tu!==null){!(Tu.flags&65536)&&(Tu.flags|=256),VM(Tu,B,Z,D,d),YD(Cm(le,Z));break e}}D=le=Cm(le,Z),ni!==4&&(ni=2),Dy===null?Dy=[D]:Dy.push(D),D=B;do{switch(D.tag){case 3:D.flags|=65536,d&=-d,D.lanes|=d;var oe=$M(D,le,d);pM(D,oe);break e;case 1:Z=le;var ee=D.type,me=D.stateNode;if(!(D.flags&128)&&(typeof ee.getDerivedStateFromError=="function"||me!==null&&typeof me.componentDidCatch=="function"&&(Uc===null||!Uc.has(me)))){D.flags|=65536,d&=-d,D.lanes|=d;var qe=HM(D,Z,d);pM(D,qe);break e}}D=D.return}while(D!==null)}S8(y)}catch(pt){d=pt,Gn===y&&y!==null&&(Gn=y=y.return);continue}break}while(!0)}function T8(){var u=$b.current;return $b.current=Ab,u===null?Ab:u}function zI(){(ni===0||ni===3||ni===2)&&(ni=4),fi===null||!(zp&268435455)&&!(Hb&268435455)||jc(fi,Oi)}function Xb(u,d){var y=Vt;Vt|=2;var b=T8();(fi!==u||Oi!==d)&&(xu=null,$p(u,d));do try{Kne();break}catch(x){x8(u,x)}while(!0);if(JD(),Vt=y,$b.current=b,Gn!==null)throw Error(s(261));return fi=null,Oi=0,ni}function Kne(){for(;Gn!==null;)w8(Gn)}function Yne(){for(;Gn!==null&&!xne();)w8(Gn)}function w8(u){var d=D8(u.alternate,u,ws);u.memoizedProps=u.pendingProps,d===null?S8(u):Gn=d,RI.current=null}function S8(u){var d=u;do{var y=d.alternate;if(u=d.return,d.flags&32768){if(y=zne(y,d),y!==null){y.flags&=32767,Gn=y;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{ni=6,Gn=null;return}}else if(y=jne(y,d,ws),y!==null){Gn=y;return}if(d=d.sibling,d!==null){Gn=d;return}Gn=d=u}while(d!==null);ni===0&&(ni=5)}function Hp(u,d,y){var b=cr,x=On.transition;try{On.transition=null,cr=1,Xne(u,d,y,b)}finally{On.transition=x,cr=b}return null}function Xne(u,d,y,b){do qp();while(Bc!==null);if(Vt&6)throw Error(s(327));y=u.finishedWork;var x=u.finishedLanes;if(y===null)return null;if(u.finishedWork=null,u.finishedLanes=0,y===u.current)throw Error(s(177));u.callbackNode=null,u.callbackPriority=0;var D=y.lanes|y.childLanes;if(bne(u,D),u===fi&&(Gn=fi=null,Oi=0),!(y.subtreeFlags&2064)&&!(y.flags&2064)||Gb||(Gb=!0,I8($D,function(){return qp(),null})),D=(y.flags&15990)!==0,y.subtreeFlags&15990||D){D=On.transition,On.transition=null;var B=cr;cr=1;var Z=Vt;Vt|=4,RI.current=null,Hne(u,y),p8(y,u),J(u.containerInfo),u.current=y,qne(y,u,x),Tne(),Vt=Z,cr=B,On.transition=D}else u.current=y;if(Gb&&(Gb=!1,Bc=u,Vb=x),D=u.pendingLanes,D===0&&(Uc=null),Ene(y.stateNode,b),Ko(u,di()),d!==null)for(b=u.onRecoverableError,y=0;y<d.length;y++)x=d[y],b(x.value,{componentStack:x.stack,digest:x.digest});if(qb)throw qb=!1,u=FI,FI=null,u;return Vb&1&&u.tag!==0&&qp(),D=u.pendingLanes,D&1?u===UI?Iy++:(Iy=0,UI=u):Iy=0,xl(),null}function qp(){if(Bc!==null){var u=tM(Vb),d=On.transition,y=cr;try{if(On.transition=null,cr=16>u?16:u,Bc===null)var b=!1;else{if(u=Bc,Bc=null,Vb=0,Vt&6)throw Error(s(331));var x=Vt;for(Vt|=4,Ye=u.current;Ye!==null;){var D=Ye,B=D.child;if(Ye.flags&16){var Z=D.deletions;if(Z!==null){for(var le=0;le<Z.length;le++){var ke=Z[le];for(Ye=ke;Ye!==null;){var Qe=Ye;switch(Qe.tag){case 0:case 11:case 15:Sy(8,Qe,D)}var At=Qe.child;if(At!==null)At.return=Qe,Ye=At;else for(;Ye!==null;){Qe=Ye;var $e=Qe.sibling,Kr=Qe.return;if(l8(Qe),Qe===ke){Ye=null;break}if($e!==null){$e.return=Kr,Ye=$e;break}Ye=Kr}}}var Or=D.alternate;if(Or!==null){var Yo=Or.child;if(Yo!==null){Or.child=null;do{var Tu=Yo.sibling;Yo.sibling=null,Yo=Tu}while(Yo!==null)}}Ye=D}}if(D.subtreeFlags&2064&&B!==null)B.return=D,Ye=B;else e:for(;Ye!==null;){if(D=Ye,D.flags&2048)switch(D.tag){case 0:case 11:case 15:Sy(9,D,D.return)}var oe=D.sibling;if(oe!==null){oe.return=D.return,Ye=oe;break e}Ye=D.return}}var ee=u.current;for(Ye=ee;Ye!==null;){B=Ye;var me=B.child;if(B.subtreeFlags&2064&&me!==null)me.return=B,Ye=me;else e:for(B=ee;Ye!==null;){if(Z=Ye,Z.flags&2048)try{switch(Z.tag){case 0:case 11:case 15:Fb(9,Z)}}catch(pt){Qr(Z,Z.return,pt)}if(Z===B){Ye=null;break e}var qe=Z.sibling;if(qe!==null){qe.return=Z.return,Ye=qe;break e}Ye=Z.return}}if(Vt=x,xl(),bl&&typeof bl.onPostCommitFiberRoot=="function")try{bl.onPostCommitFiberRoot(mb,u)}catch{}b=!0}return b}finally{cr=y,On.transition=d}}return!1}function E8(u,d,y){d=Cm(y,d),d=$M(u,d,1),u=Fc(u,d,1),d=Zi(),u!==null&&(py(u,1,d),Ko(u,d))}function Qr(u,d,y){if(u.tag===3)E8(u,u,y);else for(;d!==null;){if(d.tag===3){E8(d,u,y);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Uc===null||!Uc.has(b))){u=Cm(y,u),u=HM(d,u,1),d=Fc(d,u,1),u=Zi(),d!==null&&(py(d,1,u),Ko(d,u));break}}d=d.return}}function Jne(u,d,y){var b=u.pingCache;b!==null&&b.delete(d),d=Zi(),u.pingedLanes|=u.suspendedLanes&y,fi===u&&(Oi&y)===y&&(ni===4||ni===3&&(Oi&130023424)===Oi&&500>di()-LI?$p(u,0):PI|=y),Ko(u,d)}function C8(u,d){d===0&&(u.mode&1?(d=pb,pb<<=1,!(pb&130023424)&&(pb=4194304)):d=1);var y=Zi();u=Tl(u,d),u!==null&&(py(u,d,y),Ko(u,y))}function Qne(u){var d=u.memoizedState,y=0;d!==null&&(y=d.retryLane),C8(u,y)}function Zne(u,d){var y=0;switch(u.tag){case 13:var b=u.stateNode,x=u.memoizedState;x!==null&&(y=x.retryLane);break;case 19:b=u.stateNode;break;default:throw Error(s(314))}b!==null&&b.delete(d),C8(u,y)}var D8;D8=function(u,d,y){if(u!==null)if(u.memoizedProps!==d.pendingProps||Ho.current)Go=!0;else{if(!(u.lanes&y)&&!(d.flags&128))return Go=!1,Wne(u,d,y);Go=!!(u.flags&131072)}else Go=!1,Jr&&d.flags&1048576&&iM(d,yb,d.index);switch(d.lanes=0,d.tag){case 2:var b=d.type;Rb(u,d),u=d.pendingProps;var x=ym(d,Yi.current);Tm(d,y),x=cI(null,d,b,u,x,y);var D=dI();return d.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,qo(b)?(D=!0,cb(d)):D=!1,d.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,tI(d),x.updater=Sb,d.stateNode=x,x._reactInternals=d,nI(d,b,u,y),d=_I(null,d,b,!0,D,y)):(d.tag=0,Jr&&D&&qD(d),wo(null,d,x,y),d=d.child),d;case 16:b=d.elementType;e:{switch(Rb(u,d),u=d.pendingProps,x=b._init,b=x(b._payload),d.type=b,x=d.tag=tie(b),u=Ba(b,u),x){case 0:d=vI(null,d,b,u,y);break e;case 1:d=ZM(null,d,b,u,y);break e;case 11:d=KM(null,d,b,u,y);break e;case 14:d=YM(null,d,b,Ba(b.type,u),y);break e}throw Error(s(306,b,""))}return d;case 0:return b=d.type,x=d.pendingProps,x=d.elementType===b?x:Ba(b,x),vI(u,d,b,x,y);case 1:return b=d.type,x=d.pendingProps,x=d.elementType===b?x:Ba(b,x),ZM(u,d,b,x,y);case 3:e:{if(e8(d),u===null)throw Error(s(387));b=d.pendingProps,D=d.memoizedState,x=D.element,dM(u,d),wb(d,b,null,y);var B=d.memoizedState;if(b=B.element,Te&&D.isDehydrated)if(D={element:b,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},d.updateQueue.baseState=D,d.memoizedState=D,d.flags&256){x=Cm(Error(s(423)),d),d=t8(u,d,b,y,x);break e}else if(b!==x){x=Cm(Error(s(424)),d),d=t8(u,d,b,y,x);break e}else for(Te&&(Qs=Ii(d.stateNode.containerInfo),Ts=d,Jr=!0,Ua=null,fy=!1),y=bM(d,null,b,y),d.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(bm(),b===x){d=bu(u,d,y);break e}wo(u,d,b,y)}d=d.child}return d;case 5:return xM(d),u===null&&KD(d),b=d.type,x=d.pendingProps,D=u!==null?u.memoizedProps:null,B=x.children,Re(b,x)?B=null:D!==null&&Re(b,D)&&(d.flags|=32),QM(u,d),wo(u,d,B,y),d.child;case 6:return u===null&&KD(d),null;case 13:return r8(u,d,y);case 4:return iI(d,d.stateNode.containerInfo),b=d.pendingProps,u===null?d.child=wm(d,null,b,y):wo(u,d,b,y),d.child;case 11:return b=d.type,x=d.pendingProps,x=d.elementType===b?x:Ba(b,x),KM(u,d,b,x,y);case 7:return wo(u,d,d.pendingProps,y),d.child;case 8:return wo(u,d,d.pendingProps.children,y),d.child;case 12:return wo(u,d,d.pendingProps.children,y),d.child;case 10:e:{if(b=d.type._context,x=d.pendingProps,D=d.memoizedProps,B=x.value,uM(d,b,B),D!==null)if(Fa(D.value,B)){if(D.children===x.children&&!Ho.current){d=bu(u,d,y);break e}}else for(D=d.child,D!==null&&(D.return=d);D!==null;){var Z=D.dependencies;if(Z!==null){B=D.child;for(var le=Z.firstContext;le!==null;){if(le.context===b){if(D.tag===1){le=_u(-1,y&-y),le.tag=2;var ke=D.updateQueue;if(ke!==null){ke=ke.shared;var Qe=ke.pending;Qe===null?le.next=le:(le.next=Qe.next,Qe.next=le),ke.pending=le}}D.lanes|=y,le=D.alternate,le!==null&&(le.lanes|=y),ZD(D.return,y,d),Z.lanes|=y;break}le=le.next}}else if(D.tag===10)B=D.type===d.type?null:D.child;else if(D.tag===18){if(B=D.return,B===null)throw Error(s(341));B.lanes|=y,Z=B.alternate,Z!==null&&(Z.lanes|=y),ZD(B,y,d),B=D.sibling}else B=D.child;if(B!==null)B.return=D;else for(B=D;B!==null;){if(B===d){B=null;break}if(D=B.sibling,D!==null){D.return=B.return,B=D;break}B=B.return}D=B}wo(u,d,x.children,y),d=d.child}return d;case 9:return x=d.type,b=d.pendingProps.children,Tm(d,y),x=Zs(x),b=b(x),d.flags|=1,wo(u,d,b,y),d.child;case 14:return b=d.type,x=Ba(b,d.pendingProps),x=Ba(b.type,x),YM(u,d,b,x,y);case 15:return XM(u,d,d.type,d.pendingProps,y);case 17:return b=d.type,x=d.pendingProps,x=d.elementType===b?x:Ba(b,x),Rb(u,d),d.tag=1,qo(b)?(u=!0,cb(d)):u=!1,Tm(d,y),gM(d,b,x),nI(d,b,x,y),_I(null,d,b,!0,u,y);case 19:return i8(u,d,y);case 22:return JM(u,d,y)}throw Error(s(156,d.tag))};function I8(u,d){return jD(u,d)}function eie(u,d,y,b){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function na(u,d,y,b){return new eie(u,d,y,b)}function $I(u){return u=u.prototype,!(!u||!u.isReactComponent)}function tie(u){if(typeof u=="function")return $I(u)?1:0;if(u!=null){if(u=u.$$typeof,u===_)return 11;if(u===w)return 14}return 2}function zc(u,d){var y=u.alternate;return y===null?(y=na(u.tag,d,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=d,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&14680064,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,d=u.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y}function Jb(u,d,y,b,x,D){var B=2;if(b=u,typeof u=="function")$I(u)&&(B=1);else if(typeof u=="string")B=5;else e:switch(u){case p:return Gp(y.children,x,D,d);case f:B=8,x|=8;break;case m:return u=na(12,y,d,x|2),u.elementType=m,u.lanes=D,u;case S:return u=na(13,y,d,x),u.elementType=S,u.lanes=D,u;case T:return u=na(19,y,d,x),u.elementType=T,u.lanes=D,u;case I:return Qb(y,x,D,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case g:B=10;break e;case v:B=9;break e;case _:B=11;break e;case w:B=14;break e;case E:B=16,b=null;break e}throw Error(s(130,u==null?u:typeof u,""))}return d=na(B,y,d,x),d.elementType=u,d.type=b,d.lanes=D,d}function Gp(u,d,y,b){return u=na(7,u,b,d),u.lanes=y,u}function Qb(u,d,y,b){return u=na(22,u,b,d),u.elementType=I,u.lanes=y,u.stateNode={isHidden:!1},u}function HI(u,d,y){return u=na(6,u,null,d),u.lanes=y,u}function qI(u,d,y){return d=na(4,u.children!==null?u.children:[],u.key,d),d.lanes=y,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function rie(u,d,y,b,x){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=mt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=BD(0),this.expirationTimes=BD(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=BD(0),this.identifierPrefix=b,this.onRecoverableError=x,Te&&(this.mutableSourceEagerHydrationData=null)}function k8(u,d,y,b,x,D,B,Z,le){return u=new rie(u,d,y,Z,le),d===1?(d=1,D===!0&&(d|=8)):d=0,D=na(3,null,null,d),u.current=D,D.stateNode=u,D.memoizedState={element:b,isDehydrated:y,cache:null,transitions:null,pendingSuspenseBoundaries:null},tI(D),u}function N8(u){if(!u)return _l;u=u._reactInternals;e:{if($(u)!==u||u.tag!==1)throw Error(s(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(qo(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(s(171))}if(u.tag===1){var y=u.type;if(qo(y))return Q4(u,y,d)}return d}function A8(u){var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(s(188)):(u=Object.keys(u).join(","),Error(s(268,u)));return u=X(d),u===null?null:u.stateNode}function O8(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<d?y:d}}function Zb(u,d){O8(u,d),(u=u.alternate)&&O8(u,d)}function nie(u){return u=X(u),u===null?null:u.stateNode}function iie(){return null}return r.attemptContinuousHydration=function(u){if(u.tag===13){var d=Tl(u,134217728);if(d!==null){var y=Zi();ra(d,u,134217728,y)}Zb(u,134217728)}},r.attemptDiscreteHydration=function(u){if(u.tag===13){var d=Tl(u,1);if(d!==null){var y=Zi();ra(d,u,1,y)}Zb(u,1)}},r.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var d=Wc(u),y=Tl(u,d);if(y!==null){var b=Zi();ra(y,u,d,b)}Zb(u,d)}},r.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var y=dy(d.pendingLanes);y!==0&&(WD(d,y|1),Ko(d,di()),!(Vt&6)&&(km(),xl()))}break;case 13:b8(function(){var b=Tl(u,1);if(b!==null){var x=Zi();ra(b,u,1,x)}}),Zb(u,1)}},r.batchedUpdates=function(u,d){var y=Vt;Vt|=1;try{return u(d)}finally{Vt=y,Vt===0&&(km(),hb&&xl())}},r.createComponentSelector=function(u){return{$$typeof:Ub,value:u}},r.createContainer=function(u,d,y,b,x,D,B){return k8(u,d,!1,null,y,b,x,D,B)},r.createHasPseudoClassSelector=function(u){return{$$typeof:Bb,value:u}},r.createHydrationContainer=function(u,d,y,b,x,D,B,Z,le){return u=k8(y,b,!0,u,x,D,B,Z,le),u.context=N8(null),y=u.current,b=Zi(),x=Wc(y),D=_u(b,x),D.callback=d??null,Fc(y,D,x),u.current.lanes=x,py(u,x,b),Ko(u,b),u},r.createPortal=function(u,d,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:b==null?null:""+b,children:u,containerInfo:d,implementation:y}},r.createRoleSelector=function(u){return{$$typeof:Wb,value:u}},r.createTestNameSelector=function(u){return{$$typeof:jb,value:u}},r.createTextSelector=function(u){return{$$typeof:zb,value:u}},r.deferredUpdates=function(u){var d=cr,y=On.transition;try{return On.transition=null,cr=16,u()}finally{cr=d,On.transition=y}},r.discreteUpdates=function(u,d,y,b,x){var D=cr,B=On.transition;try{return On.transition=null,cr=1,u(d,y,b,x)}finally{cr=D,On.transition=B,Vt===0&&km()}},r.findAllNodes=OI,r.findBoundingRects=function(u,d){if(!it)throw Error(s(363));d=OI(u,d),u=[];for(var y=0;y<d.length;y++)u.push(xt(d[y]));for(d=u.length-1;0<d;d--){y=u[d];for(var b=y.x,x=b+y.width,D=y.y,B=D+y.height,Z=d-1;0<=Z;Z--)if(d!==Z){var le=u[Z],ke=le.x,Qe=ke+le.width,At=le.y,$e=At+le.height;if(b>=ke&&D>=At&&x<=Qe&&B<=$e){u.splice(d,1);break}else if(b!==ke||y.width!==le.width||$e<D||At>B){if(!(D!==At||y.height!==le.height||Qe<b||ke>x)){ke>b&&(le.width+=ke-b,le.x=b),Qe<x&&(le.width=x-ke),u.splice(d,1);break}}else{At>D&&(le.height+=At-D,le.y=D),$e<B&&(le.height=B-At),u.splice(d,1);break}}}return u},r.findHostInstance=A8,r.findHostInstanceWithNoPortals=function(u){return u=K(u),u=u!==null?ne(u):null,u===null?null:u.stateNode},r.findHostInstanceWithWarning=function(u){return A8(u)},r.flushControlled=function(u){var d=Vt;Vt|=1;var y=On.transition,b=cr;try{On.transition=null,cr=1,u()}finally{cr=b,On.transition=y,Vt=d,Vt===0&&(km(),xl())}},r.flushPassiveEffects=qp,r.flushSync=b8,r.focusWithin=function(u,d){if(!it)throw Error(s(363));for(u=kI(u),d=y8(u,d),d=Array.from(d),u=0;u<d.length;){var y=d[u++];if(!fr(y)){if(y.tag===5&&rt(y.stateNode))return!0;for(y=y.child;y!==null;)d.push(y),y=y.sibling}}return!1},r.getCurrentUpdatePriority=function(){return cr},r.getFindAllNodesFailureDescription=function(u,d){if(!it)throw Error(s(363));var y=0,b=[];u=[kI(u),0];for(var x=0;x<u.length;){var D=u[x++],B=u[x++],Z=d[B];if((D.tag!==5||!fr(D))&&(NI(D,Z)&&(b.push(AI(Z)),B++,B>y&&(y=B)),B<d.length))for(D=D.child;D!==null;)u.push(D,B),D=D.sibling}if(y<d.length){for(u=[];y<d.length;y++)u.push(AI(d[y]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},r.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return re(u.child.stateNode);default:return u.child.stateNode}},r.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:nie,findFiberByHostInstance:u.findFiberByHostInstance||iie,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)u=!0;else{try{mb=d.inject(u),bl=d}catch{}u=!!d.checkDCE}}return u},r.isAlreadyRendering=function(){return!1},r.observeVisibleRects=function(u,d,y,b){if(!it)throw Error(s(363));u=OI(u,d);var x=we(u,y,b).disconnect;return{disconnect:function(){x()}}},r.registerMutableSourceForHydration=function(u,d){var y=d._getVersion;y=y(d._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[d,y]:u.mutableSourceEagerHydrationData.push(d,y)},r.runWithPriority=function(u,d){var y=cr;try{return cr=u,d()}finally{cr=y}},r.shouldError=function(){return null},r.shouldSuspend=function(){return!1},r.updateContainer=function(u,d,y,b){var x=d.current,D=Zi(),B=Wc(x);return y=N8(y),d.context===null?d.context=y:d.pendingContext=y,d=_u(D,B),d.payload={element:u},b=b===void 0?null:b,b!==null&&(d.callback=b),u=Fc(x,d,B),u!==null&&(ra(u,x,B,D),Tb(u,x,B)),B},r}});var XK=Y((Dct,YK)=>{"use strict";YK.exports=KK()});var JK=Y(Ff=>{"use strict";Ff.ConcurrentRoot=1;Ff.ContinuousEventPriority=4;Ff.DefaultEventPriority=16;Ff.DiscreteEventPriority=1;Ff.IdleEventPriority=536870912;Ff.LegacyRoot=0});var Q3=Y((kct,QK)=>{"use strict";QK.exports=JK()});var pL=Y((cL,dL)=>{(function(t,e){typeof cL=="object"&&typeof dL<"u"?dL.exports=e():typeof define=="function"&&define.amd?define(e):t.JSON5=e()})(cL,function(){"use strict";function t(Q,he){return he={exports:{}},Q(he,he.exports),he.exports}var e=t(function(Q){var he=Q.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=he)}),r=t(function(Q){var he=Q.exports={version:"2.6.5"};typeof __e=="number"&&(__e=he)}),n=r.version,i=function(Q){return typeof Q=="object"?Q!==null:typeof Q=="function"},o=function(Q){if(!i(Q))throw TypeError(Q+" is not an object!");return Q},s=function(Q){try{return!!Q()}catch{return!0}},a=!s(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),l=e.document,c=i(l)&&i(l.createElement),p=function(Q){return c?l.createElement(Q):{}},f=!a&&!s(function(){return Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a!=7}),m=function(Q,he){if(!i(Q))return Q;var Je,Ke;if(he&&typeof(Je=Q.toString)=="function"&&!i(Ke=Je.call(Q))||typeof(Je=Q.valueOf)=="function"&&!i(Ke=Je.call(Q))||!he&&typeof(Je=Q.toString)=="function"&&!i(Ke=Je.call(Q)))return Ke;throw TypeError("Can't convert object to primitive value")},g=Object.defineProperty,v=a?Object.defineProperty:function(he,Je,Ke){if(o(he),Je=m(Je,!0),o(Ke),f)try{return g(he,Je,Ke)}catch{}if("get"in Ke||"set"in Ke)throw TypeError("Accessors not supported!");return"value"in Ke&&(he[Je]=Ke.value),he},_={f:v},S=function(Q,he){return{enumerable:!(Q&1),configurable:!(Q&2),writable:!(Q&4),value:he}},T=a?function(Q,he,Je){return _.f(Q,he,S(1,Je))}:function(Q,he,Je){return Q[he]=Je,Q},w={}.hasOwnProperty,E=function(Q,he){return w.call(Q,he)},I=0,N=Math.random(),C=function(Q){return"Symbol(".concat(Q===void 0?"":Q,")_",(++I+N).toString(36))},k=!1,U=t(function(Q){var he="__core-js_shared__",Je=e[he]||(e[he]={});(Q.exports=function(Ke,ht){return Je[Ke]||(Je[Ke]=ht!==void 0?ht:{})})("versions",[]).push({version:r.version,mode:k?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),$=U("native-function-to-string",Function.toString),G=t(function(Q){var he=C("src"),Je="toString",Ke=(""+$).split(Je);r.inspectSource=function(ht){return $.call(ht)},(Q.exports=function(ht,Nt,Gt,Ii){var Nn=typeof Gt=="function";Nn&&(E(Gt,"name")||T(Gt,"name",Nt)),ht[Nt]!==Gt&&(Nn&&(E(Gt,he)||T(Gt,he,ht[Nt]?""+ht[Nt]:Ke.join(String(Nt)))),ht===e?ht[Nt]=Gt:Ii?ht[Nt]?ht[Nt]=Gt:T(ht,Nt,Gt):(delete ht[Nt],T(ht,Nt,Gt)))})(Function.prototype,Je,function(){return typeof this=="function"&&this[he]||$.call(this)})}),K=function(Q){if(typeof Q!="function")throw TypeError(Q+" is not a function!");return Q},X=function(Q,he,Je){if(K(Q),he===void 0)return Q;switch(Je){case 1:return function(Ke){return Q.call(he,Ke)};case 2:return function(Ke,ht){return Q.call(he,Ke,ht)};case 3:return function(Ke,ht,Nt){return Q.call(he,Ke,ht,Nt)}}return function(){return Q.apply(he,arguments)}},te="prototype",ne=function(Q,he,Je){var Ke=Q&ne.F,ht=Q&ne.G,Nt=Q&ne.S,Gt=Q&ne.P,Ii=Q&ne.B,Nn=ht?e:Nt?e[he]||(e[he]={}):(e[he]||{})[te],hu=ht?r:r[he]||(r[he]={}),Pc=hu[te]||(hu[te]={}),xs,Ys,ki,Lc;ht&&(Je=he);for(xs in Je)Ys=!Ke&&Nn&&Nn[xs]!==void 0,ki=(Ys?Nn:Je)[xs],Lc=Ii&&Ys?X(ki,e):Gt&&typeof ki=="function"?X(Function.call,ki):ki,Nn&&G(Nn,xs,ki,Q&ne.U),hu[xs]!=ki&&T(hu,xs,Lc),Gt&&Pc[xs]!=ki&&(Pc[xs]=ki)};e.core=r,ne.F=1,ne.G=2,ne.S=4,ne.P=8,ne.B=16,ne.W=32,ne.U=64,ne.R=128;var H=ne,re=Math.ceil,W=Math.floor,q=function(Q){return isNaN(Q=+Q)?0:(Q>0?W:re)(Q)},se=function(Q){if(Q==null)throw TypeError("Can't call method on  "+Q);return Q},J=function(Q){return function(he,Je){var Ke=String(se(he)),ht=q(Je),Nt=Ke.length,Gt,Ii;return ht<0||ht>=Nt?Q?"":void 0:(Gt=Ke.charCodeAt(ht),Gt<55296||Gt>56319||ht+1===Nt||(Ii=Ke.charCodeAt(ht+1))<56320||Ii>57343?Q?Ke.charAt(ht):Gt:Q?Ke.slice(ht,ht+2):(Gt-55296<<10)+(Ii-56320)+65536)}},ye=J(!1);H(H.P,"String",{codePointAt:function(he){return ye(this,he)}});var Ne=r.String.codePointAt,ae=Math.max,Se=Math.min,Re=function(Q,he){return Q=q(Q),Q<0?ae(Q+he,0):Se(Q,he)},Pe=String.fromCharCode,Oe=String.fromCodePoint;H(H.S+H.F*(!!Oe&&Oe.length!=1),"String",{fromCodePoint:function(he){for(var Je=arguments,Ke=[],ht=arguments.length,Nt=0,Gt;ht>Nt;){if(Gt=+Je[Nt++],Re(Gt,1114111)!==Gt)throw RangeError(Gt+" is not a valid code point");Ke.push(Gt<65536?Pe(Gt):Pe(((Gt-=65536)>>10)+55296,Gt%1024+56320))}return Ke.join("")}});var ct=r.String.fromCodePoint,mt=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,wt=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Me=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,ue={Space_Separator:mt,ID_Start:wt,ID_Continue:Me},Te={isSpaceSeparator:function(he){return typeof he=="string"&&ue.Space_Separator.test(he)},isIdStartChar:function(he){return typeof he=="string"&&(he>="a"&&he<="z"||he>="A"&&he<="Z"||he==="$"||he==="_"||ue.ID_Start.test(he))},isIdContinueChar:function(he){return typeof he=="string"&&(he>="a"&&he<="z"||he>="A"&&he<="Z"||he>="0"&&he<="9"||he==="$"||he==="_"||he==="\u200C"||he==="\u200D"||ue.ID_Continue.test(he))},isDigit:function(he){return typeof he=="string"&&/[0-9]/.test(he)},isHexDigit:function(he){return typeof he=="string"&&/[0-9A-Fa-f]/.test(he)}},ce,xe,Ae,M,Ve,De,it,_t,xt,Bt=function(he,Je){ce=String(he),xe="start",Ae=[],M=0,Ve=1,De=0,it=void 0,_t=void 0,xt=void 0;do it=O(),sb[xe]();while(it.type!=="eof");return typeof Je=="function"?fr({"":xt},"",Je):xt};function fr(Q,he,Je){var Ke=Q[he];if(Ke!=null&&typeof Ke=="object")if(Array.isArray(Ke))for(var ht=0;ht<Ke.length;ht++){var Nt=String(ht),Gt=fr(Ke,Nt,Je);Gt===void 0?delete Ke[Nt]:Object.defineProperty(Ke,Nt,{value:Gt,writable:!0,enumerable:!0,configurable:!0})}else for(var Ii in Ke){var Nn=fr(Ke,Ii,Je);Nn===void 0?delete Ke[Ii]:Object.defineProperty(Ke,Ii,{value:Nn,writable:!0,enumerable:!0,configurable:!0})}return Je.call(Q,he,Ke)}var nt,rt,we,_e,Ie;function O(){for(nt="default",rt="",we=!1,_e=1;;){Ie=R();var Q=je[nt]();if(Q)return Q}}function R(){if(ce[M])return String.fromCodePoint(ce.codePointAt(M))}function L(){var Q=R();return Q===`
`?(Ve++,De=0):Q?De+=Q.length:De++,Q&&(M+=Q.length),Q}var je={default:function(){switch(Ie){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":L();return;case"/":L(),nt="comment";return;case void 0:return L(),st("eof")}if(Te.isSpaceSeparator(Ie)){L();return}return je[xe]()},comment:function(){switch(Ie){case"*":L(),nt="multiLineComment";return;case"/":L(),nt="singleLineComment";return}throw Yt(L())},multiLineComment:function(){switch(Ie){case"*":L(),nt="multiLineCommentAsterisk";return;case void 0:throw Yt(L())}L()},multiLineCommentAsterisk:function(){switch(Ie){case"*":L();return;case"/":L(),nt="default";return;case void 0:throw Yt(L())}L(),nt="multiLineComment"},singleLineComment:function(){switch(Ie){case`
`:case"\r":case"\u2028":case"\u2029":L(),nt="default";return;case void 0:return L(),st("eof")}L()},value:function(){switch(Ie){case"{":case"[":return st("punctuator",L());case"n":return L(),wr("ull"),st("null",null);case"t":return L(),wr("rue"),st("boolean",!0);case"f":return L(),wr("alse"),st("boolean",!1);case"-":case"+":L()==="-"&&(_e=-1),nt="sign";return;case".":rt=L(),nt="decimalPointLeading";return;case"0":rt=L(),nt="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":rt=L(),nt="decimalInteger";return;case"I":return L(),wr("nfinity"),st("numeric",1/0);case"N":return L(),wr("aN"),st("numeric",NaN);case'"':case"'":we=L()==='"',rt="",nt="string";return}throw Yt(L())},identifierNameStartEscape:function(){if(Ie!=="u")throw Yt(L());L();var he=$o();switch(he){case"$":case"_":break;default:if(!Te.isIdStartChar(he))throw mu();break}rt+=he,nt="identifierName"},identifierName:function(){switch(Ie){case"$":case"_":case"\u200C":case"\u200D":rt+=L();return;case"\\":L(),nt="identifierNameEscape";return}if(Te.isIdContinueChar(Ie)){rt+=L();return}return st("identifier",rt)},identifierNameEscape:function(){if(Ie!=="u")throw Yt(L());L();var he=$o();switch(he){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!Te.isIdContinueChar(he))throw mu();break}rt+=he,nt="identifierName"},sign:function(){switch(Ie){case".":rt=L(),nt="decimalPointLeading";return;case"0":rt=L(),nt="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":rt=L(),nt="decimalInteger";return;case"I":return L(),wr("nfinity"),st("numeric",_e*(1/0));case"N":return L(),wr("aN"),st("numeric",NaN)}throw Yt(L())},zero:function(){switch(Ie){case".":rt+=L(),nt="decimalPoint";return;case"e":case"E":rt+=L(),nt="decimalExponent";return;case"x":case"X":rt+=L(),nt="hexadecimal";return}return st("numeric",_e*0)},decimalInteger:function(){switch(Ie){case".":rt+=L(),nt="decimalPoint";return;case"e":case"E":rt+=L(),nt="decimalExponent";return}if(Te.isDigit(Ie)){rt+=L();return}return st("numeric",_e*Number(rt))},decimalPointLeading:function(){if(Te.isDigit(Ie)){rt+=L(),nt="decimalFraction";return}throw Yt(L())},decimalPoint:function(){switch(Ie){case"e":case"E":rt+=L(),nt="decimalExponent";return}if(Te.isDigit(Ie)){rt+=L(),nt="decimalFraction";return}return st("numeric",_e*Number(rt))},decimalFraction:function(){switch(Ie){case"e":case"E":rt+=L(),nt="decimalExponent";return}if(Te.isDigit(Ie)){rt+=L();return}return st("numeric",_e*Number(rt))},decimalExponent:function(){switch(Ie){case"+":case"-":rt+=L(),nt="decimalExponentSign";return}if(Te.isDigit(Ie)){rt+=L(),nt="decimalExponentInteger";return}throw Yt(L())},decimalExponentSign:function(){if(Te.isDigit(Ie)){rt+=L(),nt="decimalExponentInteger";return}throw Yt(L())},decimalExponentInteger:function(){if(Te.isDigit(Ie)){rt+=L();return}return st("numeric",_e*Number(rt))},hexadecimal:function(){if(Te.isHexDigit(Ie)){rt+=L(),nt="hexadecimalInteger";return}throw Yt(L())},hexadecimalInteger:function(){if(Te.isHexDigit(Ie)){rt+=L();return}return st("numeric",_e*Number(rt))},string:function(){switch(Ie){case"\\":L(),rt+=Di();return;case'"':if(we)return L(),st("string",rt);rt+=L();return;case"'":if(!we)return L(),st("string",rt);rt+=L();return;case`
`:case"\r":throw Yt(L());case"\u2028":case"\u2029":yl(Ie);break;case void 0:throw Yt(L())}rt+=L()},start:function(){switch(Ie){case"{":case"[":return st("punctuator",L())}nt="value"},beforePropertyName:function(){switch(Ie){case"$":case"_":rt=L(),nt="identifierName";return;case"\\":L(),nt="identifierNameStartEscape";return;case"}":return st("punctuator",L());case'"':case"'":we=L()==='"',nt="string";return}if(Te.isIdStartChar(Ie)){rt+=L(),nt="identifierName";return}throw Yt(L())},afterPropertyName:function(){if(Ie===":")return st("punctuator",L());throw Yt(L())},beforePropertyValue:function(){nt="value"},afterPropertyValue:function(){switch(Ie){case",":case"}":return st("punctuator",L())}throw Yt(L())},beforeArrayValue:function(){if(Ie==="]")return st("punctuator",L());nt="value"},afterArrayValue:function(){switch(Ie){case",":case"]":return st("punctuator",L())}throw Yt(L())},end:function(){throw Yt(L())}};function st(Q,he){return{type:Q,value:he,line:Ve,column:De}}function wr(Q){for(var he=0,Je=Q;he<Je.length;he+=1){var Ke=Je[he],ht=R();if(ht!==Ke)throw Yt(L());L()}}function Di(){var Q=R();switch(Q){case"b":return L(),"\b";case"f":return L(),"\f";case"n":return L(),`
`;case"r":return L(),"\r";case"t":return L(),"	";case"v":return L(),"\v";case"0":if(L(),Te.isDigit(R()))throw Yt(L());return"\0";case"x":return L(),Pa();case"u":return L(),$o();case`
`:case"\u2028":case"\u2029":return L(),"";case"\r":return L(),R()===`
`&&L(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Yt(L());case void 0:throw Yt(L())}return L()}function Pa(){var Q="",he=R();if(!Te.isHexDigit(he)||(Q+=L(),he=R(),!Te.isHexDigit(he)))throw Yt(L());return Q+=L(),String.fromCodePoint(parseInt(Q,16))}function $o(){for(var Q="",he=4;he-- >0;){var Je=R();if(!Te.isHexDigit(Je))throw Yt(L());Q+=L()}return String.fromCodePoint(parseInt(Q,16))}var sb={start:function(){if(it.type==="eof")throw ti();Mp()},beforePropertyName:function(){switch(it.type){case"identifier":case"string":_t=it.value,xe="afterPropertyName";return;case"punctuator":fu();return;case"eof":throw ti()}},afterPropertyName:function(){if(it.type==="eof")throw ti();xe="beforePropertyValue"},beforePropertyValue:function(){if(it.type==="eof")throw ti();Mp()},beforeArrayValue:function(){if(it.type==="eof")throw ti();if(it.type==="punctuator"&&it.value==="]"){fu();return}Mp()},afterPropertyValue:function(){if(it.type==="eof")throw ti();switch(it.value){case",":xe="beforePropertyName";return;case"}":fu()}},afterArrayValue:function(){if(it.type==="eof")throw ti();switch(it.value){case",":xe="beforeArrayValue";return;case"]":fu()}},end:function(){}};function Mp(){var Q;switch(it.type){case"punctuator":switch(it.value){case"{":Q={};break;case"[":Q=[];break}break;case"null":case"boolean":case"numeric":case"string":Q=it.value;break}if(xt===void 0)xt=Q;else{var he=Ae[Ae.length-1];Array.isArray(he)?he.push(Q):Object.defineProperty(he,_t,{value:Q,writable:!0,enumerable:!0,configurable:!0})}if(Q!==null&&typeof Q=="object")Ae.push(Q),Array.isArray(Q)?xe="beforeArrayValue":xe="beforePropertyName";else{var Je=Ae[Ae.length-1];Je==null?xe="end":Array.isArray(Je)?xe="afterArrayValue":xe="afterPropertyValue"}}function fu(){Ae.pop();var Q=Ae[Ae.length-1];Q==null?xe="end":Array.isArray(Q)?xe="afterArrayValue":xe="afterPropertyValue"}function Yt(Q){return bs(Q===void 0?"JSON5: invalid end of input at "+Ve+":"+De:"JSON5: invalid character '"+vl(Q)+"' at "+Ve+":"+De)}function ti(){return bs("JSON5: invalid end of input at "+Ve+":"+De)}function mu(){return De-=5,bs("JSON5: invalid identifier character at "+Ve+":"+De)}function yl(Q){console.warn("JSON5: '"+vl(Q)+"' in strings is not valid ECMAScript; consider escaping")}function vl(Q){var he={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(he[Q])return he[Q];if(Q<" "){var Je=Q.charCodeAt(0).toString(16);return"\\x"+("00"+Je).substring(Je.length)}return Q}function bs(Q){var he=new SyntaxError(Q);return he.lineNumber=Ve,he.columnNumber=De,he}var ab=function(he,Je,Ke){var ht=[],Nt="",Gt,Ii,Nn="",hu;if(Je!=null&&typeof Je=="object"&&!Array.isArray(Je)&&(Ke=Je.space,hu=Je.quote,Je=Je.replacer),typeof Je=="function")Ii=Je;else if(Array.isArray(Je)){Gt=[];for(var Pc=0,xs=Je;Pc<xs.length;Pc+=1){var Ys=xs[Pc],ki=void 0;typeof Ys=="string"?ki=Ys:(typeof Ys=="number"||Ys instanceof String||Ys instanceof Number)&&(ki=String(Ys)),ki!==void 0&&Gt.indexOf(ki)<0&&Gt.push(ki)}}return Ke instanceof Number?Ke=Number(Ke):Ke instanceof String&&(Ke=String(Ke)),typeof Ke=="number"?Ke>0&&(Ke=Math.min(10,Math.floor(Ke)),Nn="          ".substr(0,Ke)):typeof Ke=="string"&&(Nn=Ke.substr(0,10)),Lc("",{"":he});function Lc(Sr,qn){var bt=qn[Sr];switch(bt!=null&&(typeof bt.toJSON5=="function"?bt=bt.toJSON5(Sr):typeof bt.toJSON=="function"&&(bt=bt.toJSON(Sr))),Ii&&(bt=Ii.call(qn,Sr,bt)),bt instanceof Number?bt=Number(bt):bt instanceof String?bt=String(bt):bt instanceof Boolean&&(bt=bt.valueOf()),bt){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof bt=="string")return gm(bt,!1);if(typeof bt=="number")return String(bt);if(typeof bt=="object")return Array.isArray(bt)?FD(bt):LD(bt)}function gm(Sr){for(var qn={"'":.1,'"':.2},bt={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},An="",To=0;To<Sr.length;To++){var ci=Sr[To];switch(ci){case"'":case'"':qn[ci]++,An+=ci;continue;case"\0":if(Te.isDigit(Sr[To+1])){An+="\\x00";continue}}if(bt[ci]){An+=bt[ci];continue}if(ci<" "){var La=ci.charCodeAt(0).toString(16);An+="\\x"+("00"+La).substring(La.length);continue}An+=ci}var Ki=hu||Object.keys(qn).reduce(function(Ni,ar){return qn[Ni]<qn[ar]?Ni:ar});return An=An.replace(new RegExp(Ki,"g"),bt[Ki]),Ki+An+Ki}function LD(Sr){if(ht.indexOf(Sr)>=0)throw TypeError("Converting circular structure to JSON5");ht.push(Sr);var qn=Nt;Nt=Nt+Nn;for(var bt=Gt||Object.keys(Sr),An=[],To=0,ci=bt;To<ci.length;To+=1){var La=ci[To],Ki=Lc(La,Sr);if(Ki!==void 0){var Ni=MD(La)+":";Nn!==""&&(Ni+=" "),Ni+=Ki,An.push(Ni)}}var ar;if(An.length===0)ar="{}";else{var mr;if(Nn==="")mr=An.join(","),ar="{"+mr+"}";else{var _l=`,
`+Nt;mr=An.join(_l),ar=`{
`+Nt+mr+`,
`+qn+"}"}}return ht.pop(),Nt=qn,ar}function MD(Sr){if(Sr.length===0)return gm(Sr,!0);var qn=String.fromCodePoint(Sr.codePointAt(0));if(!Te.isIdStartChar(qn))return gm(Sr,!0);for(var bt=qn.length;bt<Sr.length;bt++)if(!Te.isIdContinueChar(String.fromCodePoint(Sr.codePointAt(bt))))return gm(Sr,!0);return Sr}function FD(Sr){if(ht.indexOf(Sr)>=0)throw TypeError("Converting circular structure to JSON5");ht.push(Sr);var qn=Nt;Nt=Nt+Nn;for(var bt=[],An=0;An<Sr.length;An++){var To=Lc(String(An),Sr);bt.push(To!==void 0?To:"null")}var ci;if(bt.length===0)ci="[]";else if(Nn===""){var La=bt.join(",");ci="["+La+"]"}else{var Ki=`,
`+Nt,Ni=bt.join(Ki);ci=`[
`+Nt+Ni+`,
`+qn+"]"}return ht.pop(),Nt=qn,ci}},lb={parse:Bt,stringify:ab},RD=lb,PD=RD;return PD})});var CX={};wu(CX,{MIMEParams:()=>wSe,MIMEType:()=>TSe,TextDecoder:()=>bSe,TextEncoder:()=>xSe,_errnoException:()=>Fwe,_exceptionWithHostPort:()=>Uwe,_extend:()=>Bwe,aborted:()=>ySe,callbackify:()=>Wwe,debug:()=>jwe,debuglog:()=>zwe,default:()=>Mwe,deprecate:()=>$we,format:()=>Hwe,formatWithOptions:()=>qwe,getSystemErrorMap:()=>Gwe,getSystemErrorName:()=>Vwe,inherits:()=>Kwe,inspect:()=>Ywe,isArray:()=>Xwe,isBoolean:()=>Jwe,isBuffer:()=>Qwe,isDate:()=>lSe,isDeepStrictEqual:()=>Zwe,isError:()=>uSe,isFunction:()=>cSe,isNull:()=>eSe,isNullOrUndefined:()=>tSe,isNumber:()=>rSe,isObject:()=>aSe,isPrimitive:()=>dSe,isRegExp:()=>sSe,isString:()=>nSe,isSymbol:()=>iSe,isUndefined:()=>oSe,log:()=>pSe,parseArgs:()=>_Se,promisify:()=>Ti,stripVTControlCharacters:()=>fSe,toUSVString:()=>mSe,transferableAbortController:()=>gSe,transferableAbortSignal:()=>hSe,types:()=>vSe});var Pt,Mwe,Fwe,Uwe,Bwe,Wwe,jwe,zwe,$we,Hwe,qwe,Gwe,Vwe,Kwe,Ywe,Xwe,Jwe,Qwe,Zwe,eSe,tSe,rSe,nSe,iSe,oSe,sSe,aSe,lSe,uSe,cSe,dSe,pSe,Ti,fSe,mSe,hSe,gSe,ySe,vSe,_Se,bSe,xSe,TSe,wSe,yL=ky(()=>{"use strict";Pt=window.require("util"),Mwe=Pt,Fwe=Pt._errnoException,Uwe=Pt._exceptionWithHostPort,Bwe=Pt._extend,Wwe=Pt.callbackify,jwe=Pt.debug,zwe=Pt.debuglog,$we=Pt.deprecate,Hwe=Pt.format,qwe=Pt.formatWithOptions,Gwe=Pt.getSystemErrorMap,Vwe=Pt.getSystemErrorName,Kwe=Pt.inherits,Ywe=Pt.inspect,Xwe=Pt.isArray,Jwe=Pt.isBoolean,Qwe=Pt.isBuffer,Zwe=Pt.isDeepStrictEqual,eSe=Pt.isNull,tSe=Pt.isNullOrUndefined,rSe=Pt.isNumber,nSe=Pt.isString,iSe=Pt.isSymbol,oSe=Pt.isUndefined,sSe=Pt.isRegExp,aSe=Pt.isObject,lSe=Pt.isDate,uSe=Pt.isError,cSe=Pt.isFunction,dSe=Pt.isPrimitive,pSe=Pt.log,Ti=Pt.promisify,fSe=Pt.stripVTControlCharacters,mSe=Pt.toUSVString,hSe=Pt.transferableAbortSignal,gSe=Pt.transferableAbortController,ySe=Pt.aborted,vSe=Pt.types,_Se=Pt.parseArgs,bSe=Pt.TextDecoder,xSe=Pt.TextEncoder,TSe=Pt.MIMEType,wSe=Pt.MIMEParams});var NL=Y((IL,kL)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof kL=="object"&&typeof IL<"u"?kL.exports=e():t.Papa=e()})(IL,function t(){"use strict";var e=typeof self<"u"?self:typeof window<"u"?window:e!==void 0?e:{},r=!e.document&&!!e.postMessage,n=e.IS_PAPA_WORKER||!1,i={},o=0,s={parse:function(C,k){var U=(k=k||{}).dynamicTyping||!1;if(N(U)&&(k.dynamicTypingFunction=U,U={}),k.dynamicTyping=U,k.transform=!!N(k.transform)&&k.transform,k.worker&&s.WORKERS_SUPPORTED){var $=function(){if(!s.WORKERS_SUPPORTED)return!1;var K=(te=e.URL||e.webkitURL||null,ne=t.toString(),s.BLOB_URL||(s.BLOB_URL=te.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ne,")();"],{type:"text/javascript"})))),X=new e.Worker(K),te,ne;return X.onmessage=S,X.id=o++,i[X.id]=X}();return $.userStep=k.step,$.userChunk=k.chunk,$.userComplete=k.complete,$.userError=k.error,k.step=N(k.step),k.chunk=N(k.chunk),k.complete=N(k.complete),k.error=N(k.error),delete k.worker,void $.postMessage({input:C,config:k,workerId:$.id})}var G=null;return s.NODE_STREAM_INPUT,typeof C=="string"?(C=function(K){return K.charCodeAt(0)===65279?K.slice(1):K}(C),G=k.download?new c(k):new f(k)):C.readable===!0&&N(C.read)&&N(C.on)?G=new m(k):(e.File&&C instanceof File||C instanceof Object)&&(G=new p(k)),G.stream(C)},unparse:function(C,k){var U=!1,$=!0,G=",",K=`\r
`,X='"',te=X+X,ne=!1,H=null,re=!1;(function(){if(typeof k=="object"){if(typeof k.delimiter!="string"||s.BAD_DELIMITERS.filter(function(J){return k.delimiter.indexOf(J)!==-1}).length||(G=k.delimiter),(typeof k.quotes=="boolean"||typeof k.quotes=="function"||Array.isArray(k.quotes))&&(U=k.quotes),typeof k.skipEmptyLines!="boolean"&&typeof k.skipEmptyLines!="string"||(ne=k.skipEmptyLines),typeof k.newline=="string"&&(K=k.newline),typeof k.quoteChar=="string"&&(X=k.quoteChar),typeof k.header=="boolean"&&($=k.header),Array.isArray(k.columns)){if(k.columns.length===0)throw new Error("Option columns is empty");H=k.columns}k.escapeChar!==void 0&&(te=k.escapeChar+X),(typeof k.escapeFormulae=="boolean"||k.escapeFormulae instanceof RegExp)&&(re=k.escapeFormulae instanceof RegExp?k.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var W=new RegExp(v(X),"g");if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return q(null,C,ne);if(typeof C[0]=="object")return q(H||Object.keys(C[0]),C,ne)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||H),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),Array.isArray(C.data[0])||typeof C.data[0]=="object"||(C.data=[C.data])),q(C.fields||[],C.data||[],ne);throw new Error("Unable to serialize unrecognized input");function q(J,ye,Ne){var ae="";typeof J=="string"&&(J=JSON.parse(J)),typeof ye=="string"&&(ye=JSON.parse(ye));var Se=Array.isArray(J)&&0<J.length,Re=!Array.isArray(ye[0]);if(Se&&$){for(var Pe=0;Pe<J.length;Pe++)0<Pe&&(ae+=G),ae+=se(J[Pe],Pe);0<ye.length&&(ae+=K)}for(var Oe=0;Oe<ye.length;Oe++){var ct=Se?J.length:ye[Oe].length,mt=!1,wt=Se?Object.keys(ye[Oe]).length===0:ye[Oe].length===0;if(Ne&&!Se&&(mt=Ne==="greedy"?ye[Oe].join("").trim()==="":ye[Oe].length===1&&ye[Oe][0].length===0),Ne==="greedy"&&Se){for(var Me=[],ue=0;ue<ct;ue++){var Te=Re?J[ue]:ue;Me.push(ye[Oe][Te])}mt=Me.join("").trim()===""}if(!mt){for(var ce=0;ce<ct;ce++){0<ce&&!wt&&(ae+=G);var xe=Se&&Re?J[ce]:ce;ae+=se(ye[Oe][xe],ce)}Oe<ye.length-1&&(!Ne||0<ct&&!wt)&&(ae+=K)}}return ae}function se(J,ye){if(J==null)return"";if(J.constructor===Date)return JSON.stringify(J).slice(1,25);var Ne=!1;re&&typeof J=="string"&&re.test(J)&&(J="'"+J,Ne=!0);var ae=J.toString().replace(W,te);return(Ne=Ne||U===!0||typeof U=="function"&&U(J,ye)||Array.isArray(U)&&U[ye]||function(Se,Re){for(var Pe=0;Pe<Re.length;Pe++)if(-1<Se.indexOf(Re[Pe]))return!0;return!1}(ae,s.BAD_DELIMITERS)||-1<ae.indexOf(G)||ae.charAt(0)===" "||ae.charAt(ae.length-1)===" ")?X+ae+X:ae}}};if(s.RECORD_SEP="",s.UNIT_SEP="",s.BYTE_ORDER_MARK="\uFEFF",s.BAD_DELIMITERS=["\r",`
`,'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!r&&!!e.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=_,s.ParserHandle=g,s.NetworkStreamer=c,s.FileStreamer=p,s.StringStreamer=f,s.ReadableStreamStreamer=m,e.jQuery){var a=e.jQuery;a.fn.parse=function(C){var k=C.config||{},U=[];return this.each(function(K){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&e.FileReader)||!this.files||this.files.length===0)return!0;for(var X=0;X<this.files.length;X++)U.push({file:this.files[X],inputElem:this,instanceConfig:a.extend({},k)})}),$(),this;function $(){if(U.length!==0){var K,X,te,ne,H=U[0];if(N(C.before)){var re=C.before(H.file,H.inputElem);if(typeof re=="object"){if(re.action==="abort")return K="AbortError",X=H.file,te=H.inputElem,ne=re.reason,void(N(C.error)&&C.error({name:K},X,te,ne));if(re.action==="skip")return void G();typeof re.config=="object"&&(H.instanceConfig=a.extend(H.instanceConfig,re.config))}else if(re==="skip")return void G()}var W=H.instanceConfig.complete;H.instanceConfig.complete=function(q){N(W)&&W(q,H.file,H.inputElem),G()},s.parse(H.file,H.instanceConfig)}else N(C.complete)&&C.complete()}function G(){U.splice(0,1),$()}}}function l(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(k){var U=E(k);U.chunkSize=parseInt(U.chunkSize),k.step||k.chunk||(U.chunkSize=null),this._handle=new g(U),(this._handle.streamer=this)._config=U}.call(this,C),this.parseChunk=function(k,U){if(this.isFirstChunk&&N(this._config.beforeFirstChunk)){var $=this._config.beforeFirstChunk(k);$!==void 0&&(k=$)}this.isFirstChunk=!1,this._halted=!1;var G=this._partialLine+k;this._partialLine="";var K=this._handle.parse(G,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var X=K.meta.cursor;this._finished||(this._partialLine=G.substring(X-this._baseIndex),this._baseIndex=X),K&&K.data&&(this._rowCount+=K.data.length);var te=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)e.postMessage({results:K,workerId:s.WORKER_ID,finished:te});else if(N(this._config.chunk)&&!U){if(this._config.chunk(K,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);K=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(K.data),this._completeResults.errors=this._completeResults.errors.concat(K.errors),this._completeResults.meta=K.meta),this._completed||!te||!N(this._config.complete)||K&&K.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),te||K&&K.meta.paused||this._nextChunk(),K}this._halted=!0},this._sendError=function(k){N(this._config.error)?this._config.error(k):n&&this._config.error&&e.postMessage({workerId:s.WORKER_ID,error:k,finished:!1})}}function c(C){var k;(C=C||{}).chunkSize||(C.chunkSize=s.RemoteChunkSize),l.call(this,C),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(U){this._input=U,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(k=new XMLHttpRequest,this._config.withCredentials&&(k.withCredentials=this._config.withCredentials),r||(k.onload=I(this._chunkLoaded,this),k.onerror=I(this._chunkError,this)),k.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var U=this._config.downloadRequestHeaders;for(var $ in U)k.setRequestHeader($,U[$])}if(this._config.chunkSize){var G=this._start+this._config.chunkSize-1;k.setRequestHeader("Range","bytes="+this._start+"-"+G)}try{k.send(this._config.downloadRequestBody)}catch(K){this._chunkError(K.message)}r&&k.status===0&&this._chunkError()}},this._chunkLoaded=function(){k.readyState===4&&(k.status<200||400<=k.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:k.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(U){var $=U.getResponseHeader("Content-Range");return $===null?-1:parseInt($.substring($.lastIndexOf("/")+1))}(k),this.parseChunk(k.responseText)))},this._chunkError=function(U){var $=k.statusText||U;this._sendError(new Error($))}}function p(C){var k,U;(C=C||{}).chunkSize||(C.chunkSize=s.LocalChunkSize),l.call(this,C);var $=typeof FileReader<"u";this.stream=function(G){this._input=G,U=G.slice||G.webkitSlice||G.mozSlice,$?((k=new FileReader).onload=I(this._chunkLoaded,this),k.onerror=I(this._chunkError,this)):k=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var G=this._input;if(this._config.chunkSize){var K=Math.min(this._start+this._config.chunkSize,this._input.size);G=U.call(G,this._start,K)}var X=k.readAsText(G,this._config.encoding);$||this._chunkLoaded({target:{result:X}})},this._chunkLoaded=function(G){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(G.target.result)},this._chunkError=function(){this._sendError(k.error)}}function f(C){var k;l.call(this,C=C||{}),this.stream=function(U){return k=U,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var U,$=this._config.chunkSize;return $?(U=k.substring(0,$),k=k.substring($)):(U=k,k=""),this._finished=!k,this.parseChunk(U)}}}function m(C){l.call(this,C=C||{});var k=[],U=!0,$=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(G){this._input=G,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){$&&k.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),k.length?this.parseChunk(k.shift()):U=!0},this._streamData=I(function(G){try{k.push(typeof G=="string"?G:G.toString(this._config.encoding)),U&&(U=!1,this._checkIsFinished(),this.parseChunk(k.shift()))}catch(K){this._streamError(K)}},this),this._streamError=I(function(G){this._streamCleanUp(),this._sendError(G)},this),this._streamEnd=I(function(){this._streamCleanUp(),$=!0,this._streamData("")},this),this._streamCleanUp=I(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(C){var k,U,$,G=Math.pow(2,53),K=-G,X=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,te=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ne=this,H=0,re=0,W=!1,q=!1,se=[],J={data:[],errors:[],meta:{}};if(N(C.step)){var ye=C.step;C.step=function(Oe){if(J=Oe,Se())ae();else{if(ae(),J.data.length===0)return;H+=Oe.data.length,C.preview&&H>C.preview?U.abort():(J.data=J.data[0],ye(J,ne))}}}function Ne(Oe){return C.skipEmptyLines==="greedy"?Oe.join("").trim()==="":Oe.length===1&&Oe[0].length===0}function ae(){return J&&$&&(Pe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),$=!1),C.skipEmptyLines&&(J.data=J.data.filter(function(Oe){return!Ne(Oe)})),Se()&&function(){if(!J)return;function Oe(mt,wt){N(C.transformHeader)&&(mt=C.transformHeader(mt,wt)),se.push(mt)}if(Array.isArray(J.data[0])){for(var ct=0;Se()&&ct<J.data.length;ct++)J.data[ct].forEach(Oe);J.data.splice(0,1)}else J.data.forEach(Oe)}(),function(){if(!J||!C.header&&!C.dynamicTyping&&!C.transform)return J;function Oe(mt,wt){var Me,ue=C.header?{}:[];for(Me=0;Me<mt.length;Me++){var Te=Me,ce=mt[Me];C.header&&(Te=Me>=se.length?"__parsed_extra":se[Me]),C.transform&&(ce=C.transform(ce,Te)),ce=Re(Te,ce),Te==="__parsed_extra"?(ue[Te]=ue[Te]||[],ue[Te].push(ce)):ue[Te]=ce}return C.header&&(Me>se.length?Pe("FieldMismatch","TooManyFields","Too many fields: expected "+se.length+" fields but parsed "+Me,re+wt):Me<se.length&&Pe("FieldMismatch","TooFewFields","Too few fields: expected "+se.length+" fields but parsed "+Me,re+wt)),ue}var ct=1;return!J.data.length||Array.isArray(J.data[0])?(J.data=J.data.map(Oe),ct=J.data.length):J.data=Oe(J.data,0),C.header&&J.meta&&(J.meta.fields=se),re+=ct,J}()}function Se(){return C.header&&se.length===0}function Re(Oe,ct){return mt=Oe,C.dynamicTypingFunction&&C.dynamicTyping[mt]===void 0&&(C.dynamicTyping[mt]=C.dynamicTypingFunction(mt)),(C.dynamicTyping[mt]||C.dynamicTyping)===!0?ct==="true"||ct==="TRUE"||ct!=="false"&&ct!=="FALSE"&&(function(wt){if(X.test(wt)){var Me=parseFloat(wt);if(K<Me&&Me<G)return!0}return!1}(ct)?parseFloat(ct):te.test(ct)?new Date(ct):ct===""?null:ct):ct;var mt}function Pe(Oe,ct,mt,wt){var Me={type:Oe,code:ct,message:mt};wt!==void 0&&(Me.row=wt),J.errors.push(Me)}this.parse=function(Oe,ct,mt){var wt=C.quoteChar||'"';if(C.newline||(C.newline=function(Te,ce){Te=Te.substring(0,1048576);var xe=new RegExp(v(ce)+"([^]*?)"+v(ce),"gm"),Ae=(Te=Te.replace(xe,"")).split("\r"),M=Te.split(`
`),Ve=1<M.length&&M[0].length<Ae[0].length;if(Ae.length===1||Ve)return`
`;for(var De=0,it=0;it<Ae.length;it++)Ae[it][0]===`
`&&De++;return De>=Ae.length/2?`\r
`:"\r"}(Oe,wt)),$=!1,C.delimiter)N(C.delimiter)&&(C.delimiter=C.delimiter(Oe),J.meta.delimiter=C.delimiter);else{var Me=function(Te,ce,xe,Ae,M){var Ve,De,it,_t;M=M||[",","	","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var xt=0;xt<M.length;xt++){var Bt=M[xt],fr=0,nt=0,rt=0;it=void 0;for(var we=new _({comments:Ae,delimiter:Bt,newline:ce,preview:10}).parse(Te),_e=0;_e<we.data.length;_e++)if(xe&&Ne(we.data[_e]))rt++;else{var Ie=we.data[_e].length;nt+=Ie,it!==void 0?0<Ie&&(fr+=Math.abs(Ie-it),it=Ie):it=Ie}0<we.data.length&&(nt/=we.data.length-rt),(De===void 0||fr<=De)&&(_t===void 0||_t<nt)&&1.99<nt&&(De=fr,Ve=Bt,_t=nt)}return{successful:!!(C.delimiter=Ve),bestDelimiter:Ve}}(Oe,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess);Me.successful?C.delimiter=Me.bestDelimiter:($=!0,C.delimiter=s.DefaultDelimiter),J.meta.delimiter=C.delimiter}var ue=E(C);return C.preview&&C.header&&ue.preview++,k=Oe,U=new _(ue),J=U.parse(k,ct,mt),ae(),W?{meta:{paused:!0}}:J||{meta:{paused:!1}}},this.paused=function(){return W},this.pause=function(){W=!0,U.abort(),k=N(C.chunk)?"":k.substring(U.getCharIndex())},this.resume=function(){ne.streamer._halted?(W=!1,ne.streamer.parseChunk(k,!0)):setTimeout(ne.resume,3)},this.aborted=function(){return q},this.abort=function(){q=!0,U.abort(),J.meta.aborted=!0,N(C.complete)&&C.complete(J),k=""}}function v(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(C){var k,U=(C=C||{}).delimiter,$=C.newline,G=C.comments,K=C.step,X=C.preview,te=C.fastMode,ne=k=C.quoteChar===void 0||C.quoteChar===null?'"':C.quoteChar;if(C.escapeChar!==void 0&&(ne=C.escapeChar),(typeof U!="string"||-1<s.BAD_DELIMITERS.indexOf(U))&&(U=","),G===U)throw new Error("Comment character same as delimiter");G===!0?G="#":(typeof G!="string"||-1<s.BAD_DELIMITERS.indexOf(G))&&(G=!1),$!==`
`&&$!=="\r"&&$!==`\r
`&&($=`
`);var H=0,re=!1;this.parse=function(W,q,se){if(typeof W!="string")throw new Error("Input must be a string");var J=W.length,ye=U.length,Ne=$.length,ae=G.length,Se=N(K),Re=[],Pe=[],Oe=[],ct=H=0;if(!W)return O();if(C.header&&!q){var mt=W.split($)[0].split(U),wt=[],Me={},ue=!1;for(var Te in mt){var ce=mt[Te];N(C.transformHeader)&&(ce=C.transformHeader(ce,Te));var xe=ce,Ae=Me[ce]||0;for(0<Ae&&(ue=!0,xe=ce+"_"+Ae),Me[ce]=Ae+1;wt.includes(xe);)xe=xe+"_"+Ae;wt.push(xe)}if(ue){var M=W.split($);M[0]=wt.join(U),W=M.join($)}}if(te||te!==!1&&W.indexOf(k)===-1){for(var Ve=W.split($),De=0;De<Ve.length;De++){if(Oe=Ve[De],H+=Oe.length,De!==Ve.length-1)H+=$.length;else if(se)return O();if(!G||Oe.substring(0,ae)!==G){if(Se){if(Re=[],rt(Oe.split(U)),R(),re)return O()}else rt(Oe.split(U));if(X&&X<=De)return Re=Re.slice(0,X),O(!0)}}return O()}for(var it=W.indexOf(U,H),_t=W.indexOf($,H),xt=new RegExp(v(ne)+v(k),"g"),Bt=W.indexOf(k,H);;)if(W[H]!==k)if(G&&Oe.length===0&&W.substring(H,H+ae)===G){if(_t===-1)return O();H=_t+Ne,_t=W.indexOf($,H),it=W.indexOf(U,H)}else if(it!==-1&&(it<_t||_t===-1))Oe.push(W.substring(H,it)),H=it+ye,it=W.indexOf(U,H);else{if(_t===-1)break;if(Oe.push(W.substring(H,_t)),Ie(_t+Ne),Se&&(R(),re))return O();if(X&&Re.length>=X)return O(!0)}else for(Bt=H,H++;;){if((Bt=W.indexOf(k,Bt+1))===-1)return se||Pe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Re.length,index:H}),_e();if(Bt===J-1)return _e(W.substring(H,Bt).replace(xt,k));if(k!==ne||W[Bt+1]!==ne){if(k===ne||Bt===0||W[Bt-1]!==ne){it!==-1&&it<Bt+1&&(it=W.indexOf(U,Bt+1)),_t!==-1&&_t<Bt+1&&(_t=W.indexOf($,Bt+1));var fr=we(_t===-1?it:Math.min(it,_t));if(W.substr(Bt+1+fr,ye)===U){Oe.push(W.substring(H,Bt).replace(xt,k)),W[H=Bt+1+fr+ye]!==k&&(Bt=W.indexOf(k,H)),it=W.indexOf(U,H),_t=W.indexOf($,H);break}var nt=we(_t);if(W.substring(Bt+1+nt,Bt+1+nt+Ne)===$){if(Oe.push(W.substring(H,Bt).replace(xt,k)),Ie(Bt+1+nt+Ne),it=W.indexOf(U,H),Bt=W.indexOf(k,H),Se&&(R(),re))return O();if(X&&Re.length>=X)return O(!0);break}Pe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Re.length,index:H}),Bt++}}else Bt++}return _e();function rt(L){Re.push(L),ct=H}function we(L){var je=0;if(L!==-1){var st=W.substring(Bt+1,L);st&&st.trim()===""&&(je=st.length)}return je}function _e(L){return se||(L===void 0&&(L=W.substring(H)),Oe.push(L),H=J,rt(Oe),Se&&R()),O()}function Ie(L){H=L,rt(Oe),Oe=[],_t=W.indexOf($,H)}function O(L){return{data:Re,errors:Pe,meta:{delimiter:U,linebreak:$,aborted:re,truncated:!!L,cursor:ct+(q||0)}}}function R(){K(O()),Re=[],Pe=[]}},this.abort=function(){re=!0},this.getCharIndex=function(){return H}}function S(C){var k=C.data,U=i[k.workerId],$=!1;if(k.error)U.userError(k.error,k.file);else if(k.results&&k.results.data){var G={abort:function(){$=!0,T(k.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:w,resume:w};if(N(U.userStep)){for(var K=0;K<k.results.data.length&&(U.userStep({data:k.results.data[K],errors:k.results.errors,meta:k.results.meta},G),!$);K++);delete k.results}else N(U.userChunk)&&(U.userChunk(k.results,G,k.file),delete k.results)}k.finished&&!$&&T(k.workerId,k.results)}function T(C,k){var U=i[C];N(U.userComplete)&&U.userComplete(k),U.terminate(),delete i[C]}function w(){throw new Error("Not implemented.")}function E(C){if(typeof C!="object"||C===null)return C;var k=Array.isArray(C)?[]:{};for(var U in C)k[U]=E(C[U]);return k}function I(C,k){return function(){C.apply(k,arguments)}}function N(C){return typeof C=="function"}return n&&(e.onmessage=function(C){var k=C.data;if(s.WORKER_ID===void 0&&k&&(s.WORKER_ID=k.workerId),typeof k.input=="string")e.postMessage({workerId:s.WORKER_ID,results:s.parse(k.input,k.config),finished:!0});else if(e.File&&k.input instanceof File||k.input instanceof Object){var U=s.parse(k.input,k.config);U&&e.postMessage({workerId:s.WORKER_ID,results:U,finished:!0})}}),(c.prototype=Object.create(l.prototype)).constructor=c,(p.prototype=Object.create(l.prototype)).constructor=p,(f.prototype=Object.create(f.prototype)).constructor=f,(m.prototype=Object.create(l.prototype)).constructor=m,s})});var iu=Y(DE=>{"use strict";DE.getBooleanOption=(t,e)=>{let r=!1;if(e in t&&typeof(r=t[e])!="boolean")throw new TypeError(`Expected the "${e}" option to be a boolean`);return r};DE.cppdb=Symbol();DE.inspect=Symbol.for("nodejs.util.inspect.custom")});var OL=Y((f0t,$X)=>{"use strict";var AL={value:"SqliteError",writable:!0,enumerable:!1,configurable:!0};function Wf(t,e){if(new.target!==Wf)return new Wf(t,e);if(typeof e!="string")throw new TypeError("Expected second argument to be a string");Error.call(this,t),AL.value=""+t,Object.defineProperty(this,"message",AL),Error.captureStackTrace(this,Wf),this.code=e}Object.setPrototypeOf(Wf,Error);Object.setPrototypeOf(Wf.prototype,Error.prototype);Object.defineProperty(Wf.prototype,"name",AL);$X.exports=Wf});var qX=Y((m0t,HX)=>{var IE=(Oo(),Vn(bh)).sep||"/";HX.exports=CSe;function CSe(t){if(typeof t!="string"||t.length<=7||t.substring(0,7)!="file://")throw new TypeError("must pass in a file:// URI to convert to a file path");var e=decodeURI(t.substring(7)),r=e.indexOf("/"),n=e.substring(0,r),i=e.substring(r+1);return n=="localhost"&&(n=""),n&&(n=IE+IE+n),i=i.replace(/^(.+)\|/,"$1:"),IE=="\\"&&(i=i.replace(/\//g,"\\")),/^.+\:/.test(i)||(i=IE+i),n+i}});var YX=Y((hg,KX)=>{var RL=(xr(),Vn(_h)),NE=(Oo(),Vn(bh)),DSe=qX(),kE=NE.join,ISe=NE.dirname,GX=RL.accessSync&&function(t){try{RL.accessSync(t)}catch{return!1}return!0}||RL.existsSync||NE.existsSync,VX={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};function kSe(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(VX).map(function(l){l in t||(t[l]=VX[l])}),t.module_root||(t.module_root=hg.getRoot(hg.getFileName())),NE.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:tx,r=[],n=0,i=t.try.length,o,s,a;n<i;n++){o=kE.apply(null,t.try[n].map(function(l){return t[l]||l})),r.push(o);try{return s=t.path?e.resolve(o):e(o),t.path||(s.path=o),s}catch(l){if(l.code!=="MODULE_NOT_FOUND"&&l.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(l.message))throw l}}throw a=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(l){return t.arrow+l}).join(`
`)),a.tries=r,a}KX.exports=hg=kSe;hg.getFileName=function(e){var r=Error.prepareStackTrace,n=Error.stackTraceLimit,i={},o;Error.stackTraceLimit=10,Error.prepareStackTrace=function(a,l){for(var c=0,p=l.length;c<p;c++)if(o=l[c].getFileName(),o!==__filename)if(e){if(o!==e)return}else return},Error.captureStackTrace(i),i.stack,Error.prepareStackTrace=r,Error.stackTraceLimit=n;var s="file://";return o.indexOf(s)===0&&(o=DSe(o)),o};hg.getRoot=function(e){for(var r=ISe(e),n;;){if(r==="."&&(r=process.cwd()),GX(kE(r,"package.json"))||GX(kE(r,"node_modules")))return r;if(n===r)throw new Error('Could not find module root given file: "'+e+'". Do you have a `package.json` file? ');n=r,r=kE(r,"..")}}});var XX=Y(dp=>{"use strict";var{cppdb:ll}=iu();dp.prepare=function(e){return this[ll].prepare(e,this,!1)};dp.exec=function(e){return this[ll].exec(e),this};dp.close=function(){return this[ll].close(),this};dp.loadExtension=function(...e){return this[ll].loadExtension(...e),this};dp.defaultSafeIntegers=function(...e){return this[ll].defaultSafeIntegers(...e),this};dp.unsafeMode=function(...e){return this[ll].unsafeMode(...e),this};dp.getters={name:{get:function(){return this[ll].name},enumerable:!0},open:{get:function(){return this[ll].open},enumerable:!0},inTransaction:{get:function(){return this[ll].inTransaction},enumerable:!0},readonly:{get:function(){return this[ll].readonly},enumerable:!0},memory:{get:function(){return this[ll].memory},enumerable:!0}}});var ZX=Y((y0t,QX)=>{"use strict";var{cppdb:NSe}=iu(),JX=new WeakMap;QX.exports=function(e){if(typeof e!="function")throw new TypeError("Expected first argument to be a function");let r=this[NSe],n=ASe(r,this),{apply:i}=Function.prototype,o={default:{value:AE(i,e,r,n.default)},deferred:{value:AE(i,e,r,n.deferred)},immediate:{value:AE(i,e,r,n.immediate)},exclusive:{value:AE(i,e,r,n.exclusive)},database:{value:this,enumerable:!0}};return Object.defineProperties(o.default.value,o),Object.defineProperties(o.deferred.value,o),Object.defineProperties(o.immediate.value,o),Object.defineProperties(o.exclusive.value,o),o.default.value};var ASe=(t,e)=>{let r=JX.get(t);if(!r){let n={commit:t.prepare("COMMIT",e,!1),rollback:t.prepare("ROLLBACK",e,!1),savepoint:t.prepare("SAVEPOINT `	_bs3.	`",e,!1),release:t.prepare("RELEASE `	_bs3.	`",e,!1),rollbackTo:t.prepare("ROLLBACK TO `	_bs3.	`",e,!1)};JX.set(t,r={default:Object.assign({begin:t.prepare("BEGIN",e,!1)},n),deferred:Object.assign({begin:t.prepare("BEGIN DEFERRED",e,!1)},n),immediate:Object.assign({begin:t.prepare("BEGIN IMMEDIATE",e,!1)},n),exclusive:Object.assign({begin:t.prepare("BEGIN EXCLUSIVE",e,!1)},n)})}return r},AE=(t,e,r,{begin:n,commit:i,rollback:o,savepoint:s,release:a,rollbackTo:l})=>function(){let p,f,m;r.inTransaction?(p=s,f=a,m=l):(p=n,f=i,m=o),p.run();try{let g=t.call(e,this,arguments);return f.run(),g}catch(g){throw r.inTransaction&&(m.run(),m!==o&&f.run()),g}}});var tJ=Y((v0t,eJ)=>{"use strict";var{getBooleanOption:OSe,cppdb:RSe}=iu();eJ.exports=function(e,r){if(r==null&&(r={}),typeof e!="string")throw new TypeError("Expected first argument to be a string");if(typeof r!="object")throw new TypeError("Expected second argument to be an options object");let n=OSe(r,"simple"),i=this[RSe].prepare(`PRAGMA ${e}`,this,!0);return n?i.pluck().get():i.all()}});var iJ=Y((_0t,nJ)=>{"use strict";var PSe=(xr(),Vn(_h)),LSe=(Oo(),Vn(bh)),{promisify:MSe}=(yL(),Vn(CX)),{cppdb:FSe}=iu(),rJ=MSe(PSe.access);nJ.exports=async function(e,r){if(r==null&&(r={}),typeof e!="string")throw new TypeError("Expected first argument to be a string");if(typeof r!="object")throw new TypeError("Expected second argument to be an options object");e=e.trim();let n="attached"in r?r.attached:"main",i="progress"in r?r.progress:null;if(!e)throw new TypeError("Backup filename cannot be an empty string");if(e===":memory:")throw new TypeError('Invalid backup filename ":memory:"');if(typeof n!="string")throw new TypeError('Expected the "attached" option to be a string');if(!n)throw new TypeError('The "attached" option cannot be an empty string');if(i!=null&&typeof i!="function")throw new TypeError('Expected the "progress" option to be a function');await rJ(LSe.dirname(e)).catch(()=>{throw new TypeError("Cannot save backup because the directory does not exist")});let o=await rJ(e).then(()=>!1,()=>!0);return USe(this[FSe].backup(this,n,e,o),i||null)};var USe=(t,e)=>{let r=0,n=!0;return new Promise((i,o)=>{setImmediate(function s(){try{let a=t.transfer(r);if(!a.remainingPages){t.close(),i(a);return}if(n&&(n=!1,r=100),e){let l=e(a);if(l!==void 0)if(typeof l=="number"&&l===l)r=Math.max(0,Math.min(2147483647,Math.round(l)));else throw new TypeError("Expected progress callback to return a number or undefined")}setImmediate(s)}catch(a){t.close(),o(a)}})})}});var sJ=Y((b0t,oJ)=>{"use strict";var{cppdb:BSe}=iu();oJ.exports=function(e){if(e==null&&(e={}),typeof e!="object")throw new TypeError("Expected first argument to be an options object");let r="attached"in e?e.attached:"main";if(typeof r!="string")throw new TypeError('Expected the "attached" option to be a string');if(!r)throw new TypeError('The "attached" option cannot be an empty string');return this[BSe].serialize(r)}});var lJ=Y((x0t,aJ)=>{"use strict";var{getBooleanOption:OE,cppdb:WSe}=iu();aJ.exports=function(e,r,n){if(r==null&&(r={}),typeof r=="function"&&(n=r,r={}),typeof e!="string")throw new TypeError("Expected first argument to be a string");if(typeof n!="function")throw new TypeError("Expected last argument to be a function");if(typeof r!="object")throw new TypeError("Expected second argument to be an options object");if(!e)throw new TypeError("User-defined function name cannot be an empty string");let i="safeIntegers"in r?+OE(r,"safeIntegers"):2,o=OE(r,"deterministic"),s=OE(r,"directOnly"),a=OE(r,"varargs"),l=-1;if(!a){if(l=n.length,!Number.isInteger(l)||l<0)throw new TypeError("Expected function.length to be a positive integer");if(l>100)throw new RangeError("User-defined functions cannot have more than 100 arguments")}return this[WSe].function(n,e,l,i,o,s),this}});var dJ=Y((T0t,cJ)=>{"use strict";var{getBooleanOption:RE,cppdb:jSe}=iu();cJ.exports=function(e,r){if(typeof e!="string")throw new TypeError("Expected first argument to be a string");if(typeof r!="object"||r===null)throw new TypeError("Expected second argument to be an options object");if(!e)throw new TypeError("User-defined function name cannot be an empty string");let n="start"in r?r.start:null,i=PL(r,"step",!0),o=PL(r,"inverse",!1),s=PL(r,"result",!1),a="safeIntegers"in r?+RE(r,"safeIntegers"):2,l=RE(r,"deterministic"),c=RE(r,"directOnly"),p=RE(r,"varargs"),f=-1;if(!p&&(f=Math.max(uJ(i),o?uJ(o):0),f>0&&(f-=1),f>100))throw new RangeError("User-defined functions cannot have more than 100 arguments");return this[jSe].aggregate(n,i,o,s,e,f,a,l,c),this};var PL=(t,e,r)=>{let n=e in t?t[e]:null;if(typeof n=="function")return n;if(n!=null)throw new TypeError(`Expected the "${e}" option to be a function`);if(r)throw new TypeError(`Missing required option "${e}"`);return null},uJ=({length:t})=>{if(Number.isInteger(t)&&t>=0)return t;throw new TypeError("Expected function.length to be a positive integer")}});var hJ=Y((w0t,mJ)=>{"use strict";var{cppdb:zSe}=iu();mJ.exports=function(e,r){if(typeof e!="string")throw new TypeError("Expected first argument to be a string");if(!e)throw new TypeError("Virtual table module name cannot be an empty string");let n=!1;if(typeof r=="object"&&r!==null)n=!0,r=XSe(fJ(r,"used",e));else{if(typeof r!="function")throw new TypeError("Expected second argument to be a function or a table definition object");r=$Se(r)}return this[zSe].table(r,e,n),this};function $Se(t){return function(r,n,i,...o){let s={module:r,database:n,table:i},a=KSe.call(t,s,o);if(typeof a!="object"||a===null)throw new TypeError(`Virtual table module "${r}" did not return a table definition object`);return fJ(a,"returned",r)}}function fJ(t,e,r){if(!r_.call(t,"rows"))throw new TypeError(`Virtual table module "${r}" ${e} a table definition without a "rows" property`);if(!r_.call(t,"columns"))throw new TypeError(`Virtual table module "${r}" ${e} a table definition without a "columns" property`);let n=t.rows;if(typeof n!="function"||Object.getPrototypeOf(n)!==YSe)throw new TypeError(`Virtual table module "${r}" ${e} a table definition with an invalid "rows" property (should be a generator function)`);let i=t.columns;if(!Array.isArray(i)||!(i=[...i]).every(c=>typeof c=="string"))throw new TypeError(`Virtual table module "${r}" ${e} a table definition with an invalid "columns" property (should be an array of strings)`);if(i.length!==new Set(i).size)throw new TypeError(`Virtual table module "${r}" ${e} a table definition with duplicate column names`);if(!i.length)throw new RangeError(`Virtual table module "${r}" ${e} a table definition with zero columns`);let o;if(r_.call(t,"parameters")){if(o=t.parameters,!Array.isArray(o)||!(o=[...o]).every(c=>typeof c=="string"))throw new TypeError(`Virtual table module "${r}" ${e} a table definition with an invalid "parameters" property (should be an array of strings)`)}else o=VSe(n);if(o.length!==new Set(o).size)throw new TypeError(`Virtual table module "${r}" ${e} a table definition with duplicate parameter names`);if(o.length>32)throw new RangeError(`Virtual table module "${r}" ${e} a table definition with more than the maximum number of 32 parameters`);for(let c of o)if(i.includes(c))throw new TypeError(`Virtual table module "${r}" ${e} a table definition with column "${c}" which was ambiguously defined as both a column and parameter`);let s=2;if(r_.call(t,"safeIntegers")){let c=t.safeIntegers;if(typeof c!="boolean")throw new TypeError(`Virtual table module "${r}" ${e} a table definition with an invalid "safeIntegers" property (should be a boolean)`);s=+c}let a=!1;if(r_.call(t,"directOnly")&&(a=t.directOnly,typeof a!="boolean"))throw new TypeError(`Virtual table module "${r}" ${e} a table definition with an invalid "directOnly" property (should be a boolean)`);return[`CREATE TABLE x(${[...o.map(pJ).map(c=>`${c} HIDDEN`),...i.map(pJ)].join(", ")});`,HSe(n,new Map(i.map((c,p)=>[c,o.length+p])),r),o,s,a]}function HSe(t,e,r){return function*(...i){let o=i.map(s=>Buffer.isBuffer(s)?Buffer.from(s):s);for(let s=0;s<e.size;++s)o.push(null);for(let s of t(...i))if(Array.isArray(s))qSe(s,o,e.size,r),yield o;else if(typeof s=="object"&&s!==null)GSe(s,o,e,r),yield o;else throw new TypeError(`Virtual table module "${r}" yielded something that isn't a valid row object`)}}function qSe(t,e,r,n){if(t.length!==r)throw new TypeError(`Virtual table module "${n}" yielded a row with an incorrect number of columns`);let i=e.length-r;for(let o=0;o<r;++o)e[o+i]=t[o]}function GSe(t,e,r,n){let i=0;for(let o of Object.keys(t)){let s=r.get(o);if(s===void 0)throw new TypeError(`Virtual table module "${n}" yielded a row with an undeclared column "${o}"`);e[s]=t[o],i+=1}if(i!==r.size)throw new TypeError(`Virtual table module "${n}" yielded a row with missing columns`)}function VSe({length:t}){if(!Number.isInteger(t)||t<0)throw new TypeError("Expected function.length to be a positive integer");let e=[];for(let r=0;r<t;++r)e.push(`$${r+1}`);return e}var{hasOwnProperty:r_}=Object.prototype,{apply:KSe}=Function.prototype,YSe=Object.getPrototypeOf(function*(){}),pJ=t=>`"${t.replace(/"/g,'""')}"`,XSe=t=>()=>t});var yJ=Y((S0t,gJ)=>{"use strict";var JSe=function(){};gJ.exports=function(e,r){return Object.assign(new JSe,this)}});var xJ=Y((E0t,bJ)=>{"use strict";var QSe=(xr(),Vn(_h)),vJ=(Oo(),Vn(bh)),PE=iu(),ZSe=OL(),_J;function po(t,e){if(new.target==null)return new po(t,e);let r;if(Buffer.isBuffer(t)&&(r=t,t=":memory:"),t==null&&(t=""),e==null&&(e={}),typeof t!="string")throw new TypeError("Expected first argument to be a string");if(typeof e!="object")throw new TypeError("Expected second argument to be an options object");if("readOnly"in e)throw new TypeError('Misspelled option "readOnly" should be "readonly"');if("memory"in e)throw new TypeError('Option "memory" was removed in v7.0.0 (use ":memory:" filename instead)');let n=t.trim(),i=n===""||n===":memory:",o=PE.getBooleanOption(e,"readonly"),s=PE.getBooleanOption(e,"fileMustExist"),a="timeout"in e?e.timeout:5e3,l="verbose"in e?e.verbose:null,c="nativeBinding"in e?e.nativeBinding:null;if(o&&i&&!r)throw new TypeError("In-memory/temporary databases cannot be readonly");if(!Number.isInteger(a)||a<0)throw new TypeError('Expected the "timeout" option to be a positive integer');if(a>2147483647)throw new RangeError('Option "timeout" cannot be greater than 2147483647');if(l!=null&&typeof l!="function")throw new TypeError('Expected the "verbose" option to be a function');if(c!=null&&typeof c!="string"&&typeof c!="object")throw new TypeError('Expected the "nativeBinding" option to be a string or addon object');let p;if(c==null?p=_J||(_J=YX()("better_sqlite3.node")):typeof c=="string"?p=(typeof __non_webpack_require__=="function"?__non_webpack_require__:tx)(vJ.resolve(c).replace(/(\.node)?$/,".node")):p=c,p.isInitialized||(p.setErrorConstructor(ZSe),p.isInitialized=!0),!i&&!QSe.existsSync(vJ.dirname(n)))throw new TypeError("Cannot open database because the directory does not exist");Object.defineProperties(this,{[PE.cppdb]:{value:new p.Database(n,t,i,o,s,a,l||null,r||null)},...jf.getters})}var jf=XX();po.prototype.prepare=jf.prepare;po.prototype.transaction=ZX();po.prototype.pragma=tJ();po.prototype.backup=iJ();po.prototype.serialize=sJ();po.prototype.function=lJ();po.prototype.aggregate=dJ();po.prototype.table=hJ();po.prototype.loadExtension=jf.loadExtension;po.prototype.exec=jf.exec;po.prototype.close=jf.close;po.prototype.defaultSafeIntegers=jf.defaultSafeIntegers;po.prototype.unsafeMode=jf.unsafeMode;po.prototype[PE.inspect]=yJ();bJ.exports=po});var TJ=Y((D0t,LL)=>{"use strict";LL.exports=xJ();LL.exports.SqliteError=OL()});var Ws=Y(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.IsValueType=Mt.IsSymbol=Mt.IsFunction=Mt.IsString=Mt.IsBigInt=Mt.IsInteger=Mt.IsNumber=Mt.IsBoolean=Mt.IsNull=Mt.IsUndefined=Mt.IsArray=Mt.IsObject=Mt.IsPlainObject=Mt.HasPropertyKey=Mt.IsDate=Mt.IsUint8Array=Mt.IsPromise=Mt.IsTypedArray=Mt.IsIterator=Mt.IsAsyncIterator=void 0;function eEe(t){return LE(t)&&Symbol.asyncIterator in t}Mt.IsAsyncIterator=eEe;function tEe(t){return LE(t)&&Symbol.iterator in t}Mt.IsIterator=tEe;function rEe(t){return ArrayBuffer.isView(t)}Mt.IsTypedArray=rEe;function nEe(t){return t instanceof Promise}Mt.IsPromise=nEe;function iEe(t){return t instanceof Uint8Array}Mt.IsUint8Array=iEe;function oEe(t){return t instanceof Date&&Number.isFinite(t.getTime())}Mt.IsDate=oEe;function sEe(t,e){return e in t}Mt.HasPropertyKey=sEe;function aEe(t){return LE(t)&&IJ(t.constructor)&&t.constructor.name==="Object"}Mt.IsPlainObject=aEe;function LE(t){return t!==null&&typeof t=="object"}Mt.IsObject=LE;function lEe(t){return Array.isArray(t)&&!ArrayBuffer.isView(t)}Mt.IsArray=lEe;function wJ(t){return t===void 0}Mt.IsUndefined=wJ;function SJ(t){return t===null}Mt.IsNull=SJ;function EJ(t){return typeof t=="boolean"}Mt.IsBoolean=EJ;function ML(t){return typeof t=="number"}Mt.IsNumber=ML;function uEe(t){return ML(t)&&Number.isInteger(t)}Mt.IsInteger=uEe;function CJ(t){return typeof t=="bigint"}Mt.IsBigInt=CJ;function DJ(t){return typeof t=="string"}Mt.IsString=DJ;function IJ(t){return typeof t=="function"}Mt.IsFunction=IJ;function kJ(t){return typeof t=="symbol"}Mt.IsSymbol=kJ;function cEe(t){return CJ(t)||EJ(t)||SJ(t)||ML(t)||DJ(t)||kJ(t)||wJ(t)}Mt.IsValueType=cEe});var UL=Y(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.DefaultErrorFunction=as.TypeSystemPolicy=as.TypeSystemErrorFunction=as.TypeSystem=as.TypeSystemDuplicateFormat=as.TypeSystemDuplicateTypeKind=void 0;var ME=Ws(),Ze=BE(),vc=xa(),FE=class extends vc.TypeBoxError{constructor(e){super(`Duplicate type kind '${e}' detected`)}};as.TypeSystemDuplicateTypeKind=FE;var UE=class extends vc.TypeBoxError{constructor(e){super(`Duplicate string format '${e}' detected`)}};as.TypeSystemDuplicateFormat=UE;var NJ;(function(t){function e(n,i){if(vc.TypeRegistry.Has(n))throw new FE(n);return vc.TypeRegistry.Set(n,i),(o={})=>vc.Type.Unsafe({...o,[vc.Kind]:n})}t.Type=e;function r(n,i){if(vc.FormatRegistry.Has(n))throw new UE(n);return vc.FormatRegistry.Set(n,i),n}t.Format=r})(NJ||(as.TypeSystem=NJ={}));var AJ;(function(t){let e=FL;function r(){e=FL}t.Reset=r;function n(o){e=o}t.Set=n;function i(){return e}t.Get=i})(AJ||(as.TypeSystemErrorFunction=AJ={}));var OJ;(function(t){t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(s,a){return t.ExactOptionalPropertyTypes?a in s:s[a]!==void 0}t.IsExactOptionalProperty=e;function r(s){let a=(0,ME.IsObject)(s);return t.AllowArrayObject?a:a&&!(0,ME.IsArray)(s)}t.IsObjectLike=r;function n(s){return r(s)&&!(s instanceof Date)&&!(s instanceof Uint8Array)}t.IsRecordLike=n;function i(s){let a=(0,ME.IsNumber)(s);return t.AllowNaN?a:a&&Number.isFinite(s)}t.IsNumberLike=i;function o(s){let a=(0,ME.IsUndefined)(s);return t.AllowNullVoid?a||s===null:a}t.IsVoidLike=o})(OJ||(as.TypeSystemPolicy=OJ={}));function FL(t,e){switch(e){case Ze.ValueErrorType.ArrayContains:return"Expected array to contain at least one matching value";case Ze.ValueErrorType.ArrayMaxContains:return`Expected array to contain no more than ${t.maxContains} matching values`;case Ze.ValueErrorType.ArrayMinContains:return`Expected array to contain at least ${t.minContains} matching values`;case Ze.ValueErrorType.ArrayMaxItems:return`Expected array length to be less or equal to ${t.maxItems}`;case Ze.ValueErrorType.ArrayMinItems:return`Expected array length to be greater or equal to ${t.minItems}`;case Ze.ValueErrorType.ArrayUniqueItems:return"Expected array elements to be unique";case Ze.ValueErrorType.Array:return"Expected array";case Ze.ValueErrorType.AsyncIterator:return"Expected AsyncIterator";case Ze.ValueErrorType.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.exclusiveMaximum}`;case Ze.ValueErrorType.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.exclusiveMinimum}`;case Ze.ValueErrorType.BigIntMaximum:return`Expected bigint to be less or equal to ${t.maximum}`;case Ze.ValueErrorType.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.minimum}`;case Ze.ValueErrorType.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.multipleOf}`;case Ze.ValueErrorType.BigInt:return"Expected bigint";case Ze.ValueErrorType.Boolean:return"Expected boolean";case Ze.ValueErrorType.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.exclusiveMinimumTimestamp}`;case Ze.ValueErrorType.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.exclusiveMaximumTimestamp}`;case Ze.ValueErrorType.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.minimumTimestamp}`;case Ze.ValueErrorType.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.maximumTimestamp}`;case Ze.ValueErrorType.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.multipleOfTimestamp}`;case Ze.ValueErrorType.Date:return"Expected Date";case Ze.ValueErrorType.Function:return"Expected function";case Ze.ValueErrorType.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.exclusiveMaximum}`;case Ze.ValueErrorType.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.exclusiveMinimum}`;case Ze.ValueErrorType.IntegerMaximum:return`Expected integer to be less or equal to ${t.maximum}`;case Ze.ValueErrorType.IntegerMinimum:return`Expected integer to be greater or equal to ${t.minimum}`;case Ze.ValueErrorType.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.multipleOf}`;case Ze.ValueErrorType.Integer:return"Expected integer";case Ze.ValueErrorType.IntersectUnevaluatedProperties:return"Unexpected property";case Ze.ValueErrorType.Intersect:return"Expected all values to match";case Ze.ValueErrorType.Iterator:return"Expected Iterator";case Ze.ValueErrorType.Literal:return`Expected ${typeof t.const=="string"?`'${t.const}'`:t.const}`;case Ze.ValueErrorType.Never:return"Never";case Ze.ValueErrorType.Not:return"Value should not match";case Ze.ValueErrorType.Null:return"Expected null";case Ze.ValueErrorType.NumberExclusiveMaximum:return`Expected number to be less than ${t.exclusiveMaximum}`;case Ze.ValueErrorType.NumberExclusiveMinimum:return`Expected number to be greater than ${t.exclusiveMinimum}`;case Ze.ValueErrorType.NumberMaximum:return`Expected number to be less or equal to ${t.maximum}`;case Ze.ValueErrorType.NumberMinimum:return`Expected number to be greater or equal to ${t.minimum}`;case Ze.ValueErrorType.NumberMultipleOf:return`Expected number to be a multiple of ${t.multipleOf}`;case Ze.ValueErrorType.Number:return"Expected number";case Ze.ValueErrorType.Object:return"Expected object";case Ze.ValueErrorType.ObjectAdditionalProperties:return"Unexpected property";case Ze.ValueErrorType.ObjectMaxProperties:return`Expected object to have no more than ${t.maxProperties} properties`;case Ze.ValueErrorType.ObjectMinProperties:return`Expected object to have at least ${t.minProperties} properties`;case Ze.ValueErrorType.ObjectRequiredProperty:return"Required property";case Ze.ValueErrorType.Promise:return"Expected Promise";case Ze.ValueErrorType.StringFormatUnknown:return`Unknown format '${t.format}'`;case Ze.ValueErrorType.StringFormat:return`Expected string to match '${t.format}' format`;case Ze.ValueErrorType.StringMaxLength:return`Expected string length less or equal to ${t.maxLength}`;case Ze.ValueErrorType.StringMinLength:return`Expected string length greater or equal to ${t.minLength}`;case Ze.ValueErrorType.StringPattern:return`Expected string to match '${t.pattern}'`;case Ze.ValueErrorType.String:return"Expected string";case Ze.ValueErrorType.Symbol:return"Expected symbol";case Ze.ValueErrorType.TupleLength:return`Expected tuple to have ${t.maxItems||0} elements`;case Ze.ValueErrorType.Tuple:return"Expected tuple";case Ze.ValueErrorType.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.maxByteLength}`;case Ze.ValueErrorType.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.minByteLength}`;case Ze.ValueErrorType.Uint8Array:return"Expected Uint8Array";case Ze.ValueErrorType.Undefined:return"Expected undefined";case Ze.ValueErrorType.Union:return"Expected union value";case Ze.ValueErrorType.Void:return"Expected void";case Ze.ValueErrorType.Kind:return`Expected kind '${t[vc.Kind]}'`;default:return"Unknown error type"}}as.DefaultErrorFunction=FL});var zf=Y(gg=>{"use strict";Object.defineProperty(gg,"__esModule",{value:!0});gg.Deref=gg.TypeDereferenceError=void 0;var dEe=xa(),WE=class extends dEe.TypeBoxError{constructor(e){super(`Unable to dereference schema with $id '${e.$id}'`),this.schema=e}};gg.TypeDereferenceError=WE;function pEe(t,e){let r=e.findIndex(n=>n.$id===t.$ref);if(r===-1)throw new WE(t);return e[r]}gg.Deref=pEe});var zE=Y(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});pp.Hash=pp.ByteMarker=pp.ValueHashError=void 0;var ul=Ws(),jE=class extends Error{constructor(e){super("Unable to hash value"),this.value=e}};pp.ValueHashError=jE;var js;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(js||(pp.ByteMarker=js={}));var yg=BigInt("14695981039346656037"),[fEe,mEe]=[BigInt("1099511628211"),BigInt("2")**BigInt("64")],hEe=Array.from({length:256}).map((t,e)=>BigInt(e)),RJ=new Float64Array(1),PJ=new DataView(RJ.buffer),LJ=new Uint8Array(RJ.buffer);function*gEe(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}function yEe(t){fo(js.Array);for(let e of t)vg(e)}function vEe(t){fo(js.Boolean),fo(t?1:0)}function _Ee(t){fo(js.BigInt),PJ.setBigInt64(0,t);for(let e of LJ)fo(e)}function bEe(t){fo(js.Date),vg(t.getTime())}function xEe(t){fo(js.Null)}function TEe(t){fo(js.Number),PJ.setFloat64(0,t);for(let e of LJ)fo(e)}function wEe(t){fo(js.Object);for(let e of globalThis.Object.keys(t).sort())vg(e),vg(t[e])}function SEe(t){fo(js.String);for(let e=0;e<t.length;e++)for(let r of gEe(t.charCodeAt(e)))fo(r)}function EEe(t){fo(js.Symbol),vg(t.description)}function CEe(t){fo(js.Uint8Array);for(let e=0;e<t.length;e++)fo(t[e])}function DEe(t){return fo(js.Undefined)}function vg(t){if((0,ul.IsArray)(t))return yEe(t);if((0,ul.IsBoolean)(t))return vEe(t);if((0,ul.IsBigInt)(t))return _Ee(t);if((0,ul.IsDate)(t))return bEe(t);if((0,ul.IsNull)(t))return xEe(t);if((0,ul.IsNumber)(t))return TEe(t);if((0,ul.IsPlainObject)(t))return wEe(t);if((0,ul.IsString)(t))return SEe(t);if((0,ul.IsSymbol)(t))return EEe(t);if((0,ul.IsUint8Array)(t))return CEe(t);if((0,ul.IsUndefined)(t))return DEe(t);throw new jE(t)}function fo(t){yg=yg^hEe[t],yg=yg*fEe%mEe}function IEe(t){return yg=BigInt("14695981039346656037"),vg(t),yg}pp.Hash=IEe});var BE=Y(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.Errors=Sa.ValueErrorIterator=Sa.EscapeKey=Sa.ValueErrorsUnknownTypeError=Sa.ValueErrorType=void 0;var Qn=Ws(),_g=UL(),MJ=zf(),kEe=zE(),Ea=xa(),ze;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.StringFormatUnknown=48]="StringFormatUnknown",t[t.StringFormat=49]="StringFormat",t[t.StringMaxLength=50]="StringMaxLength",t[t.StringMinLength=51]="StringMinLength",t[t.StringPattern=52]="StringPattern",t[t.String=53]="String",t[t.Symbol=54]="Symbol",t[t.TupleLength=55]="TupleLength",t[t.Tuple=56]="Tuple",t[t.Uint8ArrayMaxByteLength=57]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=58]="Uint8ArrayMinByteLength",t[t.Uint8Array=59]="Uint8Array",t[t.Undefined=60]="Undefined",t[t.Union=61]="Union",t[t.Void=62]="Void"})(ze||(Sa.ValueErrorType=ze={}));var $E=class extends Ea.TypeBoxError{constructor(e){super("Unknown type"),this.schema=e}};Sa.ValueErrorsUnknownTypeError=$E;function ou(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}Sa.EscapeKey=ou;function er(t){return t!==void 0}var HE=class{constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};Sa.ValueErrorIterator=HE;function He(t,e,r,n){return{type:t,schema:e,path:r,value:n,message:_g.TypeSystemErrorFunction.Get()(e,t)}}function*NEe(t,e,r,n){}function*AEe(t,e,r,n){if(!(0,Qn.IsArray)(n))return yield He(ze.Array,t,r,n);er(t.minItems)&&!(n.length>=t.minItems)&&(yield He(ze.ArrayMinItems,t,r,n)),er(t.maxItems)&&!(n.length<=t.maxItems)&&(yield He(ze.ArrayMaxItems,t,r,n));for(let s=0;s<n.length;s++)yield*zi(t.items,e,`${r}/${s}`,n[s]);if(t.uniqueItems===!0&&!function(){let s=new Set;for(let a of n){let l=(0,kEe.Hash)(a);if(s.has(l))return!1;s.add(l)}return!0}()&&(yield He(ze.ArrayUniqueItems,t,r,n)),!(er(t.contains)||er(t.minContains)||er(t.maxContains)))return;let i=er(t.contains)?t.contains:Ea.Type.Never(),o=n.reduce((s,a,l)=>zi(i,e,`${r}${l}`,a).next().done===!0?s+1:s,0);o===0&&(yield He(ze.ArrayContains,t,r,n)),(0,Qn.IsNumber)(t.minContains)&&o<t.minContains&&(yield He(ze.ArrayMinContains,t,r,n)),(0,Qn.IsNumber)(t.maxContains)&&o>t.maxContains&&(yield He(ze.ArrayMaxContains,t,r,n))}function*OEe(t,e,r,n){(0,Qn.IsAsyncIterator)(n)||(yield He(ze.AsyncIterator,t,r,n))}function*REe(t,e,r,n){if(!(0,Qn.IsBigInt)(n))return yield He(ze.BigInt,t,r,n);er(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield He(ze.BigIntExclusiveMaximum,t,r,n)),er(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield He(ze.BigIntExclusiveMinimum,t,r,n)),er(t.maximum)&&!(n<=t.maximum)&&(yield He(ze.BigIntMaximum,t,r,n)),er(t.minimum)&&!(n>=t.minimum)&&(yield He(ze.BigIntMinimum,t,r,n)),er(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield He(ze.BigIntMultipleOf,t,r,n))}function*PEe(t,e,r,n){(0,Qn.IsBoolean)(n)||(yield He(ze.Boolean,t,r,n))}function*LEe(t,e,r,n){yield*zi(t.returns,e,r,n.prototype)}function*MEe(t,e,r,n){if(!(0,Qn.IsDate)(n))return yield He(ze.Date,t,r,n);er(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield He(ze.DateExclusiveMaximumTimestamp,t,r,n)),er(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield He(ze.DateExclusiveMinimumTimestamp,t,r,n)),er(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield He(ze.DateMaximumTimestamp,t,r,n)),er(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield He(ze.DateMinimumTimestamp,t,r,n)),er(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield He(ze.DateMultipleOfTimestamp,t,r,n))}function*FEe(t,e,r,n){(0,Qn.IsFunction)(n)||(yield He(ze.Function,t,r,n))}function*UEe(t,e,r,n){if(!(0,Qn.IsInteger)(n))return yield He(ze.Integer,t,r,n);er(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield He(ze.IntegerExclusiveMaximum,t,r,n)),er(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield He(ze.IntegerExclusiveMinimum,t,r,n)),er(t.maximum)&&!(n<=t.maximum)&&(yield He(ze.IntegerMaximum,t,r,n)),er(t.minimum)&&!(n>=t.minimum)&&(yield He(ze.IntegerMinimum,t,r,n)),er(t.multipleOf)&&n%t.multipleOf!==0&&(yield He(ze.IntegerMultipleOf,t,r,n))}function*BEe(t,e,r,n){for(let i of t.allOf){let o=zi(i,e,r,n).next();o.done||(yield He(ze.Intersect,t,r,n),yield o.value)}if(t.unevaluatedProperties===!1){let i=new RegExp(Ea.KeyResolver.ResolvePattern(t));for(let o of Object.getOwnPropertyNames(n))i.test(o)||(yield He(ze.IntersectUnevaluatedProperties,t,`${r}/${o}`,n))}if(typeof t.unevaluatedProperties=="object"){let i=new RegExp(Ea.KeyResolver.ResolvePattern(t));for(let o of Object.getOwnPropertyNames(n))if(!i.test(o)){let s=zi(t.unevaluatedProperties,e,`${r}/${o}`,n[o]).next();s.done||(yield s.value)}}}function*WEe(t,e,r,n){(0,Qn.IsIterator)(n)||(yield He(ze.Iterator,t,r,n))}function*jEe(t,e,r,n){n!==t.const&&(yield He(ze.Literal,t,r,n))}function*zEe(t,e,r,n){yield He(ze.Never,t,r,n)}function*$Ee(t,e,r,n){zi(t.not,e,r,n).next().done===!0&&(yield He(ze.Not,t,r,n))}function*HEe(t,e,r,n){(0,Qn.IsNull)(n)||(yield He(ze.Null,t,r,n))}function*qEe(t,e,r,n){if(!_g.TypeSystemPolicy.IsNumberLike(n))return yield He(ze.Number,t,r,n);er(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield He(ze.NumberExclusiveMaximum,t,r,n)),er(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield He(ze.NumberExclusiveMinimum,t,r,n)),er(t.maximum)&&!(n<=t.maximum)&&(yield He(ze.NumberMaximum,t,r,n)),er(t.minimum)&&!(n>=t.minimum)&&(yield He(ze.NumberMinimum,t,r,n)),er(t.multipleOf)&&n%t.multipleOf!==0&&(yield He(ze.NumberMultipleOf,t,r,n))}function*GEe(t,e,r,n){if(!_g.TypeSystemPolicy.IsObjectLike(n))return yield He(ze.Object,t,r,n);er(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield He(ze.ObjectMinProperties,t,r,n)),er(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield He(ze.ObjectMaxProperties,t,r,n));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),s=Object.getOwnPropertyNames(n);for(let a of i)s.includes(a)||(yield He(ze.ObjectRequiredProperty,t.properties[a],`${r}/${ou(a)}`,void 0));if(t.additionalProperties===!1)for(let a of s)o.includes(a)||(yield He(ze.ObjectAdditionalProperties,t,`${r}/${ou(a)}`,n[a]));if(typeof t.additionalProperties=="object")for(let a of s)o.includes(a)||(yield*zi(t.additionalProperties,e,`${r}/${ou(a)}`,n[a]));for(let a of o){let l=t.properties[a];t.required&&t.required.includes(a)?(yield*zi(l,e,`${r}/${ou(a)}`,n[a]),Ea.ExtendsUndefined.Check(t)&&!(a in n)&&(yield He(ze.ObjectRequiredProperty,l,`${r}/${ou(a)}`,void 0))):_g.TypeSystemPolicy.IsExactOptionalProperty(n,a)&&(yield*zi(l,e,`${r}/${ou(a)}`,n[a]))}}function*VEe(t,e,r,n){(0,Qn.IsPromise)(n)||(yield He(ze.Promise,t,r,n))}function*KEe(t,e,r,n){if(!_g.TypeSystemPolicy.IsRecordLike(n))return yield He(ze.Object,t,r,n);er(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield He(ze.ObjectMinProperties,t,r,n)),er(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield He(ze.ObjectMaxProperties,t,r,n));let[i,o]=Object.entries(t.patternProperties)[0],s=new RegExp(i);for(let[a,l]of Object.entries(n))s.test(a)&&(yield*zi(o,e,`${r}/${ou(a)}`,l));if(typeof t.additionalProperties=="object")for(let[a,l]of Object.entries(n))s.test(a)||(yield*zi(t.additionalProperties,e,`${r}/${ou(a)}`,l));if(t.additionalProperties===!1){for(let[a,l]of Object.entries(n))if(!s.test(a))return yield He(ze.ObjectAdditionalProperties,t,`${r}/${ou(a)}`,l)}}function*YEe(t,e,r,n){yield*zi((0,MJ.Deref)(t,e),e,r,n)}function*XEe(t,e,r,n){if(!(0,Qn.IsString)(n))return yield He(ze.String,t,r,n);er(t.minLength)&&!(n.length>=t.minLength)&&(yield He(ze.StringMinLength,t,r,n)),er(t.maxLength)&&!(n.length<=t.maxLength)&&(yield He(ze.StringMaxLength,t,r,n)),(0,Qn.IsString)(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield He(ze.StringPattern,t,r,n))),(0,Qn.IsString)(t.format)&&(Ea.FormatRegistry.Has(t.format)?Ea.FormatRegistry.Get(t.format)(n)||(yield He(ze.StringFormat,t,r,n)):yield He(ze.StringFormatUnknown,t,r,n))}function*JEe(t,e,r,n){(0,Qn.IsSymbol)(n)||(yield He(ze.Symbol,t,r,n))}function*QEe(t,e,r,n){if(!(0,Qn.IsString)(n))return yield He(ze.String,t,r,n);new RegExp(t.pattern).test(n)||(yield He(ze.StringPattern,t,r,n))}function*ZEe(t,e,r,n){yield*zi((0,MJ.Deref)(t,e),e,r,n)}function*eCe(t,e,r,n){if(!(0,Qn.IsArray)(n))return yield He(ze.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield He(ze.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield He(ze.TupleLength,t,r,n);if(t.items)for(let i=0;i<t.items.length;i++)yield*zi(t.items[i],e,`${r}/${i}`,n[i])}function*tCe(t,e,r,n){(0,Qn.IsUndefined)(n)||(yield He(ze.Undefined,t,r,n))}function*rCe(t,e,r,n){let i=0;for(let o of t.anyOf){let s=[...zi(o,e,r,n)];if(s.length===0)return;i+=s.length}i>0&&(yield He(ze.Union,t,r,n))}function*nCe(t,e,r,n){if(!(0,Qn.IsUint8Array)(n))return yield He(ze.Uint8Array,t,r,n);er(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield He(ze.Uint8ArrayMaxByteLength,t,r,n)),er(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield He(ze.Uint8ArrayMinByteLength,t,r,n))}function*iCe(t,e,r,n){}function*oCe(t,e,r,n){_g.TypeSystemPolicy.IsVoidLike(n)||(yield He(ze.Void,t,r,n))}function*sCe(t,e,r,n){Ea.TypeRegistry.Get(t[Ea.Kind])(t,n)||(yield He(ze.Kind,t,r,n))}function*zi(t,e,r,n){let i=er(t.$id)?[...e,t]:e,o=t;switch(o[Ea.Kind]){case"Any":return yield*NEe(o,i,r,n);case"Array":return yield*AEe(o,i,r,n);case"AsyncIterator":return yield*OEe(o,i,r,n);case"BigInt":return yield*REe(o,i,r,n);case"Boolean":return yield*PEe(o,i,r,n);case"Constructor":return yield*LEe(o,i,r,n);case"Date":return yield*MEe(o,i,r,n);case"Function":return yield*FEe(o,i,r,n);case"Integer":return yield*UEe(o,i,r,n);case"Intersect":return yield*BEe(o,i,r,n);case"Iterator":return yield*WEe(o,i,r,n);case"Literal":return yield*jEe(o,i,r,n);case"Never":return yield*zEe(o,i,r,n);case"Not":return yield*$Ee(o,i,r,n);case"Null":return yield*HEe(o,i,r,n);case"Number":return yield*qEe(o,i,r,n);case"Object":return yield*GEe(o,i,r,n);case"Promise":return yield*VEe(o,i,r,n);case"Record":return yield*KEe(o,i,r,n);case"Ref":return yield*YEe(o,i,r,n);case"String":return yield*XEe(o,i,r,n);case"Symbol":return yield*JEe(o,i,r,n);case"TemplateLiteral":return yield*QEe(o,i,r,n);case"This":return yield*ZEe(o,i,r,n);case"Tuple":return yield*eCe(o,i,r,n);case"Undefined":return yield*tCe(o,i,r,n);case"Union":return yield*rCe(o,i,r,n);case"Uint8Array":return yield*nCe(o,i,r,n);case"Unknown":return yield*iCe(o,i,r,n);case"Void":return yield*oCe(o,i,r,n);default:if(!Ea.TypeRegistry.Has(o[Ea.Kind]))throw new $E(t);return yield*sCe(o,i,r,n)}}function aCe(...t){let e=t.length===3?zi(t[0],t[1],"",t[2]):zi(t[0],[],"",t[1]);return new HE(e)}Sa.Errors=aCe});var BL=Y($f=>{"use strict";var lCe=$f&&$f.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uCe=$f&&$f.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&lCe(e,t,r)};Object.defineProperty($f,"__esModule",{value:!0});uCe(BE(),$f)});var VE=Y(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.ValuePointer=fp.ValuePointerRootDeleteError=fp.ValuePointerRootSetError=void 0;var qE=class extends Error{constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}};fp.ValuePointerRootSetError=qE;var GE=class extends Error{constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};fp.ValuePointerRootDeleteError=GE;var FJ;(function(t){function e(a){return a.indexOf("~")===-1?a:a.replace(/~1/g,"/").replace(/~0/g,"~")}function*r(a){if(a==="")return;let[l,c]=[0,0];for(let p=0;p<a.length;p++)a.charAt(p)==="/"?(p===0||(c=p,yield e(a.slice(l,c))),l=p+1):c=p;yield e(a.slice(l))}t.Format=r;function n(a,l,c){if(l==="")throw new qE(a,l,c);let[p,f,m]=[null,a,""];for(let g of r(l))f[g]===void 0&&(f[g]={}),p=f,f=f[g],m=g;p[m]=c}t.Set=n;function i(a,l){if(l==="")throw new GE(a,l);let[c,p,f]=[null,a,""];for(let m of r(l)){if(p[m]===void 0||p[m]===null)return;c=p,p=p[m],f=m}if(Array.isArray(c)){let m=parseInt(f);c.splice(m,1)}else delete c[f]}t.Delete=i;function o(a,l){if(l==="")return!0;let[c,p,f]=[null,a,""];for(let m of r(l)){if(p[m]===void 0)return!1;c=p,p=p[m],f=m}return Object.getOwnPropertyNames(c).includes(f)}t.Has=o;function s(a,l){if(l==="")return a;let c=a;for(let p of r(l)){if(c[p]===void 0)return;c=c[p]}return c}t.Get=s})(FJ||(fp.ValuePointer=FJ={}))});var bg=Y(KE=>{"use strict";Object.defineProperty(KE,"__esModule",{value:!0});KE.Clone=void 0;var n_=Ws();function cCe(t){return[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)].reduce((r,n)=>({...r,[n]:WL(t[n])}),{})}function dCe(t){return t.map(e=>WL(e))}function pCe(t){return t.slice()}function fCe(t){return new Date(t.toISOString())}function WL(t){if((0,n_.IsArray)(t))return dCe(t);if((0,n_.IsDate)(t))return fCe(t);if((0,n_.IsPlainObject)(t))return cCe(t);if((0,n_.IsTypedArray)(t))return pCe(t);if((0,n_.IsValueType)(t))return t;throw new Error("ValueClone: Unable to clone value")}KE.Clone=WL});var $L=Y(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.Patch=jn.Diff=jn.ValueDeltaUnableToDiffUnknownValue=jn.ValueDeltaObjectWithSymbolKeyError=jn.Edit=jn.Delete=jn.Update=jn.Insert=void 0;var mo=Ws(),Ca=xa(),jL=VE(),zL=bg();jn.Insert=Ca.Type.Object({type:Ca.Type.Literal("insert"),path:Ca.Type.String(),value:Ca.Type.Unknown()});jn.Update=Ca.Type.Object({type:Ca.Type.Literal("update"),path:Ca.Type.String(),value:Ca.Type.Unknown()});jn.Delete=Ca.Type.Object({type:Ca.Type.Literal("delete"),path:Ca.Type.String()});jn.Edit=Ca.Type.Union([jn.Insert,jn.Update,jn.Delete]);var Hf=class extends Error{constructor(e){super("Cannot diff objects with symbol keys"),this.key=e}};jn.ValueDeltaObjectWithSymbolKeyError=Hf;var YE=class extends Error{constructor(e){super("Unable to create diff edits for unknown value"),this.value=e}};jn.ValueDeltaUnableToDiffUnknownValue=YE;function i_(t,e){return{type:"update",path:t,value:e}}function UJ(t,e){return{type:"insert",path:t,value:e}}function BJ(t){return{type:"delete",path:t}}function*mCe(t,e,r){if(!(0,mo.IsPlainObject)(r))return yield i_(t,r);let n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)],i=[...Object.keys(r),...Object.getOwnPropertySymbols(r)];for(let o of n){if((0,mo.IsSymbol)(o))throw new Hf(o);(0,mo.IsUndefined)(r[o])&&i.includes(o)&&(yield i_(`${t}/${String(o)}`,void 0))}for(let o of i)if(!((0,mo.IsUndefined)(e[o])||(0,mo.IsUndefined)(r[o]))){if((0,mo.IsSymbol)(o))throw new Hf(o);yield*XE(`${t}/${String(o)}`,e[o],r[o])}for(let o of i){if((0,mo.IsSymbol)(o))throw new Hf(o);(0,mo.IsUndefined)(e[o])&&(yield UJ(`${t}/${String(o)}`,r[o]))}for(let o of n.reverse()){if((0,mo.IsSymbol)(o))throw new Hf(o);(0,mo.IsUndefined)(r[o])&&!i.includes(o)&&(yield BJ(`${t}/${String(o)}`))}}function*hCe(t,e,r){if(!(0,mo.IsArray)(r))return yield i_(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*XE(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield UJ(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield BJ(`${t}/${n}`))}function*gCe(t,e,r){if(!(0,mo.IsTypedArray)(r)||e.length!==r.length||Object.getPrototypeOf(e).constructor.name!==Object.getPrototypeOf(r).constructor.name)return yield i_(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*XE(`${t}/${n}`,e[n],r[n])}function*yCe(t,e,r){e!==r&&(yield i_(t,r))}function*XE(t,e,r){if((0,mo.IsPlainObject)(e))return yield*mCe(t,e,r);if((0,mo.IsArray)(e))return yield*hCe(t,e,r);if((0,mo.IsTypedArray)(e))return yield*gCe(t,e,r);if((0,mo.IsValueType)(e))return yield*yCe(t,e,r);throw new YE(e)}function vCe(t,e){return[...XE("",t,e)]}jn.Diff=vCe;function _Ce(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}function bCe(t){return t.length===0}function xCe(t,e){if(_Ce(e))return(0,zL.Clone)(e[0].value);if(bCe(e))return(0,zL.Clone)(t);let r=(0,zL.Clone)(t);for(let n of e)switch(n.type){case"insert":{jL.ValuePointer.Set(r,n.path,n.value);break}case"update":{jL.ValuePointer.Set(r,n.path,n.value);break}case"delete":{jL.ValuePointer.Delete(r,n.path);break}}return r}jn.Patch=xCe});var jJ=Y(mp=>{"use strict";Object.defineProperty(mp,"__esModule",{value:!0});mp.Mutate=mp.ValueMutateInvalidRootMutationError=mp.ValueMutateTypeMismatchError=void 0;var zs=Ws(),ZE=VE(),HL=bg(),JE=class extends Error{constructor(){super("Cannot assign due type mismatch of assignable values")}};mp.ValueMutateTypeMismatchError=JE;var QE=class extends Error{constructor(){super("Only object and array types can be mutated at the root level")}};mp.ValueMutateInvalidRootMutationError=QE;function TCe(t,e,r,n){if(!(0,zs.IsPlainObject)(r))ZE.ValuePointer.Set(t,e,(0,HL.Clone)(n));else{let i=Object.keys(r),o=Object.keys(n);for(let s of i)o.includes(s)||delete r[s];for(let s of o)i.includes(s)||(r[s]=null);for(let s of o)qL(t,`${e}/${s}`,r[s],n[s])}}function wCe(t,e,r,n){if(!(0,zs.IsArray)(r))ZE.ValuePointer.Set(t,e,(0,HL.Clone)(n));else{for(let i=0;i<n.length;i++)qL(t,`${e}/${i}`,r[i],n[i]);r.splice(n.length)}}function SCe(t,e,r,n){if((0,zs.IsTypedArray)(r)&&r.length===n.length)for(let i=0;i<r.length;i++)r[i]=n[i];else ZE.ValuePointer.Set(t,e,(0,HL.Clone)(n))}function ECe(t,e,r,n){r!==n&&ZE.ValuePointer.Set(t,e,n)}function qL(t,e,r,n){if((0,zs.IsArray)(n))return wCe(t,e,r,n);if((0,zs.IsTypedArray)(n))return SCe(t,e,r,n);if((0,zs.IsPlainObject)(n))return TCe(t,e,r,n);if((0,zs.IsValueType)(n))return ECe(t,e,r,n)}function WJ(t){return(0,zs.IsTypedArray)(t)||(0,zs.IsValueType)(t)}function CCe(t,e){return(0,zs.IsPlainObject)(t)&&(0,zs.IsArray)(e)||(0,zs.IsArray)(t)&&(0,zs.IsPlainObject)(e)}function DCe(t,e){if(WJ(t)||WJ(e))throw new QE;if(CCe(t,e))throw new JE;qL(t,"",t,e)}mp.Mutate=DCe});var zJ=Y(tC=>{"use strict";Object.defineProperty(tC,"__esModule",{value:!0});tC.Equal=void 0;var _c=Ws();function ICe(t,e){if(!(0,_c.IsPlainObject)(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(i=>eC(t[i],e[i]))}function kCe(t,e){return(0,_c.IsDate)(e)&&t.getTime()===e.getTime()}function NCe(t,e){return!(0,_c.IsArray)(e)||t.length!==e.length?!1:t.every((r,n)=>eC(r,e[n]))}function ACe(t,e){return!(0,_c.IsTypedArray)(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>eC(r,e[n]))}function OCe(t,e){return t===e}function eC(t,e){if((0,_c.IsPlainObject)(t))return ICe(t,e);if((0,_c.IsDate)(t))return kCe(t,e);if((0,_c.IsTypedArray)(t))return ACe(t,e);if((0,_c.IsArray)(t))return NCe(t,e);if((0,_c.IsValueType)(t))return OCe(t,e);throw new Error("ValueEquals: Unable to compare value")}tC.Equal=eC});var $J=Y(bc=>{"use strict";var RCe=bc&&bc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),PCe=bc&&bc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&RCe(e,t,r)};Object.defineProperty(bc,"__esModule",{value:!0});bc.ValueErrorType=void 0;var LCe=BE();Object.defineProperty(bc,"ValueErrorType",{enumerable:!0,get:function(){return LCe.ValueErrorType}});PCe(UL(),bc)});var Tg=Y(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});xg.Check=xg.ValueCheckUnknownTypeError=void 0;var Zn=Ws(),o_=$J(),HJ=zf(),MCe=zE(),$i=xa(),rC=class extends $i.TypeBoxError{constructor(e){super("Unknown type"),this.schema=e}};xg.ValueCheckUnknownTypeError=rC;function FCe(t){return t[$i.Kind]==="Any"||t[$i.Kind]==="Unknown"}function tr(t){return t!==void 0}function UCe(t,e,r){return!0}function BCe(t,e,r){if(!(0,Zn.IsArray)(r)||tr(t.minItems)&&!(r.length>=t.minItems)||tr(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(o=>Hi(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let s of r){let a=(0,MCe.Hash)(s);if(o.has(a))return!1;o.add(a)}return!0}())return!1;if(!(tr(t.contains)||(0,Zn.IsNumber)(t.minContains)||(0,Zn.IsNumber)(t.maxContains)))return!0;let n=tr(t.contains)?t.contains:$i.Type.Never(),i=r.reduce((o,s)=>Hi(n,e,s)?o+1:o,0);return!(i===0||(0,Zn.IsNumber)(t.minContains)&&i<t.minContains||(0,Zn.IsNumber)(t.maxContains)&&i>t.maxContains)}function WCe(t,e,r){return(0,Zn.IsAsyncIterator)(r)}function jCe(t,e,r){return!(!(0,Zn.IsBigInt)(r)||tr(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||tr(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||tr(t.maximum)&&!(r<=t.maximum)||tr(t.minimum)&&!(r>=t.minimum)||tr(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}function zCe(t,e,r){return(0,Zn.IsBoolean)(r)}function $Ce(t,e,r){return Hi(t.returns,e,r.prototype)}function HCe(t,e,r){return!(!(0,Zn.IsDate)(r)||tr(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||tr(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||tr(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||tr(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||tr(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}function qCe(t,e,r){return(0,Zn.IsFunction)(r)}function GCe(t,e,r){return!(!(0,Zn.IsInteger)(r)||tr(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||tr(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||tr(t.maximum)&&!(r<=t.maximum)||tr(t.minimum)&&!(r>=t.minimum)||tr(t.multipleOf)&&r%t.multipleOf!==0)}function VCe(t,e,r){let n=t.allOf.every(i=>Hi(i,e,r));if(t.unevaluatedProperties===!1){let i=new RegExp($i.KeyResolver.ResolvePattern(t)),o=Object.getOwnPropertyNames(r).every(s=>i.test(s));return n&&o}else if($i.TypeGuard.TSchema(t.unevaluatedProperties)){let i=new RegExp($i.KeyResolver.ResolvePattern(t)),o=Object.getOwnPropertyNames(r).every(s=>i.test(s)||Hi(t.unevaluatedProperties,e,r[s]));return n&&o}else return n}function KCe(t,e,r){return(0,Zn.IsIterator)(r)}function YCe(t,e,r){return r===t.const}function XCe(t,e,r){return!1}function JCe(t,e,r){return!Hi(t.not,e,r)}function QCe(t,e,r){return(0,Zn.IsNull)(r)}function ZCe(t,e,r){return!(!o_.TypeSystemPolicy.IsNumberLike(r)||tr(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||tr(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||tr(t.minimum)&&!(r>=t.minimum)||tr(t.maximum)&&!(r<=t.maximum)||tr(t.multipleOf)&&r%t.multipleOf!==0)}function e2e(t,e,r){if(!o_.TypeSystemPolicy.IsObjectLike(r)||tr(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||tr(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let i of n){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!Hi(o,e,r[i])||($i.ExtendsUndefined.Check(o)||FCe(o))&&!(i in r))return!1}else if(o_.TypeSystemPolicy.IsExactOptionalProperty(r,i)&&!Hi(o,e,r[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&i.length===n.length?!0:i.every(o=>n.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(o=>n.includes(o)||Hi(t.additionalProperties,e,r[o])):!0}function t2e(t,e,r){return(0,Zn.IsPromise)(r)}function r2e(t,e,r){if(!o_.TypeSystemPolicy.IsRecordLike(r)||tr(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||tr(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,i]=Object.entries(t.patternProperties)[0],o=new RegExp(n),s=Object.entries(r).every(([c,p])=>o.test(c)?Hi(i,e,p):!0),a=typeof t.additionalProperties=="object"?Object.entries(r).every(([c,p])=>o.test(c)?!0:Hi(t.additionalProperties,e,p)):!0,l=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(c=>o.test(c)):!0;return s&&a&&l}function n2e(t,e,r){return Hi((0,HJ.Deref)(t,e),e,r)}function i2e(t,e,r){return!(0,Zn.IsString)(r)||tr(t.minLength)&&!(r.length>=t.minLength)||tr(t.maxLength)&&!(r.length<=t.maxLength)||tr(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:tr(t.format)?$i.FormatRegistry.Has(t.format)?$i.FormatRegistry.Get(t.format)(r):!1:!0}function o2e(t,e,r){return(0,Zn.IsSymbol)(r)}function s2e(t,e,r){return(0,Zn.IsString)(r)&&new RegExp(t.pattern).test(r)}function a2e(t,e,r){return Hi((0,HJ.Deref)(t,e),e,r)}function l2e(t,e,r){if(!(0,Zn.IsArray)(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!Hi(t.items[n],e,r[n]))return!1;return!0}function u2e(t,e,r){return(0,Zn.IsUndefined)(r)}function c2e(t,e,r){return t.anyOf.some(n=>Hi(n,e,r))}function d2e(t,e,r){return!(!(0,Zn.IsUint8Array)(r)||tr(t.maxByteLength)&&!(r.length<=t.maxByteLength)||tr(t.minByteLength)&&!(r.length>=t.minByteLength))}function p2e(t,e,r){return!0}function f2e(t,e,r){return o_.TypeSystemPolicy.IsVoidLike(r)}function m2e(t,e,r){return $i.TypeRegistry.Has(t[$i.Kind])?$i.TypeRegistry.Get(t[$i.Kind])(t,r):!1}function Hi(t,e,r){let n=tr(t.$id)?[...e,t]:e,i=t;switch(i[$i.Kind]){case"Any":return UCe(i,n,r);case"Array":return BCe(i,n,r);case"AsyncIterator":return WCe(i,n,r);case"BigInt":return jCe(i,n,r);case"Boolean":return zCe(i,n,r);case"Constructor":return $Ce(i,n,r);case"Date":return HCe(i,n,r);case"Function":return qCe(i,n,r);case"Integer":return GCe(i,n,r);case"Intersect":return VCe(i,n,r);case"Iterator":return KCe(i,n,r);case"Literal":return YCe(i,n,r);case"Never":return XCe(i,n,r);case"Not":return JCe(i,n,r);case"Null":return QCe(i,n,r);case"Number":return ZCe(i,n,r);case"Object":return e2e(i,n,r);case"Promise":return t2e(i,n,r);case"Record":return r2e(i,n,r);case"Ref":return n2e(i,n,r);case"String":return i2e(i,n,r);case"Symbol":return o2e(i,n,r);case"TemplateLiteral":return s2e(i,n,r);case"This":return a2e(i,n,r);case"Tuple":return l2e(i,n,r);case"Undefined":return u2e(i,n,r);case"Union":return c2e(i,n,r);case"Uint8Array":return d2e(i,n,r);case"Unknown":return p2e(i,n,r);case"Void":return f2e(i,n,r);default:if(!$i.TypeRegistry.Has(i[$i.Kind]))throw new rC(i);return m2e(i,n,r)}}function h2e(...t){return t.length===3?Hi(t[0],t[1],t[2]):Hi(t[0],[],t[1])}xg.Check=h2e});var GL=Y(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.Create=ho.ValueCreateRecursiveInstantiationError=ho.ValueCreateTempateLiteralTypeError=ho.ValueCreateIntersectTypeError=ho.ValueCreateNotTypeError=ho.ValueCreateNeverTypeError=ho.ValueCreateUnknownTypeError=void 0;var or=Ws(),g2e=Tg(),GJ=zf(),ls=xa(),nC=class extends ls.TypeBoxError{constructor(e){super("Unknown type"),this.schema=e}};ho.ValueCreateUnknownTypeError=nC;var iC=class extends ls.TypeBoxError{constructor(e){super("Never types cannot be created"),this.schema=e}};ho.ValueCreateNeverTypeError=iC;var oC=class extends ls.TypeBoxError{constructor(e){super("Not types must have a default value"),this.schema=e}};ho.ValueCreateNotTypeError=oC;var sC=class extends ls.TypeBoxError{constructor(e){super("Intersect produced invalid value. Consider using a default value."),this.schema=e}};ho.ValueCreateIntersectTypeError=sC;var aC=class extends ls.TypeBoxError{constructor(e){super("Can only create template literal values from patterns that produce finite sequences. Consider using a default value."),this.schema=e}};ho.ValueCreateTempateLiteralTypeError=aC;var lC=class extends ls.TypeBoxError{constructor(e,r){super("Value cannot be created as recursive type may produce value of infinite size. Consider using a default."),this.schema=e,this.recursiveMaxDepth=r}};ho.ValueCreateRecursiveInstantiationError=lC;function y2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:{}}function v2e(t,e){if(t.uniqueItems===!0&&!(0,or.HasPropertyKey)(t,"default"))throw new Error("ValueCreate.Array: Array with the uniqueItems constraint requires a default value");if("contains"in t&&!(0,or.HasPropertyKey)(t,"default"))throw new Error("ValueCreate.Array: Array with the contains constraint requires a default value");return"default"in t?t.default:t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>$s(t.items,e)):[]}function _2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:async function*(){}()}function b2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:BigInt(0)}function x2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:!1}function T2e(t,e){if((0,or.HasPropertyKey)(t,"default"))return t.default;{let r=$s(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,i]of Object.entries(r)){let o=this;o[n]=i}}}:class{}}}function w2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}function S2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:()=>$s(t.returns,e)}function E2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:t.minimum!==void 0?t.minimum:0}function C2e(t,e){if((0,or.HasPropertyKey)(t,"default"))return t.default;{let r=t.allOf.reduce((n,i)=>{let o=$s(i,e);return typeof o=="object"?{...n,...o}:o},{});if(!(0,g2e.Check)(t,e,r))throw new sC(t);return r}}function D2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:function*(){}()}function I2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:t.const}function k2e(t,e){throw new iC(t)}function N2e(t,e){if((0,or.HasPropertyKey)(t,"default"))return t.default;throw new oC(t)}function A2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:null}function O2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:t.minimum!==void 0?t.minimum:0}function R2e(t,e){if((0,or.HasPropertyKey)(t,"default"))return t.default;{let r=new Set(t.required);return t.default||Object.entries(t.properties).reduce((n,[i,o])=>r.has(i)?{...n,[i]:$s(o,e)}:{...n},{})}}function P2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:Promise.resolve($s(t.item,e))}function L2e(t,e){let[r,n]=Object.entries(t.patternProperties)[0];return(0,or.HasPropertyKey)(t,"default")?t.default:r===ls.PatternStringExact||r===ls.PatternNumberExact?{}:r.slice(1,r.length-1).split("|").reduce((o,s)=>({...o,[s]:$s(n,e)}),{})}function M2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:$s((0,GJ.Deref)(t,e),e)}function F2e(t,e){if(t.pattern!==void 0){if((0,or.HasPropertyKey)(t,"default"))return t.default;throw new Error("ValueCreate.String: String types with patterns must specify a default value")}else if(t.format!==void 0){if((0,or.HasPropertyKey)(t,"default"))return t.default;throw new Error("ValueCreate.String: String types with formats must specify a default value")}else return(0,or.HasPropertyKey)(t,"default")?t.default:t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>".").join(""):""}function U2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:"value"in t?Symbol.for(t.value):Symbol()}function B2e(t,e){if((0,or.HasPropertyKey)(t,"default"))return t.default;let r=ls.TemplateLiteralParser.ParseExact(t.pattern);if(!ls.TemplateLiteralFinite.Check(r))throw new aC(t);return ls.TemplateLiteralGenerator.Generate(r).next().value}function W2e(t,e){if(VJ++>qJ)throw new lC(t,qJ);return(0,or.HasPropertyKey)(t,"default")?t.default:$s((0,GJ.Deref)(t,e),e)}function j2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>$s(t.items[n],e))}function z2e(t,e){if((0,or.HasPropertyKey)(t,"default"))return t.default}function $2e(t,e){if((0,or.HasPropertyKey)(t,"default"))return t.default;if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return $s(t.anyOf[0],e)}function H2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}function q2e(t,e){return(0,or.HasPropertyKey)(t,"default")?t.default:{}}function G2e(t,e){if((0,or.HasPropertyKey)(t,"default"))return t.default}function V2e(t,e){if((0,or.HasPropertyKey)(t,"default"))return t.default;throw new Error("User defined types must specify a default value")}function $s(t,e){let r=(0,or.IsString)(t.$id)?[...e,t]:e,n=t;switch(n[ls.Kind]){case"Any":return y2e(n,r);case"Array":return v2e(n,r);case"AsyncIterator":return _2e(n,r);case"BigInt":return b2e(n,r);case"Boolean":return x2e(n,r);case"Constructor":return T2e(n,r);case"Date":return w2e(n,r);case"Function":return S2e(n,r);case"Integer":return E2e(n,r);case"Intersect":return C2e(n,r);case"Iterator":return D2e(n,r);case"Literal":return I2e(n,r);case"Never":return k2e(n,r);case"Not":return N2e(n,r);case"Null":return A2e(n,r);case"Number":return O2e(n,r);case"Object":return R2e(n,r);case"Promise":return P2e(n,r);case"Record":return L2e(n,r);case"Ref":return M2e(n,r);case"String":return F2e(n,r);case"Symbol":return U2e(n,r);case"TemplateLiteral":return B2e(n,r);case"This":return W2e(n,r);case"Tuple":return j2e(n,r);case"Undefined":return z2e(n,r);case"Union":return $2e(n,r);case"Uint8Array":return H2e(n,r);case"Unknown":return q2e(n,r);case"Void":return G2e(n,r);default:if(!ls.TypeRegistry.Has(n[ls.Kind]))throw new nC(n);return V2e(n,r)}}var qJ=512,VJ=0;function K2e(...t){return VJ=0,t.length===2?$s(t[0],t[1]):$s(t[0],[])}ho.Create=K2e});var JJ=Y(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.Cast=go.Default=go.DefaultClone=go.ValueCastUnknownTypeError=go.ValueCastRecursiveTypeError=go.ValueCastNeverTypeError=go.ValueCastArrayUniqueItemsTypeError=void 0;var hp=Ws(),Tc=GL(),Da=Tg(),wg=bg(),KJ=zf(),xc=xa(),uC=class extends xc.TypeBoxError{constructor(e,r){super("Array cast produced invalid data due to uniqueItems constraint"),this.schema=e,this.value=r}};go.ValueCastArrayUniqueItemsTypeError=uC;var cC=class extends xc.TypeBoxError{constructor(e){super("Never types cannot be cast"),this.schema=e}};go.ValueCastNeverTypeError=cC;var VL=class extends xc.TypeBoxError{constructor(e){super("Cannot cast recursive schemas"),this.schema=e}};go.ValueCastRecursiveTypeError=VL;var dC=class extends xc.TypeBoxError{constructor(e){super("Unknown type"),this.schema=e}};go.ValueCastUnknownTypeError=dC;var KL;(function(t){function e(i,o,s){if(i[xc.Kind]==="Object"&&typeof s=="object"&&!(0,hp.IsNull)(s)){let a=i,l=Object.getOwnPropertyNames(s),c=Object.entries(a.properties),[p,f]=[1/c.length,c.length];return c.reduce((m,[g,v])=>{let _=v[xc.Kind]==="Literal"&&v.const===s[g]?f:0,S=(0,Da.Check)(v,o,s[g])?p:0,T=l.includes(g)?p:0;return m+(_+S+T)},0)}else return(0,Da.Check)(i,o,s)?1:0}function r(i,o,s){let[a,l]=[i.anyOf[0],0];for(let c of i.anyOf){let p=e(c,o,s);p>l&&(a=c,l=p)}return a}function n(i,o,s){if("default"in i)return i.default;{let a=r(i,o,s);return XJ(a,o,s)}}t.Create=n})(KL||(KL={}));function YJ(t,e,r){return(0,Da.Check)(t,e,r)?(0,wg.Clone)(r):(0,Tc.Create)(t,e)}go.DefaultClone=YJ;function YL(t,e,r){return(0,Da.Check)(t,e,r)?r:(0,Tc.Create)(t,e)}go.Default=YL;function Y2e(t,e,r){if((0,Da.Check)(t,e,r))return(0,wg.Clone)(r);let n=(0,hp.IsArray)(r)?(0,wg.Clone)(r):(0,Tc.Create)(t,e),i=(0,hp.IsNumber)(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,s=((0,hp.IsNumber)(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(l=>su(t.items,e,l));if(t.uniqueItems!==!0)return s;let a=[...new Set(s)];if(!(0,Da.Check)(t,e,a))throw new uC(t,a);return a}function X2e(t,e,r){if((0,Da.Check)(t,e,r))return(0,Tc.Create)(t,e);let n=new Set(t.returns.required||[]),i=function(){};for(let[o,s]of Object.entries(t.returns.properties))!n.has(o)&&r.prototype[o]===void 0||(i.prototype[o]=su(s,e,r.prototype[o]));return i}function J2e(t,e,r){let n=(0,Tc.Create)(t,e),i=(0,hp.IsPlainObject)(n)&&(0,hp.IsPlainObject)(r)?{...n,...r}:r;return(0,Da.Check)(t,e,i)?i:(0,Tc.Create)(t,e)}function Q2e(t,e,r){throw new cC(t)}function Z2e(t,e,r){if((0,Da.Check)(t,e,r))return r;if(r===null||typeof r!="object")return(0,Tc.Create)(t,e);let n=new Set(t.required||[]),i={};for(let[o,s]of Object.entries(t.properties))!n.has(o)&&r[o]===void 0||(i[o]=su(s,e,r[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let s of Object.getOwnPropertyNames(r))o.includes(s)||(i[s]=su(t.additionalProperties,e,r[s]))}return i}function eDe(t,e,r){if((0,Da.Check)(t,e,r))return(0,wg.Clone)(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return(0,Tc.Create)(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[n],o={};for(let[s,a]of Object.entries(r))o[s]=su(i,e,a);return o}function tDe(t,e,r){return su((0,KJ.Deref)(t,e),e,r)}function rDe(t,e,r){return su((0,KJ.Deref)(t,e),e,r)}function nDe(t,e,r){return(0,Da.Check)(t,e,r)?(0,wg.Clone)(r):(0,hp.IsArray)(r)?t.items===void 0?[]:t.items.map((n,i)=>su(n,e,r[i])):(0,Tc.Create)(t,e)}function iDe(t,e,r){return(0,Da.Check)(t,e,r)?(0,wg.Clone)(r):KL.Create(t,e,r)}function su(t,e,r){let n=(0,hp.IsString)(t.$id)?[...e,t]:e,i=t;switch(t[xc.Kind]){case"Array":return Y2e(i,n,r);case"Constructor":return X2e(i,n,r);case"Intersect":return J2e(i,n,r);case"Never":return Q2e(i,n,r);case"Object":return Z2e(i,n,r);case"Record":return eDe(i,n,r);case"Ref":return tDe(i,n,r);case"This":return rDe(i,n,r);case"Tuple":return nDe(i,n,r);case"Union":return iDe(i,n,r);case"Date":case"Symbol":case"Uint8Array":return YJ(t,e,r);case"Any":case"AsyncIterator":case"BigInt":case"Boolean":case"Function":case"Integer":case"Iterator":case"Literal":case"Not":case"Null":case"Number":case"Promise":case"String":case"TemplateLiteral":case"Undefined":case"Unknown":case"Void":return YL(i,n,r);default:if(!xc.TypeRegistry.Has(i[xc.Kind]))throw new dC(i);return YL(i,n,r)}}function XJ(...t){return t.length===3?su(t[0],t[1],t[2]):su(t[0],[],t[1])}go.Cast=XJ});var rQ=Y(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.Convert=gp.Default=gp.ValueConvertUnknownTypeError=void 0;var Dr=Ws(),oDe=bg(),sDe=Tg(),QJ=zf(),Sg=xa(),pC=class extends Sg.TypeBoxError{constructor(e){super("Unknown type"),this.schema=e}};gp.ValueConvertUnknownTypeError=pC;function fC(t){return(0,Dr.IsString)(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}function aDe(t){return(0,Dr.IsBigInt)(t)||(0,Dr.IsBoolean)(t)||(0,Dr.IsNumber)(t)}function s_(t){return t===!0||(0,Dr.IsNumber)(t)&&t===1||(0,Dr.IsBigInt)(t)&&t===BigInt("1")||(0,Dr.IsString)(t)&&(t.toLowerCase()==="true"||t==="1")}function a_(t){return t===!1||(0,Dr.IsNumber)(t)&&(t===0||Object.is(t,-0))||(0,Dr.IsBigInt)(t)&&t===BigInt("0")||(0,Dr.IsString)(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}function lDe(t){return(0,Dr.IsString)(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}function uDe(t){return(0,Dr.IsString)(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}function cDe(t){return(0,Dr.IsString)(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}function dDe(t){return(0,Dr.IsString)(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}function pDe(t){return(0,Dr.IsString)(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}function fDe(t,e){let r=eQ(t);return r===e?r:t}function mDe(t,e){let r=tQ(t);return r===e?r:t}function hDe(t,e){let r=ZJ(t);return r===e?r:t}function gDe(t,e){return typeof t.const=="string"?fDe(e,t.const):typeof t.const=="number"?mDe(e,t.const):typeof t.const=="boolean"?hDe(e,t.const):(0,oDe.Clone)(e)}function ZJ(t){return s_(t)?!0:a_(t)?!1:t}function yDe(t){return fC(t)?BigInt(parseInt(t)):(0,Dr.IsNumber)(t)?BigInt(t|0):a_(t)?BigInt(0):s_(t)?BigInt(1):t}function eQ(t){return aDe(t)?t.toString():(0,Dr.IsSymbol)(t)&&t.description!==void 0?t.description.toString():t}function tQ(t){return fC(t)?parseFloat(t):s_(t)?1:a_(t)?0:t}function vDe(t){return fC(t)?parseInt(t):(0,Dr.IsNumber)(t)?t|0:s_(t)?1:a_(t)?0:t}function _De(t){return(0,Dr.IsString)(t)&&t.toLowerCase()==="null"?null:t}function bDe(t){return(0,Dr.IsString)(t)&&t==="undefined"?void 0:t}function xDe(t){return(0,Dr.IsDate)(t)?t:(0,Dr.IsNumber)(t)?new Date(t):s_(t)?new Date(1):a_(t)?new Date(0):fC(t)?new Date(parseInt(t)):uDe(t)?new Date(`1970-01-01T${t}.000Z`):lDe(t)?new Date(`1970-01-01T${t}`):dDe(t)?new Date(`${t}.000Z`):cDe(t)?new Date(t):pDe(t)?new Date(`${t}T00:00:00.000Z`):t}function TDe(t){return t}gp.Default=TDe;function wDe(t,e,r){return(0,Dr.IsArray)(r)?r.map(n=>cl(t.items,e,n)):r}function SDe(t,e,r){return yDe(r)}function EDe(t,e,r){return ZJ(r)}function CDe(t,e,r){return xDe(r)}function DDe(t,e,r){return vDe(r)}function IDe(t,e,r){return t.allOf.every(n=>Sg.TypeGuard.TObject(n))?cl(Sg.Type.Composite(t.allOf),e,r):cl(t.allOf[0],e,r)}function kDe(t,e,r){return gDe(t,r)}function NDe(t,e,r){return _De(r)}function ADe(t,e,r){return tQ(r)}function ODe(t,e,r){return(0,Dr.IsObject)(r)?Object.getOwnPropertyNames(t.properties).reduce((n,i)=>r[i]!==void 0?{...n,[i]:cl(t.properties[i],e,r[i])}:{...n},r):r}function RDe(t,e,r){let n=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[n],o={};for(let[s,a]of Object.entries(r))o[s]=cl(i,e,a);return o}function PDe(t,e,r){return cl((0,QJ.Deref)(t,e),e,r)}function LDe(t,e,r){return eQ(r)}function MDe(t,e,r){return(0,Dr.IsString)(r)||(0,Dr.IsNumber)(r)?Symbol(r):r}function FDe(t,e,r){return cl((0,QJ.Deref)(t,e),e,r)}function UDe(t,e,r){return(0,Dr.IsArray)(r)&&!(0,Dr.IsUndefined)(t.items)?r.map((n,i)=>i<t.items.length?cl(t.items[i],e,n):n):r}function BDe(t,e,r){return bDe(r)}function WDe(t,e,r){for(let n of t.anyOf){let i=cl(n,e,r);if((0,sDe.Check)(n,e,i))return i}return r}function cl(t,e,r){let n=(0,Dr.IsString)(t.$id)?[...e,t]:e,i=t;switch(t[Sg.Kind]){case"Array":return wDe(i,n,r);case"BigInt":return SDe(i,n,r);case"Boolean":return EDe(i,n,r);case"Date":return CDe(i,n,r);case"Integer":return DDe(i,n,r);case"Intersect":return IDe(i,n,r);case"Literal":return kDe(i,n,r);case"Null":return NDe(i,n,r);case"Number":return ADe(i,n,r);case"Object":return ODe(i,n,r);case"Record":return RDe(i,n,r);case"Ref":return PDe(i,n,r);case"String":return LDe(i,n,r);case"Symbol":return MDe(i,n,r);case"This":return FDe(i,n,r);case"Tuple":return UDe(i,n,r);case"Undefined":return BDe(i,n,r);case"Union":return WDe(i,n,r);case"Any":case"AsyncIterator":case"Constructor":case"Function":case"Iterator":case"Never":case"Promise":case"TemplateLiteral":case"Uint8Array":case"Unknown":case"Void":return r;default:if(!Sg.TypeRegistry.Has(i[Sg.Kind]))throw new pC(i);return r}}function jDe(...t){return t.length===3?cl(t[0],t[1],t[2]):cl(t[0],[],t[1])}gp.Convert=jDe});var sQ=Y(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.EncodeTransform=yo.DecodeTransform=yo.HasTransform=yo.TransformEncodeError=yo.TransformDecodeError=yo.TransformEncodeCheckError=yo.TransformDecodeCheckError=void 0;var Wo=Ws(),Eg=zf(),XL=Tg(),Ft=xa(),JL=class extends Ft.TypeBoxError{constructor(e,r,n){super("Unable to decode due to invalid value"),this.schema=e,this.value=r,this.error=n}};yo.TransformDecodeCheckError=JL;var QL=class extends Ft.TypeBoxError{constructor(e,r,n){super("Unable to encode due to invalid value"),this.schema=e,this.value=r,this.error=n}};yo.TransformEncodeCheckError=QL;var mC=class extends Ft.TypeBoxError{constructor(e,r,n){super(`${n instanceof Error?n.message:"Unknown error"}`),this.schema=e,this.value=r}};yo.TransformDecodeError=mC;var hC=class extends Ft.TypeBoxError{constructor(e,r,n){super(`${n instanceof Error?n.message:"Unknown error"}`),this.schema=e,this.value=r}};yo.TransformEncodeError=hC;var nQ;(function(t){function e(w,E){return Ft.TypeGuard.TTransform(w)||_(w.items,E)}function r(w,E){return Ft.TypeGuard.TTransform(w)||_(w.items,E)}function n(w,E){return Ft.TypeGuard.TTransform(w)||_(w.returns,E)||w.parameters.some(I=>_(I,E))}function i(w,E){return Ft.TypeGuard.TTransform(w)||_(w.returns,E)||w.parameters.some(I=>_(I,E))}function o(w,E){return Ft.TypeGuard.TTransform(w)||Ft.TypeGuard.TTransform(w.unevaluatedProperties)||w.allOf.some(I=>_(I,E))}function s(w,E){return Ft.TypeGuard.TTransform(w)||_(w.items,E)}function a(w,E){return Ft.TypeGuard.TTransform(w)||_(w.not,E)}function l(w,E){return Ft.TypeGuard.TTransform(w)||Object.values(w.properties).some(I=>_(I,E))||Ft.TypeGuard.TSchema(w.additionalProperties)&&_(w.additionalProperties,E)}function c(w,E){return Ft.TypeGuard.TTransform(w)||_(w.item,E)}function p(w,E){let I=Object.getOwnPropertyNames(w.patternProperties)[0],N=w.patternProperties[I];return Ft.TypeGuard.TTransform(w)||_(N,E)||Ft.TypeGuard.TSchema(w.additionalProperties)&&Ft.TypeGuard.TTransform(w.additionalProperties)}function f(w,E){return Ft.TypeGuard.TTransform(w)?!0:_((0,Eg.Deref)(w,E),E)}function m(w,E){return Ft.TypeGuard.TTransform(w)?!0:_((0,Eg.Deref)(w,E),E)}function g(w,E){return Ft.TypeGuard.TTransform(w)||!(0,Wo.IsUndefined)(w.items)&&w.items.some(I=>_(I,E))}function v(w,E){return Ft.TypeGuard.TTransform(w)||w.anyOf.some(I=>_(I,E))}function _(w,E){let I=(0,Wo.IsString)(w.$id)?[...E,w]:E,N=w;if(w.$id&&S.has(w.$id))return!1;switch(w.$id&&S.add(w.$id),w[Ft.Kind]){case"Array":return e(N,I);case"AsyncIterator":return r(N,I);case"Constructor":return n(N,I);case"Function":return i(N,I);case"Intersect":return o(N,I);case"Iterator":return s(N,I);case"Not":return a(N,I);case"Object":return l(N,I);case"Promise":return c(N,I);case"Record":return p(N,I);case"Ref":return f(N,I);case"This":return m(N,I);case"Tuple":return g(N,I);case"Union":return v(N,I);default:return Ft.TypeGuard.TTransform(w)}}let S=new Set;function T(w,E){return S.clear(),_(w,E)}t.Has=T})(nQ||(yo.HasTransform=nQ={}));var iQ;(function(t){function e(g,v){try{return Ft.TypeGuard.TTransform(g)?g[Ft.Transform].Decode(v):v}catch(_){throw new mC(g,v,_)}}function r(g,v,_){return(0,Wo.IsArray)(_)?e(g,_.map(S=>f(g.items,v,S))):e(g,_)}function n(g,v,_){if(!(0,Wo.IsPlainObject)(_)||(0,Wo.IsValueType)(_))return e(g,_);let S=Ft.KeyResolver.ResolveKeys(g,{includePatterns:!1}),T=S.reduce((N,C)=>C in N?{...N,[C]:f(Ft.IndexedAccessor.Resolve(g,[C]),v,N[C])}:N,_);if(!Ft.TypeGuard.TTransform(g.unevaluatedProperties))return e(g,T);let w=Object.getOwnPropertyNames(T),E=g.unevaluatedProperties,I=w.reduce((N,C)=>S.includes(C)?N:{...N,[C]:e(E,N[C])},T);return e(g,I)}function i(g,v,_){return e(g,f(g.not,v,_))}function o(g,v,_){if(!(0,Wo.IsPlainObject)(_))return e(g,_);let S=Ft.KeyResolver.ResolveKeys(g,{includePatterns:!1}),T=S.reduce((N,C)=>C in N?{...N,[C]:f(g.properties[C],v,N[C])}:N,_);if(!Ft.TypeGuard.TSchema(g.additionalProperties))return e(g,T);let w=Object.getOwnPropertyNames(T),E=g.additionalProperties,I=w.reduce((N,C)=>S.includes(C)?N:{...N,[C]:e(E,N[C])},T);return e(g,I)}function s(g,v,_){if(!(0,Wo.IsPlainObject)(_))return e(g,_);let S=Object.getOwnPropertyNames(g.patternProperties)[0],T=new RegExp(S),w=Object.getOwnPropertyNames(_).reduce((C,k)=>T.test(k)?{...C,[k]:f(g.patternProperties[S],v,C[k])}:C,_);if(!Ft.TypeGuard.TSchema(g.additionalProperties))return e(g,w);let E=Object.getOwnPropertyNames(w),I=g.additionalProperties,N=E.reduce((C,k)=>T.test(k)?C:{...C,[k]:e(I,C[k])},w);return e(g,N)}function a(g,v,_){let S=(0,Eg.Deref)(g,v);return e(g,f(S,v,_))}function l(g,v,_){let S=(0,Eg.Deref)(g,v);return e(g,f(S,v,_))}function c(g,v,_){return(0,Wo.IsArray)(_)&&(0,Wo.IsArray)(g.items)?e(g,g.items.map((S,T)=>f(S,v,_[T]))):e(g,_)}function p(g,v,_){let S=e(g,_);for(let T of g.anyOf)if((0,XL.Check)(T,v,S))return f(T,v,S);return S}function f(g,v,_){let S=typeof g.$id=="string"?[...v,g]:v,T=g;switch(g[Ft.Kind]){case"Array":return r(T,S,_);case"Intersect":return n(T,S,_);case"Not":return i(T,S,_);case"Object":return o(T,S,_);case"Record":return s(T,S,_);case"Ref":return a(T,S,_);case"Symbol":return e(T,_);case"This":return l(T,S,_);case"Tuple":return c(T,S,_);case"Union":return p(T,S,_);default:return e(T,_)}}function m(g,v,_){return f(g,v,_)}t.Decode=m})(iQ||(yo.DecodeTransform=iQ={}));var oQ;(function(t){function e(g,v){try{return Ft.TypeGuard.TTransform(g)?g[Ft.Transform].Encode(v):v}catch(_){throw new hC(g,v,_)}}function r(g,v,_){let S=e(g,_);return(0,Wo.IsArray)(S)?S.map(T=>f(g.items,v,T)):S}function n(g,v,_){let S=e(g,_);if(!(0,Wo.IsPlainObject)(_)||(0,Wo.IsValueType)(_))return S;let T=Ft.KeyResolver.ResolveKeys(g,{includePatterns:!1}),w=T.reduce((N,C)=>C in S?{...N,[C]:f(Ft.IndexedAccessor.Resolve(g,[C]),v,N[C])}:N,S);if(!Ft.TypeGuard.TTransform(g.unevaluatedProperties))return e(g,w);let E=Object.getOwnPropertyNames(w),I=g.unevaluatedProperties;return E.reduce((N,C)=>T.includes(C)?N:{...N,[C]:e(I,N[C])},w)}function i(g,v,_){return e(g.not,e(g,_))}function o(g,v,_){let S=e(g,_);if(!(0,Wo.IsPlainObject)(_))return S;let T=Ft.KeyResolver.ResolveKeys(g,{includePatterns:!1}),w=T.reduce((N,C)=>C in N?{...N,[C]:f(g.properties[C],v,N[C])}:N,S);if(!Ft.TypeGuard.TSchema(g.additionalProperties))return w;let E=Object.getOwnPropertyNames(w),I=g.additionalProperties;return E.reduce((N,C)=>T.includes(C)?N:{...N,[C]:e(I,N[C])},w)}function s(g,v,_){let S=e(g,_);if(!(0,Wo.IsPlainObject)(_))return S;let T=Object.getOwnPropertyNames(g.patternProperties)[0],w=new RegExp(T),E=Object.getOwnPropertyNames(_).reduce((C,k)=>w.test(k)?{...C,[k]:f(g.patternProperties[T],v,C[k])}:C,S);if(!Ft.TypeGuard.TSchema(g.additionalProperties))return e(g,E);let I=Object.getOwnPropertyNames(E),N=g.additionalProperties;return I.reduce((C,k)=>w.test(k)?C:{...C,[k]:e(N,C[k])},E)}function a(g,v,_){let S=(0,Eg.Deref)(g,v),T=f(S,v,_);return e(g,T)}function l(g,v,_){let S=(0,Eg.Deref)(g,v),T=f(S,v,_);return e(g,T)}function c(g,v,_){let S=e(g,_);return(0,Wo.IsArray)(g.items)?g.items.map((T,w)=>f(T,v,S[w])):[]}function p(g,v,_){for(let S of g.anyOf){if(!(0,XL.Check)(S,v,_))continue;let T=f(S,v,_);return e(g,T)}for(let S of g.anyOf){let T=f(S,v,_);if((0,XL.Check)(g,v,T))return e(g,T)}return e(g,_)}function f(g,v,_){let S=typeof g.$id=="string"?[...v,g]:v,T=g;switch(g[Ft.Kind]){case"Array":return r(T,S,_);case"Intersect":return n(T,S,_);case"Not":return i(T,S,_);case"Object":return o(T,S,_);case"Record":return s(T,S,_);case"Ref":return a(T,S,_);case"This":return l(T,S,_);case"Tuple":return c(T,S,_);case"Union":return p(T,S,_);default:return e(T,_)}}function m(g,v,_){return f(g,v,_)}t.Encode=m})(oQ||(yo.EncodeTransform=oQ={}))});var mQ=Y(yC=>{"use strict";Object.defineProperty(yC,"__esModule",{value:!0});yC.Value=void 0;var aQ=BL(),zDe=jJ(),$De=zE(),HDe=zJ(),lQ=JJ(),qDe=bg(),uQ=rQ(),cQ=GL(),dQ=Tg(),pQ=$L(),gC=sQ(),fQ;(function(t){function e(...v){return lQ.Cast.apply(lQ,v)}t.Cast=e;function r(...v){return cQ.Create.apply(cQ,v)}t.Create=r;function n(...v){return dQ.Check.apply(dQ,v)}t.Check=n;function i(...v){return uQ.Convert.apply(uQ,v)}t.Convert=i;function o(v){return qDe.Clone(v)}t.Clone=o;function s(...v){let[_,S,T]=v.length===3?[v[0],v[1],v[2]]:[v[0],[],v[1]];if(!n(_,S,T))throw new gC.TransformDecodeCheckError(_,T,l(_,S,T).First());return gC.DecodeTransform.Decode(_,S,T)}t.Decode=s;function a(...v){let[_,S,T]=v.length===3?[v[0],v[1],v[2]]:[v[0],[],v[1]],w=gC.EncodeTransform.Encode(_,S,T);if(!n(_,S,w))throw new gC.TransformEncodeCheckError(_,T,l(_,S,T).First());return w}t.Encode=a;function l(...v){return aQ.Errors.apply(aQ,v)}t.Errors=l;function c(v,_){return HDe.Equal(v,_)}t.Equal=c;function p(v,_){return pQ.Diff(v,_)}t.Diff=p;function f(v){return $De.Hash(v)}t.Hash=f;function m(v,_){return pQ.Patch(v,_)}t.Patch=m;function g(v,_){zDe.Mutate(v,_)}t.Mutate=g})(fQ||(yC.Value=fQ={}))});var gQ=Y(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.Value=wi.ValuePointer=wi.Delete=wi.Update=wi.Insert=wi.Edit=wi.ValueErrorIterator=wi.ValueErrorType=void 0;var hQ=BL();Object.defineProperty(wi,"ValueErrorType",{enumerable:!0,get:function(){return hQ.ValueErrorType}});Object.defineProperty(wi,"ValueErrorIterator",{enumerable:!0,get:function(){return hQ.ValueErrorIterator}});var vC=$L();Object.defineProperty(wi,"Edit",{enumerable:!0,get:function(){return vC.Edit}});Object.defineProperty(wi,"Insert",{enumerable:!0,get:function(){return vC.Insert}});Object.defineProperty(wi,"Update",{enumerable:!0,get:function(){return vC.Update}});Object.defineProperty(wi,"Delete",{enumerable:!0,get:function(){return vC.Delete}});var GDe=VE();Object.defineProperty(wi,"ValuePointer",{enumerable:!0,get:function(){return GDe.ValuePointer}});var VDe=mQ();Object.defineProperty(wi,"Value",{enumerable:!0,get:function(){return VDe.Value}})});var vo=Y(zC=>{"use strict";Object.defineProperty(zC,"__esModule",{value:!0});zC.Orientation=void 0;var Kf=class t{static flip(e){return e===t.HORZ?t.VERT:t.HORZ}constructor(e){this._name=e}getName(){return this._name}toString(){return this._name}};zC.Orientation=Kf;Kf.HORZ=new Kf("horz");Kf.VERT=new Kf("vert")});var cs=Y($C=>{"use strict";Object.defineProperty($C,"__esModule",{value:!0});$C.Rect=void 0;var fIe=vo(),u5=class t{static empty(){return new t(0,0,0,0)}constructor(e,r,n,i){this.x=e,this.y=r,this.width=n,this.height=i}static fromElement(e){let{x:r,y:n,width:i,height:o}=e.getBoundingClientRect();return new t(r,n,i,o)}clone(){return new t(this.x,this.y,this.width,this.height)}equals(e){return this.x===e?.x&&this.y===e?.y&&this.width===e?.width&&this.height===e?.height}getBottom(){return this.y+this.height}getRight(){return this.x+this.width}getCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}positionElement(e,r){this.styleWithPosition(e.style,r)}styleWithPosition(e,r="absolute"){return e.left=this.x+"px",e.top=this.y+"px",e.width=Math.max(0,this.width)+"px",e.height=Math.max(0,this.height)+"px",e.position=r,e}contains(e,r){return this.x<=e&&e<=this.getRight()&&this.y<=r&&r<=this.getBottom()}removeInsets(e){return new t(this.x+e.left,this.y+e.top,Math.max(0,this.width-e.left-e.right),Math.max(0,this.height-e.top-e.bottom))}centerInRect(e){this.x=(e.width-this.width)/2,this.y=(e.height-this.height)/2}_getSize(e){let r=this.width;return e===fIe.Orientation.VERT&&(r=this.height),r}toString(){return"(Rect: x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}};$C.Rect=u5});var Ec=Y(HC=>{"use strict";Object.defineProperty(HC,"__esModule",{value:!0});HC.DockLocation=void 0;var m_=vo(),ka=cs(),ds=class t{static getByName(e){return t.values[e]}static getLocation(e,r,n){if(r=(r-e.x)/e.width,n=(n-e.y)/e.height,r>=.25&&r<.75&&n>=.25&&n<.75)return t.CENTER;let i=n>=r,o=n>=1-r;return i?o?t.BOTTOM:t.LEFT:o?t.RIGHT:t.TOP}constructor(e,r,n){this._name=e,this._orientation=r,this._indexPlus=n,t.values[this._name]=this}getName(){return this._name}getOrientation(){return this._orientation}getDockRect(e){return this===t.TOP?new ka.Rect(e.x,e.y,e.width,e.height/2):this===t.BOTTOM?new ka.Rect(e.x,e.getBottom()-e.height/2,e.width,e.height/2):this===t.LEFT?new ka.Rect(e.x,e.y,e.width/2,e.height):this===t.RIGHT?new ka.Rect(e.getRight()-e.width/2,e.y,e.width/2,e.height):e.clone()}split(e,r){if(this===t.TOP){let n=new ka.Rect(e.x,e.y,e.width,r),i=new ka.Rect(e.x,e.y+r,e.width,e.height-r);return{start:n,end:i}}else if(this===t.LEFT){let n=new ka.Rect(e.x,e.y,r,e.height),i=new ka.Rect(e.x+r,e.y,e.width-r,e.height);return{start:n,end:i}}if(this===t.RIGHT){let n=new ka.Rect(e.getRight()-r,e.y,r,e.height),i=new ka.Rect(e.x,e.y,e.width-r,e.height);return{start:n,end:i}}else{let n=new ka.Rect(e.x,e.getBottom()-r,e.width,r),i=new ka.Rect(e.x,e.y,e.width,e.height-r);return{start:n,end:i}}}reflect(){return this===t.TOP?t.BOTTOM:this===t.LEFT?t.RIGHT:this===t.RIGHT?t.LEFT:t.TOP}toString(){return"(DockLocation: name="+this._name+", orientation="+this._orientation+")"}};HC.DockLocation=ds;ds.values={};ds.TOP=new ds("top",m_.Orientation.VERT,0);ds.BOTTOM=new ds("bottom",m_.Orientation.VERT,1);ds.LEFT=new ds("left",m_.Orientation.HORZ,0);ds.RIGHT=new ds("right",m_.Orientation.HORZ,1);ds.CENTER=new ds("center",m_.Orientation.VERT,0)});var g_=Y(qC=>{"use strict";Object.defineProperty(qC,"__esModule",{value:!0});qC.DragDrop=void 0;var mIe=cs(),hIe=!!(typeof window<"u"&&window.document&&window.document.createElement),h_=class{constructor(){this._manualGlassManagement=!1,this._startX=0,this._startY=0,this._dragDepth=0,this._glassShowing=!1,this._dragging=!1,this._active=!1,hIe&&(this._glass=document.createElement("div"),this._glass.style.zIndex="998",this._glass.style.backgroundColor="transparent",this._glass.style.outline="none"),this._defaultGlassCursor="default",this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onKeyPress=this._onKeyPress.bind(this),this._onDragCancel=this._onDragCancel.bind(this),this._onDragEnter=this._onDragEnter.bind(this),this._onDragLeave=this._onDragLeave.bind(this),this.resizeGlass=this.resizeGlass.bind(this),this._lastClick=0,this._clickX=0,this._clickY=0}addGlass(e){var r;this._glassShowing?this._manualGlassManagement=!0:(this._document||(this._document=window.document),this._rootElement||(this._rootElement=this._document.body),this.resizeGlass(),(r=this._document.defaultView)===null||r===void 0||r.addEventListener("resize",this.resizeGlass),this._document.body.appendChild(this._glass),this._glass.tabIndex=-1,this._glass.focus(),this._glass.addEventListener("keydown",this._onKeyPress),this._glass.addEventListener("dragenter",this._onDragEnter,{passive:!1}),this._glass.addEventListener("dragover",this._onMouseMove,{passive:!1}),this._glass.addEventListener("dragleave",this._onDragLeave,{passive:!1}),this._glassShowing=!0,this._fDragCancel=e,this._manualGlassManagement=!1)}resizeGlass(){mIe.Rect.fromElement(this._rootElement).positionElement(this._glass,"fixed")}hideGlass(){var e;this._glassShowing&&(this._document.body.removeChild(this._glass),(e=this._document.defaultView)===null||e===void 0||e.removeEventListener("resize",this.resizeGlass),this._glassShowing=!1,this._document=void 0,this._rootElement=void 0,this.setGlassCursorOverride(void 0))}_updateGlassCursor(){var e;this._glass.style.cursor=(e=this._glassCursorOverride)!==null&&e!==void 0?e:this._defaultGlassCursor}_setDefaultGlassCursor(e){this._defaultGlassCursor=e,this._updateGlassCursor()}setGlassCursorOverride(e){this._glassCursorOverride=e,this._updateGlassCursor()}startDrag(e,r,n,i,o,s,a,l,c){if(e&&this._lastEvent&&this._lastEvent.type.startsWith("touch")&&e.type.startsWith("mouse")&&e.timeStamp-this._lastEvent.timeStamp<500||this._dragging)return;this._lastEvent=e,l?this._document=l:this._document=window.document,c?this._rootElement=c:this._rootElement=this._document.body;let p=this._getLocationEvent(e);this.addGlass(o),e?(this._startX=p.clientX,this._startY=p.clientY,(!window.matchMedia||window.matchMedia("(pointer: fine)").matches)&&this._setDefaultGlassCursor(getComputedStyle(e.target).cursor),this._stopPropagation(e),this._preventDefault(e)):(this._startX=0,this._startY=0,this._setDefaultGlassCursor("default")),this._dragging=!1,this._fDragStart=r,this._fDragMove=n,this._fDragEnd=i,this._fDragCancel=o,this._fClick=s,this._fDblClick=a,this._active=!0,e?.type==="dragenter"?(this._dragDepth=1,this._rootElement.addEventListener("dragenter",this._onDragEnter,{passive:!1}),this._rootElement.addEventListener("dragover",this._onMouseMove,{passive:!1}),this._rootElement.addEventListener("dragleave",this._onDragLeave,{passive:!1}),this._document.addEventListener("dragend",this._onDragCancel,{passive:!1}),this._document.addEventListener("drop",this._onMouseUp,{passive:!1})):(this._document.addEventListener("mouseup",this._onMouseUp,{passive:!1}),this._document.addEventListener("mousemove",this._onMouseMove,{passive:!1}),this._document.addEventListener("touchend",this._onMouseUp,{passive:!1}),this._document.addEventListener("touchmove",this._onMouseMove,{passive:!1}))}isDragging(){return this._dragging}isActive(){return this._active}toString(){return"(DragDrop: startX="+this._startX+", startY="+this._startY+", dragging="+this._dragging+")"}_onKeyPress(e){e.code==="Escape"&&this._onDragCancel()}_onDragCancel(){this._rootElement.removeEventListener("dragenter",this._onDragEnter),this._rootElement.removeEventListener("dragover",this._onMouseMove),this._rootElement.removeEventListener("dragleave",this._onDragLeave),this._document.removeEventListener("dragend",this._onDragCancel),this._document.removeEventListener("drop",this._onMouseUp),this._document.removeEventListener("mousemove",this._onMouseMove),this._document.removeEventListener("mouseup",this._onMouseUp),this._document.removeEventListener("touchend",this._onMouseUp),this._document.removeEventListener("touchmove",this._onMouseMove),this.hideGlass(),this._fDragCancel!==void 0&&this._fDragCancel(this._dragging),this._dragging=!1,this._active=!1}_getLocationEvent(e){let r=e;return e&&e.touches&&(r=e.touches[0]),r}_getLocationEventEnd(e){let r=e;return e.changedTouches&&(r=e.changedTouches[0]),r}_stopPropagation(e){e.stopPropagation&&e.stopPropagation()}_preventDefault(e){return e.preventDefault&&e.cancelable&&e.preventDefault(),e}_onMouseMove(e){this._lastEvent=e;let r=this._getLocationEvent(e);return this._stopPropagation(e),this._preventDefault(e),!this._dragging&&(Math.abs(this._startX-r.clientX)>5||Math.abs(this._startY-r.clientY)>5)&&(this._dragging=!0,this._fDragStart&&(this._setDefaultGlassCursor("move"),this._dragging=this._fDragStart({clientX:this._startX,clientY:this._startY}))),this._dragging&&this._fDragMove&&this._fDragMove(r),!1}_onMouseUp(e){this._lastEvent=e;let r=this._getLocationEventEnd(e);if(this._stopPropagation(e),this._preventDefault(e),this._active=!1,this._rootElement.removeEventListener("dragenter",this._onDragEnter),this._rootElement.removeEventListener("dragover",this._onMouseMove),this._rootElement.removeEventListener("dragleave",this._onDragLeave),this._document.removeEventListener("dragend",this._onDragCancel),this._document.removeEventListener("drop",this._onMouseUp),this._document.removeEventListener("mousemove",this._onMouseMove),this._document.removeEventListener("mouseup",this._onMouseUp),this._document.removeEventListener("touchend",this._onMouseUp),this._document.removeEventListener("touchmove",this._onMouseMove),this._manualGlassManagement||this.hideGlass(),this._dragging)this._dragging=!1,this._fDragEnd&&this._fDragEnd(e);else if(this._fDragCancel&&this._fDragCancel(this._dragging),Math.abs(this._startX-r.clientX)<=5&&Math.abs(this._startY-r.clientY)<=5){let n=!1,i=new Date().getTime();Math.abs(this._clickX-r.clientX)<=5&&Math.abs(this._clickY-r.clientY)<=5&&i-this._lastClick<500&&this._fDblClick&&(this._fDblClick(e),n=!0),!n&&this._fClick&&this._fClick(e),this._lastClick=i,this._clickX=r.clientX,this._clickY=r.clientY}return!1}_onDragEnter(e){return this._preventDefault(e),this._stopPropagation(e),this._dragDepth++,!1}_onDragLeave(e){return this._preventDefault(e),this._stopPropagation(e),this._dragDepth--,this._dragDepth<=0&&this._onDragCancel(),!1}};qC.DragDrop=h_;h_.instance=new h_});var d5=Y(GC=>{"use strict";Object.defineProperty(GC,"__esModule",{value:!0});GC.Action=void 0;var c5=class{constructor(e,r){this.type=e,this.data=r}};GC.Action=c5});var dl=Y(VC=>{"use strict";Object.defineProperty(VC,"__esModule",{value:!0});VC.Actions=void 0;var ps=d5(),qi=class t{static addNode(e,r,n,i,o){return new ps.Action(t.ADD_NODE,{json:e,toNode:r,location:n.getName(),index:i,select:o})}static moveNode(e,r,n,i,o){return new ps.Action(t.MOVE_NODE,{fromNode:e,toNode:r,location:n.getName(),index:i,select:o})}static deleteTab(e){return new ps.Action(t.DELETE_TAB,{node:e})}static deleteTabset(e){return new ps.Action(t.DELETE_TABSET,{node:e})}static renameTab(e,r){return new ps.Action(t.RENAME_TAB,{node:e,text:r})}static selectTab(e){return new ps.Action(t.SELECT_TAB,{tabNode:e})}static setActiveTabset(e){return new ps.Action(t.SET_ACTIVE_TABSET,{tabsetNode:e})}static adjustSplit(e){let r=e.node1Id,n=e.node2Id;return new ps.Action(t.ADJUST_SPLIT,{node1:r,weight1:e.weight1,pixelWidth1:e.pixelWidth1,node2:n,weight2:e.weight2,pixelWidth2:e.pixelWidth2})}static adjustBorderSplit(e,r){return new ps.Action(t.ADJUST_BORDER_SPLIT,{node:e,pos:r})}static maximizeToggle(e){return new ps.Action(t.MAXIMIZE_TOGGLE,{node:e})}static updateModelAttributes(e){return new ps.Action(t.UPDATE_MODEL_ATTRIBUTES,{json:e})}static updateNodeAttributes(e,r){return new ps.Action(t.UPDATE_NODE_ATTRIBUTES,{node:e,json:r})}static floatTab(e){return new ps.Action(t.FLOAT_TAB,{node:e})}static unFloatTab(e){return new ps.Action(t.UNFLOAT_TAB,{node:e})}};VC.Actions=qi;qi.ADD_NODE="FlexLayout_AddNode";qi.MOVE_NODE="FlexLayout_MoveNode";qi.DELETE_TAB="FlexLayout_DeleteTab";qi.DELETE_TABSET="FlexLayout_DeleteTabset";qi.RENAME_TAB="FlexLayout_RenameTab";qi.SELECT_TAB="FlexLayout_SelectTab";qi.SET_ACTIVE_TABSET="FlexLayout_SetActiveTabset";qi.ADJUST_SPLIT="FlexLayout_AdjustSplit";qi.ADJUST_BORDER_SPLIT="FlexLayout_AdjustBorderSplit";qi.MAXIMIZE_TOGGLE="FlexLayout_MaximizeToggle";qi.UPDATE_MODEL_ATTRIBUTES="FlexLayout_UpdateModelAttributes";qi.UPDATE_NODE_ATTRIBUTES="FlexLayout_UpdateNodeAttributes";qi.FLOAT_TAB="FlexLayout_FloatTab";qi.UNFLOAT_TAB="FlexLayout_UnFloatTab"});var Yf=Y(KC=>{"use strict";Object.defineProperty(KC,"__esModule",{value:!0});KC.Attribute=void 0;var Dg=class{constructor(e,r,n,i){this.name=e,this.modelName=r,this.defaultValue=n,this.alwaysWriteJson=i,this.required=!1,this.fixed=!1,this.type="any"}setType(e){return this.type=e,this}setRequired(){return this.required=!0,this}setFixed(){return this.fixed=!0,this}};KC.Attribute=Dg;Dg.NUMBER="number";Dg.STRING="string";Dg.BOOLEAN="boolean"});var Xf=Y(YC=>{"use strict";Object.defineProperty(YC,"__esModule",{value:!0});YC.AttributeDefinitions=void 0;var gIe=Yf(),p5=class{constructor(){this.attributes=[],this.nameToAttribute={}}addWithAll(e,r,n,i){let o=new gIe.Attribute(e,r,n,i);return this.attributes.push(o),this.nameToAttribute[e]=o,o}addInherited(e,r){return this.addWithAll(e,r,void 0,!1)}add(e,r,n){return this.addWithAll(e,void 0,r,n)}getAttributes(){return this.attributes}getModelName(e){let r=this.nameToAttribute[e];if(r!==void 0)return r.modelName}toJson(e,r){for(let n of this.attributes){let i=r[n.name];(n.alwaysWriteJson||i!==n.defaultValue)&&(e[n.name]=i)}}fromJson(e,r){for(let n of this.attributes){let i=e[n.name];i===void 0?r[n.name]=n.defaultValue:r[n.name]=i}}update(e,r){for(let n of this.attributes)if(e.hasOwnProperty(n.name)){let i=e[n.name];i===void 0?delete r[n.name]:r[n.name]=i}}setDefaults(e){for(let r of this.attributes)e[r.name]=r.defaultValue}toTypescriptInterface(e,r){let n=[],i=this.attributes.sort((o,s)=>o.name.localeCompare(s.name));n.push("export interface I"+e+"Attributes {");for(let o=0;o<i.length;o++){let s=i[o],a=s.type,l,c=s,p;c.defaultValue!==void 0?l=c.defaultValue:c.modelName!==void 0&&r!==void 0&&r.nameToAttribute[c.modelName]!==void 0&&(p=c.modelName,c=r.nameToAttribute[c.modelName],l=c.defaultValue,a=c.type);let f=JSON.stringify(l),m=c.required||c.fixed?"":"?";if(s.fixed)n.push("	"+s.name+": "+f+";");else{let g=(l!==void 0?"default: "+f:"")+(p!==void 0?" - inherited from global "+p:"");n.push("	"+s.name+m+": "+a+";"+(g.length>0?" // "+g:""))}}return n.push("}"),n.join(`
`)}};YC.AttributeDefinitions=p5});var y_=Y(XC=>{"use strict";Object.defineProperty(XC,"__esModule",{value:!0});XC.DropInfo=void 0;var f5=class{constructor(e,r,n,i,o){this.node=e,this.rect=r,this.location=n,this.index=i,this.className=o}};XC.DropInfo=f5});var Si=Y(v_=>{"use strict";Object.defineProperty(v_,"__esModule",{value:!0});v_.CLASSES=void 0;var yIe;(function(t){t.FLEXLAYOUT__BORDER="flexlayout__border",t.FLEXLAYOUT__BORDER_="flexlayout__border_",t.FLEXLAYOUT__BORDER_BUTTON="flexlayout__border_button",t.FLEXLAYOUT__BORDER_BUTTON_="flexlayout__border_button_",t.FLEXLAYOUT__BORDER_BUTTON_CONTENT="flexlayout__border_button_content",t.FLEXLAYOUT__BORDER_BUTTON_LEADING="flexlayout__border_button_leading",t.FLEXLAYOUT__BORDER_BUTTON_TRAILING="flexlayout__border_button_trailing",t.FLEXLAYOUT__BORDER_BUTTON__SELECTED="flexlayout__border_button--selected",t.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED="flexlayout__border_button--unselected",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW="flexlayout__border_toolbar_button_overflow",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_="flexlayout__border_toolbar_button_overflow_",t.FLEXLAYOUT__BORDER_INNER="flexlayout__border_inner",t.FLEXLAYOUT__BORDER_INNER_="flexlayout__border_inner_",t.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER="flexlayout__border_inner_tab_container",t.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_="flexlayout__border_inner_tab_container_",t.FLEXLAYOUT__BORDER_TAB_DIVIDER="flexlayout__border_tab_divider",t.FLEXLAYOUT__BORDER_SIZER="flexlayout__border_sizer",t.FLEXLAYOUT__BORDER_TOOLBAR="flexlayout__border_toolbar",t.FLEXLAYOUT__BORDER_TOOLBAR_="flexlayout__border_toolbar_",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON="flexlayout__border_toolbar_button",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT="flexlayout__border_toolbar_button-float",t.FLEXLAYOUT__DRAG_RECT="flexlayout__drag_rect",t.FLEXLAYOUT__EDGE_RECT="flexlayout__edge_rect",t.FLEXLAYOUT__EDGE_RECT_TOP="flexlayout__edge_rect_top",t.FLEXLAYOUT__EDGE_RECT_LEFT="flexlayout__edge_rect_left",t.FLEXLAYOUT__EDGE_RECT_BOTTOM="flexlayout__edge_rect_bottom",t.FLEXLAYOUT__EDGE_RECT_RIGHT="flexlayout__edge_rect_right",t.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER="flexlayout__error_boundary_container",t.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT="flexlayout__error_boundary_content",t.FLEXLAYOUT__FLOATING_WINDOW_CONTENT="flexlayout__floating_window_content",t.FLEXLAYOUT__FLOATING_WINDOW_TAB="flexlayout__floating_window_tab",t.FLEXLAYOUT__LAYOUT="flexlayout__layout",t.FLEXLAYOUT__OUTLINE_RECT="flexlayout__outline_rect",t.FLEXLAYOUT__OUTLINE_RECT_EDGE="flexlayout__outline_rect_edge",t.FLEXLAYOUT__SPLITTER="flexlayout__splitter",t.FLEXLAYOUT__SPLITTER_EXTRA="flexlayout__splitter_extra",t.FLEXLAYOUT__SPLITTER_="flexlayout__splitter_",t.FLEXLAYOUT__SPLITTER_BORDER="flexlayout__splitter_border",t.FLEXLAYOUT__SPLITTER_DRAG="flexlayout__splitter_drag",t.FLEXLAYOUT__TAB="flexlayout__tab",t.FLEXLAYOUT__TABSET="flexlayout__tabset",t.FLEXLAYOUT__TABSET_HEADER="flexlayout__tabset_header",t.FLEXLAYOUT__TABSET_HEADER_SIZER="flexlayout__tabset_header_sizer",t.FLEXLAYOUT__TABSET_HEADER_CONTENT="flexlayout__tabset_header_content",t.FLEXLAYOUT__TABSET_MAXIMIZED="flexlayout__tabset-maximized",t.FLEXLAYOUT__TABSET_SELECTED="flexlayout__tabset-selected",t.FLEXLAYOUT__TABSET_SIZER="flexlayout__tabset_sizer",t.FLEXLAYOUT__TABSET_TAB_DIVIDER="flexlayout__tabset_tab_divider",t.FLEXLAYOUT__TABSET_CONTENT="flexlayout__tabset_content",t.FLEXLAYOUT__TABSET_TABBAR_INNER="flexlayout__tabset_tabbar_inner",t.FLEXLAYOUT__TABSET_TABBAR_INNER_="flexlayout__tabset_tabbar_inner_",t.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER="flexlayout__tabset_tabbar_inner_tab_container",t.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_="flexlayout__tabset_tabbar_inner_tab_container_",t.FLEXLAYOUT__TABSET_TABBAR_OUTER="flexlayout__tabset_tabbar_outer",t.FLEXLAYOUT__TABSET_TABBAR_OUTER_="flexlayout__tabset_tabbar_outer_",t.FLEXLAYOUT__TAB_BORDER="flexlayout__tab_border",t.FLEXLAYOUT__TAB_BORDER_="flexlayout__tab_border_",t.FLEXLAYOUT__TAB_BUTTON="flexlayout__tab_button",t.FLEXLAYOUT__TAB_BUTTON_STRETCH="flexlayout__tab_button_stretch",t.FLEXLAYOUT__TAB_BUTTON_CONTENT="flexlayout__tab_button_content",t.FLEXLAYOUT__TAB_BUTTON_LEADING="flexlayout__tab_button_leading",t.FLEXLAYOUT__TAB_BUTTON_OVERFLOW="flexlayout__tab_button_overflow",t.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT="flexlayout__tab_button_overflow_count",t.FLEXLAYOUT__TAB_BUTTON_TEXTBOX="flexlayout__tab_button_textbox",t.FLEXLAYOUT__TAB_BUTTON_TRAILING="flexlayout__tab_button_trailing",t.FLEXLAYOUT__TAB_BUTTON_STAMP="flexlayout__tab_button_stamp",t.FLEXLAYOUT__TAB_FLOATING="flexlayout__tab_floating",t.FLEXLAYOUT__TAB_FLOATING_INNER="flexlayout__tab_floating_inner",t.FLEXLAYOUT__TAB_TOOLBAR="flexlayout__tab_toolbar",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON="flexlayout__tab_toolbar_button",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_="flexlayout__tab_toolbar_button-",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT="flexlayout__tab_toolbar_button-float",t.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER="flexlayout__tab_toolbar_sticky_buttons_container",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE="flexlayout__tab_toolbar_button-close",t.FLEXLAYOUT__POPUP_MENU_CONTAINER="flexlayout__popup_menu_container",t.FLEXLAYOUT__POPUP_MENU_ITEM="flexlayout__popup_menu_item",t.FLEXLAYOUT__POPUP_MENU="flexlayout__popup_menu"})(yIe=v_.CLASSES||(v_.CLASSES={}))});var Jf=Y(JC=>{"use strict";Object.defineProperty(JC,"__esModule",{value:!0});JC.Node=void 0;var m5=Ec(),h5=vo(),vIe=cs(),g5=class{constructor(e){this._dirty=!1,this._tempSize=0,this._model=e,this._attributes={},this._children=[],this._fixed=!1,this._rect=vIe.Rect.empty(),this._visible=!1,this._listeners={}}getId(){let e=this._attributes.id;return e!==void 0||(e=this._model._nextUniqueId(),this._setId(e)),e}getModel(){return this._model}getType(){return this._attributes.type}getParent(){return this._parent}getChildren(){return this._children}getRect(){return this._rect}isVisible(){return this._visible}getOrientation(){return this._parent===void 0?this._model.isRootOrientationVertical()?h5.Orientation.VERT:h5.Orientation.HORZ:h5.Orientation.flip(this._parent.getOrientation())}setEventListener(e,r){this._listeners[e]=r}removeEventListener(e){delete this._listeners[e]}_setId(e){this._attributes.id=e}_fireEvent(e,r){this._listeners[e]!==void 0&&this._listeners[e](r)}_getAttr(e){let r=this._attributes[e];if(r===void 0){let n=this._getAttributeDefinitions().getModelName(e);n!==void 0&&(r=this._model._getAttribute(n))}return r}_forEachNode(e,r){e(this,r),r++;for(let n of this._children)n._forEachNode(e,r)}_setVisible(e){e!==this._visible&&(this._fireEvent("visibility",{visible:e}),this._visible=e)}_getDrawChildren(){return this._children}_setParent(e){this._parent=e}_setRect(e){this._rect=e}_setWeight(e){this._attributes.weight=e}_setSelected(e){this._attributes.selected=e}_isFixed(){return this._fixed}_layout(e,r){this._rect=e}_findDropTargetNode(e,r,n){let i;if(this._rect.contains(r,n)){if(this._model.getMaximizedTabset()!==void 0)i=this._model.getMaximizedTabset().canDrop(e,r,n);else if(i=this.canDrop(e,r,n),i===void 0&&this._children.length!==0){for(let o of this._children)if(i=o._findDropTargetNode(e,r,n),i!==void 0)break}}return i}canDrop(e,r,n){}_canDockInto(e,r){if(r!=null){if(r.location===m5.DockLocation.CENTER&&r.node.isEnableDrop()===!1||r.location===m5.DockLocation.CENTER&&e.getType()==="tabset"&&e.getName()!==void 0||r.location!==m5.DockLocation.CENTER&&r.node.isEnableDivide()===!1)return!1;if(this._model._getOnAllowDrop())return this._model._getOnAllowDrop()(e,r)}return!0}_removeChild(e){let r=this._children.indexOf(e);return r!==-1&&this._children.splice(r,1),this._dirty=!0,r}_addChild(e,r){return r!=null?this._children.splice(r,0,e):(this._children.push(e),r=this._children.length-1),e._parent=this,this._dirty=!0,r}_removeAll(){this._children=[],this._dirty=!0}_styleWithPosition(e){return e==null&&(e={}),this._rect.styleWithPosition(e)}_getTempSize(){return this._tempSize}_setTempSize(e){this._tempSize=e}isEnableDivide(){return!0}_toAttributeString(){return JSON.stringify(this._attributes,void 0,"	")}};JC.Node=g5});var __=Y(ZC=>{"use strict";Object.defineProperty(ZC,"__esModule",{value:!0});ZC.SplitterNode=void 0;var _Ie=Xf(),y5=vo(),bIe=Jf(),QC=class t extends bIe.Node{constructor(e){super(e),this._fixed=!0,this._attributes.type=t.TYPE,e._addNode(this)}getWidth(){return this._model.getSplitterSize()}getMinWidth(){return this.getOrientation()===y5.Orientation.VERT?this._model.getSplitterSize():0}getHeight(){return this._model.getSplitterSize()}getMinHeight(){return this.getOrientation()===y5.Orientation.HORZ?this._model.getSplitterSize():0}getMinSize(e){return e===y5.Orientation.HORZ?this.getMinWidth():this.getMinHeight()}getWeight(){return 0}_setWeight(e){}_getPrefSize(e){return this._model.getSplitterSize()}_updateAttrs(e){}_getAttributeDefinitions(){return new _Ie.AttributeDefinitions}toJson(){}};ZC.SplitterNode=QC;QC.TYPE="splitter"});var kg=Y(e2=>{"use strict";Object.defineProperty(e2,"__esModule",{value:!0});e2.TabNode=void 0;var Ei=Yf(),xIe=Xf(),TIe=Jf(),Ig=class t extends TIe.Node{static _fromJson(e,r,n=!0){return new t(r,e,n)}static _createAttributeDefinitions(){let e=new xIe.AttributeDefinitions;return e.add("type",t.TYPE,!0).setType(Ei.Attribute.STRING),e.add("id",void 0).setType(Ei.Attribute.STRING),e.add("name","[Unnamed Tab]").setType(Ei.Attribute.STRING),e.add("altName",void 0).setType(Ei.Attribute.STRING),e.add("helpText",void 0).setType(Ei.Attribute.STRING),e.add("component",void 0).setType(Ei.Attribute.STRING),e.add("config",void 0).setType("any"),e.add("floating",!1).setType(Ei.Attribute.BOOLEAN),e.add("tabsetClassName",void 0).setType(Ei.Attribute.STRING),e.addInherited("enableClose","tabEnableClose").setType(Ei.Attribute.BOOLEAN),e.addInherited("closeType","tabCloseType").setType("ICloseType"),e.addInherited("enableDrag","tabEnableDrag").setType(Ei.Attribute.BOOLEAN),e.addInherited("enableRename","tabEnableRename").setType(Ei.Attribute.BOOLEAN),e.addInherited("className","tabClassName").setType(Ei.Attribute.STRING),e.addInherited("contentClassName","tabContentClassName").setType(Ei.Attribute.STRING),e.addInherited("icon","tabIcon").setType(Ei.Attribute.STRING),e.addInherited("enableRenderOnDemand","tabEnableRenderOnDemand").setType(Ei.Attribute.BOOLEAN),e.addInherited("enableFloat","tabEnableFloat").setType(Ei.Attribute.BOOLEAN),e.addInherited("borderWidth","tabBorderWidth").setType(Ei.Attribute.NUMBER),e.addInherited("borderHeight","tabBorderHeight").setType(Ei.Attribute.NUMBER),e}constructor(e,r,n=!0){super(e),this._extra={},t._attributeDefinitions.fromJson(r,this._attributes),n===!0&&e._addNode(this)}getWindow(){return this._window}getTabRect(){return this._tabRect}_setTabRect(e){this._tabRect=e}_setRenderedName(e){this._renderedName=e}_getNameForOverflowMenu(){let e=this._getAttr("altName");return e!==void 0?e:this._renderedName}getName(){return this._getAttr("name")}getHelpText(){return this._getAttr("helpText")}getComponent(){return this._getAttr("component")}getConfig(){return this._attributes.config}getExtraData(){return this._extra}isFloating(){return this._getAttr("floating")}getIcon(){return this._getAttr("icon")}isEnableClose(){return this._getAttr("enableClose")}getCloseType(){return this._getAttr("closeType")}isEnableFloat(){return this._getAttr("enableFloat")}isEnableDrag(){return this._getAttr("enableDrag")}isEnableRename(){return this._getAttr("enableRename")}getClassName(){return this._getAttr("className")}getContentClassName(){return this._getAttr("contentClassName")}getTabSetClassName(){return this._getAttr("tabsetClassName")}isEnableRenderOnDemand(){return this._getAttr("enableRenderOnDemand")}_setName(e){this._attributes.name=e,this._window&&this._window.document&&(this._window.document.title=e)}_setFloating(e){this._attributes.floating=e}_layout(e,r){e.equals(this._rect)||this._fireEvent("resize",{rect:e}),this._rect=e}_delete(){this._parent._remove(this),this._fireEvent("close",{})}toJson(){let e={};return t._attributeDefinitions.toJson(e,this._attributes),e}_updateAttrs(e){t._attributeDefinitions.update(e,this._attributes)}_getAttributeDefinitions(){return t._attributeDefinitions}_setWindow(e){this._window=e}_setBorderWidth(e){this._attributes.borderWidth=e}_setBorderHeight(e){this._attributes.borderHeight=e}static getAttributeDefinitions(){return t._attributeDefinitions}};e2.TabNode=Ig;Ig.TYPE="tab";Ig._attributeDefinitions=Ig._createAttributeDefinitions()});var o2=Y(i2=>{"use strict";Object.defineProperty(i2,"__esModule",{value:!0});i2.RowNode=void 0;var b_=Yf(),wIe=Xf(),Na=Ec(),t2=y_(),x_=vo(),zQ=cs(),r2=Si(),SIe=au(),EIe=Jf(),n2=__(),Qf=Cc(),Ng=class t extends EIe.Node{static _fromJson(e,r){let n=new t(r,e);if(e.children!=null)for(let i of e.children)if(i.type===Qf.TabSetNode.TYPE){let o=Qf.TabSetNode._fromJson(i,r);n._addChild(o)}else{let o=t._fromJson(i,r);n._addChild(o)}return n}static _createAttributeDefinitions(){let e=new wIe.AttributeDefinitions;return e.add("type",t.TYPE,!0).setType(b_.Attribute.STRING).setFixed(),e.add("id",void 0).setType(b_.Attribute.STRING),e.add("weight",100).setType(b_.Attribute.NUMBER),e.add("width",void 0).setType(b_.Attribute.NUMBER),e.add("height",void 0).setType(b_.Attribute.NUMBER),e}constructor(e,r){super(e),this._dirty=!0,this._drawChildren=[],this._minHeight=0,this._minWidth=0,t._attributeDefinitions.fromJson(r,this._attributes),e._addNode(this)}getWeight(){return this._attributes.weight}getWidth(){return this._getAttr("width")}getHeight(){return this._getAttr("height")}_setWeight(e){this._attributes.weight=e}_layout(e,r){super._layout(e,r);let n=this._rect._getSize(this.getOrientation()),i=0,o=0,s=0,a=0,l=this._getDrawChildren();for(let v of l){let _=v._getPrefSize(this.getOrientation());v._isFixed()?_!==void 0&&(o+=_):_===void 0?i+=v.getWeight():(s+=_,a+=v.getWeight())}let c=!1,p=n-o-s;p<0&&(p=n-o,c=!0,i+=a);let f=0,m=0;for(let v of l){let _=v._getPrefSize(this.getOrientation());if(v._isFixed())_!==void 0&&v._setTempSize(_);else if(_==null||c){if(i===0)v._setTempSize(0);else{let S=v.getMinSize(this.getOrientation()),T=Math.floor(p*(v.getWeight()/i));v._setTempSize(Math.max(S,T))}m+=v._getTempSize()}else v._setTempSize(_);f+=v._getTempSize()}if(m>0){for(;f<n;)for(let v of l)if(!(v instanceof n2.SplitterNode)){let _=v._getPrefSize(this.getOrientation());!v._isFixed()&&(_===void 0||c)&&f<n&&(v._setTempSize(v._getTempSize()+1),f++)}for(;f>n;){let v=!1;for(let _ of l)if(!(_ instanceof n2.SplitterNode)){let S=_.getMinSize(this.getOrientation());_._getTempSize()>S&&f>n&&(_._setTempSize(_._getTempSize()-1),f--,v=!0)}if(!v)break}for(;f>n;){let v=!1;for(let _ of l)_ instanceof n2.SplitterNode||_._getTempSize()>0&&f>n&&(_._setTempSize(_._getTempSize()-1),f--,v=!0);if(!v)break}}let g=0;for(let v of l)this.getOrientation()===x_.Orientation.HORZ?v._layout(new zQ.Rect(this._rect.x+g,this._rect.y,v._getTempSize(),this._rect.height),r):v._layout(new zQ.Rect(this._rect.x,this._rect.y+g,this._rect.width,v._getTempSize()),r),g+=v._getTempSize();return!0}_getSplitterBounds(e,r=!1){let n=[0,0],i=this._getDrawChildren(),o=i.indexOf(e),s=i[o-1],a=i[o+1];if(this.getOrientation()===x_.Orientation.HORZ){let l=r?s.getMinWidth():0,c=r?a.getMinWidth():0;n[0]=s.getRect().x+l,n[1]=a.getRect().getRight()-e.getWidth()-c}else{let l=r?s.getMinHeight():0,c=r?a.getMinHeight():0;n[0]=s.getRect().y+l,n[1]=a.getRect().getBottom()-e.getHeight()-c}return n}_calculateSplit(e,r){let n,i=this._getDrawChildren(),o=i.indexOf(e),s=this._getSplitterBounds(e),a=i[o-1].getWeight()+i[o+1].getWeight(),l=Math.max(0,r-s[0]),c=Math.max(0,s[1]-r);if(l+c>0){let p=l*a/(l+c),f=c*a/(l+c);n={node1Id:i[o-1].getId(),weight1:p,pixelWidth1:l,node2Id:i[o+1].getId(),weight2:f,pixelWidth2:c}}return n}_getDrawChildren(){if(this._dirty){this._drawChildren=[];for(let e=0;e<this._children.length;e++){let r=this._children[e];if(e!==0){let n=new n2.SplitterNode(this._model);n._setParent(this),this._drawChildren.push(n)}this._drawChildren.push(r)}this._dirty=!1}return this._drawChildren}getMinSize(e){return e===x_.Orientation.HORZ?this.getMinWidth():this.getMinHeight()}getMinWidth(){return this._minWidth}getMinHeight(){return this._minHeight}calcMinSize(){this._minHeight=0,this._minWidth=0;let e=!0;for(let r of this._children){let n=r;n instanceof t&&n.calcMinSize(),this.getOrientation()===x_.Orientation.VERT?(this._minHeight+=n.getMinHeight(),e||(this._minHeight+=this._model.getSplitterSize()),this._minWidth=Math.max(this._minWidth,n.getMinWidth())):(this._minWidth+=n.getMinWidth(),e||(this._minWidth+=this._model.getSplitterSize()),this._minHeight=Math.max(this._minHeight,n.getMinHeight())),e=!1}}_tidy(){let e=0;for(;e<this._children.length;){let r=this._children[e];if(r instanceof t){r._tidy();let n=r.getChildren();if(n.length===0)this._removeChild(r);else if(n.length===1){let i=n[0];if(this._removeChild(r),i instanceof t){let o=0,s=i.getChildren();for(let a of s)o+=a.getWeight();for(let a=0;a<s.length;a++){let l=s[a];l._setWeight(r.getWeight()*l.getWeight()/o),this._addChild(l,e+a)}}else i._setWeight(r.getWeight()),this._addChild(i,e)}else e++}else r instanceof Qf.TabSetNode&&r.getChildren().length===0&&r.isEnableDeleteWhenEmpty()?(this._removeChild(r),r===this._model.getMaximizedTabset()&&this._model._setMaximizedTabset(void 0)):e++}if(this===this._model.getRoot()&&this._children.length===0){let r=this._model._getOnCreateTabSet(),n=r?r():{};n=Object.assign(Object.assign({},n),{selected:-1});let i=new Qf.TabSetNode(this._model,n);this._model._setActiveTabset(i),this._addChild(i)}}canDrop(e,r,n){let i=n-this._rect.y,o=r-this._rect.x,s=this._rect.width,a=this._rect.height,l=10,c=50,p;if(this._model.isEnableEdgeDock()&&this._parent===void 0){if(r<this._rect.x+l&&i>a/2-c&&i<a/2+c){let f=Na.DockLocation.LEFT,m=f.getDockRect(this._rect);m.width=m.width/2,p=new t2.DropInfo(this,m,f,-1,r2.CLASSES.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(r>this._rect.getRight()-l&&i>a/2-c&&i<a/2+c){let f=Na.DockLocation.RIGHT,m=f.getDockRect(this._rect);m.width=m.width/2,m.x+=m.width,p=new t2.DropInfo(this,m,f,-1,r2.CLASSES.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(n<this._rect.y+l&&o>s/2-c&&o<s/2+c){let f=Na.DockLocation.TOP,m=f.getDockRect(this._rect);m.height=m.height/2,p=new t2.DropInfo(this,m,f,-1,r2.CLASSES.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(n>this._rect.getBottom()-l&&o>s/2-c&&o<s/2+c){let f=Na.DockLocation.BOTTOM,m=f.getDockRect(this._rect);m.height=m.height/2,m.y+=m.height,p=new t2.DropInfo(this,m,f,-1,r2.CLASSES.FLEXLAYOUT__OUTLINE_RECT_EDGE)}if(p!==void 0&&!e._canDockInto(e,p))return}return p}drop(e,r,n){let i=r,o=e.getParent();o&&o._removeChild(e),o!==void 0&&o.getType()===Qf.TabSetNode.TYPE&&o._setSelected(0),o!==void 0&&o.getType()===SIe.BorderNode.TYPE&&o._setSelected(-1);let s;if(e instanceof Qf.TabSetNode)s=e;else{let c=this._model._getOnCreateTabSet();s=new Qf.TabSetNode(this._model,c?c(e):{}),s._addChild(e)}let a=this._children.reduce((c,p)=>c+p.getWeight(),0);a===0&&(a=100),s._setWeight(a/3);let l=!this._model.isRootOrientationVertical();if(l&&i===Na.DockLocation.LEFT||!l&&i===Na.DockLocation.TOP)this._addChild(s,0);else if(l&&i===Na.DockLocation.RIGHT||!l&&i===Na.DockLocation.BOTTOM)this._addChild(s);else if(l&&i===Na.DockLocation.TOP||!l&&i===Na.DockLocation.LEFT){let c=new t(this._model,{}),p=new t(this._model,{});p._setWeight(75),s._setWeight(25);for(let f of this._children)p._addChild(f);this._removeAll(),c._addChild(s),c._addChild(p),this._addChild(c)}else if(l&&i===Na.DockLocation.BOTTOM||!l&&i===Na.DockLocation.RIGHT){let c=new t(this._model,{}),p=new t(this._model,{});p._setWeight(75),s._setWeight(25);for(let f of this._children)p._addChild(f);this._removeAll(),c._addChild(p),c._addChild(s),this._addChild(c)}this._model._setActiveTabset(s),this._model._tidy()}toJson(){let e={};t._attributeDefinitions.toJson(e,this._attributes),e.children=[];for(let r of this._children)e.children.push(r.toJson());return e}isEnableDrop(){return!0}_getPrefSize(e){let r=this.getWidth();return e===x_.Orientation.VERT&&(r=this.getHeight()),r}_getAttributeDefinitions(){return t._attributeDefinitions}_updateAttrs(e){t._attributeDefinitions.update(e,this._attributes)}static getAttributeDefinitions(){return t._attributeDefinitions}};i2.RowNode=Ng;Ng.TYPE="row";Ng._attributeDefinitions=Ng._createAttributeDefinitions()});var Cc=Y(u2=>{"use strict";Object.defineProperty(u2,"__esModule",{value:!0});u2.TabSetNode=void 0;var vp=Yf(),CIe=Xf(),Ag=Ec(),s2=y_(),$Q=vo(),T_=cs(),a2=Si(),DIe=au(),IIe=Jf(),kIe=o2(),l2=kg(),HQ=c2(),Og=class t extends IIe.Node{static _fromJson(e,r){let n=new t(r,e);if(e.children!=null)for(let i of e.children){let o=l2.TabNode._fromJson(i,r);n._addChild(o)}return n._children.length===0&&n._setSelected(-1),e.maximized&&e.maximized===!0&&r._setMaximizedTabset(n),e.active&&e.active===!0&&r._setActiveTabset(n),n}static _createAttributeDefinitions(){let e=new CIe.AttributeDefinitions;return e.add("type",t.TYPE,!0).setType(vp.Attribute.STRING).setFixed(),e.add("id",void 0).setType(vp.Attribute.STRING),e.add("weight",100).setType(vp.Attribute.NUMBER),e.add("width",void 0).setType(vp.Attribute.NUMBER),e.add("height",void 0).setType(vp.Attribute.NUMBER),e.add("selected",0).setType(vp.Attribute.NUMBER),e.add("name",void 0).setType(vp.Attribute.STRING),e.add("config",void 0).setType("any"),e.addInherited("enableDeleteWhenEmpty","tabSetEnableDeleteWhenEmpty"),e.addInherited("enableDrop","tabSetEnableDrop"),e.addInherited("enableDrag","tabSetEnableDrag"),e.addInherited("enableDivide","tabSetEnableDivide"),e.addInherited("enableMaximize","tabSetEnableMaximize"),e.addInherited("enableClose","tabSetEnableClose"),e.addInherited("enableSingleTabStretch","tabSetEnableSingleTabStretch"),e.addInherited("classNameTabStrip","tabSetClassNameTabStrip"),e.addInherited("classNameHeader","tabSetClassNameHeader"),e.addInherited("enableTabStrip","tabSetEnableTabStrip"),e.addInherited("borderInsets","tabSetBorderInsets"),e.addInherited("marginInsets","tabSetMarginInsets"),e.addInherited("minWidth","tabSetMinWidth"),e.addInherited("minHeight","tabSetMinHeight"),e.addInherited("headerHeight","tabSetHeaderHeight"),e.addInherited("tabStripHeight","tabSetTabStripHeight"),e.addInherited("tabLocation","tabSetTabLocation"),e.addInherited("autoSelectTab","tabSetAutoSelectTab").setType(vp.Attribute.BOOLEAN),e}constructor(e,r){super(e),t._attributeDefinitions.fromJson(r,this._attributes),e._addNode(this),this._calculatedTabBarHeight=0,this._calculatedHeaderBarHeight=0}getName(){return this._getAttr("name")}getSelected(){let e=this._attributes.selected;return e!==void 0?e:-1}getSelectedNode(){let e=this.getSelected();if(e!==-1)return this._children[e]}getWeight(){return this._getAttr("weight")}getWidth(){return this._getAttr("width")}getMinWidth(){return this._getAttr("minWidth")}getHeight(){return this._getAttr("height")}getMinHeight(){return this._getAttr("minHeight")}getMinSize(e){return e===$Q.Orientation.HORZ?this.getMinWidth():this.getMinHeight()}getConfig(){return this._attributes.config}isMaximized(){return this._model.getMaximizedTabset()===this}isActive(){return this._model.getActiveTabset()===this}isEnableDeleteWhenEmpty(){return this._getAttr("enableDeleteWhenEmpty")}isEnableDrop(){return this._getAttr("enableDrop")}isEnableDrag(){return this._getAttr("enableDrag")}isEnableDivide(){return this._getAttr("enableDivide")}isEnableMaximize(){return this._getAttr("enableMaximize")}isEnableClose(){return this._getAttr("enableClose")}isEnableSingleTabStretch(){return this._getAttr("enableSingleTabStretch")}canMaximize(){return this.isEnableMaximize()?this.getModel().getMaximizedTabset()===this?!0:!(this.getParent()===this.getModel().getRoot()&&this.getModel().getRoot().getChildren().length===1):!1}isEnableTabStrip(){return this._getAttr("enableTabStrip")}isAutoSelectTab(){return this._getAttr("autoSelectTab")}getClassNameTabStrip(){return this._getAttr("classNameTabStrip")}getClassNameHeader(){return this._getAttr("classNameHeader")}calculateHeaderBarHeight(e){let r=this._getAttr("headerHeight");r!==0?this._calculatedHeaderBarHeight=r:this._calculatedHeaderBarHeight=e.headerBarSize}calculateTabBarHeight(e){let r=this._getAttr("tabStripHeight");r!==0?this._calculatedTabBarHeight=r:this._calculatedTabBarHeight=e.tabBarSize}getHeaderHeight(){return this._calculatedHeaderBarHeight}getTabStripHeight(){return this._calculatedTabBarHeight}getTabLocation(){return this._getAttr("tabLocation")}_setWeight(e){this._attributes.weight=e}_setSelected(e){this._attributes.selected=e}canDrop(e,r,n){let i;if(e===this){let o=Ag.DockLocation.CENTER,s=this._tabHeaderRect;i=new s2.DropInfo(this,s,o,-1,a2.CLASSES.FLEXLAYOUT__OUTLINE_RECT)}else if(this._contentRect.contains(r,n)){let o=Ag.DockLocation.CENTER;this._model.getMaximizedTabset()===void 0&&(o=Ag.DockLocation.getLocation(this._contentRect,r,n));let s=o.getDockRect(this._rect);i=new s2.DropInfo(this,s,o,-1,a2.CLASSES.FLEXLAYOUT__OUTLINE_RECT)}else if(this._tabHeaderRect!=null&&this._tabHeaderRect.contains(r,n)){let o,s,a;if(this._children.length===0)o=this._tabHeaderRect.clone(),s=o.y+3,a=o.height-4,o.width=2;else{let l=this._children[0];o=l.getTabRect(),s=o.y,a=o.height;let c=this._tabHeaderRect.x,p=0;for(let f=0;f<this._children.length;f++){if(l=this._children[f],o=l.getTabRect(),p=o.x+o.width/2,r>=c&&r<p){let m=Ag.DockLocation.CENTER,g=new T_.Rect(o.x-2,s,3,a);i=new s2.DropInfo(this,g,m,f,a2.CLASSES.FLEXLAYOUT__OUTLINE_RECT);break}c=p}}if(i==null){let l=Ag.DockLocation.CENTER,c=new T_.Rect(o.getRight()-2,s,3,a);i=new s2.DropInfo(this,c,l,this._children.length,a2.CLASSES.FLEXLAYOUT__OUTLINE_RECT)}}if(e._canDockInto(e,i))return i}_layout(e,r){this.calculateHeaderBarHeight(r),this.calculateTabBarHeight(r),this.isMaximized()&&(e=this._model.getRoot().getRect()),e=e.removeInsets(this._getAttr("marginInsets")),this._rect=e,e=e.removeInsets(this._getAttr("borderInsets"));let n=this.getName()!==void 0,i=0,o=0;n&&(i+=this._calculatedHeaderBarHeight,o+=this._calculatedHeaderBarHeight),this.isEnableTabStrip()&&(this.getTabLocation()==="top"?this._tabHeaderRect=new T_.Rect(e.x,e.y+i,e.width,this._calculatedTabBarHeight):this._tabHeaderRect=new T_.Rect(e.x,e.y+e.height-this._calculatedTabBarHeight,e.width,this._calculatedTabBarHeight),o+=this._calculatedTabBarHeight,this.getTabLocation()==="top"&&(i+=this._calculatedTabBarHeight)),this._contentRect=new T_.Rect(e.x,e.y+i,e.width,e.height-o);for(let s=0;s<this._children.length;s++){let a=this._children[s];a._layout(this._contentRect,r),a._setVisible(s===this.getSelected())}}_delete(){this._parent._removeChild(this)}_remove(e){let r=this._removeChild(e);this._model._tidy(),(0,HQ.adjustSelectedIndex)(this,r)}drop(e,r,n,i){let o=r;if(this===e)return;let s=e.getParent(),a=0;if(s!==void 0&&(a=s._removeChild(e),s instanceof DIe.BorderNode&&s.getSelected()===a?s._setSelected(-1):(0,HQ.adjustSelectedIndex)(s,a)),e.getType()===l2.TabNode.TYPE&&s===this&&a<n&&n>0&&n--,o===Ag.DockLocation.CENTER){let l=n;if(l===-1&&(l=this._children.length),e.getType()===l2.TabNode.TYPE)this._addChild(e,l),(i||i!==!1&&this.isAutoSelectTab())&&this._setSelected(l);else{for(let c=0;c<e.getChildren().length;c++){let p=e.getChildren()[c];this._addChild(p,l),l++}this.getSelected()===-1&&this._children.length>0&&this._setSelected(0)}this._model._setActiveTabset(this)}else{let l;if(e instanceof l2.TabNode){let f=this._model._getOnCreateTabSet();l=new t(this._model,f?f(e):{}),l._addChild(e),s=l}else l=e;let c=this._parent,p=c.getChildren().indexOf(this);if(c.getOrientation()===o._orientation)l._setWeight(this.getWeight()/2),this._setWeight(this.getWeight()/2),c._addChild(l,p+o._indexPlus);else{let f=new kIe.RowNode(this._model,{});f._setWeight(this.getWeight()),f._addChild(this),this._setWeight(50),l._setWeight(50),f._addChild(l,o._indexPlus),c._removeChild(this),c._addChild(f,p)}this._model._setActiveTabset(l)}this._model._tidy()}toJson(){let e={};return t._attributeDefinitions.toJson(e,this._attributes),e.children=this._children.map(r=>r.toJson()),this.isActive()&&(e.active=!0),this.isMaximized()&&(e.maximized=!0),e}_updateAttrs(e){t._attributeDefinitions.update(e,this._attributes)}_getAttributeDefinitions(){return t._attributeDefinitions}_getPrefSize(e){let r=this.getWidth();return e===$Q.Orientation.VERT&&(r=this.getHeight()),r}static getAttributeDefinitions(){return t._attributeDefinitions}};u2.TabSetNode=Og;Og.TYPE="tabset";Og._attributeDefinitions=Og._createAttributeDefinitions()});var c2=Y(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.randomUUID=lu.adjustSelectedIndex=lu.adjustSelectedIndexAfterDock=lu.adjustSelectedIndexAfterFloat=void 0;var v5=Cc(),_5=au();function NIe(t){let e=t.getParent();if(e!==null)if(e instanceof v5.TabSetNode){let r=!1,n=0,i=e.getChildren();for(let o=0;o<i.length;o++){let s=i[o];if(s===t)r=!0;else if(!s.isFloating()&&(n=o,r))break}e._setSelected(n)}else e instanceof _5.BorderNode&&e._setSelected(-1)}lu.adjustSelectedIndexAfterFloat=NIe;function AIe(t){let e=t.getParent();if(e!==null&&(e instanceof v5.TabSetNode||e instanceof _5.BorderNode)){let r=e.getChildren();for(let n=0;n<r.length;n++)if(r[n]===t){e._setSelected(n);return}}}lu.adjustSelectedIndexAfterDock=AIe;function OIe(t,e){if(t!==void 0&&(t.getType()===v5.TabSetNode.TYPE||t.getType()===_5.BorderNode.TYPE)){let r=t.getSelected();r!==-1&&(e===r&&t.getChildren().length>0?e>=t.getChildren().length&&t._setSelected(t.getChildren().length-1):e<r?t._setSelected(r-1):e>r||t._setSelected(-1))}}lu.adjustSelectedIndex=OIe;function RIe(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}lu.randomUUID=RIe});var au=Y(f2=>{"use strict";Object.defineProperty(f2,"__esModule",{value:!0});f2.BorderNode=void 0;var pl=Yf(),PIe=Xf(),_p=Ec(),Zf=y_(),d2=vo(),Rg=cs(),em=Si(),LIe=Jf(),MIe=__(),p2=kg(),qQ=c2(),Pg=class t extends LIe.Node{static _fromJson(e,r){let n=_p.DockLocation.getByName(e.location),i=new t(n,e,r);return e.children&&(i._children=e.children.map(o=>{let s=p2.TabNode._fromJson(o,r);return s._setParent(i),s})),i}static _createAttributeDefinitions(){let e=new PIe.AttributeDefinitions;return e.add("type",t.TYPE,!0).setType(pl.Attribute.STRING).setFixed(),e.add("selected",-1).setType(pl.Attribute.NUMBER),e.add("show",!0).setType(pl.Attribute.BOOLEAN),e.add("config",void 0).setType("any"),e.addInherited("barSize","borderBarSize").setType(pl.Attribute.NUMBER),e.addInherited("enableDrop","borderEnableDrop").setType(pl.Attribute.BOOLEAN),e.addInherited("className","borderClassName").setType(pl.Attribute.STRING),e.addInherited("autoSelectTabWhenOpen","borderAutoSelectTabWhenOpen").setType(pl.Attribute.BOOLEAN),e.addInherited("autoSelectTabWhenClosed","borderAutoSelectTabWhenClosed").setType(pl.Attribute.BOOLEAN),e.addInherited("size","borderSize").setType(pl.Attribute.NUMBER),e.addInherited("minSize","borderMinSize").setType(pl.Attribute.NUMBER),e.addInherited("enableAutoHide","borderEnableAutoHide").setType(pl.Attribute.BOOLEAN),e}constructor(e,r,n){super(n),this._adjustedSize=0,this._calculatedBorderBarSize=0,this._location=e,this._drawChildren=[],this._attributes.id=`border_${e.getName()}`,t._attributeDefinitions.fromJson(r,this._attributes),n._addNode(this)}getLocation(){return this._location}getTabHeaderRect(){return this._tabHeaderRect}getRect(){return this._tabHeaderRect}getContentRect(){return this._contentRect}isEnableDrop(){return this._getAttr("enableDrop")}isAutoSelectTab(e){return e==null&&(e=this.getSelected()!==-1),e?this._getAttr("autoSelectTabWhenOpen"):this._getAttr("autoSelectTabWhenClosed")}getClassName(){return this._getAttr("className")}calcBorderBarSize(e){let r=this._getAttr("barSize");r!==0?this._calculatedBorderBarSize=r:this._calculatedBorderBarSize=e.borderBarSize}getBorderBarSize(){return this._calculatedBorderBarSize}getSize(){let e=this._getAttr("size"),r=this.getSelected();if(r===-1)return e;{let n=this._children[r],i=this._location._orientation===d2.Orientation.HORZ?n._getAttr("borderWidth"):n._getAttr("borderHeight");return i===-1?e:i}}getMinSize(){return this._getAttr("minSize")}getSelected(){return this._attributes.selected}getSelectedNode(){if(this.getSelected()!==-1)return this._children[this.getSelected()]}getOrientation(){return this._location.getOrientation()}getConfig(){return this._attributes.config}isMaximized(){return!1}isShowing(){return this._attributes.show?!(this._model._getShowHiddenBorder()!==this._location&&this.isAutoHide()&&this._children.length===0):!1}isAutoHide(){return this._getAttr("enableAutoHide")}_setSelected(e){this._attributes.selected=e}_setSize(e){let r=this.getSelected();if(r===-1)this._attributes.size=e;else{let n=this._children[r];(this._location._orientation===d2.Orientation.HORZ?n._getAttr("borderWidth"):n._getAttr("borderHeight"))===-1?this._attributes.size=e:this._location._orientation===d2.Orientation.HORZ?n._setBorderWidth(e):n._setBorderHeight(e)}}_updateAttrs(e){t._attributeDefinitions.update(e,this._attributes)}_getDrawChildren(){return this._drawChildren}_setAdjustedSize(e){this._adjustedSize=e}_getAdjustedSize(){return this._adjustedSize}_layoutBorderOuter(e,r){this.calcBorderBarSize(r);let n=this._location.split(e,this.getBorderBarSize());return this._tabHeaderRect=n.start,n.end}_layoutBorderInner(e,r){this._drawChildren=[];let n=this._location,i=n.split(e,this._adjustedSize+this._model.getSplitterSize()),o=n.reflect().split(i.start,this._model.getSplitterSize());this._contentRect=o.end;for(let s=0;s<this._children.length;s++){let a=this._children[s];a._layout(this._contentRect,r),a._setVisible(s===this.getSelected()),this._drawChildren.push(a)}if(this.getSelected()===-1)return e;{let s=new MIe.SplitterNode(this._model);return s._setParent(this),s._setRect(o.start),this._drawChildren.push(s),i.end}}_remove(e){let r=this._removeChild(e);this.getSelected()!==-1&&(0,qQ.adjustSelectedIndex)(this,r)}canDrop(e,r,n){if(e.getType()!==p2.TabNode.TYPE)return;let i,o=_p.DockLocation.CENTER;if(this._tabHeaderRect.contains(r,n)){if(this._location._orientation===d2.Orientation.VERT)if(this._children.length>0){let s=this._children[0],a=s.getTabRect(),l=a.y,c=a.height,p=this._tabHeaderRect.x,f=0;for(let m=0;m<this._children.length;m++){if(s=this._children[m],a=s.getTabRect(),f=a.x+a.width/2,r>=p&&r<f){let g=new Rg.Rect(a.x-2,l,3,c);i=new Zf.DropInfo(this,g,o,m,em.CLASSES.FLEXLAYOUT__OUTLINE_RECT);break}p=f}if(i==null){let m=new Rg.Rect(a.getRight()-2,l,3,c);i=new Zf.DropInfo(this,m,o,this._children.length,em.CLASSES.FLEXLAYOUT__OUTLINE_RECT)}}else{let s=new Rg.Rect(this._tabHeaderRect.x+1,this._tabHeaderRect.y+2,3,18);i=new Zf.DropInfo(this,s,o,0,em.CLASSES.FLEXLAYOUT__OUTLINE_RECT)}else if(this._children.length>0){let s=this._children[0],a=s.getTabRect(),l=a.x,c=a.width,p=this._tabHeaderRect.y,f=0;for(let m=0;m<this._children.length;m++){if(s=this._children[m],a=s.getTabRect(),f=a.y+a.height/2,n>=p&&n<f){let g=new Rg.Rect(l,a.y-2,c,3);i=new Zf.DropInfo(this,g,o,m,em.CLASSES.FLEXLAYOUT__OUTLINE_RECT);break}p=f}if(i==null){let m=new Rg.Rect(l,a.getBottom()-2,c,3);i=new Zf.DropInfo(this,m,o,this._children.length,em.CLASSES.FLEXLAYOUT__OUTLINE_RECT)}}else{let s=new Rg.Rect(this._tabHeaderRect.x+2,this._tabHeaderRect.y+1,18,3);i=new Zf.DropInfo(this,s,o,0,em.CLASSES.FLEXLAYOUT__OUTLINE_RECT)}if(!e._canDockInto(e,i))return}else if(this.getSelected()!==-1&&this._contentRect.contains(r,n)){let s=this._contentRect;if(i=new Zf.DropInfo(this,s,o,-1,em.CLASSES.FLEXLAYOUT__OUTLINE_RECT),!e._canDockInto(e,i))return}return i}drop(e,r,n,i){let o=0,s=e.getParent();s!==void 0&&(o=s._removeChild(e),s!==this&&s instanceof t&&s.getSelected()===o?s._setSelected(-1):(0,qQ.adjustSelectedIndex)(s,o)),e.getType()===p2.TabNode.TYPE&&s===this&&o<n&&n>0&&n--;let a=n;a===-1&&(a=this._children.length),e.getType()===p2.TabNode.TYPE&&this._addChild(e,a),(i||i!==!1&&this.isAutoSelectTab())&&this._setSelected(a),this._model._tidy()}toJson(){let e={};return t._attributeDefinitions.toJson(e,this._attributes),e.location=this._location.getName(),e.children=this._children.map(r=>r.toJson()),e}_getSplitterBounds(e,r=!1){let n=[0,0],i=r?this.getMinSize():0,o=this._model._getOuterInnerRects().outer,s=this._model._getOuterInnerRects().inner,a=this._model.getRoot();return this._location===_p.DockLocation.TOP?(n[0]=o.y+i,n[1]=Math.max(n[0],s.getBottom()-e.getHeight()-a.getMinHeight())):this._location===_p.DockLocation.LEFT?(n[0]=o.x+i,n[1]=Math.max(n[0],s.getRight()-e.getWidth()-a.getMinWidth())):this._location===_p.DockLocation.BOTTOM?(n[1]=o.getBottom()-e.getHeight()-i,n[0]=Math.min(n[1],s.y+a.getMinHeight())):this._location===_p.DockLocation.RIGHT&&(n[1]=o.getRight()-e.getWidth()-i,n[0]=Math.min(n[1],s.x+a.getMinWidth())),n}_calculateSplit(e,r){let n=this._getSplitterBounds(e);return this._location===_p.DockLocation.BOTTOM||this._location===_p.DockLocation.RIGHT?Math.max(0,n[1]-r):Math.max(0,r-n[0])}_getAttributeDefinitions(){return t._attributeDefinitions}static getAttributeDefinitions(){return t._attributeDefinitions}};f2.BorderNode=Pg;Pg.TYPE="border";Pg._attributeDefinitions=Pg._createAttributeDefinitions()});var Dc=Y(w_=>{"use strict";Object.defineProperty(w_,"__esModule",{value:!0});w_.I18nLabel=void 0;var FIe;(function(t){t.Close_Tab="Close",t.Close_Tabset="Close tabset",t.Move_Tab="Move: ",t.Move_Tabset="Move tabset",t.Maximize="Maximize tabset",t.Restore="Restore tabset",t.Float_Tab="Show selected tab in floating window",t.Overflow_Menu_Tooltip="Hidden tabs",t.Floating_Window_Message="This panel is shown in a floating window",t.Floating_Window_Show_Window="Show window",t.Floating_Window_Dock_Window="Dock window",t.Error_rendering_component="Error rendering component"})(FIe=w_.I18nLabel||(w_.I18nLabel={}))});var m2=Y(S_=>{"use strict";Object.defineProperty(S_,"__esModule",{value:!0});S_.ICloseType=void 0;var UIe;(function(t){t[t.Visible=1]="Visible",t[t.Always=2]="Always",t[t.Selected=3]="Selected"})(UIe=S_.ICloseType||(S_.ICloseType={}))});var xp=Y(bp=>{"use strict";Object.defineProperty(bp,"__esModule",{value:!0});bp.isAuxMouseEvent=bp.hideElement=bp.getRenderStateEx=void 0;var GQ=ve();function BIe(t,e,r,n,i){let o=r?r(e):void 0,s=e.getName(),a=e.getName();i===void 0&&(i=0);function l(f){return f.titleContent!==void 0}if(n!==void 0){let f=n(e);f!==void 0&&(typeof f=="string"?(s=f,a=f):l(f)?(s=f.titleContent,a=f.name):s=f)}o===void 0&&e.getIcon()!==void 0&&(i!==0?o=GQ.createElement("img",{style:{width:"1em",height:"1em",transform:"rotate("+i+"deg)"},src:e.getIcon(),alt:"leadingContent"}):o=GQ.createElement("img",{style:{width:"1em",height:"1em"},src:e.getIcon(),alt:"leadingContent"}));let p={leading:o,content:s,name:a,buttons:[]};return t.customizeTab(e,p),e._setRenderedName(p.name),p}bp.getRenderStateEx=BIe;function WIe(t,e){e?t.visibility="hidden":t.display="none"}bp.hideElement=WIe;function jIe(t){let e=!1;return t.nativeEvent instanceof MouseEvent&&(t.nativeEvent.button!==0||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey)&&(e=!0),e}bp.isAuxMouseEvent=jIe});var KQ=Y(h2=>{"use strict";Object.defineProperty(h2,"__esModule",{value:!0});h2.BorderButton=void 0;var Tp=ve(),zIe=Dc(),b5=dl(),$Ie=cs(),VQ=m2(),wp=Si(),x5=xp(),HIe=t=>{let{layout:e,node:r,selected:n,border:i,iconFactory:o,titleFactory:s,icons:a,path:l}=t,c=Tp.useRef(null),p=Tp.useRef(null),f=te=>{!(0,x5.isAuxMouseEvent)(te)&&!e.getEditingTab()&&e.dragStart(te,void 0,r,r.isEnableDrag(),v,_)},m=te=>{(0,x5.isAuxMouseEvent)(te)&&e.auxMouseClick(r,te)},g=te=>{e.showContextMenu(r,te)},v=()=>{e.doAction(b5.Actions.selectTab(r.getId()))},_=te=>{},S=te=>{te.target!==p.current&&(e.getCurrentDocument().body.removeEventListener("mousedown",S),e.getCurrentDocument().body.removeEventListener("touchstart",S),e.setEditingTab(void 0))},T=()=>{let te=r.getCloseType();return!!(n||te===VQ.ICloseType.Always||te===VQ.ICloseType.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},w=te=>{T()?e.doAction(b5.Actions.deleteTab(r.getId())):v()},E=te=>{te.stopPropagation()};Tp.useLayoutEffect(()=>{I(),e.getEditingTab()===r&&p.current.select()});let I=()=>{var te;let ne=e.getDomRect(),H=(te=c.current)===null||te===void 0?void 0:te.getBoundingClientRect();H&&ne&&r._setTabRect(new $Ie.Rect(H.left-ne.left,H.top-ne.top,H.width,H.height))},N=te=>{te.stopPropagation()},C=te=>{te.code==="Escape"?e.setEditingTab(void 0):te.code==="Enter"&&(e.setEditingTab(void 0),e.doAction(b5.Actions.renameTab(r.getId(),te.target.value)))},k=e.getClassName,U=k(wp.CLASSES.FLEXLAYOUT__BORDER_BUTTON)+" "+k(wp.CLASSES.FLEXLAYOUT__BORDER_BUTTON_+i);n?U+=" "+k(wp.CLASSES.FLEXLAYOUT__BORDER_BUTTON__SELECTED):U+=" "+k(wp.CLASSES.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED),r.getClassName()!==void 0&&(U+=" "+r.getClassName());let $=0;r.getModel().isEnableRotateBorderIcons()===!1&&(i==="left"?$=90:i==="right"&&($=-90));let G=(0,x5.getRenderStateEx)(e,r,o,s,$),K=G.content?Tp.createElement("div",{className:k(wp.CLASSES.FLEXLAYOUT__BORDER_BUTTON_CONTENT)},G.content):null,X=G.leading?Tp.createElement("div",{className:k(wp.CLASSES.FLEXLAYOUT__BORDER_BUTTON_LEADING)},G.leading):null;if(e.getEditingTab()===r&&(K=Tp.createElement("input",{ref:p,className:k(wp.CLASSES.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":l+"/textbox",type:"text",autoFocus:!0,defaultValue:r.getName(),onKeyDown:C,onMouseDown:N,onTouchStart:N})),r.isEnableClose()){let te=e.i18nName(zIe.I18nLabel.Close_Tab);G.buttons.push(Tp.createElement("div",{key:"close","data-layout-path":l+"/button/close",title:te,className:k(wp.CLASSES.FLEXLAYOUT__BORDER_BUTTON_TRAILING),onMouseDown:E,onClick:w,onTouchStart:E},typeof a.close=="function"?a.close(r):a.close))}return Tp.createElement("div",{ref:c,"data-layout-path":l,className:U,onMouseDown:f,onClick:m,onAuxClick:m,onContextMenu:g,onTouchStart:f,title:r.getHelpText()},X,K,G.buttons)};h2.BorderButton=HIe});var w5=Y(y2=>{"use strict";Object.defineProperty(y2,"__esModule",{value:!0});y2.TabButtonStamp=void 0;var g2=ve(),T5=Si(),qIe=xp(),GIe=t=>{let{layout:e,node:r,iconFactory:n,titleFactory:i}=t,o=g2.useRef(null),s=e.getClassName,a=s(T5.CLASSES.FLEXLAYOUT__TAB_BUTTON_STAMP),l=(0,qIe.getRenderStateEx)(e,r,n,i),c=l.content?g2.createElement("div",{className:s(T5.CLASSES.FLEXLAYOUT__TAB_BUTTON_CONTENT)},l.content):r._getNameForOverflowMenu(),p=l.leading?g2.createElement("div",{className:s(T5.CLASSES.FLEXLAYOUT__TAB_BUTTON_LEADING)},l.leading):null;return g2.createElement("div",{ref:o,className:a,title:r.getHelpText()},p,c)};y2.TabButtonStamp=GIe});var C5=Y(_2=>{"use strict";Object.defineProperty(_2,"__esModule",{value:!0});_2.showPopup=void 0;var v2=ve(),S5=g_(),E5=Si(),VIe=w5();function KIe(t,e,r,n,i,o){var s;let a=n.getRootDiv(),l=n.getClassName,c=t.ownerDocument,p=t.getBoundingClientRect(),f=(s=a?.getBoundingClientRect())!==null&&s!==void 0?s:new DOMRect(0,0,100,100),m=c.createElement("div");m.className=l(E5.CLASSES.FLEXLAYOUT__POPUP_MENU_CONTAINER),p.left<f.left+f.width/2?m.style.left=p.left-f.left+"px":m.style.right=f.right-p.right+"px",p.top<f.top+f.height/2?m.style.top=p.top-f.top+"px":m.style.bottom=f.bottom-p.bottom+"px",S5.DragDrop.instance.addGlass(()=>g()),S5.DragDrop.instance.setGlassCursorOverride("default"),a&&a.appendChild(m);let g=()=>{n.hidePortal(),S5.DragDrop.instance.hideGlass(),a&&a.removeChild(m),m.removeEventListener("mousedown",v),c.removeEventListener("mousedown",_)},v=S=>{S.stopPropagation()},_=S=>{g()};m.addEventListener("mousedown",v),c.addEventListener("mousedown",_),n.showPortal(v2.createElement(YIe,{currentDocument:c,onSelect:r,onHide:g,items:e,classNameMapper:l,layout:n,iconFactory:i,titleFactory:o}),m)}_2.showPopup=KIe;var YIe=t=>{let{items:e,onHide:r,onSelect:n,classNameMapper:i,layout:o,iconFactory:s,titleFactory:a}=t,l=(p,f)=>{n(p),r(),f.stopPropagation()},c=e.map((p,f)=>v2.createElement("div",{key:p.index,className:i(E5.CLASSES.FLEXLAYOUT__POPUP_MENU_ITEM),"data-layout-path":"/popup-menu/tb"+f,onClick:m=>l(p,m),title:p.node.getHelpText()},p.node.getModel().isLegacyOverflowMenu()?p.node._getNameForOverflowMenu():v2.createElement(VIe.TabButtonStamp,{node:p.node,layout:o,iconFactory:s,titleFactory:a})));return v2.createElement("div",{className:i(E5.CLASSES.FLEXLAYOUT__POPUP_MENU),"data-layout-path":"/popup-menu"},c)}});var I5=Y(b2=>{"use strict";Object.defineProperty(b2,"__esModule",{value:!0});b2.useTabOverflow=void 0;var fl=ve(),XIe=cs(),YQ=Cc(),D5=vo(),JIe=(t,e,r,n)=>{let i=fl.useRef(!0),o=fl.useRef(!1),s=fl.useRef(new XIe.Rect(0,0,0,0)),a=fl.useRef(null),[l,c]=fl.useState(0),p=fl.useRef(!1),[f,m]=fl.useState([]),g=fl.useRef(0);fl.useLayoutEffect(()=>{p.current=!1},[t.getSelectedNode(),t.getRect().width,t.getRect().height]),fl.useLayoutEffect(()=>{E()});let v=a.current;fl.useEffect(()=>{if(v)return v.addEventListener("wheel",_,{passive:!1}),()=>{v.removeEventListener("wheel",_)}},[v]);let _=N=>{N.preventDefault()},S=N=>e===D5.Orientation.HORZ?N.x:N.y,T=N=>e===D5.Orientation.HORZ?N.getRight():N.getBottom(),w=N=>e===D5.Orientation.HORZ?N.width:N.height,E=()=>{i.current===!0&&(o.current=!1);let C=t instanceof YQ.TabSetNode?t.getRect():t.getTabHeaderRect(),k=t.getChildren()[t.getChildren().length-1],U=n.current===null?0:w(n.current.getBoundingClientRect());if(i.current===!0||g.current===0&&f.length!==0||C.width!==s.current.width||C.height!==s.current.height){g.current=f.length,s.current=C;let $=t instanceof YQ.TabSetNode?t.isEnableTabStrip()===!0:!0,G=T(C)-U;if(r.current!==null&&(G-=w(r.current.getBoundingClientRect())),$&&t.getChildren().length>0){if(f.length===0&&l===0&&T(k.getTabRect())+2<G)return;let K=0,X=t.getSelectedNode();if(X&&!p.current){let W=X.getTabRect(),q=S(W)-2,se=T(W)+2;w(W)+2*2>=G-S(C)?K=S(C)-q:(se>G||q<S(C))&&(q<S(C)&&(K=S(C)-q),se+K>G&&(K=G-se))}let te=Math.max(0,G-(T(k.getTabRect())+2+K)),ne=Math.min(0,l+K+te),H=ne-l,re=[];for(let W=0;W<t.getChildren().length;W++){let q=t.getChildren()[W];(S(q.getTabRect())+H<S(C)||T(q.getTabRect())+H>G)&&re.push({node:q,index:W})}re.length>0&&(o.current=!0),i.current=!1,m(re),c(ne)}}else i.current=!0};return{selfRef:a,position:l,userControlledLeft:p,hiddenTabs:f,onMouseWheel:N=>{let C=0;Math.abs(N.deltaX)>Math.abs(N.deltaY)?C=-N.deltaX:C=-N.deltaY,N.deltaMode===1&&(C*=40),c(l+C),p.current=!0,N.stopPropagation()},tabsTruncated:o.current}};b2.useTabOverflow=JIe});var ZQ=Y(x2=>{"use strict";Object.defineProperty(x2,"__esModule",{value:!0});x2.BorderTabSet=void 0;var jo=ve(),XQ=Ec(),QIe=KQ(),ZIe=C5(),JQ=dl(),QQ=Dc(),eke=I5(),tke=vo(),_o=Si(),rke=xp(),nke=t=>{let{border:e,layout:r,iconFactory:n,titleFactory:i,icons:o,path:s}=t,a=jo.useRef(null),l=jo.useRef(null),c=jo.useRef(null),{selfRef:p,position:f,userControlledLeft:m,hiddenTabs:g,onMouseWheel:v,tabsTruncated:_}=(0,eke.useTabOverflow)(e,tke.Orientation.flip(e.getOrientation()),a,c),S=q=>{(0,rke.isAuxMouseEvent)(q)&&r.auxMouseClick(e,q)},T=q=>{r.showContextMenu(e,q)},w=q=>{q.stopPropagation()},E=q=>{let se=r.getShowOverflowMenu();if(se!==void 0)se(e,q,g,I);else{let J=l.current;(0,ZIe.showPopup)(J,g,I,r,n,i)}q.stopPropagation()},I=q=>{r.doAction(JQ.Actions.selectTab(q.node.getId())),m.current=!1},N=q=>{let se=e.getChildren()[e.getSelected()];se!==void 0&&r.doAction(JQ.Actions.floatTab(se.getId())),q.stopPropagation()},C=r.getClassName,k=e.getTabHeaderRect().styleWithPosition({}),U=[],$=q=>{let se=e.getSelected()===q,J=e.getChildren()[q];U.push(jo.createElement(QIe.BorderButton,{layout:r,border:e.getLocation().getName(),node:J,path:s+"/tb"+q,key:J.getId(),selected:se,iconFactory:n,titleFactory:i,icons:o})),q<e.getChildren().length-1&&U.push(jo.createElement("div",{key:"divider"+q,className:C(_o.CLASSES.FLEXLAYOUT__BORDER_TAB_DIVIDER)}))};for(let q=0;q<e.getChildren().length;q++)$(q);let G=C(_o.CLASSES.FLEXLAYOUT__BORDER)+" "+C(_o.CLASSES.FLEXLAYOUT__BORDER_+e.getLocation().getName());e.getClassName()!==void 0&&(G+=" "+e.getClassName());let K=[],X=[],te={headerContent:void 0,buttons:K,stickyButtons:X,headerButtons:[],overflowPosition:void 0};if(r.customizeTabSet(e,te),K=te.buttons,te.overflowPosition===void 0&&(te.overflowPosition=X.length),X.length>0&&(_?K=[...X,...K]:U.push(jo.createElement("div",{ref:c,key:"sticky_buttons_container",onMouseDown:w,onTouchStart:w,onDragStart:q=>{q.preventDefault()},className:C(_o.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER)},X))),g.length>0){let q=r.i18nName(QQ.I18nLabel.Overflow_Menu_Tooltip),se;typeof o.more=="function"?se=o.more(e,g):se=jo.createElement(jo.Fragment,null,o.more,jo.createElement("div",{className:C(_o.CLASSES.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT)},g.length)),K.splice(Math.min(te.overflowPosition,K.length),0,jo.createElement("button",{key:"overflowbutton",ref:l,className:C(_o.CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+C(_o.CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW)+" "+C(_o.CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_+e.getLocation().getName()),title:q,onClick:E,onMouseDown:w,onTouchStart:w},se))}let ne=e.getSelected();if(ne!==-1){let q=e.getChildren()[ne];if(q!==void 0&&r.isSupportsPopout()&&q.isEnableFloat()&&!q.isFloating()){let se=r.i18nName(QQ.I18nLabel.Float_Tab);K.push(jo.createElement("button",{key:"float",title:se,className:C(_o.CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+C(_o.CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT),onClick:N,onMouseDown:w,onTouchStart:w},typeof o.popout=="function"?o.popout(q):o.popout))}}let H=jo.createElement("div",{key:"toolbar",ref:a,className:C(_o.CLASSES.FLEXLAYOUT__BORDER_TOOLBAR)+" "+C(_o.CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_+e.getLocation().getName())},K);k=r.styleFont(k);let re={},W=e.getBorderBarSize()-1;return e.getLocation()===XQ.DockLocation.LEFT?re={right:W,height:W,top:f}:e.getLocation()===XQ.DockLocation.RIGHT?re={left:W,height:W,top:f}:re={height:W,left:f},jo.createElement("div",{ref:p,dir:"ltr",style:k,className:G,"data-layout-path":s,onClick:S,onAuxClick:S,onContextMenu:T,onWheel:v},jo.createElement("div",{style:{height:W},className:C(_o.CLASSES.FLEXLAYOUT__BORDER_INNER)+" "+C(_o.CLASSES.FLEXLAYOUT__BORDER_INNER_+e.getLocation().getName())},jo.createElement("div",{style:re,className:C(_o.CLASSES.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER)+" "+C(_o.CLASSES.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_+e.getLocation().getName())},U)),H)};x2.BorderTabSet=nke});var nZ=Y(T2=>{"use strict";Object.defineProperty(T2,"__esModule",{value:!0});T2.Splitter=void 0;var E_=ve(),eZ=g_(),tZ=dl(),rZ=au(),Ic=vo(),C_=Si(),ike=t=>{let{layout:e,node:r,path:n}=t,i=E_.useRef([]),o=E_.useRef(void 0),s=r.getParent(),a=E=>{var I;eZ.DragDrop.instance.setGlassCursorOverride(r.getOrientation()===Ic.Orientation.HORZ?"ns-resize":"ew-resize"),eZ.DragDrop.instance.startDrag(E,c,p,m,l,void 0,void 0,e.getCurrentDocument(),(I=e.getRootDiv())!==null&&I!==void 0?I:void 0),i.current=s._getSplitterBounds(r,!0);let N=e.getRootDiv();o.current=e.getCurrentDocument().createElement("div"),o.current.style.position="absolute",o.current.className=e.getClassName(C_.CLASSES.FLEXLAYOUT__SPLITTER_DRAG),o.current.style.cursor=r.getOrientation()===Ic.Orientation.HORZ?"ns-resize":"ew-resize";let C=r.getRect();r.getOrientation()===Ic.Orientation.VERT&&C.width<2?C.width=2:r.getOrientation()===Ic.Orientation.HORZ&&C.height<2&&(C.height=2),C.positionElement(o.current),N&&N.appendChild(o.current)},l=E=>{let I=e.getRootDiv();I&&I.removeChild(o.current)},c=()=>!0,p=E=>{let I=e.getDomRect();if(!I)return;let N={x:E.clientX-I.left,y:E.clientY-I.top};o&&(r.getOrientation()===Ic.Orientation.HORZ?o.current.style.top=g(N.y-4)+"px":o.current.style.left=g(N.x-4)+"px"),e.isRealtimeResize()&&f()},f=()=>{let E=0;if(o&&(r.getOrientation()===Ic.Orientation.HORZ?E=o.current.offsetTop:E=o.current.offsetLeft),s instanceof rZ.BorderNode){let I=s._calculateSplit(r,E);e.doAction(tZ.Actions.adjustBorderSplit(r.getParent().getId(),I))}else{let I=s._calculateSplit(r,E);I!==void 0&&e.doAction(tZ.Actions.adjustSplit(I))}},m=()=>{f();let E=e.getRootDiv();E&&E.removeChild(o.current)},g=E=>{let I=i.current,N=E;return E<I[0]&&(N=I[0]),E>I[1]&&(N=I[1]),N},v=e.getClassName,_=r.getRect(),S=_.styleWithPosition({cursor:r.getOrientation()===Ic.Orientation.HORZ?"ns-resize":"ew-resize"}),T=v(C_.CLASSES.FLEXLAYOUT__SPLITTER)+" "+v(C_.CLASSES.FLEXLAYOUT__SPLITTER_+r.getOrientation().getName());s instanceof rZ.BorderNode?T+=" "+v(C_.CLASSES.FLEXLAYOUT__SPLITTER_BORDER):r.getModel().getMaximizedTabset()!==void 0&&(S.display="none");let w=r.getModel().getSplitterExtra();if(w===0)return E_.createElement("div",{style:S,"data-layout-path":n,className:T,onTouchStart:a,onMouseDown:a});{let E=_.clone();E.x=0,E.y=0,r.getOrientation()===Ic.Orientation.VERT?E.width+=w:E.height+=w;let I=E.styleWithPosition({cursor:r.getOrientation()===Ic.Orientation.HORZ?"ns-resize":"ew-resize"}),N=v(C_.CLASSES.FLEXLAYOUT__SPLITTER_EXTRA);return E_.createElement("div",{style:S,"data-layout-path":n,className:T},E_.createElement("div",{style:I,className:N,onTouchStart:a,onMouseDown:a}))}};T2.Splitter=ike});var A5=Y(w2=>{"use strict";Object.defineProperty(w2,"__esModule",{value:!0});w2.ErrorBoundary=void 0;var k5=ve(),iZ=Si(),N5=class extends k5.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,r){console.debug(e),console.debug(r)}render(){return this.state.hasError?k5.createElement("div",{className:iZ.CLASSES.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER},k5.createElement("div",{className:iZ.CLASSES.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT},this.props.message)):this.props.children}};w2.ErrorBoundary=N5});var aZ=Y(S2=>{"use strict";Object.defineProperty(S2,"__esModule",{value:!0});S2.Tab=void 0;var D_=ve(),oke=ve(),ske=dl(),oZ=Cc(),O5=Si(),ake=A5(),lke=Dc(),uke=au(),sZ=xp(),cke=t=>{let{layout:e,selected:r,node:n,factory:i,path:o}=t,[s,a]=D_.useState(!t.node.isEnableRenderOnDemand()||t.selected);D_.useLayoutEffect(()=>{!s&&r&&a(!0)});let l=()=>{let _=n.getParent();_.getType()===oZ.TabSetNode.TYPE&&(_.isActive()||e.doAction(ske.Actions.setActiveTabset(_.getId())))},c=e.getClassName,p=n.getModel().isUseVisibility(),f=n.getParent(),m=n._styleWithPosition();r||(0,sZ.hideElement)(m,p),f instanceof oZ.TabSetNode&&n.getModel().getMaximizedTabset()!==void 0&&!f.isMaximized()&&(0,sZ.hideElement)(m,p);let g;s&&(g=i(n));let v=c(O5.CLASSES.FLEXLAYOUT__TAB);return f instanceof uke.BorderNode&&(v+=" "+c(O5.CLASSES.FLEXLAYOUT__TAB_BORDER),v+=" "+c(O5.CLASSES.FLEXLAYOUT__TAB_BORDER_+f.getLocation().getName())),n.getContentClassName()!==void 0&&(v+=" "+n.getContentClassName()),D_.createElement("div",{className:v,"data-layout-path":o,onMouseDown:l,onTouchStart:l,style:m},D_.createElement(ake.ErrorBoundary,{message:t.layout.i18nName(lke.I18nLabel.Error_rendering_component)},D_.createElement(oke.Fragment,null,g)))};S2.Tab=cke});var uZ=Y(E2=>{"use strict";Object.defineProperty(E2,"__esModule",{value:!0});E2.TabButton=void 0;var Sp=ve(),dke=Dc(),R5=dl(),pke=cs(),lZ=m2(),Lg=Si(),P5=xp(),fke=t=>{let{layout:e,node:r,selected:n,iconFactory:i,titleFactory:o,icons:s,path:a}=t,l=Sp.useRef(null),c=Sp.useRef(null),p=H=>{!(0,P5.isAuxMouseEvent)(H)&&!e.getEditingTab()&&e.dragStart(H,void 0,r,r.isEnableDrag(),g,v)},f=H=>{(0,P5.isAuxMouseEvent)(H)&&e.auxMouseClick(r,H)},m=H=>{e.showContextMenu(r,H)},g=()=>{e.doAction(R5.Actions.selectTab(r.getId()))},v=H=>{r.isEnableRename()&&_()},_=()=>{e.setEditingTab(r),e.getCurrentDocument().body.addEventListener("mousedown",S),e.getCurrentDocument().body.addEventListener("touchstart",S)},S=H=>{H.target!==c.current&&(e.getCurrentDocument().body.removeEventListener("mousedown",S),e.getCurrentDocument().body.removeEventListener("touchstart",S),e.setEditingTab(void 0))},T=()=>{let H=r.getCloseType();return!!(n||H===lZ.ICloseType.Always||H===lZ.ICloseType.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},w=H=>{T()?e.doAction(R5.Actions.deleteTab(r.getId())):g()},E=H=>{H.stopPropagation()};Sp.useLayoutEffect(()=>{I(),e.getEditingTab()===r&&c.current.select()});let I=()=>{var H;let re=e.getDomRect(),W=(H=l.current)===null||H===void 0?void 0:H.getBoundingClientRect();W&&re&&r._setTabRect(new pke.Rect(W.left-re.left,W.top-re.top,W.width,W.height))},N=H=>{H.stopPropagation()},C=H=>{H.code==="Escape"?e.setEditingTab(void 0):H.code==="Enter"&&(e.setEditingTab(void 0),e.doAction(R5.Actions.renameTab(r.getId(),H.target.value)))},k=e.getClassName,U=r.getParent(),$=U.isEnableSingleTabStretch()&&U.getChildren().length===1,G=$?Lg.CLASSES.FLEXLAYOUT__TAB_BUTTON_STRETCH:Lg.CLASSES.FLEXLAYOUT__TAB_BUTTON,K=k(G);K+=" "+k(G+"_"+U.getTabLocation()),$||(n?K+=" "+k(G+"--selected"):K+=" "+k(G+"--unselected")),r.getClassName()!==void 0&&(K+=" "+r.getClassName());let X=(0,P5.getRenderStateEx)(e,r,i,o),te=X.content?Sp.createElement("div",{className:k(Lg.CLASSES.FLEXLAYOUT__TAB_BUTTON_CONTENT)},X.content):null,ne=X.leading?Sp.createElement("div",{className:k(Lg.CLASSES.FLEXLAYOUT__TAB_BUTTON_LEADING)},X.leading):null;if(e.getEditingTab()===r&&(te=Sp.createElement("input",{ref:c,className:k(Lg.CLASSES.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":a+"/textbox",type:"text",autoFocus:!0,defaultValue:r.getName(),onKeyDown:C,onMouseDown:N,onTouchStart:N})),r.isEnableClose()&&!$){let H=e.i18nName(dke.I18nLabel.Close_Tab);X.buttons.push(Sp.createElement("div",{key:"close","data-layout-path":a+"/button/close",title:H,className:k(Lg.CLASSES.FLEXLAYOUT__TAB_BUTTON_TRAILING),onMouseDown:E,onClick:w,onTouchStart:E},typeof s.close=="function"?s.close(r):s.close))}return Sp.createElement("div",{ref:l,"data-layout-path":a,className:K,onMouseDown:p,onClick:f,onAuxClick:f,onContextMenu:m,onTouchStart:p,title:r.getHelpText()},ne,te,X.buttons)};E2.TabButton=fke});var cZ=Y(C2=>{"use strict";Object.defineProperty(C2,"__esModule",{value:!0});C2.TabSet=void 0;var Ur=ve(),tm=Dc(),I_=dl(),mke=C5(),hke=uZ(),gke=I5(),yke=vo(),Br=Si(),L5=xp(),vke=t=>{let{node:e,layout:r,iconFactory:n,titleFactory:i,icons:o,path:s}=t,a=Ur.useRef(null),l=Ur.useRef(null),c=Ur.useRef(null),p=Ur.useRef(null),{selfRef:f,position:m,userControlledLeft:g,hiddenTabs:v,onMouseWheel:_,tabsTruncated:S}=(0,gke.useTabOverflow)(e,yke.Orientation.HORZ,a,p),T=ue=>{let Te=r.getShowOverflowMenu();if(Te!==void 0)Te(e,ue,v,w);else{let ce=l.current;(0,mke.showPopup)(ce,v,w,r,n,i)}ue.stopPropagation()},w=ue=>{r.doAction(I_.Actions.selectTab(ue.node.getId())),g.current=!1},E=ue=>{if(!(0,L5.isAuxMouseEvent)(ue)){let Te=e.getName();if(Te===void 0?Te="":Te=": "+Te,r.doAction(I_.Actions.setActiveTabset(e.getId())),!r.getEditingTab()){let ce=r.i18nName(tm.I18nLabel.Move_Tabset,Te);e.getModel().getMaximizedTabset()!==void 0?r.dragStart(ue,ce,e,!1,xe=>{},K):r.dragStart(ue,ce,e,e.isEnableDrag(),xe=>{},K)}}},I=ue=>{(0,L5.isAuxMouseEvent)(ue)&&r.auxMouseClick(e,ue)},N=ue=>{r.showContextMenu(e,ue)},C=ue=>{ue.stopPropagation()},k=ue=>{e.canMaximize()&&r.maximize(e),ue.stopPropagation()},U=ue=>{r.doAction(I_.Actions.deleteTabset(e.getId())),ue.stopPropagation()},$=ue=>{r.doAction(I_.Actions.deleteTab(e.getChildren()[0].getId())),ue.stopPropagation()},G=ue=>{te!==void 0&&r.doAction(I_.Actions.floatTab(te.getId())),ue.stopPropagation()},K=ue=>{e.canMaximize()&&r.maximize(e)},X=r.getClassName;c.current!==null&&c.current.scrollLeft!==0&&(c.current.scrollLeft=0);let te=e.getSelectedNode(),ne=e._styleWithPosition();e.getModel().getMaximizedTabset()!==void 0&&!e.isMaximized()&&(0,L5.hideElement)(ne,e.getModel().isUseVisibility());let H=[];if(e.isEnableTabStrip())for(let ue=0;ue<e.getChildren().length;ue++){let Te=e.getChildren()[ue],ce=e.getSelected()===ue;H.push(Ur.createElement(hke.TabButton,{layout:r,node:Te,path:s+"/tb"+ue,key:Te.getId(),selected:ce,iconFactory:n,titleFactory:i,icons:o})),ue<e.getChildren().length-1&&H.push(Ur.createElement("div",{key:"divider"+ue,className:X(Br.CLASSES.FLEXLAYOUT__TABSET_TAB_DIVIDER)}))}let re=e.getName()!==void 0,W=[],q=[],se=[],J={headerContent:e.getName(),stickyButtons:W,buttons:q,headerButtons:se,overflowPosition:void 0};r.customizeTabSet(e,J);let ye=J.headerContent;W=J.stickyButtons,q=J.buttons,se=J.headerButtons;let Ne=e.isEnableSingleTabStretch()&&e.getChildren().length===1,ae=Ne&&e.getChildren()[0].isEnableClose()||e.isEnableClose();if(J.overflowPosition===void 0&&(J.overflowPosition=W.length),W.length>0&&(S||Ne?q=[...W,...q]:H.push(Ur.createElement("div",{ref:p,key:"sticky_buttons_container",onMouseDown:C,onTouchStart:C,onDragStart:ue=>{ue.preventDefault()},className:X(Br.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER)},W))),v.length>0){let ue=r.i18nName(tm.I18nLabel.Overflow_Menu_Tooltip),Te;typeof o.more=="function"?Te=o.more(e,v):Te=Ur.createElement(Ur.Fragment,null,o.more,Ur.createElement("div",{className:X(Br.CLASSES.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT)},v.length)),q.splice(Math.min(J.overflowPosition,q.length),0,Ur.createElement("button",{key:"overflowbutton","data-layout-path":s+"/button/overflow",ref:l,className:X(Br.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+X(Br.CLASSES.FLEXLAYOUT__TAB_BUTTON_OVERFLOW),title:ue,onClick:T,onMouseDown:C,onTouchStart:C},Te))}if(te!==void 0&&r.isSupportsPopout()&&te.isEnableFloat()&&!te.isFloating()){let ue=r.i18nName(tm.I18nLabel.Float_Tab);q.push(Ur.createElement("button",{key:"float","data-layout-path":s+"/button/float",title:ue,className:X(Br.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+X(Br.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT),onClick:G,onMouseDown:C,onTouchStart:C},typeof o.popout=="function"?o.popout(te):o.popout))}if(e.canMaximize()){let ue=r.i18nName(tm.I18nLabel.Restore),Te=r.i18nName(tm.I18nLabel.Maximize);(re?se:q).push(Ur.createElement("button",{key:"max","data-layout-path":s+"/button/max",title:e.isMaximized()?ue:Te,className:X(Br.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+X(Br.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_+(e.isMaximized()?"max":"min")),onClick:k,onMouseDown:C,onTouchStart:C},e.isMaximized()?typeof o.restore=="function"?o.restore(e):o.restore:typeof o.maximize=="function"?o.maximize(e):o.maximize))}if(!e.isMaximized()&&ae){let ue=Ne?r.i18nName(tm.I18nLabel.Close_Tab):r.i18nName(tm.I18nLabel.Close_Tabset);(re?se:q).push(Ur.createElement("button",{key:"close","data-layout-path":s+"/button/close",title:ue,className:X(Br.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+X(Br.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE),onClick:Ne?$:U,onMouseDown:C,onTouchStart:C},typeof o.closeTabset=="function"?o.closeTabset(e):o.closeTabset))}let Se=Ur.createElement("div",{key:"toolbar",ref:a,className:X(Br.CLASSES.FLEXLAYOUT__TAB_TOOLBAR),onMouseDown:C,onTouchStart:C,onDragStart:ue=>{ue.preventDefault()}},q),Re,Pe,Oe=X(Br.CLASSES.FLEXLAYOUT__TABSET_TABBAR_OUTER);if(e.getClassNameTabStrip()!==void 0&&(Oe+=" "+e.getClassNameTabStrip()),Oe+=" "+Br.CLASSES.FLEXLAYOUT__TABSET_TABBAR_OUTER_+e.getTabLocation(),e.isActive()&&!re&&(Oe+=" "+X(Br.CLASSES.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&!re&&(Oe+=" "+X(Br.CLASSES.FLEXLAYOUT__TABSET_MAXIMIZED)),Ne){let ue=e.getChildren()[0];ue.getTabSetClassName()!==void 0&&(Oe+=" "+ue.getTabSetClassName())}if(re){let ue=Ur.createElement("div",{key:"toolbar",ref:a,className:X(Br.CLASSES.FLEXLAYOUT__TAB_TOOLBAR),onMouseDown:C,onTouchStart:C,onDragStart:ce=>{ce.preventDefault()}},se),Te=X(Br.CLASSES.FLEXLAYOUT__TABSET_HEADER);e.isActive()&&(Te+=" "+X(Br.CLASSES.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&(Te+=" "+X(Br.CLASSES.FLEXLAYOUT__TABSET_MAXIMIZED)),e.getClassNameHeader()!==void 0&&(Te+=" "+e.getClassNameHeader()),Re=Ur.createElement("div",{className:Te,style:{height:e.getHeaderHeight()+"px"},"data-layout-path":s+"/header",onMouseDown:E,onContextMenu:N,onClick:I,onAuxClick:I,onTouchStart:E},Ur.createElement("div",{className:X(Br.CLASSES.FLEXLAYOUT__TABSET_HEADER_CONTENT)},ye),ue)}let ct={height:e.getTabStripHeight()+"px"};Pe=Ur.createElement("div",{className:Oe,style:ct,"data-layout-path":s+"/tabstrip",onMouseDown:E,onContextMenu:N,onClick:I,onAuxClick:I,onTouchStart:E},Ur.createElement("div",{ref:c,className:X(Br.CLASSES.FLEXLAYOUT__TABSET_TABBAR_INNER)+" "+X(Br.CLASSES.FLEXLAYOUT__TABSET_TABBAR_INNER_+e.getTabLocation())},Ur.createElement("div",{style:{left:m,width:Ne?"100%":"10000px"},className:X(Br.CLASSES.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER)+" "+X(Br.CLASSES.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_+e.getTabLocation())},H)),Se),ne=r.styleFont(ne);var mt=void 0;if(e.getChildren().length===0){let ue=r.getTabSetPlaceHolderCallback();ue&&(mt=ue(e))}let wt=Ur.createElement("div",{className:X(Br.CLASSES.FLEXLAYOUT__TABSET_CONTENT)},mt);var Me;return e.getTabLocation()==="top"?Me=Ur.createElement(Ur.Fragment,null,Re,Pe,wt):Me=Ur.createElement(Ur.Fragment,null,Re,wt,Pe),Ur.createElement("div",{ref:f,dir:"ltr","data-layout-path":s,style:ne,className:X(Br.CLASSES.FLEXLAYOUT__TABSET),onWheel:_},Me)};C2.TabSet=vke});var dZ=Y(I2=>{"use strict";Object.defineProperty(I2,"__esModule",{value:!0});I2.FloatingWindow=void 0;var D2=ve(),_ke=Pl(),bke=cs(),xke=Si(),Tke=t=>{let{title:e,id:r,url:n,rect:i,onCloseWindow:o,onSetWindow:s,children:a}=t,l=D2.useRef(null),c=D2.useRef(null),[p,f]=D2.useState(void 0);return D2.useLayoutEffect(()=>{c.current&&clearTimeout(c.current);let m=!0,g=i||new bke.Rect(0,0,100,100),v=Array.from(window.document.styleSheets).reduce((_,S)=>{let T;try{T=S.cssRules}catch{}try{return[..._,{href:S.href,type:S.type,rules:T?Array.from(T).map(w=>w.cssText):null}]}catch{return _}},[]);return l.current=window.open(n,r,`left=${g.x},top=${g.y},width=${g.width},height=${g.height}`),l.current!==null?(s(r,l.current),window.addEventListener("beforeunload",()=>{l.current&&(l.current.close(),l.current=null)}),l.current.addEventListener("load",()=>{if(m){let _=l.current.document;_.title=e;let S=_.createElement("div");S.className=xke.CLASSES.FLEXLAYOUT__FLOATING_WINDOW_CONTENT,_.body.appendChild(S),wke(_,v).then(()=>{f(S)}),l.current.addEventListener("beforeunload",()=>{o(r)})}})):(console.warn(`Unable to open window ${n}`),o(r)),()=>{m=!1,c.current=setTimeout(()=>{l.current&&(l.current.close(),l.current=null)},0)}},[]),p!==void 0?(0,_ke.createPortal)(a,p):null};I2.FloatingWindow=Tke;function wke(t,e){let r=t.head,n=[];for(let i of e)if(i.href){let o=t.createElement("link");o.type=i.type,o.rel="stylesheet",o.href=i.href,r.appendChild(o),n.push(new Promise(s=>{o.onload=()=>s(!0)}))}else if(i.rules){let o=t.createElement("style");for(let s of i.rules)o.appendChild(t.createTextNode(s));r.appendChild(o)}return Promise.all(n)}});var pZ=Y(k2=>{"use strict";Object.defineProperty(k2,"__esModule",{value:!0});k2.FloatingWindowTab=void 0;var M5=ve(),Ske=A5(),Eke=Dc(),Cke=ve(),Dke=Si(),Ike=t=>{let{layout:e,node:r,factory:n}=t,i=e.getClassName,o=n(r);return M5.createElement("div",{className:i(Dke.CLASSES.FLEXLAYOUT__FLOATING_WINDOW_TAB)},M5.createElement(Ske.ErrorBoundary,{message:t.layout.i18nName(Eke.I18nLabel.Error_rendering_component)},M5.createElement(Cke.Fragment,null,o)))};k2.FloatingWindowTab=Ike});var gZ=Y(N2=>{"use strict";Object.defineProperty(N2,"__esModule",{value:!0});N2.TabFloating=void 0;var Ep=ve(),fZ=dl(),mZ=Cc(),F5=Si(),U5=Dc(),hZ=xp(),kke=t=>{let{layout:e,selected:r,node:n,path:i}=t,o=()=>{n.getWindow()&&n.getWindow().focus()},s=()=>{e.doAction(fZ.Actions.unFloatTab(n.getId()))},a=()=>{let T=n.getParent();T.getType()===mZ.TabSetNode.TYPE&&(T.isActive()||e.doAction(fZ.Actions.setActiveTabset(T.getId())))},l=T=>{T.preventDefault(),o()},c=T=>{T.preventDefault(),s()},p=e.getClassName,f=n.getParent(),m=n._styleWithPosition();r||(0,hZ.hideElement)(m,n.getModel().isUseVisibility()),f instanceof mZ.TabSetNode&&n.getModel().getMaximizedTabset()!==void 0&&!f.isMaximized()&&(0,hZ.hideElement)(m,n.getModel().isUseVisibility());let g=e.i18nName(U5.I18nLabel.Floating_Window_Message),v=e.i18nName(U5.I18nLabel.Floating_Window_Show_Window),_=e.i18nName(U5.I18nLabel.Floating_Window_Dock_Window),S=e.getOnRenderFloatingTabPlaceholder();return S?Ep.createElement("div",{className:p(F5.CLASSES.FLEXLAYOUT__TAB_FLOATING),onMouseDown:a,onTouchStart:a,style:m},S(s,o)):Ep.createElement("div",{className:p(F5.CLASSES.FLEXLAYOUT__TAB_FLOATING),"data-layout-path":i,onMouseDown:a,onTouchStart:a,style:m},Ep.createElement("div",{className:p(F5.CLASSES.FLEXLAYOUT__TAB_FLOATING_INNER)},Ep.createElement("div",null,g),Ep.createElement("div",null,Ep.createElement("a",{href:"#",onClick:l},v)),Ep.createElement("div",null,Ep.createElement("a",{href:"#",onClick:c},_))))};N2.TabFloating=kke});var yZ=Y(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.RestoreIcon=fs.PopoutIcon=fs.EdgeIcon=fs.OverflowIcon=fs.MaximizeIcon=fs.CloseIcon=void 0;var Gi=ve(),k_={width:"1em",height:"1em",display:"flex",alignItems:"center"},Nke=()=>Gi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:k_,viewBox:"0 0 24 24"},Gi.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),Gi.createElement("path",{stroke:"var(--color-icon)",fill:"var(--color-icon)",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));fs.CloseIcon=Nke;var Ake=()=>Gi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:k_,viewBox:"0 0 24 24",fill:"var(--color-icon)"},Gi.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),Gi.createElement("path",{stroke:"var(--color-icon)",d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}));fs.MaximizeIcon=Ake;var Oke=()=>Gi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:k_,viewBox:"0 0 24 24",fill:"var(--color-icon)"},Gi.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),Gi.createElement("path",{stroke:"var(--color-icon)",d:"M7 10l5 5 5-5z"}));fs.OverflowIcon=Oke;var Rke=()=>Gi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"block",width:10,height:10},preserveAspectRatio:"none",viewBox:"0 0 100 100"},Gi.createElement("path",{fill:"var(--color-edge-icon)",stroke:"var(--color-edge-icon)",d:"M10 30 L90 30 l-40 40 Z"}));fs.EdgeIcon=Rke;var Pke=()=>Gi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:k_,viewBox:"0 0 20 20",fill:"var(--color-icon)"},Gi.createElement("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),Gi.createElement("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"}));fs.PopoutIcon=Pke;var Lke=()=>Gi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:k_,viewBox:"0 0 24 24",fill:"var(--color-icon)"},Gi.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),Gi.createElement("path",{stroke:"var(--color-icon)",d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}));fs.RestoreIcon=Lke});var EZ=Y(O2=>{"use strict";Object.defineProperty(O2,"__esModule",{value:!0});O2.Layout=void 0;var Ct=ve(),Mke=Pl(),ml=Ec(),Cp=g_(),Mg=dl(),Fke=au(),vZ=__(),Dp=kg(),_Z=Cc(),A2=cs(),ms=Si(),Uke=ZQ(),bZ=nZ(),xZ=aZ(),Bke=cZ(),TZ=dZ(),wZ=pZ(),SZ=gZ(),B5=vo(),rm=yZ(),Wke=w5(),jke={close:Ct.createElement(rm.CloseIcon,null),closeTabset:Ct.createElement(rm.CloseIcon,null),popout:Ct.createElement(rm.PopoutIcon,null),maximize:Ct.createElement(rm.MaximizeIcon,null),restore:Ct.createElement(rm.RestoreIcon,null),more:Ct.createElement(rm.OverflowIcon,null),edgeArrow:Ct.createElement(rm.EdgeIcon,null)},zke=typeof window<"u"&&(window.document.documentMode||/Edge\//.test(window.navigator.userAgent)),$ke=typeof window<"u"&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches,Hke=$ke&&!zke,W5=class extends Ct.Component{constructor(e){super(e),this.firstMove=!1,this.dragRectRendered=!0,this.dragDivText=void 0,this.edgeRectLength=100,this.edgeRectWidth=10,this.onModelChange=r=>{this.forceUpdate(),this.props.onModelChange&&this.props.onModelChange(this.props.model,r)},this.updateRect=r=>{if(r||(r=this.getDomRect()),!r)return;let n=new A2.Rect(0,0,r.width,r.height);!n.equals(this.state.rect)&&n.width!==0&&n.height!==0&&this.setState({rect:n})},this.updateLayoutMetrics=()=>{if(this.findHeaderBarSizeRef.current){let r=this.findHeaderBarSizeRef.current.getBoundingClientRect().height;r!==this.state.calculatedHeaderBarSize&&this.setState({calculatedHeaderBarSize:r})}if(this.findTabBarSizeRef.current){let r=this.findTabBarSizeRef.current.getBoundingClientRect().height;r!==this.state.calculatedTabBarSize&&this.setState({calculatedTabBarSize:r})}if(this.findBorderBarSizeRef.current){let r=this.findBorderBarSizeRef.current.getBoundingClientRect().height;r!==this.state.calculatedBorderBarSize&&this.setState({calculatedBorderBarSize:r})}},this.getClassName=r=>this.props.classNameMapper===void 0?r:this.props.classNameMapper(r),this.onCloseWindow=r=>{this.doAction(Mg.Actions.unFloatTab(r));try{this.props.model.getNodeById(r)._setWindow(void 0)}catch{}},this.onSetWindow=(r,n)=>{this.props.model.getNodeById(r)._setWindow(n)},this.onCancelAdd=()=>{var r,n;let i=this.selfRef.current;i&&this.dragDiv&&i.removeChild(this.dragDiv),this.dragDiv=void 0,this.hidePortal(),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0);try{(n=(r=this.customDrop)===null||r===void 0?void 0:r.invalidated)===null||n===void 0||n.call(r)}catch(o){console.error(o)}Cp.DragDrop.instance.hideGlass(),this.newTabJson=void 0,this.customDrop=void 0},this.onCancelDrag=r=>{var n,i;if(r){let o=this.selfRef.current,s=this.outlineDiv;if(o&&s)try{o.removeChild(s)}catch{}let a=this.dragDiv;if(o&&a)try{o.removeChild(a)}catch{}this.dragDiv=void 0,this.hidePortal(),this.setState({showEdges:!1}),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0);try{(i=(n=this.customDrop)===null||n===void 0?void 0:n.invalidated)===null||i===void 0||i.call(n)}catch(l){console.error(l)}Cp.DragDrop.instance.hideGlass(),this.newTabJson=void 0,this.customDrop=void 0}this.setState({showHiddenBorder:ml.DockLocation.CENTER})},this.onDragDivMouseDown=r=>{r.preventDefault(),this.dragStart(r,this.dragDivText,Dp.TabNode._fromJson(this.newTabJson,this.props.model,!1),!0,void 0,void 0)},this.dragStart=(r,n,i,o,s,a)=>{var l,c;o?(this.dragNode=i,this.dragDivText=n,Cp.DragDrop.instance.startDrag(r,this.onDragStart,this.onDragMove,this.onDragEnd,this.onCancelDrag,s,a,this.currentDocument,(c=this.selfRef.current)!==null&&c!==void 0?c:void 0)):Cp.DragDrop.instance.startDrag(r,void 0,void 0,void 0,void 0,s,a,this.currentDocument,(l=this.selfRef.current)!==null&&l!==void 0?l:void 0)},this.dragRectRender=(r,n,i,o)=>{let s;if(r!==void 0?s=Ct.createElement("div",{style:{whiteSpace:"pre"}},r.replace("<br>",`
`)):n&&n instanceof Dp.TabNode&&(s=Ct.createElement(Wke.TabButtonStamp,{node:n,layout:this,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory})),this.props.onRenderDragRect!==void 0){let l=this.props.onRenderDragRect(s,n,i);l!==void 0&&(s=l)}this.dragRectRendered=!1;let a=this.dragDiv;a&&(a.style.visibility="hidden",this.showPortal(Ct.createElement(qke,{onRendered:()=>{this.dragRectRendered=!0,o?.()}},s),a))},this.showPortal=(r,n)=>{let i=(0,Mke.createPortal)(r,n);this.setState({portal:i})},this.hidePortal=()=>{this.setState({portal:void 0})},this.onDragStart=()=>{var r;this.dropInfo=void 0,this.customDrop=void 0;let n=this.selfRef.current;return this.outlineDiv=this.currentDocument.createElement("div"),this.outlineDiv.className=this.getClassName(ms.CLASSES.FLEXLAYOUT__OUTLINE_RECT),this.outlineDiv.style.visibility="hidden",n&&n.appendChild(this.outlineDiv),this.dragDiv==null&&(this.dragDiv=this.currentDocument.createElement("div"),this.dragDiv.className=this.getClassName(ms.CLASSES.FLEXLAYOUT__DRAG_RECT),this.dragDiv.setAttribute("data-layout-path","/drag-rectangle"),this.dragRectRender(this.dragDivText,this.dragNode,this.newTabJson),n&&n.appendChild(this.dragDiv)),this.props.model.getMaximizedTabset()===void 0&&this.setState({showEdges:this.props.model.isEnableEdgeDock()}),this.dragNode&&this.outlineDiv&&this.dragNode instanceof Dp.TabNode&&this.dragNode.getTabRect()!==void 0&&((r=this.dragNode.getTabRect())===null||r===void 0||r.positionElement(this.outlineDiv)),this.firstMove=!0,!0},this.onDragMove=r=>{var n,i,o,s,a,l,c;if(this.firstMove===!1){let _=this.props.model._getAttribute("tabDragSpeed");this.outlineDiv&&(this.outlineDiv.style.transition=`top ${_}s, left ${_}s, width ${_}s, height ${_}s`)}this.firstMove=!1;let p=(n=this.selfRef.current)===null||n===void 0?void 0:n.getBoundingClientRect(),f={x:r.clientX-((i=p?.left)!==null&&i!==void 0?i:0),y:r.clientY-((o=p?.top)!==null&&o!==void 0?o:0)};this.checkForBorderToShow(f.x,f.y);let m=(a=(s=this.dragDiv)===null||s===void 0?void 0:s.getBoundingClientRect())!==null&&a!==void 0?a:new DOMRect(0,0,100,100),g=f.x-m.width/2;g+m.width>((l=p?.width)!==null&&l!==void 0?l:0)&&(g=((c=p?.width)!==null&&c!==void 0?c:0)-m.width),g=Math.max(0,g),this.dragDiv&&(this.dragDiv.style.left=g+"px",this.dragDiv.style.top=f.y+5+"px",this.dragRectRendered&&this.dragDiv.style.visibility==="hidden"&&(this.dragDiv.style.visibility="visible"));let v=this.props.model._findDropTargetNode(this.dragNode,f.x,f.y);v&&(this.props.onTabDrag?this.handleCustomTabDrag(v,f,r):(this.dropInfo=v,this.outlineDiv&&(this.outlineDiv.className=this.getClassName(v.className),v.rect.positionElement(this.outlineDiv),this.outlineDiv.style.visibility="visible")))},this.onDragEnd=r=>{let n=this.selfRef.current;if(n&&(this.outlineDiv&&n.removeChild(this.outlineDiv),this.dragDiv&&n.removeChild(this.dragDiv)),this.dragDiv=void 0,this.hidePortal(),this.setState({showEdges:!1}),Cp.DragDrop.instance.hideGlass(),this.dropInfo)if(this.customDrop){this.newTabJson=void 0;try{let{callback:i,dragging:o,over:s,x:a,y:l,location:c}=this.customDrop;i(o,s,a,l,c),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0)}catch(i){console.error(i)}}else if(this.newTabJson!==void 0){let i=this.doAction(Mg.Actions.addNode(this.newTabJson,this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(i,r),this.fnNewNodeDropped=void 0),this.newTabJson=void 0}else this.dragNode!==void 0&&this.doAction(Mg.Actions.moveNode(this.dragNode.getId(),this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.setState({showHiddenBorder:ml.DockLocation.CENTER})},this.props.model._setChangeListener(this.onModelChange),this.tabIds=[],this.selfRef=Ct.createRef(),this.findHeaderBarSizeRef=Ct.createRef(),this.findTabBarSizeRef=Ct.createRef(),this.findBorderBarSizeRef=Ct.createRef(),this.supportsPopout=e.supportsPopout!==void 0?e.supportsPopout:Hke,this.popoutURL=e.popoutURL?e.popoutURL:"popout.html",this.icons=Object.assign(Object.assign({},jke),e.icons),this.state={rect:new A2.Rect(0,0,0,0),calculatedHeaderBarSize:25,calculatedTabBarSize:26,calculatedBorderBarSize:30,editingTab:void 0,showHiddenBorder:ml.DockLocation.CENTER,showEdges:!1},this.onDragEnter=this.onDragEnter.bind(this)}styleFont(e){return this.props.font&&(this.selfRef.current&&(this.props.font.size&&this.selfRef.current.style.setProperty("--font-size",this.props.font.size),this.props.font.family&&this.selfRef.current.style.setProperty("--font-family",this.props.font.family)),this.props.font.style&&(e.fontStyle=this.props.font.style),this.props.font.weight&&(e.fontWeight=this.props.font.weight)),e}doAction(e){if(this.props.onAction!==void 0){let r=this.props.onAction(e);return r!==void 0?this.props.model.doAction(r):void 0}else return this.props.model.doAction(e)}componentDidMount(){this.updateRect(),this.updateLayoutMetrics(),this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.resizeObserver=new ResizeObserver(r=>{this.updateRect(r[0].contentRect)});let e=this.selfRef.current;e&&this.resizeObserver.observe(e)}componentDidUpdate(){this.updateLayoutMetrics(),this.props.model!==this.previousModel&&(this.previousModel!==void 0&&this.previousModel._setChangeListener(void 0),this.props.model._setChangeListener(this.onModelChange),this.previousModel=this.props.model)}getCurrentDocument(){return this.currentDocument}getDomRect(){var e;return(e=this.selfRef.current)===null||e===void 0?void 0:e.getBoundingClientRect()}getRootDiv(){return this.selfRef.current}isSupportsPopout(){return this.supportsPopout}isRealtimeResize(){var e;return(e=this.props.realtimeResize)!==null&&e!==void 0?e:!1}onTabDrag(...e){var r,n;return(n=(r=this.props).onTabDrag)===null||n===void 0?void 0:n.call(r,...e)}getPopoutURL(){return this.popoutURL}componentWillUnmount(){var e;let r=this.selfRef.current;r&&((e=this.resizeObserver)===null||e===void 0||e.unobserve(r))}setEditingTab(e){this.setState({editingTab:e})}getEditingTab(){return this.state.editingTab}render(){if(!this.selfRef.current)return Ct.createElement("div",{ref:this.selfRef,className:this.getClassName(ms.CLASSES.FLEXLAYOUT__LAYOUT)},this.metricsElements());this.props.model._setPointerFine(window&&window.matchMedia&&window.matchMedia("(pointer: fine)").matches);let e=[],r=[],n=[],i={},o=[],s={headerBarSize:this.state.calculatedHeaderBarSize,tabBarSize:this.state.calculatedTabBarSize,borderBarSize:this.state.calculatedBorderBarSize};this.props.model._setShowHiddenBorder(this.state.showHiddenBorder),this.centerRect=this.props.model._layout(this.state.rect,s),this.renderBorder(this.props.model.getBorderSet(),e,i,n,o),this.renderChildren("",this.props.model.getRoot(),r,i,n,o);let a=[],l={};for(let f of this.tabIds)i[f]&&(a.push(f),l[f]=f);this.tabIds=a;for(let f of Object.keys(i))l[f]||this.tabIds.push(f);let c=[],p=this.icons.edgeArrow;if(this.state.showEdges){let f=this.centerRect,m=this.edgeRectLength,g=this.edgeRectWidth,v=this.edgeRectLength/2,_=this.getClassName(ms.CLASSES.FLEXLAYOUT__EDGE_RECT),S=50;c.push(Ct.createElement("div",{key:"North",style:{top:f.y,left:f.x+f.width/2-v,width:m,height:g,borderBottomLeftRadius:S,borderBottomRightRadius:S},className:_+" "+this.getClassName(ms.CLASSES.FLEXLAYOUT__EDGE_RECT_TOP)},Ct.createElement("div",{style:{transform:"rotate(180deg)"}},p))),c.push(Ct.createElement("div",{key:"West",style:{top:f.y+f.height/2-v,left:f.x,width:g,height:m,borderTopRightRadius:S,borderBottomRightRadius:S},className:_+" "+this.getClassName(ms.CLASSES.FLEXLAYOUT__EDGE_RECT_LEFT)},Ct.createElement("div",{style:{transform:"rotate(90deg)"}},p))),c.push(Ct.createElement("div",{key:"South",style:{top:f.y+f.height-g,left:f.x+f.width/2-v,width:m,height:g,borderTopLeftRadius:S,borderTopRightRadius:S},className:_+" "+this.getClassName(ms.CLASSES.FLEXLAYOUT__EDGE_RECT_BOTTOM)},Ct.createElement("div",null,p))),c.push(Ct.createElement("div",{key:"East",style:{top:f.y+f.height/2-v,left:f.x+f.width-g,width:g,height:m,borderTopLeftRadius:S,borderBottomLeftRadius:S},className:_+" "+this.getClassName(ms.CLASSES.FLEXLAYOUT__EDGE_RECT_RIGHT)},Ct.createElement("div",{style:{transform:"rotate(-90deg)"}},p)))}return Ct.createElement("div",{ref:this.selfRef,className:this.getClassName(ms.CLASSES.FLEXLAYOUT__LAYOUT),onDragEnter:this.props.onExternalDrag?this.onDragEnter:void 0},r,this.tabIds.map(f=>i[f]),e,o,c,n,this.metricsElements(),this.state.portal)}metricsElements(){let e=this.styleFont({visibility:"hidden"});return Ct.createElement(Ct.Fragment,null,Ct.createElement("div",{key:"findHeaderBarSize",ref:this.findHeaderBarSizeRef,style:e,className:this.getClassName(ms.CLASSES.FLEXLAYOUT__TABSET_HEADER_SIZER)},"FindHeaderBarSize"),Ct.createElement("div",{key:"findTabBarSize",ref:this.findTabBarSizeRef,style:e,className:this.getClassName(ms.CLASSES.FLEXLAYOUT__TABSET_SIZER)},"FindTabBarSize"),Ct.createElement("div",{key:"findBorderBarSize",ref:this.findBorderBarSizeRef,style:e,className:this.getClassName(ms.CLASSES.FLEXLAYOUT__BORDER_SIZER)},"FindBorderBarSize"))}renderBorder(e,r,n,i,o){for(let s of e.getBorders()){let a=`/border/${s.getLocation().getName()}`;if(s.isShowing()){r.push(Ct.createElement(Uke.BorderTabSet,{key:`border_${s.getLocation().getName()}`,path:a,border:s,layout:this,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory,icons:this.icons}));let l=s._getDrawChildren(),c=0,p=0;for(let f of l){if(f instanceof vZ.SplitterNode){let m=a+"/s";o.push(Ct.createElement(bZ.Splitter,{key:f.getId(),layout:this,node:f,path:m}))}else if(f instanceof Dp.TabNode){let m=a+"/t"+p++;if(this.supportsPopout&&f.isFloating()){let g=this._getScreenRect(f),v=f._getAttr("borderWidth"),_=f._getAttr("borderHeight");g&&(v!==-1&&s.getLocation().getOrientation()===B5.Orientation.HORZ?g.width=v:_!==-1&&s.getLocation().getOrientation()===B5.Orientation.VERT&&(g.height=_)),i.push(Ct.createElement(TZ.FloatingWindow,{key:f.getId(),url:this.popoutURL,rect:g,title:f.getName(),id:f.getId(),onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow},Ct.createElement(wZ.FloatingWindowTab,{layout:this,node:f,factory:this.props.factory}))),n[f.getId()]=Ct.createElement(SZ.TabFloating,{key:f.getId(),layout:this,path:m,node:f,selected:c===s.getSelected()})}else n[f.getId()]=Ct.createElement(xZ.Tab,{key:f.getId(),layout:this,path:m,node:f,selected:c===s.getSelected(),factory:this.props.factory})}c++}}}}renderChildren(e,r,n,i,o,s){let a=r._getDrawChildren(),l=0,c=0,p=0;for(let f of a)if(f instanceof vZ.SplitterNode){let m=e+"/s"+l++;s.push(Ct.createElement(bZ.Splitter,{key:f.getId(),layout:this,path:m,node:f}))}else if(f instanceof _Z.TabSetNode){let m=e+"/ts"+p++;n.push(Ct.createElement(Bke.TabSet,{key:f.getId(),layout:this,path:m,node:f,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory,icons:this.icons})),this.renderChildren(m,f,n,i,o,s)}else if(f instanceof Dp.TabNode){let m=e+"/t"+c++,g=f.getParent().getChildren()[f.getParent().getSelected()];if(g===void 0&&console.warn("undefined selectedTab should not happen"),this.supportsPopout&&f.isFloating()){let v=this._getScreenRect(f);o.push(Ct.createElement(TZ.FloatingWindow,{key:f.getId(),url:this.popoutURL,rect:v,title:f.getName(),id:f.getId(),onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow},Ct.createElement(wZ.FloatingWindowTab,{layout:this,node:f,factory:this.props.factory}))),i[f.getId()]=Ct.createElement(SZ.TabFloating,{key:f.getId(),layout:this,path:m,node:f,selected:f===g})}else i[f.getId()]=Ct.createElement(xZ.Tab,{key:f.getId(),layout:this,path:m,node:f,selected:f===g,factory:this.props.factory})}else{let m=e+(f.getOrientation()===B5.Orientation.HORZ?"/r":"/c")+p++;this.renderChildren(m,f,n,i,o,s)}}_getScreenRect(e){var r;let n=e.getRect().clone(),i=(r=this.selfRef.current)===null||r===void 0?void 0:r.getBoundingClientRect();if(!i)return null;let o=Math.min(80,this.currentWindow.outerHeight-this.currentWindow.innerHeight),s=Math.min(80,this.currentWindow.outerWidth-this.currentWindow.innerWidth);return n.x=n.x+i.x+this.currentWindow.screenX+s,n.y=n.y+i.y+this.currentWindow.screenY+o,n}addTabToTabSet(e,r){if(this.props.model.getNodeById(e)!==void 0)return this.doAction(Mg.Actions.addNode(r,e,ml.DockLocation.CENTER,-1))}addTabToActiveTabSet(e){let r=this.props.model.getActiveTabset();if(r!==void 0)return this.doAction(Mg.Actions.addNode(e,r.getId(),ml.DockLocation.CENTER,-1))}addTabWithDragAndDrop(e,r,n){this.fnNewNodeDropped=n,this.newTabJson=r,this.dragStart(void 0,e,Dp.TabNode._fromJson(r,this.props.model,!1),!0,void 0,void 0)}moveTabWithDragAndDrop(e,r){this.dragStart(void 0,r,e,!0,void 0,void 0)}addTabWithDragAndDropIndirect(e,r,n){this.fnNewNodeDropped=n,this.newTabJson=r,Cp.DragDrop.instance.addGlass(this.onCancelAdd),this.dragDivText=e,this.dragDiv=this.currentDocument.createElement("div"),this.dragDiv.className=this.getClassName(ms.CLASSES.FLEXLAYOUT__DRAG_RECT),this.dragDiv.addEventListener("mousedown",this.onDragDivMouseDown),this.dragDiv.addEventListener("touchstart",this.onDragDivMouseDown,{passive:!1}),this.dragRectRender(this.dragDivText,void 0,this.newTabJson,()=>{if(this.dragDiv){this.dragDiv.style.visibility="visible";let o=this.dragDiv.getBoundingClientRect(),s=new A2.Rect(0,0,o?.width,o?.height);s.centerInRect(this.state.rect),this.dragDiv.setAttribute("data-layout-path","/drag-rectangle"),this.dragDiv.style.left=s.x+"px",this.dragDiv.style.top=s.y+"px"}}),this.selfRef.current.appendChild(this.dragDiv)}handleCustomTabDrag(e,r,n){var i,o,s;let a=(i=this.customDrop)===null||i===void 0?void 0:i.invalidated,l=(o=this.customDrop)===null||o===void 0?void 0:o.callback;this.customDrop=void 0;let c=this.newTabJson||(this.dragNode instanceof Dp.TabNode?this.dragNode:void 0);if(c&&(e.node instanceof _Z.TabSetNode||e.node instanceof Fke.BorderNode)&&e.index===-1){let p=e.node.getSelectedNode(),f=p?.getRect();if(p&&f?.contains(r.x,r.y)){let m;try{let g=this.onTabDrag(c,p,r.x-f.x,r.y-f.y,e.location,()=>this.onDragMove(n));g&&(m={rect:new A2.Rect(g.x+f.x,g.y+f.y,g.width,g.height),callback:g.callback,invalidated:g.invalidated,dragging:c,over:p,x:r.x-f.x,y:r.y-f.y,location:e.location,cursor:g.cursor})}catch(g){console.error(g)}m?.callback===l&&(a=void 0),this.customDrop=m}}this.dropInfo=e,this.outlineDiv&&(this.outlineDiv.className=this.getClassName(this.customDrop?ms.CLASSES.FLEXLAYOUT__OUTLINE_RECT:e.className),this.customDrop?this.customDrop.rect.positionElement(this.outlineDiv):e.rect.positionElement(this.outlineDiv)),Cp.DragDrop.instance.setGlassCursorOverride((s=this.customDrop)===null||s===void 0?void 0:s.cursor),this.outlineDiv&&(this.outlineDiv.style.visibility="visible");try{a?.()}catch(p){console.error(p)}}onDragEnter(e){if(Cp.DragDrop.instance.isDragging())return;let r=this.props.onExternalDrag(e);r&&(this.fnNewNodeDropped=r.onDrop,this.newTabJson=r.json,this.dragStart(e,r.dragText,Dp.TabNode._fromJson(r.json,this.props.model,!1),!0,void 0,void 0))}checkForBorderToShow(e,r){let n=this.props.model._getOuterInnerRects().outer,i=n.getCenter(),o=this.edgeRectWidth,s=this.edgeRectLength/2,a=!1;this.props.model.isEnableEdgeDock()&&this.state.showHiddenBorder===ml.DockLocation.CENTER&&(r>i.y-s&&r<i.y+s||e>i.x-s&&e<i.x+s)&&(a=!0);let l=ml.DockLocation.CENTER;a||(e<=n.x+o?l=ml.DockLocation.LEFT:e>=n.getRight()-o?l=ml.DockLocation.RIGHT:r<=n.y+o?l=ml.DockLocation.TOP:r>=n.getBottom()-o&&(l=ml.DockLocation.BOTTOM)),l!==this.state.showHiddenBorder&&this.setState({showHiddenBorder:l})}maximize(e){this.doAction(Mg.Actions.maximizeToggle(e.getId()))}customizeTab(e,r){this.props.onRenderTab&&this.props.onRenderTab(e,r)}customizeTabSet(e,r){this.props.onRenderTabSet&&this.props.onRenderTabSet(e,r)}i18nName(e,r){let n;return this.props.i18nMapper&&(n=this.props.i18nMapper(e,r)),n===void 0&&(n=e+(r===void 0?"":r)),n}getOnRenderFloatingTabPlaceholder(){return this.props.onRenderFloatingTabPlaceholder}getShowOverflowMenu(){return this.props.onShowOverflowMenu}getTabSetPlaceHolderCallback(){return this.props.onTabSetPlaceHolder}showContextMenu(e,r){this.props.onContextMenu&&this.props.onContextMenu(e,r)}auxMouseClick(e,r){this.props.onAuxMouseClick&&this.props.onAuxMouseClick(e,r)}};O2.Layout=W5;var qke=t=>(Ct.useEffect(()=>{var e;(e=t.onRendered)===null||e===void 0||e.call(t)},[t]),Ct.createElement(Ct.Fragment,null,t.children))});var $5=Y(R2=>{"use strict";Object.defineProperty(R2,"__esModule",{value:!0});R2.BorderSet=void 0;var j5=vo(),Gke=au(),z5=class t{static _fromJson(e,r){let n=new t(r);return n._borders=e.map(i=>Gke.BorderNode._fromJson(i,r)),n}constructor(e){this._model=e,this._borders=[]}getBorders(){return this._borders}_forEachNode(e){for(let r of this._borders){e(r,0);for(let n of r.getChildren())n._forEachNode(e,1)}}_toJson(){return this._borders.map(e=>e.toJson())}_layoutBorder(e,r){let n=e.outer,i=this._model.getRoot(),o=Math.max(0,n.height-i.getMinHeight()),s=Math.max(0,n.width-i.getMinWidth()),a=0,l=0,c=0,p=0,f=this._borders.filter(v=>v.isShowing());for(let v of f){v._setAdjustedSize(v.getSize());let _=v.getSelected()!==-1;v.getLocation().getOrientation()===j5.Orientation.HORZ?(l+=v.getBorderBarSize(),_&&(s-=this._model.getSplitterSize(),l+=v.getSize(),p+=v.getSize())):(a+=v.getBorderBarSize(),_&&(o-=this._model.getSplitterSize(),a+=v.getSize(),c+=v.getSize()))}let m=0,g=!1;for(;l>s&&p>0||a>o&&c>0;){let v=f[m];if(v.getSelected()!==-1){let _=v._getAdjustedSize();l>s&&p>0&&v.getLocation().getOrientation()===j5.Orientation.HORZ&&_>0&&_>v.getMinSize()?(v._setAdjustedSize(_-1),l--,p--,g=!0):a>o&&c>0&&v.getLocation().getOrientation()===j5.Orientation.VERT&&_>0&&_>v.getMinSize()&&(v._setAdjustedSize(_-1),a--,c--,g=!0)}if(m=(m+1)%f.length,m===0)if(g)g=!1;else break}for(let v of f)e.outer=v._layoutBorderOuter(e.outer,r);e.inner=e.outer;for(let v of f)e.inner=v._layoutBorderInner(e.inner,r);return e}_findDropTargetNode(e,r,n){for(let i of this._borders)if(i.isShowing()){let o=i.canDrop(e,r,n);if(o!==void 0)return o}}};R2.BorderSet=z5});var DZ=Y(CZ=>{"use strict";Object.defineProperty(CZ,"__esModule",{value:!0})});var kZ=Y(IZ=>{"use strict";Object.defineProperty(IZ,"__esModule",{value:!0})});var AZ=Y(NZ=>{"use strict";Object.defineProperty(NZ,"__esModule",{value:!0})});var LZ=Y(P2=>{"use strict";Object.defineProperty(P2,"__esModule",{value:!0});P2.Model=void 0;var Wt=Yf(),Vke=Xf(),H5=Ec(),OZ=vo(),RZ=cs(),hs=dl(),N_=au(),PZ=$5(),Fg=o2(),Ip=kg(),hl=Cc(),q5=c2(),A_=class t{static fromJson(e){let r=new t;return t._attributeDefinitions.fromJson(e.global,r._attributes),e.borders&&(r._borders=PZ.BorderSet._fromJson(e.borders,r)),r._root=Fg.RowNode._fromJson(e.layout,r),r._tidy(),r}static _createAttributeDefinitions(){let e=new Vke.AttributeDefinitions;return e.add("legacyOverflowMenu",!1).setType(Wt.Attribute.BOOLEAN),e.add("enableEdgeDock",!0).setType(Wt.Attribute.BOOLEAN),e.add("rootOrientationVertical",!1).setType(Wt.Attribute.BOOLEAN),e.add("marginInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),e.add("enableUseVisibility",!1).setType(Wt.Attribute.BOOLEAN),e.add("enableRotateBorderIcons",!0).setType(Wt.Attribute.BOOLEAN),e.add("splitterSize",-1).setType(Wt.Attribute.NUMBER),e.add("splitterExtra",0).setType(Wt.Attribute.NUMBER),e.add("tabEnableClose",!0).setType(Wt.Attribute.BOOLEAN),e.add("tabCloseType",1).setType("ICloseType"),e.add("tabEnableFloat",!1).setType(Wt.Attribute.BOOLEAN),e.add("tabEnableDrag",!0).setType(Wt.Attribute.BOOLEAN),e.add("tabEnableRename",!0).setType(Wt.Attribute.BOOLEAN),e.add("tabContentClassName",void 0).setType(Wt.Attribute.STRING),e.add("tabClassName",void 0).setType(Wt.Attribute.STRING),e.add("tabIcon",void 0).setType(Wt.Attribute.STRING),e.add("tabEnableRenderOnDemand",!0).setType(Wt.Attribute.BOOLEAN),e.add("tabDragSpeed",.3).setType(Wt.Attribute.NUMBER),e.add("tabBorderWidth",-1).setType(Wt.Attribute.NUMBER),e.add("tabBorderHeight",-1).setType(Wt.Attribute.NUMBER),e.add("tabSetEnableDeleteWhenEmpty",!0).setType(Wt.Attribute.BOOLEAN),e.add("tabSetEnableDrop",!0).setType(Wt.Attribute.BOOLEAN),e.add("tabSetEnableDrag",!0).setType(Wt.Attribute.BOOLEAN),e.add("tabSetEnableDivide",!0).setType(Wt.Attribute.BOOLEAN),e.add("tabSetEnableMaximize",!0).setType(Wt.Attribute.BOOLEAN),e.add("tabSetEnableClose",!1).setType(Wt.Attribute.BOOLEAN),e.add("tabSetEnableSingleTabStretch",!1).setType(Wt.Attribute.BOOLEAN),e.add("tabSetAutoSelectTab",!0).setType(Wt.Attribute.BOOLEAN),e.add("tabSetClassNameTabStrip",void 0).setType(Wt.Attribute.STRING),e.add("tabSetClassNameHeader",void 0).setType(Wt.Attribute.STRING),e.add("tabSetEnableTabStrip",!0).setType(Wt.Attribute.BOOLEAN),e.add("tabSetHeaderHeight",0).setType(Wt.Attribute.NUMBER),e.add("tabSetTabStripHeight",0).setType(Wt.Attribute.NUMBER),e.add("tabSetMarginInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),e.add("tabSetBorderInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),e.add("tabSetTabLocation","top").setType("ITabLocation"),e.add("tabSetMinWidth",0).setType(Wt.Attribute.NUMBER),e.add("tabSetMinHeight",0).setType(Wt.Attribute.NUMBER),e.add("borderSize",200).setType(Wt.Attribute.NUMBER),e.add("borderMinSize",0).setType(Wt.Attribute.NUMBER),e.add("borderBarSize",0).setType(Wt.Attribute.NUMBER),e.add("borderEnableDrop",!0).setType(Wt.Attribute.BOOLEAN),e.add("borderAutoSelectTabWhenOpen",!0).setType(Wt.Attribute.BOOLEAN),e.add("borderAutoSelectTabWhenClosed",!1).setType(Wt.Attribute.BOOLEAN),e.add("borderClassName",void 0).setType(Wt.Attribute.STRING),e.add("borderEnableAutoHide",!1).setType(Wt.Attribute.BOOLEAN),e}constructor(){this._borderRects={inner:RZ.Rect.empty(),outer:RZ.Rect.empty()},this._attributes={},this._idMap={},this._borders=new PZ.BorderSet(this),this._pointerFine=!0,this._showHiddenBorder=H5.DockLocation.CENTER}_setChangeListener(e){this._changeListener=e}getActiveTabset(){if(this._activeTabSet&&this.getNodeById(this._activeTabSet.getId()))return this._activeTabSet}_getShowHiddenBorder(){return this._showHiddenBorder}_setShowHiddenBorder(e){this._showHiddenBorder=e}_setActiveTabset(e){this._activeTabSet=e}getMaximizedTabset(){return this._maximizedTabSet}_setMaximizedTabset(e){this._maximizedTabSet=e}getRoot(){return this._root}isRootOrientationVertical(){return this._attributes.rootOrientationVertical}isUseVisibility(){return this._attributes.enableUseVisibility}isEnableRotateBorderIcons(){return this._attributes.enableRotateBorderIcons}getBorderSet(){return this._borders}_getOuterInnerRects(){return this._borderRects}_getPointerFine(){return this._pointerFine}_setPointerFine(e){this._pointerFine=e}visitNodes(e){this._borders._forEachNode(e),this._root._forEachNode(e,0)}getNodeById(e){return this._idMap[e]}getFirstTabSet(e=this._root){let r=e.getChildren()[0];return r instanceof hl.TabSetNode?r:this.getFirstTabSet(r)}doAction(e){let r;switch(e.type){case hs.Actions.ADD_NODE:{let n=new Ip.TabNode(this,e.data.json,!0),i=this._idMap[e.data.toNode];(i instanceof hl.TabSetNode||i instanceof N_.BorderNode||i instanceof Fg.RowNode)&&(i.drop(n,H5.DockLocation.getByName(e.data.location),e.data.index,e.data.select),r=n);break}case hs.Actions.MOVE_NODE:{let n=this._idMap[e.data.fromNode];if(n instanceof Ip.TabNode||n instanceof hl.TabSetNode){let i=this._idMap[e.data.toNode];(i instanceof hl.TabSetNode||i instanceof N_.BorderNode||i instanceof Fg.RowNode)&&i.drop(n,H5.DockLocation.getByName(e.data.location),e.data.index,e.data.select)}break}case hs.Actions.DELETE_TAB:{let n=this._idMap[e.data.node];n instanceof Ip.TabNode&&n._delete();break}case hs.Actions.DELETE_TABSET:{let n=this._idMap[e.data.node];if(n instanceof hl.TabSetNode){let i=[...n.getChildren()];for(let o=0;o<i.length;o++){let s=i[o];s.isEnableClose()&&s._delete()}n.getChildren().length===0&&n._delete(),this._tidy()}break}case hs.Actions.FLOAT_TAB:{let n=this._idMap[e.data.node];n instanceof Ip.TabNode&&(n._setFloating(!0),(0,q5.adjustSelectedIndexAfterFloat)(n));break}case hs.Actions.UNFLOAT_TAB:{let n=this._idMap[e.data.node];n instanceof Ip.TabNode&&(n._setFloating(!1),(0,q5.adjustSelectedIndexAfterDock)(n));break}case hs.Actions.RENAME_TAB:{let n=this._idMap[e.data.node];n instanceof Ip.TabNode&&n._setName(e.data.text);break}case hs.Actions.SELECT_TAB:{let n=this._idMap[e.data.tabNode];if(n instanceof Ip.TabNode){let i=n.getParent(),o=i.getChildren().indexOf(n);i instanceof N_.BorderNode?i.getSelected()===o?i._setSelected(-1):i._setSelected(o):i instanceof hl.TabSetNode&&(i.getSelected()!==o&&i._setSelected(o),this._activeTabSet=i)}break}case hs.Actions.SET_ACTIVE_TABSET:{if(e.data.tabsetNode===void 0)this._activeTabSet=void 0;else{let n=this._idMap[e.data.tabsetNode];n instanceof hl.TabSetNode&&(this._activeTabSet=n)}break}case hs.Actions.ADJUST_SPLIT:{let n=this._idMap[e.data.node1],i=this._idMap[e.data.node2];(n instanceof hl.TabSetNode||n instanceof Fg.RowNode)&&(i instanceof hl.TabSetNode||i instanceof Fg.RowNode)&&(this._adjustSplitSide(n,e.data.weight1,e.data.pixelWidth1),this._adjustSplitSide(i,e.data.weight2,e.data.pixelWidth2));break}case hs.Actions.ADJUST_BORDER_SPLIT:{let n=this._idMap[e.data.node];n instanceof N_.BorderNode&&n._setSize(e.data.pos);break}case hs.Actions.MAXIMIZE_TOGGLE:{let n=this._idMap[e.data.node];n instanceof hl.TabSetNode&&(n===this._maximizedTabSet?this._maximizedTabSet=void 0:(this._maximizedTabSet=n,this._activeTabSet=n));break}case hs.Actions.UPDATE_MODEL_ATTRIBUTES:{this._updateAttrs(e.data.json);break}case hs.Actions.UPDATE_NODE_ATTRIBUTES:{this._idMap[e.data.node]._updateAttrs(e.data.json);break}default:break}return this._updateIdMap(),this._changeListener!==void 0&&this._changeListener(e),r}_updateIdMap(){this._idMap={},this.visitNodes(e=>this._idMap[e.getId()]=e)}_adjustSplitSide(e,r,n){e._setWeight(r),e.getWidth()!=null&&e.getOrientation()===OZ.Orientation.VERT?e._updateAttrs({width:n}):e.getHeight()!=null&&e.getOrientation()===OZ.Orientation.HORZ&&e._updateAttrs({height:n})}toJson(){let e={};return t._attributeDefinitions.toJson(e,this._attributes),this.visitNodes(r=>{r._fireEvent("save",void 0)}),{global:e,borders:this._borders._toJson(),layout:this._root.toJson()}}getSplitterSize(){let e=this._attributes.splitterSize;return e===-1&&(e=this._pointerFine?8:12),e}isLegacyOverflowMenu(){return this._attributes.legacyOverflowMenu}getSplitterExtra(){return this._attributes.splitterExtra}isEnableEdgeDock(){return this._attributes.enableEdgeDock}_addNode(e){let r=e.getId();if(this._idMap[r]!==void 0)throw new Error(`Error: each node must have a unique id, duplicate id:${e.getId()}`);e.getType()!=="splitter"&&(this._idMap[r]=e)}_layout(e,r){var n;return this._borderRects=this._borders._layoutBorder({outer:e,inner:e},r),e=this._borderRects.inner.removeInsets(this._getAttribute("marginInsets")),(n=this._root)===null||n===void 0||n.calcMinSize(),this._root._layout(e,r),e}_findDropTargetNode(e,r,n){let i=this._root._findDropTargetNode(e,r,n);return i===void 0&&(i=this._borders._findDropTargetNode(e,r,n)),i}_tidy(){this._root._tidy()}_updateAttrs(e){t._attributeDefinitions.update(e,this._attributes)}_nextUniqueId(){return"#"+(0,q5.randomUUID)()}_getAttribute(e){return this._attributes[e]}setOnAllowDrop(e){this._onAllowDrop=e}_getOnAllowDrop(){return this._onAllowDrop}setOnCreateTabSet(e){this._onCreateTabSet=e}_getOnCreateTabSet(){return this._onCreateTabSet}static toTypescriptInterfaces(){console.log(t._attributeDefinitions.toTypescriptInterface("Global",void 0)),console.log(Fg.RowNode.getAttributeDefinitions().toTypescriptInterface("Row",t._attributeDefinitions)),console.log(hl.TabSetNode.getAttributeDefinitions().toTypescriptInterface("TabSet",t._attributeDefinitions)),console.log(Ip.TabNode.getAttributeDefinitions().toTypescriptInterface("Tab",t._attributeDefinitions)),console.log(N_.BorderNode.getAttributeDefinitions().toTypescriptInterface("Border",t._attributeDefinitions))}toString(){return JSON.stringify(this.toJson())}};P2.Model=A_;A_._attributeDefinitions=A_._createAttributeDefinitions()});var MZ=Y(Ar=>{"use strict";var Kke=Ar&&Ar.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Dn=Ar&&Ar.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Kke(e,t,r)};Object.defineProperty(Ar,"__esModule",{value:!0});Dn(EZ(),Ar);Dn(d5(),Ar);Dn(dl(),Ar);Dn(au(),Ar);Dn($5(),Ar);Dn(m2(),Ar);Dn(DZ(),Ar);Dn(kZ(),Ar);Dn(AZ(),Ar);Dn(LZ(),Ar);Dn(Jf(),Ar);Dn(o2(),Ar);Dn(__(),Ar);Dn(kg(),Ar);Dn(Cc(),Ar);Dn(Ec(),Ar);Dn(g_(),Ar);Dn(y_(),Ar);Dn(Dc(),Ar);Dn(vo(),Ar);Dn(cs(),Ar);Dn(Si(),Ar)});var WZ=Y((C1t,BZ)=>{var Ug=1e3,Bg=Ug*60,Wg=Bg*60,nm=Wg*24,Xke=nm*7,Jke=nm*365.25;BZ.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Qke(t);if(r==="number"&&isFinite(t))return e.long?eNe(t):Zke(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Qke(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Jke;case"weeks":case"week":case"w":return r*Xke;case"days":case"day":case"d":return r*nm;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Wg;case"minutes":case"minute":case"mins":case"min":case"m":return r*Bg;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ug;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Zke(t){var e=Math.abs(t);return e>=nm?Math.round(t/nm)+"d":e>=Wg?Math.round(t/Wg)+"h":e>=Bg?Math.round(t/Bg)+"m":e>=Ug?Math.round(t/Ug)+"s":t+"ms"}function eNe(t){var e=Math.abs(t);return e>=nm?F2(t,e,nm,"day"):e>=Wg?F2(t,e,Wg,"hour"):e>=Bg?F2(t,e,Bg,"minute"):e>=Ug?F2(t,e,Ug,"second"):t+" ms"}function F2(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var zZ=Y((D1t,jZ)=>{function tNe(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=s,r.humanize=WZ(),r.destroy=c,Object.keys(t).forEach(p=>{r[p]=t[p]}),r.names=[],r.skips=[],r.formatters={};function e(p){let f=0;for(let m=0;m<p.length;m++)f=(f<<5)-f+p.charCodeAt(m),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(p){let f,m=null,g,v;function _(...S){if(!_.enabled)return;let T=_,w=Number(new Date),E=w-(f||w);T.diff=E,T.prev=f,T.curr=w,f=w,S[0]=r.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let I=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(C,k)=>{if(C==="%%")return"%";I++;let U=r.formatters[k];if(typeof U=="function"){let $=S[I];C=U.call(T,$),S.splice(I,1),I--}return C}),r.formatArgs.call(T,S),(T.log||r.log).apply(T,S)}return _.namespace=p,_.useColors=r.useColors(),_.color=r.selectColor(p),_.extend=n,_.destroy=r.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(g!==r.namespaces&&(g=r.namespaces,v=r.enabled(p)),v),set:S=>{m=S}}),typeof r.init=="function"&&r.init(_),_}function n(p,f){let m=r(this.namespace+(typeof f>"u"?":":f)+p);return m.log=this.log,m}function i(p){r.save(p),r.namespaces=p,r.names=[],r.skips=[];let f,m=(typeof p=="string"?p:"").split(/[\s,]+/),g=m.length;for(f=0;f<g;f++)m[f]&&(p=m[f].replace(/\*/g,".*?"),p[0]==="-"?r.skips.push(new RegExp("^"+p.slice(1)+"$")):r.names.push(new RegExp("^"+p+"$")))}function o(){let p=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),p}function s(p){if(p[p.length-1]==="*")return!0;let f,m;for(f=0,m=r.skips.length;f<m;f++)if(r.skips[f].test(p))return!1;for(f=0,m=r.names.length;f<m;f++)if(r.names[f].test(p))return!0;return!1}function a(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}function l(p){return p instanceof Error?p.stack||p.message:p}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}jZ.exports=tNe});var K5=Y((Hs,U2)=>{Hs.formatArgs=nNe;Hs.save=iNe;Hs.load=oNe;Hs.useColors=rNe;Hs.storage=sNe();Hs.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Hs.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function rNe(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function nNe(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+U2.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Hs.log=console.debug||console.log||(()=>{});function iNe(t){try{t?Hs.storage.setItem("debug",t):Hs.storage.removeItem("debug")}catch{}}function oNe(){let t;try{t=Hs.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function sNe(){try{return localStorage}catch{}}U2.exports=zZ()(Hs);var{formatters:aNe}=U2.exports;aNe.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var $Z=Y(qs=>{"use strict";var lNe=qs&&qs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qs,"__esModule",{value:!0});var uNe=(xr(),Vn(_h)),cNe=lNe(K5()),jg=cNe.default("@kwsites/file-exists");function dNe(t,e,r){jg("checking %s",t);try{let n=uNe.statSync(t);return n.isFile()&&e?(jg("[OK] path represents a file"),!0):n.isDirectory()&&r?(jg("[OK] path represents a directory"),!0):(jg("[FAIL] path represents something other than a file or directory"),!1)}catch(n){if(n.code==="ENOENT")return jg("[FAIL] path is not accessible: %o",n),!1;throw jg("[FATAL] %o",n),n}}function pNe(t,e=qs.READABLE){return dNe(t,(e&qs.FILE)>0,(e&qs.FOLDER)>0)}qs.exists=pNe;qs.FILE=1;qs.FOLDER=2;qs.READABLE=qs.FILE+qs.FOLDER});var HZ=Y(B2=>{"use strict";function fNe(t){for(var e in t)B2.hasOwnProperty(e)||(B2[e]=t[e])}Object.defineProperty(B2,"__esModule",{value:!0});fNe($Z())});var X5=Y(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.createDeferred=im.deferred=void 0;function Y5(){let t,e,r="pending";return{promise:new Promise((i,o)=>{t=i,e=o}),done(i){r==="pending"&&(r="resolved",t(i))},fail(i){r==="pending"&&(r="rejected",e(i))},get fulfilled(){return r!=="pending"},get status(){return r}}}im.deferred=Y5;im.createDeferred=Y5;im.default=Y5});var _re=Y((owt,vRe)=>{vRe.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var xre=Y((swt,bre)=>{bre.exports=_re()});var Sre=Y(vs=>{"use strict";var pD=xre(),_Re=(Oo(),Vn(bh)).extname,Tre=/^\s*([^;\s]*)(?:;|\s|$)/,bRe=/^text\//i;vs.charset=wre;vs.charsets={lookup:wre};vs.contentType=xRe;vs.extension=TRe;vs.extensions=Object.create(null);vs.lookup=wRe;vs.types=Object.create(null);SRe(vs.extensions,vs.types);function wre(t){if(!t||typeof t!="string")return!1;var e=Tre.exec(t),r=e&&pD[e[1].toLowerCase()];return r&&r.charset?r.charset:e&&bRe.test(e[1])?"UTF-8":!1}function xRe(t){if(!t||typeof t!="string")return!1;var e=t.indexOf("/")===-1?vs.lookup(t):t;if(!e)return!1;if(e.indexOf("charset")===-1){var r=vs.charset(e);r&&(e+="; charset="+r.toLowerCase())}return e}function TRe(t){if(!t||typeof t!="string")return!1;var e=Tre.exec(t),r=e&&vs.extensions[e[1].toLowerCase()];return!r||!r.length?!1:r[0]}function wRe(t){if(!t||typeof t!="string")return!1;var e=_Re("x."+t).toLowerCase().substr(1);return e&&vs.types[e]||!1}function SRe(t,e){var r=["nginx","apache",void 0,"iana"];Object.keys(pD).forEach(function(i){var o=pD[i],s=o.extensions;if(!(!s||!s.length)){t[i]=s;for(var a=0;a<s.length;a++){var l=s[a];if(e[l]){var c=r.indexOf(pD[e[l]].source),p=r.indexOf(o.source);if(e[l]!=="application/octet-stream"&&(c>p||c===p&&e[l].substr(0,12)==="application/"))continue}e[l]=i}}})}});var Kg={};wu(Kg,{Headers:()=>W4,Request:()=>DRe,Response:()=>IRe,default:()=>H_,fetch:()=>CRe});var ERe,Vg,CRe,H_,W4,DRe,IRe,Op=ky(()=>{"use strict";ERe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Vg=ERe(),CRe=Vg.fetch,H_=Vg.fetch.bind(Vg),W4=Vg.Headers,DRe=Vg.Request,IRe=Vg.Response});var Lre=Y((tSt,Pre)=>{"use strict";Pre.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var mne=ie(p7(),1);var hA={};wu(hA,{$mobx:()=>Ise,FlowCancellationError:()=>kse,ObservableMap:()=>Nse,ObservableSet:()=>Ase,Reaction:()=>dA,_allowStateChanges:()=>Ose,_allowStateChangesInsideComputed:()=>Rse,_allowStateReadsEnd:()=>Pse,_allowStateReadsStart:()=>Lse,_autoAction:()=>Mse,_endAction:()=>Fse,_getAdministration:()=>Use,_getGlobalState:()=>Bse,_interceptReads:()=>Wse,_isComputingDerivation:()=>jse,_resetGlobalState:()=>zse,_startAction:()=>$se,action:()=>dd,autorun:()=>pA,comparer:()=>Hse,computed:()=>qse,configure:()=>Tv,createAtom:()=>Gse,default:()=>Dse,defineProperty:()=>Vse,entries:()=>Kse,extendObservable:()=>fA,flow:()=>Yse,flowResult:()=>Xse,get:()=>Jse,getAtom:()=>Qse,getDebugName:()=>Zse,getDependencyTree:()=>mA,getObserverTree:()=>eae,has:()=>tae,intercept:()=>rae,isAction:()=>nae,isBoxedObservable:()=>iae,isComputed:()=>oae,isComputedProp:()=>sae,isFlow:()=>aae,isFlowCancellationError:()=>lae,isObservable:()=>uae,isObservableArray:()=>cae,isObservableMap:()=>dae,isObservableObject:()=>pae,isObservableProp:()=>fae,isObservableSet:()=>mae,keys:()=>hae,makeAutoObservable:()=>Ce,makeObservable:()=>wv,observable:()=>si,observe:()=>gae,onBecomeObserved:()=>yae,onBecomeUnobserved:()=>vae,onReactionError:()=>_ae,override:()=>bae,ownKeys:()=>xae,reaction:()=>Sv,remove:()=>Tae,runInAction:()=>_r,set:()=>wae,spy:()=>Sae,toJS:()=>yi,trace:()=>Eae,transaction:()=>Cae,untracked:()=>Dae,values:()=>Iae,when:()=>kae});var Ge=window.require("mobx"),Dse=Ge,Ise=Ge.$mobx,kse=Ge.FlowCancellationError,Nse=Ge.ObservableMap,Ase=Ge.ObservableSet,dA=Ge.Reaction,Ose=Ge._allowStateChanges,Rse=Ge._allowStateChangesInsideComputed,Pse=Ge._allowStateReadsEnd,Lse=Ge._allowStateReadsStart,Mse=Ge._autoAction,Fse=Ge._endAction,Use=Ge._getAdministration,Bse=Ge._getGlobalState,Wse=Ge._interceptReads,jse=Ge._isComputingDerivation,zse=Ge._resetGlobalState,$se=Ge._startAction,dd=Ge.action,pA=Ge.autorun,Hse=Ge.comparer,qse=Ge.computed,Tv=Ge.configure,Gse=Ge.createAtom,Vse=Ge.defineProperty,Kse=Ge.entries,fA=Ge.extendObservable,Yse=Ge.flow,Xse=Ge.flowResult,Jse=Ge.get,Qse=Ge.getAtom,Zse=Ge.getDebugName,mA=Ge.getDependencyTree,eae=Ge.getObserverTree,tae=Ge.has,rae=Ge.intercept,nae=Ge.isAction,iae=Ge.isBoxedObservable,oae=Ge.isComputed,sae=Ge.isComputedProp,aae=Ge.isFlow,lae=Ge.isFlowCancellationError,uae=Ge.isObservable,cae=Ge.isObservableArray,dae=Ge.isObservableMap,pae=Ge.isObservableObject,fae=Ge.isObservableProp,mae=Ge.isObservableSet,hae=Ge.keys,Ce=Ge.makeAutoObservable,wv=Ge.makeObservable,si=Ge.observable,gae=Ge.observe,yae=Ge.onBecomeObserved,vae=Ge.onBecomeUnobserved,_ae=Ge.onReactionError,bae=Ge.override,xae=Ge.ownKeys,Sv=Ge.reaction,Tae=Ge.remove,_r=Ge.runInAction,wae=Ge.set,Sae=Ge.spy,yi=Ge.toJS,Eae=Ge.trace,Cae=Ge.transaction,Dae=Ge.untracked,Iae=Ge.values,kae=Ge.when;var f7=ie(ve());if(!f7.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!wv)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var gA=ie(Pl());function Nae(t){t()}function yA(t){t||(t=Nae),Tv({reactionScheduler:t})}var _A=ie(ve());function m7(t){return mA(t)}var Aae=!1;function Ev(){return Aae}var Oae=1e4,Rae=1e4,Pae=function(){function t(e){var r=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(n){n===void 0&&(n=Oae),clearTimeout(r.sweepTimeout),r.sweepTimeout=void 0;var i=Date.now();r.registrations.forEach(function(o,s){i-o.registeredAt>=n&&(r.finalize(o.value),r.registrations.delete(s))}),r.registrations.size>0&&r.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.sweep(0)}})}return Object.defineProperty(t.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r,n){this.registrations.set(n,{value:r,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(t.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(t.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,Rae))}}),t}();var h7=typeof FinalizationRegistry<"u"?FinalizationRegistry:Pae;var Cv=new h7(function(t){var e;(e=t.reaction)===null||e===void 0||e.dispose(),t.reaction=null});var x7=ie(_7()),Hae=function(){};function b7(t){t.reaction=new dA("observer".concat(t.name),function(){var e;t.stateVersion=Symbol(),(e=t.onStoreChange)===null||e===void 0||e.call(t)})}function Dv(t,e){if(e===void 0&&(e="observed"),Ev())return t();var r=_A.default.useRef(null);if(!r.current){var n={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:e,subscribe:function(a){return Cv.unregister(n),n.onStoreChange=a,n.reaction||(b7(n),n.stateVersion=Symbol()),function(){var l;n.onStoreChange=null,(l=n.reaction)===null||l===void 0||l.dispose(),n.reaction=null}},getSnapshot:function(){return n.stateVersion}};r.current=n}var i=r.current;i.reaction||(b7(i),Cv.register(r,i,i)),_A.default.useDebugValue(i.reaction,m7),(0,x7.useSyncExternalStore)(i.subscribe,i.getSnapshot,Hae);var o,s;if(i.reaction.track(function(){try{o=t()}catch(a){s=a}}),s)throw s;return o}var pd=ie(ve());var S7=typeof Symbol=="function"&&Symbol.for,T7=S7?Symbol.for("react.forward_ref"):typeof pd.forwardRef=="function"&&(0,pd.forwardRef)(function(t){return null}).$$typeof,w7=S7?Symbol.for("react.memo"):typeof pd.memo=="function"&&(0,pd.memo)(function(t){return null}).$$typeof;function F(t,e){var r;if(w7&&t.$$typeof===w7)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(Ev())return t;var n=(r=e?.forwardRef)!==null&&r!==void 0?r:!1,i=t,o=t.displayName||t.name;if(T7&&t.$$typeof===T7&&(n=!0,i=t.render,typeof i!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var s=function(a,l){return Dv(function(){return i(a,l)},o)};return s.displayName=t.displayName,Object.defineProperty(s,"name",{value:t.name,writable:!0,configurable:!0}),t.contextTypes&&(s.contextTypes=t.contextTypes),n&&(s=(0,pd.forwardRef)(s)),s=(0,pd.memo)(s),Gae(t,s),s}var qae={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function Gae(t,e){Object.keys(t).forEach(function(r){qae[r]||Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}function E7(t){var e=t.children,r=t.render,n=e||r;return typeof n!="function"?null:Dv(n)}E7.displayName="Observer";var C7=ie(ve());function bA(t,e){return(0,C7.useState)(function(){return si(t(),e,{autoBind:!0})})[0]}var Yae=ie(ve());var Vae=ie(ve());var xA;yA(gA.unstable_batchedUpdates);var k3e=(xA=Cv.finalizeAllImmediately)!==null&&xA!==void 0?xA:function(){};var pne=ie(ve(),1);var D7=ie(ve(),1),E1=(0,D7.createContext)({dragDropManager:void 0});var vU=ie(Cr(),1);function da(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var A7=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),TA=function(){return Math.random().toString(36).substring(7).split("").join(".")},O7={INIT:"@@redux/INIT"+TA(),REPLACE:"@@redux/REPLACE"+TA(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+TA()}};function ile(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function wA(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(da(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(da(1));return r(wA)(t,e)}if(typeof t!="function")throw new Error(da(2));var i=t,o=e,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function p(){if(l)throw new Error(da(3));return o}function f(_){if(typeof _!="function")throw new Error(da(4));if(l)throw new Error(da(5));var S=!0;return c(),a.push(_),function(){if(S){if(l)throw new Error(da(6));S=!1,c();var w=a.indexOf(_);a.splice(w,1),s=null}}}function m(_){if(!ile(_))throw new Error(da(7));if(typeof _.type>"u")throw new Error(da(8));if(l)throw new Error(da(9));try{l=!0,o=i(o,_)}finally{l=!1}for(var S=s=a,T=0;T<S.length;T++){var w=S[T];w()}return _}function g(_){if(typeof _!="function")throw new Error(da(10));i=_,m({type:O7.REPLACE})}function v(){var _,S=f;return _={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(da(11));function E(){w.next&&w.next(p())}E();var I=S(E);return{unsubscribe:I}}},_[A7]=function(){return this},_}return m({type:O7.INIT}),n={dispatch:m,subscribe:f,getState:p,replaceReducer:g},n[A7]=v,n}function at(t,e,...r){if(ole()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;n=new Error(e.replace(/%s/g,function(){return r[i++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function ole(){return typeof process<"u"&&!0}function R7(t,e,r){return e.split(".").reduce((n,i)=>n&&n[i]?n[i]:r||null,t)}function P7(t,e){return t.filter(r=>r!==e)}function D1(t){return typeof t=="object"}function L7(t,e){let r=new Map,n=o=>{r.set(o,r.has(o)?r.get(o)+1:1)};t.forEach(n),e.forEach(n);let i=[];return r.forEach((o,s)=>{o===1&&i.push(s)}),i}function M7(t,e){return t.filter(r=>e.indexOf(r)>-1)}var ah="dnd-core/INIT_COORDS",fd="dnd-core/BEGIN_DRAG",lh="dnd-core/PUBLISH_DRAG_SOURCE",md="dnd-core/HOVER",hd="dnd-core/DROP",gd="dnd-core/END_DRAG";function SA(t,e){return{type:ah,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}var sle={type:ah,payload:{clientOffset:null,sourceClientOffset:null}};function F7(t){return function(r=[],n={publishSource:!0}){let{publishSource:i=!0,clientOffset:o,getSourceClientOffset:s}=n,a=t.getMonitor(),l=t.getRegistry();t.dispatch(SA(o)),ale(r,a,l);let c=cle(r,a);if(c==null){t.dispatch(sle);return}let p=null;if(o){if(!s)throw new Error("getSourceClientOffset must be defined");lle(s),p=s(c)}t.dispatch(SA(o,p));let m=l.getSource(c).beginDrag(a,c);if(m==null)return;ule(m),l.pinSource(c);let g=l.getSourceType(c);return{type:fd,payload:{itemType:g,item:m,sourceId:c,clientOffset:o||null,sourceClientOffset:p||null,isSourcePublic:!!i}}}}function ale(t,e,r){at(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){at(r.getSource(n),"Expected sourceIds to be registered.")})}function lle(t){at(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function ule(t){at(D1(t),"Item must be an object.")}function cle(t,e){let r=null;for(let n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){r=t[n];break}return r}function dle(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ple(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){dle(t,i,r[i])})}return t}function U7(t){return function(r={}){let n=t.getMonitor(),i=t.getRegistry();fle(n),gle(n).forEach((s,a)=>{let l=mle(s,a,i,n),c={type:hd,payload:{dropResult:ple({},r,l)}};t.dispatch(c)})}}function fle(t){at(t.isDragging(),"Cannot call drop while not dragging."),at(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function mle(t,e,r,n){let i=r.getTarget(t),o=i?i.drop(n,t):void 0;return hle(o),typeof o>"u"&&(o=e===0?{}:n.getDropResult()),o}function hle(t){at(typeof t>"u"||D1(t),"Drop result must either be an object or undefined.")}function gle(t){let e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function B7(t){return function(){let r=t.getMonitor(),n=t.getRegistry();yle(r);let i=r.getSourceId();return i!=null&&(n.getSource(i,!0).endDrag(r,i),n.unpinSource()),{type:gd}}}function yle(t){at(t.isDragging(),"Cannot call endDrag while not dragging.")}function Iv(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function W7(t){return function(r,{clientOffset:n}={}){vle(r);let i=r.slice(0),o=t.getMonitor(),s=t.getRegistry(),a=o.getItemType();return ble(i,s,a),_le(i,o,s),xle(i,o,s),{type:md,payload:{targetIds:i,clientOffset:n||null}}}}function vle(t){at(Array.isArray(t),"Expected targetIds to be an array.")}function _le(t,e,r){at(e.isDragging(),"Cannot call hover while not dragging."),at(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<t.length;n++){let i=t[n];at(t.lastIndexOf(i)===n,"Expected targetIds to be unique in the passed array.");let o=r.getTarget(i);at(o,"Expected targetIds to be registered.")}}function ble(t,e,r){for(let n=t.length-1;n>=0;n--){let i=t[n],o=e.getTargetType(i);Iv(o,r)||t.splice(n,1)}}function xle(t,e,r){t.forEach(function(n){r.getTarget(n).hover(e,n)})}function j7(t){return function(){if(t.getMonitor().isDragging())return{type:lh}}}function z7(t){return{beginDrag:F7(t),publishDragSource:j7(t),hover:W7(t),drop:U7(t),endDrag:B7(t)}}var I1=class{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){let e=this,{dispatch:r}=this.store;function n(o){return(...s)=>{let a=o.apply(e,s);typeof a<"u"&&r(a)}}let i=z7(this);return Object.keys(i).reduce((o,s)=>{let a=i[s];return o[s]=n(a),o},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{let n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}};function Tle(t,e){return{x:t.x+e.x,y:t.y+e.y}}function $7(t,e){return{x:t.x-e.x,y:t.y-e.y}}function H7(t){let{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:n}=t;return!e||!r||!n?null:$7(Tle(e,n),r)}function q7(t){let{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:$7(e,r)}var uh=[],k1=[];uh.__IS_NONE__=!0;k1.__IS_ALL__=!0;function G7(t,e){return t===uh?!1:t===k1||typeof e>"u"?!0:M7(e,t).length>0}var N1=class{subscribeToStateChange(e,r={}){let{handlerIds:n}=r;at(typeof e=="function","listener must be a function."),at(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId,o=()=>{let s=this.store.getState(),a=s.stateId;try{a===i||a===i+1&&!G7(s.dirtyHandlerIds,n)||e()}finally{i=a}};return this.store.subscribe(o)}subscribeToOffsetChange(e){at(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset,n=()=>{let i=this.store.getState().dragOffset;i!==r&&(r=i,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;let r=this.registry.getSource(e);return at(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;let r=this.registry.getTarget(e);if(at(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;let n=this.registry.getTargetType(e),i=this.getItemType();return Iv(n,i)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;let r=this.registry.getSource(e,!0);if(at(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;let n=this.registry.getSourceType(e),i=this.getItemType();return n!==i?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;let{shallow:n}=r;if(!this.isDragging())return!1;let i=this.registry.getTargetType(e),o=this.getItemType();if(o&&!Iv(i,o))return!1;let s=this.getTargetIds();if(!s.length)return!1;let a=s.indexOf(e);return n?a===s.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return H7(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return q7(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}};var V7=typeof global<"u"?global:self,K7=V7.MutationObserver||V7.WebKitMutationObserver;function EA(t){return function(){let r=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(r),clearInterval(n),t()}}}function wle(t){let e=1,r=new K7(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}var Y7=typeof K7=="function"?wle:EA;var A1=class{enqueueTask(e){let{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:e}=this;for(;this.index<e.length;){let r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,i=e.length-this.index;n<i;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Y7(this.flush),this.requestErrorThrow=EA(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}};var O1=class{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}};var R1=class{create(e){let r=this.freeTasks,n=r.length?r.pop():new O1(this.onError,i=>r[r.length]=i);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}};var X7=new A1,Sle=new R1(X7.registerPendingError);function J7(t){X7.enqueueTask(Sle.create(t))}var kv="dnd-core/ADD_SOURCE",Nv="dnd-core/ADD_TARGET",Av="dnd-core/REMOVE_SOURCE",uf="dnd-core/REMOVE_TARGET";function Q7(t){return{type:kv,payload:{sourceId:t}}}function Z7(t){return{type:Nv,payload:{targetId:t}}}function eU(t){return{type:Av,payload:{sourceId:t}}}function tU(t){return{type:uf,payload:{targetId:t}}}function rU(t){at(typeof t.canDrag=="function","Expected canDrag to be a function."),at(typeof t.beginDrag=="function","Expected beginDrag to be a function."),at(typeof t.endDrag=="function","Expected endDrag to be a function.")}function nU(t){at(typeof t.canDrop=="function","Expected canDrop to be a function."),at(typeof t.hover=="function","Expected hover to be a function."),at(typeof t.drop=="function","Expected beginDrag to be a function.")}function P1(t,e){if(e&&Array.isArray(t)){t.forEach(r=>P1(r,!1));return}at(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Ns;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Ns||(Ns={}));var Ele=0;function iU(){return Ele++}function Cle(t){let e=iU().toString();switch(t){case Ns.SOURCE:return`S${e}`;case Ns.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function oU(t){switch(t[0]){case"S":return Ns.SOURCE;case"T":return Ns.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function sU(t,e){let r=t.entries(),n=!1;do{let{done:i,value:[,o]}=r.next();if(o===e)return!0;n=!!i}while(!n);return!1}var L1=class{addSource(e,r){P1(e),rU(r);let n=this.addHandler(Ns.SOURCE,e,r);return this.store.dispatch(Q7(n)),n}addTarget(e,r){P1(e,!0),nU(r);let n=this.addHandler(Ns.TARGET,e,r);return this.store.dispatch(Z7(n)),n}containsHandler(e){return sU(this.dragSources,e)||sU(this.dropTargets,e)}getSource(e,r=!1){return at(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return at(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return at(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return at(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return oU(e)===Ns.SOURCE}isTargetId(e){return oU(e)===Ns.TARGET}removeSource(e){at(this.getSource(e),"Expected an existing source."),this.store.dispatch(eU(e)),J7(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){at(this.getTarget(e),"Expected an existing target."),this.store.dispatch(tU(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){let r=this.getSource(e);at(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){at(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){let i=Cle(e);return this.types.set(i,r),e===Ns.SOURCE?this.dragSources.set(i,n):e===Ns.TARGET&&this.dropTargets.set(i,n),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}};var Dle=(t,e)=>t===e;function aU(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function lU(t,e,r=Dle){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!r(t[n],e[n]))return!1;return!0}function uU(t=uh,e){switch(e.type){case md:break;case kv:case Nv:case uf:case Av:return uh;case fd:case lh:case gd:case hd:default:return k1}let{targetIds:r=[],prevTargetIds:n=[]}=e.payload,i=L7(r,n);if(!(i.length>0||!lU(r,n)))return uh;let s=n[n.length-1],a=r[r.length-1];return s!==a&&(s&&i.push(s),a&&i.push(a)),i}function Ile(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kle(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Ile(t,i,r[i])})}return t}var cU={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function dU(t=cU,e){let{payload:r}=e;switch(e.type){case ah:case fd:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case md:return aU(t.clientOffset,r.clientOffset)?t:kle({},t,{clientOffset:r.clientOffset});case gd:case hd:return cU;default:return t}}function Nle(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ch(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Nle(t,i,r[i])})}return t}var Ale={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function pU(t=Ale,e){let{payload:r}=e;switch(e.type){case fd:return ch({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case lh:return ch({},t,{isSourcePublic:!0});case md:return ch({},t,{targetIds:r.targetIds});case uf:return t.targetIds.indexOf(r.targetId)===-1?t:ch({},t,{targetIds:P7(t.targetIds,r.targetId)});case hd:return ch({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case gd:return ch({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function fU(t=0,e){switch(e.type){case kv:case Nv:return t+1;case Av:case uf:return t-1;default:return t}}function mU(t=0){return t+1}function Ole(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rle(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Ole(t,i,r[i])})}return t}function hU(t={},e){return{dirtyHandlerIds:uU(t.dirtyHandlerIds,{type:e.type,payload:Rle({},e.payload,{prevTargetIds:R7(t,"dragOperation.targetIds",[])})}),dragOffset:dU(t.dragOffset,e),refCount:fU(t.refCount,e),dragOperation:pU(t.dragOperation,e),stateId:mU(t.stateId)}}function gU(t,e=void 0,r={},n=!1){let i=Ple(n),o=new N1(i,new L1(i)),s=new I1(i,o),a=t(s,e,r);return s.receiveBackend(a),s}function Ple(t){let e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return wA(hU,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}var F1=ie(ve(),1);function Lle(t,e){if(t==null)return{};var r=Mle(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Mle(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var yU=0,M1=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),_U=(0,F1.memo)(function(e){var{children:r}=e,n=Lle(e,["children"]);let[i,o]=Fle(n);return(0,F1.useEffect)(()=>{if(o){let s=bU();return++yU,()=>{--yU===0&&(s[M1]=null)}}},[]),(0,vU.jsx)(E1.Provider,{value:i,children:r})});function Fle(t){if("manager"in t)return[{dragDropManager:t.manager},!1];let e=Ule(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function Ule(t,e=bU(),r,n){let i=e;return i[M1]||(i[M1]={dragDropManager:gU(t,e,r,n)}),i[M1]}function bU(){return typeof global<"u"?global:window}var wU=ie(TU(),1),B1=ie(ve(),1);var U1=ie(ve(),1),As=typeof window<"u"?U1.useLayoutEffect:U1.useEffect;function W1(t,e,r){let[n,i]=(0,B1.useState)(()=>e(t)),o=(0,B1.useCallback)(()=>{let s=e(t);(0,wU.default)(n,s)||(i(s),r&&r())},[n,t,r]);return As(o),[n,o]}function SU(t,e,r){let[n,i]=W1(t,e,r);return As(function(){let s=t.getHandlerId();if(s!=null)return t.subscribeToStateChange(i,{handlerIds:[s]})},[t,i]),n}function j1(t,e,r){return SU(e,t||(()=>({})),()=>r.reconnect())}var EU=ie(ve(),1);function z1(t,e){let r=[...e||[]];return e==null&&typeof t!="function"&&r.push(t),(0,EU.useMemo)(()=>typeof t=="function"?t():t,r)}var CA=ie(ve(),1);function CU(t){return(0,CA.useMemo)(()=>t.hooks.dragSource(),[t])}function DU(t){return(0,CA.useMemo)(()=>t.hooks.dragPreview(),[t])}var OU=ie(ve(),1);var DA=!1,IA=!1,$1=class{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){at(!DA,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return DA=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{DA=!1}}isDragging(){if(!this.sourceId)return!1;at(!IA,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return IA=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{IA=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}};var kA=!1,H1=class{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;at(!kA,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return kA=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{kA=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}};function IU(t,e,r){let n=r.getRegistry(),i=n.addTarget(t,e);return[i,()=>n.removeTarget(i)]}function kU(t,e,r){let n=r.getRegistry(),i=n.addSource(t,e);return[i,()=>n.removeSource(i)]}function Ov(t,e,r,n){let i=r?r.call(n,t,e):void 0;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;let o=Object.keys(t),s=Object.keys(e);if(o.length!==s.length)return!1;let a=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<o.length;l++){let c=o[l];if(!a(c))return!1;let p=t[c],f=e[c];if(i=r?r.call(n,p,f,c):void 0,i===!1||i===void 0&&p!==f)return!1}return!0}function Rv(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}var Pv=ie(ve(),1);function Ble(t){if(typeof t.type=="string")return;let e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function Wle(t){return(e=null,r=null)=>{if(!(0,Pv.isValidElement)(e)){let o=e;return t(o,r),o}let n=e;return Ble(n),jle(n,r?o=>t(o,r):t)}}function q1(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{let i=Wle(n);e[r]=()=>i}}),e}function NU(t,e){typeof t=="function"?t(e):t.current=e}function jle(t,e){let r=t.ref;return at(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?(0,Pv.cloneElement)(t,{ref:n=>{NU(r,n),NU(e,n)}}):(0,Pv.cloneElement)(t,{ref:e})}var G1=class{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){let e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){let e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){let r=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Ov(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Ov(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=q1({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Rv(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Rv(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}};var V1=class{get connectTarget(){return this.dropTarget}reconnect(){let e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();let r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Ov(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=q1({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Rv(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}};var AU=ie(ve(),1);function ts(){let{dragDropManager:t}=(0,AU.useContext)(E1);return at(t!=null,"Expected drag drop context"),t}function RU(t,e){let r=ts(),n=(0,OU.useMemo)(()=>new G1(r.getBackend()),[r]);return As(()=>(n.dragSourceOptions=t||null,n.reconnect(),()=>n.disconnectDragSource()),[n,t]),As(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}var PU=ie(ve(),1);function LU(){let t=ts();return(0,PU.useMemo)(()=>new $1(t),[t])}var Y1=ie(ve(),1);var K1=class{beginDrag(){let e=this.spec,r=this.monitor,n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(r):n={},n??null}canDrag(){let e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){let n=this.spec,i=this.monitor,{isDragging:o}=n;return o?o(i):r===e.getSourceId()}endDrag(){let e=this.spec,r=this.monitor,n=this.connector,{end:i}=e;i&&i(r.getItem(),r),n.reconnect()}constructor(e,r,n){this.spec=e,this.monitor=r,this.connector=n}};function MU(t,e,r){let n=(0,Y1.useMemo)(()=>new K1(t,e,r),[e,r]);return(0,Y1.useEffect)(()=>{n.spec=t},[t]),n}var FU=ie(ve(),1);function UU(t){return(0,FU.useMemo)(()=>{let e=t.type;return at(e!=null,"spec.type must be defined"),e},[t])}function BU(t,e,r){let n=ts(),i=MU(t,e,r),o=UU(t);As(function(){if(o!=null){let[a,l]=kU(o,i,n);return e.receiveHandlerId(a),r.receiveHandlerId(a),l}},[n,e,r,i,o])}function WU(t,e){let r=z1(t,e);at(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");let n=LU(),i=RU(r.options,r.previewOptions);return BU(r,n,i),[j1(r.collect,n,i),CU(i),DU(i)]}var NA=ie(ve(),1);function jU(t){let r=ts().getMonitor(),[n,i]=W1(r,t);return(0,NA.useEffect)(()=>r.subscribeToOffsetChange(i)),(0,NA.useEffect)(()=>r.subscribeToStateChange(i)),n}var zU=ie(ve(),1);function $U(t){return(0,zU.useMemo)(()=>t.hooks.dropTarget(),[t])}var HU=ie(ve(),1);function qU(t){let e=ts(),r=(0,HU.useMemo)(()=>new V1(e.getBackend()),[e]);return As(()=>(r.dropTargetOptions=t||null,r.reconnect(),()=>r.disconnectDropTarget()),[t]),r}var GU=ie(ve(),1);function VU(){let t=ts();return(0,GU.useMemo)(()=>new H1(t),[t])}var KU=ie(ve(),1);function YU(t){let{accept:e}=t;return(0,KU.useMemo)(()=>(at(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}var J1=ie(ve(),1);var X1=class{canDrop(){let e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){let e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){let e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}};function XU(t,e){let r=(0,J1.useMemo)(()=>new X1(t,e),[e]);return(0,J1.useEffect)(()=>{r.spec=t},[t]),r}function JU(t,e,r){let n=ts(),i=XU(t,e),o=YU(t);As(function(){let[a,l]=IU(o,i,n);return e.receiveHandlerId(a),r.receiveHandlerId(a),l},[n,e,i,r,o.map(s=>s.toString()).join("|")])}function Q1(t,e){let r=z1(t,e),n=VU(),i=qU(r.options);return JU(r,n,i),[j1(r.collect,n,i),$U(i)]}function AA(t){let e=null;return()=>(e==null&&(e=t()),e)}function QU(t,e){return t.filter(r=>r!==e)}function ZU(t,e){let r=new Set,n=o=>r.add(o);t.forEach(n),e.forEach(n);let i=[];return r.forEach(o=>i.push(o)),i}var Z1=class{enter(e){let r=this.entered.length,n=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=ZU(this.entered.filter(n),[e]),r===0&&this.entered.length>0}leave(e){let r=this.entered.length;return this.entered=QU(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}};var eT=class{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){let r={};Object.keys(this.config.exposeProperties).forEach(n=>{let i=this.config.exposeProperties[n];i!=null&&(r[n]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}};var Xa={};wu(Xa,{FILE:()=>OA,HTML:()=>LA,TEXT:()=>PA,URL:()=>RA});var OA="__NATIVE_FILE__",RA="__NATIVE_URL__",PA="__NATIVE_TEXT__",LA="__NATIVE_HTML__";function tT(t,e,r){let n=e.reduce((i,o)=>i||t.getData(o),"");return n??r}var rT={[OA]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[LA]:{exposeProperties:{html:(t,e)=>tT(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[RA]:{exposeProperties:{urls:(t,e)=>tT(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[PA]:{exposeProperties:{text:(t,e)=>tT(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function eB(t,e){let r=rT[t];if(!r)throw new Error(`native type ${t} has no configuration`);let n=new eT(r);return n.loadDataTransfer(e),n}function nT(t){if(!t)return null;let e=Array.prototype.slice.call(t.types||[]);return Object.keys(rT).filter(r=>{let n=rT[r];return n?.matchesTypes?n.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}var tB=AA(()=>/firefox/i.test(navigator.userAgent)),MA=AA(()=>!!window.safari);var Lv=class{interpolate(e){let{xs:r,ys:n,c1s:i,c2s:o,c3s:s}=this,a=r.length-1;if(e===r[a])return n[a];let l=0,c=s.length-1,p;for(;l<=c;){p=Math.floor(.5*(l+c));let g=r[p];if(g<e)l=p+1;else if(g>e)c=p-1;else return n[p]}a=Math.max(0,c);let f=e-r[a],m=f*f;return n[a]+i[a]*f+o[a]*m+s[a]*f*m}constructor(e,r){let{length:n}=e,i=[];for(let v=0;v<n;v++)i.push(v);i.sort((v,_)=>e[v]<e[_]?-1:1);let o=[],s=[],a=[],l,c;for(let v=0;v<n-1;v++)l=e[v+1]-e[v],c=r[v+1]-r[v],s.push(l),o.push(c),a.push(c/l);let p=[a[0]];for(let v=0;v<s.length-1;v++){let _=a[v],S=a[v+1];if(_*S<=0)p.push(0);else{l=s[v];let T=s[v+1],w=l+T;p.push(3*w/((w+T)/_+(w+l)/S))}}p.push(a[a.length-1]);let f=[],m=[],g;for(let v=0;v<p.length-1;v++){g=a[v];let _=p[v],S=1/s[v],T=_+p[v+1]-g-g;f.push((g-_-T)*S),m.push(T*S*S)}this.xs=e,this.ys=r,this.c1s=p,this.c2s=f,this.c3s=m}};var zle=1;function FA(t){let e=t.nodeType===zle?t:t.parentElement;if(!e)return null;let{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function Mv(t){return{x:t.clientX,y:t.clientY}}function $le(t){var e;return t.nodeName==="IMG"&&(tB()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function Hle(t,e,r,n){let i=t?e.width:r,o=t?e.height:n;return MA()&&t&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}function rB(t,e,r,n,i){let o=$le(e),a=FA(o?t:e),l={x:r.x-a.x,y:r.y-a.y},{offsetWidth:c,offsetHeight:p}=t,{anchorX:f,anchorY:m}=n,{dragPreviewWidth:g,dragPreviewHeight:v}=Hle(o,e,c,p),_=()=>{let C=new Lv([0,.5,1],[l.y,l.y/p*v,l.y+v-p]).interpolate(m);return MA()&&o&&(C+=(window.devicePixelRatio-1)*v),C},S=()=>new Lv([0,.5,1],[l.x,l.x/c*g,l.x+g-c]).interpolate(f),{offsetX:T,offsetY:w}=i,E=T===0||T,I=w===0||w;return{x:E?T:S(),y:I?w:_()}}var iT=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}};function qle(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){qle(t,i,r[i])})}return t}var oT=class{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){let e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){let e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);let i=s=>this.handleDragStart(s,e),o=s=>this.handleSelectStart(s);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",i),r.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",i),r.removeEventListener("selectstart",o),r.setAttribute("draggable","false")}}connectDropTarget(e,r){let n=s=>this.handleDragEnter(s,e),i=s=>this.handleDragOver(s,e),o=s=>this.handleDrop(s,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",i),r.addEventListener("drop",o),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",i),r.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){let e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return nB({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){let e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return nB({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){let e=this.monitor.getItemType();return Object.keys(Xa).some(r=>Xa[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=eB(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;let r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{let o=this.sourceNodes.get(i);return o&&FA(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{let i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;let{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;let s=Mv(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:s});let{dataTransfer:a}=i,l=nT(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){let p=this.monitor.getSourceId(),f=this.sourceNodes.get(p),m=this.sourcePreviewNodes.get(p)||f;if(m){let{anchorX:g,anchorY:v,offsetX:_,offsetY:S}=this.getCurrentSourcePreviewNodeOptions(),E=rB(f,m,s,{anchorX:g,anchorY:v},{offsetX:_,offsetY:S});a.setDragImage(m,E.x,E.y)}}try{a?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);let{captureDraggingState:c}=this.getCurrentSourcePreviewNodeOptions();c?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(a&&!a.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;let{dataTransfer:a}=i,l=nT(a);l&&this.beginDragNativeItem(l,a)},this.handleTopDragEnter=i=>{let{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,o.length>0&&this.actions.hover(o,{clientOffset:Mv(i)}),o.some(a=>this.monitor.canDropOnTarget(a))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{let{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=Mv(i),this.scheduleHover(o),(o||[]).some(a=>this.monitor.canDropOnTarget(a))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;i.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}else nT(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{let{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:Mv(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{let o=i.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(i.preventDefault(),o.dragDrop()))},this.options=new iT(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Z1(this.isNodeInDocument)}};var iB=function(e,r,n){return new oT(e,r,n)};var UA=ie(ve(),1),BA=UA.default.createContext(null),pe=()=>{let t=UA.default.useContext(BA);if(t==null)throw new Error("stContext not provided");return t};var St=ie(Cr(),1),dh=ie(Cr(),1),oB=t=>{if(typeof t=="string")return t;if(Array.isArray(t)){let e=[];for(let r of t)if(r!=null&&(typeof r=="string"&&e.push(r),typeof r=="object"))for(let n of Object.keys(r))r[n]&&e.push(n);return e.join(" ")}return""};function h(t,e,r){if(!hasOwnProperty.call(e,"tw"))return(0,dh.jsx)(t,e,r);let n=e.className??"";e.tw&&(n+=" "+oB(e.tw));let i={...e,className:n,tw:void 0};return(0,dh.jsx)(t,i,r)}function P(t,e,r){if(!hasOwnProperty.call(e,"tw"))return(0,dh.jsxs)(t,e,r);let n=e.className??"";e.tw&&(n+=" "+oB(e.tw));let i={...e,className:n,tw:void 0};return(0,dh.jsxs)(t,i,r)}var sT=F(t=>{let e=pe(),[{isActive:r,canDrop:n,isOver:i},o]=Q1(()=>({accept:[Xa.FILE],drop(s){if(s){let a=s.files;e.droppedFiles.push(...a),e.layout.FOCUS_OR_CREATE("Import",{})}},canDrop(s){return!0},hover(s){},collect:s=>{let a=s.isOver(),l=s.canDrop();return{isOver:a,canDrop:l,isActive:l&&a}}}),[t]);return h("div",{tw:[r?"animate-pulse":null,"h-full w-full"],ref:o,children:t.children??(r?"Release to drop":"Import files")})});var bE=ie(ve(),1);var Ue=window.require("process"),WA=Ue,o8e=Ue.version,s8e=Ue.versions,a8e=Ue.arch,l8e=Ue.platform,u8e=Ue.release,c8e=Ue._rawDebug,d8e=Ue.moduleLoadList,p8e=Ue.binding,f8e=Ue._linkedBinding,m8e=Ue._events,h8e=Ue._eventsCount,g8e=Ue._maxListeners,y8e=Ue.domain,v8e=Ue._exiting,_8e=Ue.exitCode,b8e=Ue.config,x8e=Ue.dlopen,T8e=Ue.uptime,w8e=Ue._getActiveRequests,S8e=Ue._getActiveHandles,E8e=Ue.getActiveResourcesInfo,C8e=Ue.reallyExit,D8e=Ue._kill,I8e=Ue.cpuUsage,k8e=Ue.resourceUsage,N8e=Ue.memoryUsage,A8e=Ue.constrainedMemory,O8e=Ue.kill,R8e=Ue.exit,P8e=Ue.hrtime,L8e=Ue.openStdin,M8e=Ue.getuid,F8e=Ue.geteuid,U8e=Ue.getgid,B8e=Ue.getegid,W8e=Ue.getgroups,j8e=Ue.allowedNodeEnvironmentFlags,z8e=Ue.assert,$8e=Ue.features,H8e=Ue._fatalException,q8e=Ue.setUncaughtExceptionCaptureCallback,G8e=Ue.hasUncaughtExceptionCaptureCallback,V8e=Ue.emitWarning,K8e=Ue.nextTick,Y8e=Ue._tickCallback,X8e=Ue.sourceMapsEnabled,J8e=Ue.setSourceMapsEnabled,Q8e=Ue._debugProcess,Z8e=Ue._debugEnd,e6e=Ue._startProfilerIdleNotifier,t6e=Ue._stopProfilerIdleNotifier,r6e=Ue.stdout,n6e=Ue.stdin,i6e=Ue.stderr,o6e=Ue.abort,s6e=Ue.umask,a6e=Ue.chdir,ph=Ue.cwd,l6e=Ue.initgroups,u6e=Ue.setgroups,c6e=Ue.setegid,d6e=Ue.seteuid,p6e=Ue.setgid,f6e=Ue.setuid,m6e=Ue.env,h6e=Ue.title,g6e=Ue.argv,y6e=Ue.execArgv,v6e=Ue.pid,_6e=Ue.ppid,b6e=Ue.execPath,x6e=Ue.debugPort,T6e=Ue.argv0,w6e=Ue._preload_modules,S6e=Ue.report,E6e=Ue.mainModule;var dt=t=>`file://${ph()}/public/${t}`,Rr={CivitaiLogo_png:dt("/CivitaiLogo.png"),ComfyUILogo_png:dt("/ComfyUILogo.png"),CushyLogo_512_png:dt("/CushyLogo-512.png"),CushyLogo_ico:dt("/CushyLogo.ico"),CushyLogo_png:dt("/CushyLogo.png"),GithubLogo_png:dt("/GithubLogo.png"),GithubLogo2_png:dt("/GithubLogo2.png"),illustrations_image_home_transp_webp:dt("/illustrations/image_home_transp.webp"),illustrations_image_home_jpg:dt("/illustrations/image_home.jpg"),logos_squoosh_png:dt("/logos/squoosh.png"),minipaint_images_favicon_png:dt("/minipaint/images/favicon.png"),minipaint_images_favicon_svg:dt("/minipaint/images/favicon.svg"),minipaint_images_icons_animation_svg:dt("/minipaint/images/icons/animation.svg"),minipaint_images_icons_arrow_down_svg:dt("/minipaint/images/icons/arrow-down.svg"),minipaint_images_icons_blur_svg:dt("/minipaint/images/icons/blur.svg"),minipaint_images_icons_bold_svg:dt("/minipaint/images/icons/bold.svg"),minipaint_images_icons_brush_svg:dt("/minipaint/images/icons/brush.svg"),minipaint_images_icons_bulge_pinch_svg:dt("/minipaint/images/icons/bulge_pinch.svg"),minipaint_images_icons_clone_svg:dt("/minipaint/images/icons/clone.svg"),minipaint_images_icons_crop_svg:dt("/minipaint/images/icons/crop.svg"),minipaint_images_icons_delete_svg:dt("/minipaint/images/icons/delete.svg"),minipaint_images_icons_desaturate_svg:dt("/minipaint/images/icons/desaturate.svg"),minipaint_images_icons_erase_svg:dt("/minipaint/images/icons/erase.svg"),minipaint_images_icons_external_png:dt("/minipaint/images/icons/external.png"),minipaint_images_icons_fill_svg:dt("/minipaint/images/icons/fill.svg"),minipaint_images_icons_gradient_png:dt("/minipaint/images/icons/gradient.png"),minipaint_images_icons_grid_png:dt("/minipaint/images/icons/grid.png"),minipaint_images_icons_italic_svg:dt("/minipaint/images/icons/italic.svg"),minipaint_images_icons_magic_erase_svg:dt("/minipaint/images/icons/magic_erase.svg"),minipaint_images_icons_media_svg:dt("/minipaint/images/icons/media.svg"),minipaint_images_icons_menu_svg:dt("/minipaint/images/icons/menu.svg"),minipaint_images_icons_pencil_svg:dt("/minipaint/images/icons/pencil.svg"),minipaint_images_icons_pick_color_svg:dt("/minipaint/images/icons/pick_color.svg"),minipaint_images_icons_refresh_svg:dt("/minipaint/images/icons/refresh.svg"),minipaint_images_icons_select_svg:dt("/minipaint/images/icons/select.svg"),minipaint_images_icons_selection_svg:dt("/minipaint/images/icons/selection.svg"),minipaint_images_icons_shape_svg:dt("/minipaint/images/icons/shape.svg"),minipaint_images_icons_sharpen_svg:dt("/minipaint/images/icons/sharpen.svg"),minipaint_images_icons_strikethrough_svg:dt("/minipaint/images/icons/strikethrough.svg"),minipaint_images_icons_text_svg:dt("/minipaint/images/icons/text.svg"),minipaint_images_icons_underline_svg:dt("/minipaint/images/icons/underline.svg"),minipaint_images_icons_undo_svg:dt("/minipaint/images/icons/undo.svg"),minipaint_images_icons_view_svg:dt("/minipaint/images/icons/view.svg"),minipaint_images_logo_colors_png:dt("/minipaint/images/logo-colors.png"),minipaint_images_logo_svg:dt("/minipaint/images/logo.svg"),minipaint_images_manifest_144x144_png:dt("/minipaint/images/manifest/144x144.png"),minipaint_images_manifest_168x168_png:dt("/minipaint/images/manifest/168x168.png"),minipaint_images_manifest_192x192_png:dt("/minipaint/images/manifest/192x192.png"),minipaint_images_manifest_48x48_png:dt("/minipaint/images/manifest/48x48.png"),minipaint_images_manifest_72x72_png:dt("/minipaint/images/manifest/72x72.png"),minipaint_images_manifest_96x96_png:dt("/minipaint/images/manifest/96x96.png"),sparkles_webp:dt("/sparkles.webp"),typescript_512_png:dt("/typescript-512.png")};var fh=ie(ve(),1),sB=ie(Pl(),1);var jA=class{constructor(e=200,r=200,n=!1){this.showDelay=e;this.hideDelay=r;this.disableHover=n;this.inAnchor=!1;this.inTooltip=!1;this.leaveAnchorTimeoutId=null;this.leaveTooltipTimeoutId=null;this.enterAnchorTimeoutId=null;this.enterTooltipTimeoutId=null;this._lock=!1;this.toggleLock=()=>{this._lock=!this._lock};this.leaveAnchorNow=()=>{this.enterAnchorTimeoutId&&(clearTimeout(this.enterAnchorTimeoutId),this.enterAnchorTimeoutId=null),this.inAnchor=!1};this.enterAnchorNow=()=>{this.leaveTooltipTimeoutId&&(clearTimeout(this.leaveTooltipTimeoutId),this.leaveTooltipTimeoutId=null),this.inAnchor=!0};this.enterAnchor=()=>{this.disableHover||(this.leaveAnchorTimeoutId&&(clearTimeout(this.leaveAnchorTimeoutId),this.leaveAnchorTimeoutId=null),this.enterAnchorTimeoutId&&clearTimeout(this.enterAnchorTimeoutId),this.enterAnchorTimeoutId=setTimeout(()=>{_r(()=>{this.inAnchor=!0})},this.showDelay))};this.leaveAnchor=()=>{this.enterAnchorTimeoutId&&(clearTimeout(this.enterAnchorTimeoutId),this.enterAnchorTimeoutId=null),this.leaveAnchorTimeoutId&&clearTimeout(this.leaveAnchorTimeoutId),this.leaveAnchorTimeoutId=setTimeout(()=>{_r(()=>{this.inAnchor=!1})},this.hideDelay)};this.enterTooltip=()=>{this.disableHover||(this.leaveTooltipTimeoutId&&(clearTimeout(this.leaveTooltipTimeoutId),this.leaveTooltipTimeoutId=null),this.enterTooltipTimeoutId&&clearTimeout(this.enterTooltipTimeoutId),this.enterTooltipTimeoutId=setTimeout(()=>this.inTooltip=!0,this.showDelay))};this.leaveTooltip=()=>{this.enterTooltipTimeoutId&&(clearTimeout(this.enterTooltipTimeoutId),this.enterTooltipTimeoutId=null),this.leaveTooltipTimeoutId&&clearTimeout(this.leaveTooltipTimeoutId),this.leaveTooltipTimeoutId=setTimeout(()=>this.inTooltip=!1,this.hideDelay)};this.tooltipPosition={top:0,left:0};this.setPosition=e=>{this.tooltipPosition={top:e.bottom+window.scrollY,left:e.left+window.scrollX}};Ce(this)}get visible(){return this._lock?!0:this.inAnchor||this.inTooltip}get defaultCursor(){return this.disableHover?"cursor-pointer":"cursor-help"}},hr=F(function(e){let r=e.showDelay??300,n=e.hideDelay??300,i=e.disableHover??!1,o=(0,fh.useMemo)(()=>new jA(r,n,i),[r,n,i]),s=(0,fh.useRef)(null);(0,fh.useEffect)(()=>{if(o.visible&&s.current){let l=s.current.getBoundingClientRect();o.setPosition(l)}},[o.visible]);let a=o.visible?(0,sB.createPortal)(h("div",{tw:["_RevealUI card card-bordered bg-base-100 shadow-xl pointer-events-auto",...e.tooltipWrapperClassName??[]],onClick:l=>{l.stopPropagation(),l.preventDefault()},onMouseEnter:o.enterTooltip,onMouseLeave:o.leaveTooltip,onContextMenu:o.enterAnchorNow,style:{position:"absolute",zIndex:99999999,top:`${o.tooltipPosition.top}px`,left:`${o.tooltipPosition.left}px`},children:e.children[1]}),document.getElementById("tooltip-root")):null;return P("span",{tw:[e.cursor??o.defaultCursor],className:e.className,ref:s,onContextMenu:o.toggleLock,onMouseEnter:o.enterAnchor,onMouseLeave:o.leaveAnchor,onClick:l=>{l.stopPropagation(),l.preventDefault(),o.visible?o.leaveAnchorNow():o.enterAnchorNow()},children:[e.children[0],a]})});var gr=t=>t;var aB=t=>JSON.parse(JSON.stringify(t));var lB=t=>h("div",{...t}),uB=t=>h("label",{...t}),zA=t=>h("input",{tw:"input input-bordered input-sm",...t}),Os=t=>h("div",{tw:[t.className,"join virtualBorder"],children:t.children}),cB=F(function(e){return h("div",{tw:"flex items-center px-2 join-item",...e})}),gt=t=>{let{icon:e,active:r,size:n,loading:i,disabled:o,appearance:s,...a}=t;return P("button",{...a,tw:["btn",t.loading||t.disabled?"btn-disabled":null,t.active?"btn-active":null,s?s==="primary"?"btn-primary":s==="ghost"?"btn-outline":s==="link"?"btn-link":s==="default"||s==="subtle"?null:gr(s):null,t.size?t.size==="sm"?"btn-sm":t.size==="xs"?"btn-xs":t.size==="lg"?"btn-lg":t.size==="md"?null:gr(t.size):null,...t?.tw??[]],children:[t.icon,t.children]})},Io=t=>{let{tw:e,className:r,children:n,...i}=t;return h("input",{tw:[e,r,"input input-bordered input-sm"],...i,children:n})},aT=F(function(e){let r=e._size?`input-${e._size}`:null;return h("input",{type:"number",tw:["input input-sm",r],...e})}),ko=F(function(e){return h("input",{type:"range",...e,tw:["range range-sm range-secondary"]})}),W6e=F(function(e){return h("input",{type:"radio",...e})}),vi=F(function(e){return h("input",{type:"checkbox",...e,tw:["toggle toggle-primary"]})});var dB=t=>h("select",{multiple:!0,...t});var pB=t=>h("div",{tw:"rating rating-md rating-sm",children:new Array(t.max??1).fill(0).map((e,r)=>h("input",{name:t.name,checked:t.value===r,onChange:()=>t.onChange?.(r),type:"radio",tw:["mask mask-star fade-in-40",t.disabled?"bg-base-300":"bg-orange-400"]},r))}),Rs=t=>P(hr,{children:[t.children,t.speaker]});var mh=t=>h("span",{...t}),Pu=t=>h("span",{...t});var rs=t=>{let{header:e,children:r,...n}=t;return P("div",{tw:"p-2 border border-opacity-25 bg-base-200 bg-opacity-50 border-base-content input-bordered rounded-btn",...n,children:[e,t.children]})},$A=F(function(e){let r=e.status==="success"?"progress-success":"progress-info";return h("progress",{tw:[r,"m-0 progress",e.className],value:e.percent,max:100})}),Gle=t=>t==="error"?h("span",{className:"material-symbols-outlined",children:"error"}):t==="info"?h("span",{className:"material-symbols-outlined",children:"info"}):t==="warning"?h("span",{className:"material-symbols-outlined",children:"warning"}):(gr(t),null),fn=F(function(e){let{showIcon:r,...n}=e;return P("div",{tw:[e.type==="error"?"bg-error text-error-content":"bg-base text-primary-content"],...n,children:[e.header,P("div",{className:"flex flex-wrap items-baseline",children:[Gle(e.type),h("div",{children:e.children})]})]})});var Lu=F(t=>h("span",{className:t.className,tw:[`loading loading-spinner loading-${t.size??"sm"}`]}));var fB=F(function(e){let r=e.udpater;return h(gt,{loading:r.currentAction!=null,appearance:"primary",size:"xs",icon:h("span",{className:"text-gray-700 material-symbols-outlined",children:"cloud_download"}),onClick:n=>{n.stopPropagation(),n.preventDefault(),r.install()},children:"Install"})});var mB=F(function(e){let r=e.updater;return P("button",{tw:"btn btn-sm btn-error",onClick:n=>{n.stopPropagation(),n.preventDefault(),r.uninstall()},children:[h("span",{className:"material-symbols-outlined",children:"highlight_off"})," REMOVE"]})});var hB=F(function(e){let n=e.updater.commandErrors;if(n.size===0)return null;let i=[...n.entries()];return h("div",{children:i.map(([o,s])=>h("div",{tw:"w-96 overflow-auto",children:P(fn,{type:"error",showIcon:!0,children:[P("div",{children:["command",h("pre",{tw:"whitespace-pre-wrap",children:o})]}),P("div",{children:["error",h("pre",{tw:"whitespace-pre-wrap",children:JSON.stringify(s)})]})]})},o))})});function Ja(t,e=navigator.language){let r=typeof t=="number"?t:t.getTime(),n=Math.round((r-Date.now())/1e3),i=[60,3600,86400,86400*7,86400*30,86400*365,1/0],o=["second","minute","hour","day","week","month","year"],s=i.findIndex(c=>c>Math.abs(n)),a=s?i[s-1]:1;return new Intl.RelativeTimeFormat(e,{numeric:"auto"}).format(Math.floor(n/a),o[s])}var gB=F(function(e){let r=e.updater,n=P("div",{className:e.className,tw:["btn-narrow btn btn-sm btn-ghost italic",r.hasUpdateAvailable&&"btn-warning"],children:[e.children,h("div",{tw:"text-xs italic opacity-50",children:h(Kle,{updater:r})})]});return r.hasUpdateAvailable&&(n=P("div",{tw:"flex items-center shrink-0",className:e.className,children:[h("span",{className:"indicator-item badge badge-secondary",children:"new"}),n]})),P(hr,{disableHover:!0,children:[n,h(Yle,{updater:r})]})}),Kle=F(function(e){let r=e.updater,n=r.status;if(n==="Unknown")return h(Lu,{});if(n==="DoesNotExist")return h(fB,{udpater:r});if(n==="NotADirectory")return h("div",{children:"\u2753 unexpected file"});if(n==="FolderWithoutGit")return null;if(n==="FolderWithGitButWithProblems")return h("div",{children:"\u2753"});if(n==="FolderWithGit")return r.currentVersion;gr(n)}),Yle=F(function(e){let r=e.updater,n=r.hasErrors;return P("div",{tw:"menu flex flex-col gap-2",children:[n&&h(fn,{type:"error",children:"error"}),h("div",{children:r.hasUpdateAvailable?h(gt,{className:"animate-pulse",color:"red",size:"sm",appearance:"primary",icon:h("span",{className:"material-symbols-outlined",children:"update"}),onClick:async i=>{i.stopPropagation(),i.preventDefault(),await r.updateToLastCommitAvailable(),window.location.reload()},children:"update"}):null}),h(hB,{updater:r}),h("div",{tw:"virtualBorder",children:r.lastFetchAt?P("div",{children:[P("div",{children:[h("span",{className:"material-symbols-outlined",children:"history"})," prev update :"," ",Ja(r.lastFetchAt)]}),P("div",{children:[h("span",{className:"material-symbols-outlined",children:"schedule"})," next update :"," ",Ja(r.nextFetchAt)]})]}):h(St.Fragment,{children:"no update done"})}),P("div",{tw:"flex gap-2",children:[h(gt,{tw:"btn-info",size:"sm",onClick:()=>r.checkForUpdatesNow(),icon:h("span",{className:"material-symbols-outlined",children:"refresh"}),children:"REFRESH"}),r.config.canBeUninstalled?h(mB,{updater:r}):null]}),h("table",{tw:"table table-zebra-zebra table-xs",children:h("tbody",{children:r.lastLogs.logs.map((i,o)=>P("tr",{children:[h("td",{children:Ja(i.date)}),h("td",{tw:"max-w-sm",children:i.msg})]},o))})}),P("div",{tw:"virtualBorder flex flex-wrap items-center",children:[h("span",{className:"material-symbols-outlined",children:"folder"})," ",h("div",{children:r.relPath||"root"})]}),P(Os,{tw:"flex gap-2",children:[P("div",{className:"virtualBorder",children:["#",e.updater.status]}),P("div",{className:"virtualBorder",children:["action: ",e.updater.currentAction??"\xF8"]})]})]})});var yB=F(function(e){return P(gt,{tw:"self-start flex-shrink-0",appearance:"subtle",size:"sm",onClick:r=>{r.preventDefault(),r.stopPropagation(),window.require("electron").shell.openExternal("https://github.com/rvion/CushyStudio")},children:["rvion/CushyStudio",h("img",{src:Rr.GithubLogo2_png,alt:"Github Logo",style:{width:"1.4rem",height:"1.4rem"}})]})});var lT=F(function(e){let r=e.host,n=r.schema?.size??0,i=e.showSize?P("div",{tw:"text-xs text-opacity-50",children:["(",n," nodes)"]}):null;return P(hr,{showDelay:0,children:[P("div",{tw:"flex",children:[r.schema==null?"\u{1F534}":null,r.schemaUpdateResult?r.schemaUpdateResult.type==="error"?h("div",{className:"btn btn-sm cursor-help",children:h("span",{className:"text-error",children:"history"})}):e.showIcon?h("div",{className:"btn btn-sm cursor-help",children:e.showIcon&&h("span",{className:"material-symbols-outlined text-green-400 ",children:"check_circle"})}):null:null,n===0?P("div",{tw:"btn btn-sm bg-error text-error-content",children:[h("span",{className:"material-symbols-outlined",children:"error"}),r.isUpdatingSchema&&h("div",{tw:"loading loading-spinner loading-xs"}),h("div",{children:"empty schema"})]}):P("div",{className:"btn btn-sm cursor-help",children:[e.showIcon&&h("span",{className:"material-symbols-outlined text-green-400 ",children:"check_circle"}),r.isUpdatingSchema&&h("div",{tw:"loading loading-spinner loading-xs"}),h("span",{className:"text-success",children:"Schema"}),i]})]}),P("div",{tw:"menu",children:[P("div",{tw:"text-xs text-opacity-50",children:["(",n," nodes)"]}),e.host.ws?.isOpen?null:P(fn,{showIcon:!0,type:"warning",children:["Is your ComfyUI server running? You config file says it should be accessible at",h("div",{children:r.getServerHostHTTP()}),h("div",{children:r.getWSUrl()})]}),h("pre",{children:r.schemaRetrievalLogs.join(`
`)})]})]})});var uT=F(function(e){let r=pe(),n=e.host.ws;return e.host.data.isVirtual?P(hr,{showDelay:0,children:[h("div",{tw:"btn btn-sm text-opacity-25",children:"WS"}),h("div",{tw:"p-2",children:"Not Applicable"})]}):P(hr,{showDelay:0,children:[n==null?P("div",{tw:"btn btn-sm opacity-50",children:[e.showIcon&&h("span",{className:"material-symbols-outlined ",children:"cloud_off"}),h("span",{className:"",children:"WS"})]}):n?.isOpen?P("div",{tw:"btn btn-sm",children:[e.showIcon&&h("span",{className:"material-symbols-outlined text-green-400 ",children:"check_circle"}),h("span",{className:"text-success",children:"WS"})]}):P("div",{tw:"btn btn-sm btn-error flex-nowrap",children:[h("div",{tw:"loading loading-spinner loading-xs"}),"WS"]}),P("div",{tw:"menu",children:[n?.isOpen?null:P(fn,{showIcon:!0,type:"warning",children:[h("span",{children:"Is your ComfyUI server running? "}),h("span",{children:"You config file says it should be accessible at"}),h("div",{children:r.getWSUrl()})]}),n?.debugMessages.map((i,o)=>i.type==="error"?h("div",{className:"text-red-400",children:i.message},o):h("div",{children:i.message},o))]})]})});var Yn=t=>P(hr,{enableRightClick:t.enableRightClick,disableHover:!0,showDelay:300,hideDelay:300,className:"dropdown",tw:[t.className],children:[P("label",{tabIndex:0,tw:[`flex-nowrap btn btn-ghost btn-${t.size??"sm"} px-2`],children:[h("span",{tw:"hidden lg:inline-block",children:t.startIcon}),t.title]}),h("ul",{tabIndex:0,tw:"shadow menu dropdown-content z-[1] bg-base-100 rounded-box",children:t.children})]}),Dt=F(function(e){let{size:r,label:n,disabled:i,icon:o,children:s,active:a,onClick:l,...c}=e;return h("li",{onClick:p=>{p.preventDefault(),p.stopPropagation(),e.onClick?.(p)},tw:["_MenuItem",a&&"bg-accent text-accent-content",i&&"text-neutral-content"],...c,children:P("div",{className:"flex items-center gap-2",children:[o??null,n,s]})})});function de(){return de=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},de.apply(this,arguments)}function It(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var YB=ie(ve());var Mu=ie(ve());var yd=ie(ve()),HA=ie(Cr()),vB={},_B=(0,yd.createContext)(vB),Xle=(t,e)=>de({},t,e),bB=()=>(0,yd.useContext)(_B),qA=(0,yd.createContext)(()=>{});qA.displayName="JVR.DispatchShowTools";function xB(){return(0,yd.useReducer)(Xle,vB)}function cT(){return(0,yd.useContext)(qA)}var GA=t=>{var{initial:e,dispatch:r,children:n}=t;return(0,HA.jsx)(_B.Provider,{value:e,children:(0,HA.jsx)(qA.Provider,{value:r,children:n})})};GA.displayName="JVR.ShowTools";var vd=ie(ve()),VA=ie(Cr()),TB={},wB=(0,vd.createContext)(TB),Jle=(t,e)=>de({},t,e),_d=()=>(0,vd.useContext)(wB),KA=(0,vd.createContext)(()=>{});KA.displayName="JVR.DispatchExpands";function SB(){return(0,vd.useReducer)(Jle,TB)}function EB(){return(0,vd.useContext)(KA)}var YA=t=>{var{initial:e,dispatch:r,children:n}=t;return(0,VA.jsx)(wB.Provider,{value:e,children:(0,VA.jsx)(KA.Provider,{value:r,children:n})})};YA.displayName="JVR.Expands";var bd=ie(ve()),XA=ie(Cr()),CB={Str:{as:"span","data-type":"string",style:{color:"var(--w-rjv-type-string-color, #cb4b16)"},className:"w-rjv-type",children:"string"},Url:{as:"a",style:{color:"var(--w-rjv-type-url-color, #0969da)"},"data-type":"url",className:"w-rjv-type",children:"url"},Undefined:{style:{color:"var(--w-rjv-type-undefined-color, #586e75)"},as:"span","data-type":"undefined",className:"w-rjv-type",children:"undefined"},Null:{style:{color:"var(--w-rjv-type-null-color, #d33682)"},as:"span","data-type":"null",className:"w-rjv-type",children:"null"},Map:{style:{color:"var(--w-rjv-type-map-color, #268bd2)",marginRight:3},as:"span","data-type":"map",className:"w-rjv-type",children:"Map"},Nan:{style:{color:"var(--w-rjv-type-nan-color, #859900)"},as:"span","data-type":"nan",className:"w-rjv-type",children:"NaN"},Bigint:{style:{color:"var(--w-rjv-type-bigint-color, #268bd2)"},as:"span","data-type":"bigint",className:"w-rjv-type",children:"bigint"},Int:{style:{color:"var(--w-rjv-type-int-color, #268bd2)"},as:"span","data-type":"int",className:"w-rjv-type",children:"int"},Set:{style:{color:"var(--w-rjv-type-set-color, #268bd2)",marginRight:3},as:"span","data-type":"set",className:"w-rjv-type",children:"Set"},Float:{style:{color:"var(--w-rjv-type-float-color, #859900)"},as:"span","data-type":"float",className:"w-rjv-type",children:"float"},True:{style:{color:"var(--w-rjv-type-boolean-color, #2aa198)"},as:"span","data-type":"bool",className:"w-rjv-type",children:"bool"},False:{style:{color:"var(--w-rjv-type-boolean-color, #2aa198)"},as:"span","data-type":"bool",className:"w-rjv-type",children:"bool"},Date:{style:{color:"var(--w-rjv-type-date-color, #268bd2)"},as:"span","data-type":"date",className:"w-rjv-type",children:"date"}},DB=(0,bd.createContext)(CB),Qle=(t,e)=>de({},t,e),zt=()=>(0,bd.useContext)(DB),JA=(0,bd.createContext)(()=>{});JA.displayName="JVR.DispatchTypes";function IB(){return(0,bd.useReducer)(Qle,CB)}function kB(){return(0,bd.useContext)(JA)}function QA(t){var{initial:e,dispatch:r,children:n}=t;return(0,XA.jsx)(DB.Provider,{value:e,children:(0,XA.jsx)(JA.Provider,{value:r,children:n})})}QA.displayName="JVR.Types";var xd=ie(ve());var $Fe=ie(ve()),ZA=ie(Cr()),Zle=["style"];function eO(t){var{style:e}=t,r=It(t,Zle),n=de({cursor:"pointer",height:"1em",width:"1em",userSelect:"none",display:"flex"},e);return(0,ZA.jsx)("svg",de({viewBox:"0 0 24 24",fill:"var(--w-rjv-arrow-color, currentColor)",style:n},r,{children:(0,ZA.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})}))}eO.displayName="JVR.TriangleArrow";var dT=ie(Cr()),NB={Arrow:{as:"span",className:"w-rjv-arrow",style:{transform:"rotate(0deg)",transition:"all 0.3s"},children:(0,dT.jsx)(eO,{})},Colon:{as:"span",style:{color:"var(--w-rjv-colon-color, var(--w-rjv-color))",marginLeft:0,marginRight:2},className:"w-rjv-colon",children:":"},Quote:{as:"span",style:{color:"var(--w-rjv-quotes-color, #236a7c)"},className:"w-rjv-quotes",children:'"'},ValueQuote:{as:"span",style:{color:"var(--w-rjv-quotes-string-color, #cb4b16)"},className:"w-rjv-quotes",children:'"'},BracketsLeft:{as:"span",style:{color:"var(--w-rjv-brackets-color, #236a7c)"},className:"w-rjv-brackets-start",children:"["},BracketsRight:{as:"span",style:{color:"var(--w-rjv-brackets-color, #236a7c)"},className:"w-rjv-brackets-end",children:"]"},BraceLeft:{as:"span",style:{color:"var(--w-rjv-curlybraces-color, #236a7c)"},className:"w-rjv-curlybraces-start",children:"{"},BraceRight:{as:"span",style:{color:"var(--w-rjv-curlybraces-color, #236a7c)"},className:"w-rjv-curlybraces-end",children:"}"}},AB=(0,xd.createContext)(NB),eue=(t,e)=>de({},t,e),mn=()=>(0,xd.useContext)(AB),tO=(0,xd.createContext)(()=>{});tO.displayName="JVR.DispatchSymbols";function OB(){return(0,xd.useReducer)(eue,NB)}function RB(){return(0,xd.useContext)(tO)}var rO=t=>{var{initial:e,dispatch:r,children:n}=t;return(0,dT.jsx)(AB.Provider,{value:e,children:(0,dT.jsx)(tO.Provider,{value:r,children:n})})};rO.displayName="JVR.Symbols";var Td=ie(ve()),nO=ie(Cr()),PB={Copied:{className:"w-rjv-copied",style:{height:"1em",width:"1em",cursor:"pointer",verticalAlign:"middle",marginLeft:5}},CountInfo:{as:"span",className:"w-rjv-object-size",style:{color:"var(--w-rjv-info-color, #0000004d)",paddingLeft:8,fontStyle:"italic"}},CountInfoExtra:{as:"span",className:"w-rjv-object-extra",style:{paddingLeft:8}},Ellipsis:{as:"span",style:{cursor:"pointer",color:"var(--w-rjv-ellipsis-color, #cb4b16)",userSelect:"none"},className:"w-rjv-ellipsis",children:"..."},KeyName:{as:"span",className:"w-rjv-object-key"}},LB=(0,Td.createContext)(PB),tue=(t,e)=>de({},t,e),oo=()=>(0,Td.useContext)(LB),iO=(0,Td.createContext)(()=>{});iO.displayName="JVR.DispatchSection";function MB(){return(0,Td.useReducer)(tue,PB)}function FB(){return(0,Td.useContext)(iO)}var oO=t=>{var{initial:e,dispatch:r,children:n}=t;return(0,nO.jsx)(LB.Provider,{value:e,children:(0,nO.jsx)(iO.Provider,{value:r,children:n})})};oO.displayName="JVR.Section";var wd=ie(Cr()),UB={objectSortKeys:!1,indentWidth:15},sO=(0,Mu.createContext)(UB);sO.displayName="JVR.Context";var BB=(0,Mu.createContext)(()=>{});BB.displayName="JVR.DispatchContext";function rue(t,e){return de({},t,e)}var Ps=()=>(0,Mu.useContext)(sO);var aO=t=>{var{children:e,initialState:r,initialTypes:n}=t,[i,o]=(0,Mu.useReducer)(rue,Object.assign({},UB,r)),[s,a]=xB(),[l,c]=SB(),[p,f]=IB(),[m,g]=OB(),[v,_]=MB();return(0,Mu.useEffect)(()=>o(de({},r)),[r]),(0,wd.jsx)(sO.Provider,{value:i,children:(0,wd.jsx)(BB.Provider,{value:o,children:(0,wd.jsx)(GA,{initial:s,dispatch:a,children:(0,wd.jsx)(YA,{initial:l,dispatch:c,children:(0,wd.jsx)(QA,{initial:de({},p,n),dispatch:f,children:(0,wd.jsx)(rO,{initial:m,dispatch:g,children:(0,wd.jsx)(oO,{initial:v,dispatch:_,children:e})})})})})})})};aO.displayName="JVR.Provider";var yT=ie(ve());function lO(t){if(t==null)throw new TypeError("Cannot destructure "+t)}var Fu=ie(Cr()),nue=["isNumber"],iue=["as","render"],oue=["as","render"],sue=["as","render"],aue=["as","style","render"],lue=["as","render"],uue=["as","render"],cue=["as","render"],due=["as","render"],pT=t=>{var{Quote:e={}}=mn(),{isNumber:r}=t,n=It(t,nue);if(r)return null;var{as:i,render:o}=e,s=It(e,iue),a=i||"span",l=de({},n,s),c=o&&typeof o=="function"&&o(l);return c||(0,Fu.jsx)(a,de({},l))};pT.displayName="JVR.Quote";var hh=t=>{var{ValueQuote:e={}}=mn(),r=de({},(lO(t),t)),{as:n,render:i}=e,o=It(e,oue),s=n||"span",a=de({},r,o),l=i&&typeof i=="function"&&i(a);return l||(0,Fu.jsx)(s,de({},a))};hh.displayName="JVR.ValueQuote";var uO=()=>{var{Colon:t={}}=mn(),{as:e,render:r}=t,n=It(t,sue),i=e||"span",o=r&&typeof r=="function"&&r(n);return o||(0,Fu.jsx)(i,de({},n))};uO.displayName="JVR.Colon";var cO=t=>{var{Arrow:e={}}=mn(),r=_d(),{expandKey:n}=t,i=!!r[n],{as:o,style:s,render:a}=e,l=It(e,aue),c=o||"span",p=a&&typeof a=="function",f=p&&a(de({},l,{"data-expanded":i,style:de({},s,t.style)}));return f||(0,Fu.jsx)(c,de({},l,{style:de({},s,t.style)}))};cO.displayName="JVR.Arrow";var dO=t=>{var{isBrackets:e}=t,{BracketsLeft:r={},BraceLeft:n={}}=mn();if(e){var{as:i,render:o}=r,s=It(r,lue),a=i||"span",l=o&&typeof o=="function"&&o(s);return l||(0,Fu.jsx)(a,de({},s))}var{as:c,render:p}=n,f=It(n,uue),m=c||"span",g=p&&typeof p=="function"&&p(f);return g||(0,Fu.jsx)(m,de({},f))};dO.displayName="JVR.BracketsOpen";var Fv=t=>{var{isBrackets:e,isVisiable:r}=t;if(!r)return null;var{BracketsRight:n={},BraceRight:i={}}=mn();if(e){var{as:o,render:s}=n,a=It(n,cue),l=o||"span",c=s&&typeof s=="function"&&s(a);return c||(0,Fu.jsx)(l,de({},a))}var{as:p,render:f}=i,m=It(i,due),g=p||"span",v=f&&typeof f=="function"&&f(m);return v||(0,Fu.jsx)(g,de({},m))};Fv.displayName="JVR.BracketsClose";var pO=ie(Cr()),fO=t=>{var e,{value:r,expandKey:n,level:i}=t,o=_d(),s=Array.isArray(r),{collapsed:a}=Ps(),l=r instanceof Set,c=(e=o[n])!=null?e:typeof a=="boolean"?a:typeof a=="number"?i>a:!1,p=Object.keys(r).length;if(c||p===0)return null;var f={paddingLeft:4};return(0,pO.jsx)("div",{style:f,children:(0,pO.jsx)(Fv,{isBrackets:s||l,isVisiable:!0})})};fO.displayName="JVR.NestedClose";var gh=ie(ve());var Mi=ie(ve());var WB=ie(ve());var Uv=ie(Cr()),pue=["keyName","value","expandKey"],fue=["as","render"],No=t=>{var{keyName:e,value:r,expandKey:n}=t,i=It(t,pue),{onCopied:o,enableClipboard:s}=Ps(),a=bB(),l=a[n],[c,p]=(0,WB.useState)(!1),{Copied:f={}}=oo();if(s===!1||!l)return null;var m=E=>{E.stopPropagation();var I="";typeof r=="number"&&r===1/0?I="Infinity":typeof r=="number"&&isNaN(r)?I="NaN":typeof r=="bigint"?I=r+"n":r instanceof Date?I=r.toLocaleString():I=JSON.stringify(r,null,2),o&&o(I,r),p(!0),navigator.clipboard.writeText(I).then(()=>{var N=setTimeout(()=>{p(!1),clearTimeout(N)},3e3)}).catch(N=>{})},g={fill:c?"var(--w-rjv-copied-success-color, #28a745)":"var(--w-rjv-copied-color, currentColor)",onClick:m},{render:v}=f,_=It(f,fue),S=de({},_,i,g),T=v&&typeof v=="function",w=T&&v(de({},S,{"data-copied":c}),{value:r,keyName:e});return w||(c?(0,Uv.jsx)("svg",de({viewBox:"0 0 32 36"},S,{children:(0,Uv.jsx)("path",{d:"M27.5,33 L2.5,33 L2.5,12.5 L27.5,12.5 L27.5,15.2249049 C29.1403264,13.8627542 29.9736597,13.1778155 30,13.1700887 C30,11.9705278 30,10.0804982 30,7.5 C30,6.1 28.9,5 27.5,5 L20,5 C20,2.2 17.8,0 15,0 C12.2,0 10,2.2 10,5 L2.5,5 C1.1,5 0,6.1 0,7.5 L0,33 C0,34.4 1.1,36 2.5,36 L27.5,36 C28.9,36 30,34.4 30,33 L30,26.1114493 L27.5,28.4926435 L27.5,33 Z M7.5,7.5 L10,7.5 C10,7.5 12.5,6.4 12.5,5 C12.5,3.6 13.6,2.5 15,2.5 C16.4,2.5 17.5,3.6 17.5,5 C17.5,6.4 18.8,7.5 20,7.5 L22.5,7.5 C22.5,7.5 25,8.6 25,10 L5,10 C5,8.5 6.1,7.5 7.5,7.5 Z M5,27.5 L10,27.5 L10,25 L5,25 L5,27.5 Z M28.5589286,16 L32,19.6 L21.0160714,30.5382252 L13.5303571,24.2571429 L17.1303571,20.6571429 L21.0160714,24.5428571 L28.5589286,16 Z M17.5,15 L5,15 L5,17.5 L17.5,17.5 L17.5,15 Z M10,20 L5,20 L5,22.5 L10,22.5 L10,20 Z"})})):(0,Uv.jsx)("svg",de({viewBox:"0 0 32 36"},S,{children:(0,Uv.jsx)("path",{d:"M27.5,33 L2.5,33 L2.5,12.5 L27.5,12.5 L27.5,20 L30,20 L30,7.5 C30,6.1 28.9,5 27.5,5 L20,5 C20,2.2 17.8,0 15,0 C12.2,0 10,2.2 10,5 L2.5,5 C1.1,5 0,6.1 0,7.5 L0,33 C0,34.4 1.1,36 2.5,36 L27.5,36 C28.9,36 30,34.4 30,33 L30,29 L27.5,29 L27.5,33 Z M7.5,7.5 L10,7.5 C10,7.5 12.5,6.4 12.5,5 C12.5,3.6 13.6,2.5 15,2.5 C16.4,2.5 17.5,3.6 17.5,5 C17.5,6.4 18.8,7.5 20,7.5 L22.5,7.5 C22.5,7.5 25,8.6 25,10 L5,10 C5,8.5 6.1,7.5 7.5,7.5 Z M5,27.5 L10,27.5 L10,25 L5,25 L5,27.5 Z M22.5,21.5 L22.5,16.5 L12.5,24 L22.5,31.5 L22.5,26.5 L32,26.5 L32,21.5 L22.5,21.5 Z M17.5,15 L5,15 L5,17.5 L17.5,17.5 L17.5,15 Z M10,20 L5,20 L5,22.5 L10,22.5 L10,20 Z"})})))};No.displayName="JVR.Copied";var Jt=ie(Cr()),ns=ie(Cr()),mue=["as","render"],hue=["as","render"],gue=["as","render"],yue=["as","render"],vue=["as","render"],_ue=["as","render"],bue=["as","render"],xue=["as","render"],Tue=["as","render"],wue=["as","render"],Sue=["as","render"],Eue=["as","render"],Cue=["as","render"],mO=t=>{var{value:e,keyName:r}=t,{Set:n={},displayDataTypes:i}=zt(),o=e instanceof Set;if(!o||!i)return null;var{as:s,render:a}=n,l=It(n,mue),c=a&&typeof a=="function",p=c&&a(l,{type:"type",value:e,keyName:r});if(p)return p;var f=s||"span";return(0,Jt.jsx)(f,de({},l))};mO.displayName="JVR.SetComp";var hO=t=>{var{value:e,keyName:r}=t,{Map:n={},displayDataTypes:i}=zt(),o=e instanceof Map;if(!o||!i)return null;var{as:s,render:a}=n,l=It(n,hue),c=a&&typeof a=="function",p=c&&a(l,{type:"type",value:e,keyName:r});if(p)return p;var f=s||"span";return(0,Jt.jsx)(f,de({},l))};hO.displayName="JVR.MapComp";var Qa={opacity:.75,paddingRight:4},gO=t=>{var{children:e="",expandKey:r,keyName:n}=t,{Str:i={},displayDataTypes:o}=zt(),{shortenTextAfterLength:s=30}=Ps(),{as:a,render:l}=i,c=It(i,gue),p=e,[f,m]=(0,Mi.useState)(s&&p.length>=s);(0,Mi.useEffect)(()=>m(s&&p.length>=s),[s]);var g=a||"span",v=de({},Qa,i.style||{});s>0&&(c.style=de({},c.style,{cursor:p.length<=s?"initial":"pointer"}),p.length>s&&(c.onClick=()=>{m(!f)}));var _=f?p.slice(0,s)+"...":p,S=l&&typeof l=="function",T=S&&l(de({},c,{style:v}),{type:"type",value:e,keyName:n}),w=S&&l(de({},c,{children:_,className:"w-rjv-value"}),{type:"value",value:e,keyName:n});return(0,ns.jsxs)(Mi.Fragment,{children:[o&&(T||(0,Jt.jsx)(g,de({},c,{style:v}))),w||(0,ns.jsxs)(Mi.Fragment,{children:[(0,Jt.jsx)(hh,{}),(0,Jt.jsx)(g,de({},c,{className:"w-rjv-value",children:_})),(0,Jt.jsx)(hh,{})]}),(0,Jt.jsx)(No,{keyName:n,value:e,expandKey:r})]})};gO.displayName="JVR.TypeString";var yO=t=>{var{children:e,expandKey:r,keyName:n}=t,{True:i={},displayDataTypes:o}=zt(),{as:s,render:a}=i,l=It(i,yue),c=s||"span",p=de({},Qa,i.style||{}),f=a&&typeof a=="function",m=f&&a(de({},l,{style:p}),{type:"type",value:e,keyName:n}),g=f&&a(de({},l,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:n});return(0,ns.jsxs)(Mi.Fragment,{children:[o&&(m||(0,Jt.jsx)(c,de({},l,{style:p}))),g||(0,Jt.jsx)(c,de({},l,{className:"w-rjv-value",children:e?.toString()})),(0,Jt.jsx)(No,{keyName:n,value:e,expandKey:r})]})};yO.displayName="JVR.TypeTrue";var vO=t=>{var{children:e,expandKey:r,keyName:n}=t,{False:i={},displayDataTypes:o}=zt(),{as:s,render:a}=i,l=It(i,vue),c=s||"span",p=de({},Qa,i.style||{}),f=a&&typeof a=="function",m=f&&a(de({},l,{style:p}),{type:"type",value:e,keyName:n}),g=f&&a(de({},l,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:n});return(0,ns.jsxs)(Mi.Fragment,{children:[o&&(m||(0,Jt.jsx)(c,de({},l,{style:p}))),g||(0,Jt.jsx)(c,de({},l,{className:"w-rjv-value",children:e?.toString()})),(0,Jt.jsx)(No,{keyName:n,value:e,expandKey:r})]})};vO.displayName="JVR.TypeFalse";var _O=t=>{var{children:e,expandKey:r,keyName:n}=t,{Float:i={},displayDataTypes:o}=zt(),{as:s,render:a}=i,l=It(i,_ue),c=s||"span",p=de({},Qa,i.style||{}),f=a&&typeof a=="function",m=f&&a(de({},l,{style:p}),{type:"type",value:e,keyName:n}),g=f&&a(de({},l,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:n});return(0,ns.jsxs)(Mi.Fragment,{children:[o&&(m||(0,Jt.jsx)(c,de({},l,{style:p}))),g||(0,Jt.jsx)(c,de({},l,{className:"w-rjv-value",children:e?.toString()})),(0,Jt.jsx)(No,{keyName:n,value:e,expandKey:r})]})};_O.displayName="JVR.TypeFloat";var bO=t=>{var{children:e,expandKey:r,keyName:n}=t,{Int:i={},displayDataTypes:o}=zt(),{as:s,render:a}=i,l=It(i,bue),c=s||"span",p=de({},Qa,i.style||{}),f=a&&typeof a=="function",m=f&&a(de({},l,{style:p}),{type:"type",value:e,keyName:n}),g=f&&a(de({},l,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:n});return(0,ns.jsxs)(Mi.Fragment,{children:[o&&(m||(0,Jt.jsx)(c,de({},l,{style:p}))),g||(0,Jt.jsx)(c,de({},l,{className:"w-rjv-value",children:e?.toString()})),(0,Jt.jsx)(No,{keyName:n,value:e,expandKey:r})]})};bO.displayName="JVR.TypeInt";var xO=t=>{var{children:e,expandKey:r,keyName:n}=t,{Bigint:i={},displayDataTypes:o}=zt(),{as:s,render:a}=i,l=It(i,xue),c=s||"span",p=de({},Qa,i.style||{}),f=a&&typeof a=="function",m=f&&a(de({},l,{style:p}),{type:"type",value:e,keyName:n}),g=f&&a(de({},l,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:n});return(0,ns.jsxs)(Mi.Fragment,{children:[o&&(m||(0,Jt.jsx)(c,de({},l,{style:p}))),g||(0,Jt.jsx)(c,de({},l,{className:"w-rjv-value",children:e?.toString()+"n"})),(0,Jt.jsx)(No,{keyName:n,value:e,expandKey:r})]})};xO.displayName="JVR.TypeFloat";var TO=t=>{var{children:e,expandKey:r,keyName:n}=t,{Url:i={},displayDataTypes:o}=zt(),{as:s,render:a}=i,l=It(i,Tue),c=s||"span",p=de({},Qa,i.style),f=a&&typeof a=="function",m=f&&a(de({},l,{style:p}),{type:"type",value:e,keyName:n}),g=f&&a(de({},l,{children:e?.href,className:"w-rjv-value"}),{type:"value",value:e,keyName:n});return(0,ns.jsxs)(Mi.Fragment,{children:[o&&(m||(0,Jt.jsx)(c,de({},l,{style:p}))),g||(0,ns.jsxs)("a",de({href:e?.href,target:"_blank"},l,{className:"w-rjv-value",children:[(0,Jt.jsx)(hh,{}),e?.href,(0,Jt.jsx)(hh,{})]})),(0,Jt.jsx)(No,{keyName:n,value:e,expandKey:r})]})};TO.displayName="JVR.TypeUrl";var wO=t=>{var{children:e,expandKey:r,keyName:n}=t,{Date:i={},displayDataTypes:o}=zt(),{as:s,render:a}=i,l=It(i,wue),c=s||"span",p=de({},Qa,i.style||{}),f=a&&typeof a=="function",m=f&&a(de({},l,{style:p}),{type:"type",value:e,keyName:n}),g=e instanceof Date?e.toLocaleString():e,v=f&&a(de({},l,{children:g,className:"w-rjv-value"}),{type:"value",value:e,keyName:n});return(0,ns.jsxs)(Mi.Fragment,{children:[o&&(m||(0,Jt.jsx)(c,de({},l,{style:p}))),v||(0,Jt.jsx)(c,de({},l,{className:"w-rjv-value",children:g})),(0,Jt.jsx)(No,{keyName:n,value:e,expandKey:r})]})};wO.displayName="JVR.TypeDate";var SO=t=>{var{children:e,expandKey:r,keyName:n}=t,{Undefined:i={},displayDataTypes:o}=zt(),{as:s,render:a}=i,l=It(i,Sue),c=s||"span",p=de({},Qa,i.style||{}),f=a&&typeof a=="function",m=f&&a(de({},l,{style:p}),{type:"type",value:e,keyName:n}),g=f&&a(de({},l,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:n});return(0,ns.jsxs)(Mi.Fragment,{children:[o&&(m||(0,Jt.jsx)(c,de({},l,{style:p}))),g,(0,Jt.jsx)(No,{keyName:n,value:e,expandKey:r})]})};SO.displayName="JVR.TypeUndefined";var EO=t=>{var{children:e,expandKey:r,keyName:n}=t,{Null:i={},displayDataTypes:o}=zt(),{as:s,render:a}=i,l=It(i,Eue),c=s||"span",p=de({},Qa,i.style||{}),f=a&&typeof a=="function",m=f&&a(de({},l,{style:p}),{type:"type",value:e,keyName:n}),g=f&&a(de({},l,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:n});return(0,ns.jsxs)(Mi.Fragment,{children:[o&&(m||(0,Jt.jsx)(c,de({},l,{style:p}))),g,(0,Jt.jsx)(No,{keyName:n,value:e,expandKey:r})]})};EO.displayName="JVR.TypeNull";var CO=t=>{var{children:e,expandKey:r,keyName:n}=t,{Nan:i={},displayDataTypes:o}=zt(),{as:s,render:a}=i,l=It(i,Cue),c=s||"span",p=de({},Qa,i.style||{}),f=a&&typeof a=="function",m=f&&a(de({},l,{style:p}),{type:"type",value:e,keyName:n}),g=f&&a(de({},l,{children:e?.toString(),className:"w-rjv-value"}),{type:"value",value:e,keyName:n});return(0,ns.jsxs)(Mi.Fragment,{children:[o&&(m||(0,Jt.jsx)(c,de({},l,{style:p}))),g,(0,Jt.jsx)(No,{keyName:n,value:e,expandKey:r})]})};CO.displayName="JVR.TypeNan";var pa=ie(Cr()),Due=t=>Number(t)===t&&t%1!==0||isNaN(t),DO=t=>{var{value:e,keyName:r,expandKey:n}=t,i={keyName:r,expandKey:n};return e instanceof URL?(0,pa.jsx)(TO,de({},i,{children:e})):typeof e=="string"?(0,pa.jsx)(gO,de({},i,{children:e})):e===!0?(0,pa.jsx)(yO,de({},i,{children:e})):e===!1?(0,pa.jsx)(vO,de({},i,{children:e})):e===null?(0,pa.jsx)(EO,de({},i,{children:e})):e===void 0?(0,pa.jsx)(SO,de({},i,{children:e})):e instanceof Date?(0,pa.jsx)(wO,de({},i,{children:e})):typeof e=="number"&&isNaN(e)?(0,pa.jsx)(CO,de({},i,{children:e})):typeof e=="number"&&Due(e)?(0,pa.jsx)(_O,de({},i,{children:e})):typeof e=="bigint"?(0,pa.jsx)(xO,de({},i,{children:e})):typeof e=="number"?(0,pa.jsx)(bO,de({},i,{children:e})):null};DO.displayName="JVR.Value";var fT=ie(ve());function so(t,e,r){var n=RB(),i=[t.className,e.className].filter(Boolean).join(" "),o=de({},t,e,{className:i,style:de({},t.style,e.style),children:e.children||t.children});(0,fT.useEffect)(()=>n({[r]:o}),[e])}function zr(t,e,r){var n=kB(),i=[t.className,e.className].filter(Boolean).join(" "),o=de({},t,e,{className:i,style:de({},t.style,e.style),children:e.children||t.children});(0,fT.useEffect)(()=>n({[r]:o}),[e])}function Ll(t,e,r){var n=FB(),i=[t.className,e.className].filter(Boolean).join(" "),o=de({},t,e,{className:i,style:de({},t.style,e.style),children:e.children||t.children});(0,fT.useEffect)(()=>n({[r]:o}),[e])}var jB=ie(Cr()),Iue=["as","render"],IO=t=>{var{KeyName:e={}}=oo();return Ll(e,t,"KeyName"),null};IO.displayName="JVR.KeyName";var kO=t=>{var{children:e,value:r,parentValue:n,keyName:i}=t,o=typeof e=="number",s={color:o?"var(--w-rjv-key-number, #268bd2)":"var(--w-rjv-key-string, #002b36)"},{KeyName:a={}}=oo(),{as:l,render:c}=a,p=It(a,Iue);p.style=de({},p.style,s);var f=l||"span",m=c&&typeof c=="function"&&c(de({},p,{children:e}),{value:r,parentValue:n,keyName:i});return m||(0,jB.jsx)(f,de({},p,{children:e}))};kO.displayName="JVR.KeyNameComp";var cf=ie(ve());function kue(t){var e=(0,cf.useRef)();return(0,cf.useEffect)(()=>{e.current=t}),e.current}function zB(t){var{value:e,highlightUpdates:r,highlightContainer:n}=t,i=kue(e),o=(0,cf.useMemo)(()=>{if(!r||i===void 0)return!1;if(typeof e!=typeof i)return!0;if(typeof e=="number")return isNaN(e)&&isNaN(i)?!1:e!==i;if(Array.isArray(e)!==Array.isArray(i))return!0;if(typeof e=="object"||typeof e=="function")return!1;if(e!==i)return!0},[r,e]);(0,cf.useEffect)(()=>{n&&n.current&&o&&"animate"in n.current&&n.current.animate([{backgroundColor:"var(--w-rjv-update-color, #ebcb8b)"},{backgroundColor:""}],{duration:1e3,easing:"ease-in"})},[o,e,n])}var Ml=ie(Cr()),mT=ie(Cr()),NO=t=>{var e,{value:r,expandKey:n="",level:i}=t,o=_d(),{objectSortKeys:s,indentWidth:a,collapsed:l}=Ps(),c=Array.isArray(r),p=(e=o[n])!=null?e:typeof l=="boolean"?l:typeof l=="number"?i>l:!1;if(p)return null;var f=c?Object.entries(r).map(g=>[Number(g[0]),g[1]]):Object.entries(r);s&&(f=s===!0?f.sort((g,v)=>{var[_]=g,[S]=v;return typeof _=="string"&&typeof S=="string"?_.localeCompare(S):0}):f.sort((g,v)=>{var[_,S]=g,[T,w]=v;return typeof _=="string"&&typeof T=="string"?s(_,T,S,w):0}));var m={borderLeft:"var(--w-rjv-border-left-width, 1px) var(--w-rjv-line-style, solid) var(--w-rjv-line-color, #ebebeb)",paddingLeft:a,marginLeft:6};return(0,Ml.jsx)("div",{className:"w-rjv-wrap",style:m,children:f.map((g,v)=>{var[_,S]=g;return(0,Ml.jsx)($B,{parentValue:r,keyName:_,value:S,level:i},v)})})};NO.displayName="JVR.KeyValues";var hT=t=>{var{keyName:e,parentValue:r,value:n}=t,{highlightUpdates:i}=Ps(),o=typeof e=="number",s=(0,gh.useRef)(null);return zB({value:n,highlightUpdates:i,highlightContainer:s}),(0,mT.jsxs)(gh.Fragment,{children:[(0,mT.jsxs)("span",{ref:s,children:[(0,Ml.jsx)(pT,{isNumber:o,"data-placement":"left"}),(0,Ml.jsx)(kO,{keyName:e,value:n,parentValue:r,children:e}),(0,Ml.jsx)(pT,{isNumber:o,"data-placement":"right"})]}),(0,Ml.jsx)(uO,{})]})};hT.displayName="JVR.KayName";var $B=t=>{var{keyName:e,value:r,parentValue:n,level:i=0}=t,o=cT(),s=(0,gh.useId)(),a=Array.isArray(r),l=r instanceof Set,c=r instanceof Map,p=r instanceof Date,f=r instanceof URL,m=r&&typeof r=="object"&&!a&&!l&&!c&&!p&&!f,g=m||a||l||c;if(g){var v=l?Array.from(r):c?Object.fromEntries(r):r;return(0,Ml.jsx)(Bv,{keyName:e,value:v,parentValue:n,initialValue:r,level:i+1})}var _={onMouseEnter:()=>o({[s]:!0}),onMouseLeave:()=>o({[s]:!1})};return(0,mT.jsxs)("div",de({className:"w-rjv-line"},_,{children:[(0,Ml.jsx)(hT,{keyName:e,value:r,parentValue:n}),(0,Ml.jsx)(DO,{keyName:e,value:r,expandKey:s})]}))};$B.displayName="JVR.KeyValuesItem";var HB=ie(Cr()),Nue=["value","keyName"],Aue=["as","render"],AO=t=>{var{CountInfoExtra:e={}}=oo();return Ll(e,t,"CountInfoExtra"),null};AO.displayName="JVR.CountInfoExtra";var OO=t=>{var{value:e={},keyName:r}=t,n=It(t,Nue),{CountInfoExtra:i={}}=oo(),{as:o,render:s}=i,a=It(i,Aue);if(!s&&!a.children)return null;var l=o||"span",c=s&&typeof s=="function",p=de({},a,n),f=c&&s(p,{value:e,keyName:r});return f||(0,HB.jsx)(l,de({},p))};OO.displayName="JVR.CountInfoExtraComps";var qB=ie(Cr()),Oue=["value","keyName"],Rue=["as","render"],RO=t=>{var{CountInfo:e={}}=oo();return Ll(e,t,"CountInfo"),null};RO.displayName="JVR.CountInfo";var PO=t=>{var{value:e={},keyName:r}=t,n=It(t,Oue),{displayObjectSize:i}=Ps(),{CountInfo:o={}}=oo();if(!i)return null;var{as:s,render:a}=o,l=It(o,Rue),c=s||"span";l.style=de({},l.style,t.style);var p=Object.keys(e).length;l.children||(l.children=p+" items");var f=de({},l,n),m=a&&typeof a=="function",g=m&&a(de({},f,{"data-length":p}),{value:e,keyName:r});return g||(0,qB.jsx)(c,de({},f))};PO.displayName="JVR.CountInfoComp";var GB=ie(Cr()),Pue=["as","render"],LO=t=>{var{Ellipsis:e={}}=oo();return Ll(e,t,"Ellipsis"),null};LO.displayName="JVR.Ellipsis";var MO=t=>{var{isExpanded:e,value:r,keyName:n}=t,{Ellipsis:i={}}=oo(),{as:o,render:s}=i,a=It(i,Pue),l=o||"span",c=s&&typeof s=="function"&&s(de({},a,{"data-expanded":e}),{value:r,keyName:n});return c||(e?(0,GB.jsx)(l,de({},a)):null)};MO.displayName="JVR.EllipsisComp";var Za=ie(Cr()),VB=ie(Cr()),FO=t=>{var e,{keyName:r,expandKey:n,initialValue:i,value:o,level:s}=t,a=_d(),l=EB(),{onExpand:c,collapsed:p}=Ps(),f=Array.isArray(o),m=o instanceof Set,g=(e=a[n])!=null?e:typeof p=="boolean"?p:typeof p=="number"?s>p:!1,v=typeof o=="object",_=()=>{var N={expand:!g,value:o,keyid:n,keyName:r};c&&c(N),l({[n]:N.expand})},S={display:"inline-flex",alignItems:"center"},T={transform:"rotate("+(g?"-90":"0")+"deg)",transition:"all 0.3s"},w=Object.keys(o).length,E=w!==0&&(f||m||v),I={style:S};return E&&(I.onClick=_),(0,VB.jsxs)("span",de({},I,{children:[E&&(0,Za.jsx)(cO,{style:T,expandKey:n}),(r||typeof r=="number")&&(0,Za.jsx)(hT,{keyName:r}),(0,Za.jsx)(mO,{value:i,keyName:r}),(0,Za.jsx)(hO,{value:i,keyName:r}),(0,Za.jsx)(dO,{isBrackets:f||m}),(0,Za.jsx)(MO,{keyName:r,value:o,isExpanded:g}),(0,Za.jsx)(Fv,{isVisiable:g||!E,isBrackets:f||m}),(0,Za.jsx)(PO,{value:o,keyName:r}),(0,Za.jsx)(OO,{value:o,keyName:r}),(0,Za.jsx)(No,{keyName:r,value:o,expandKey:n})]}))};FO.displayName="JVR.NestedOpen";var gT=ie(Cr()),KB=ie(Cr()),Lue=["className","children","parentValue","keyid","level","value","initialValue","keyName"],Bv=(0,yT.forwardRef)((t,e)=>{var{className:r="",level:n=1,value:i,initialValue:o,keyName:s}=t,a=It(t,Lue),l=cT(),c=(0,yT.useId)(),p=[r,"w-rjv-inner"].filter(Boolean).join(" "),f={onMouseEnter:()=>l({[c]:!0}),onMouseLeave:()=>l({[c]:!1})};return(0,KB.jsxs)("div",de({className:p,ref:e},a,f,{children:[(0,gT.jsx)(FO,{expandKey:c,value:i,level:n,keyName:s,initialValue:o}),(0,gT.jsx)(NO,{expandKey:c,value:i,level:n}),(0,gT.jsx)(fO,{expandKey:c,value:i,level:n})]}))});Bv.displayName="JVR.Container";var UO=t=>{var{BraceLeft:e={}}=mn();return so(e,t,"BraceLeft"),null};UO.displayName="JVR.BraceLeft";var BO=t=>{var{BraceRight:e={}}=mn();return so(e,t,"BraceRight"),null};BO.displayName="JVR.BraceRight";var WO=t=>{var{BracketsLeft:e={}}=mn();return so(e,t,"BracketsLeft"),null};WO.displayName="JVR.BracketsLeft";var jO=t=>{var{BracketsRight:e={}}=mn();return so(e,t,"BracketsRight"),null};jO.displayName="JVR.BracketsRight";var zO=t=>{var{Arrow:e={}}=mn();return so(e,t,"Arrow"),null};zO.displayName="JVR.Arrow";var $O=t=>{var{Colon:e={}}=mn();return so(e,t,"Colon"),null};$O.displayName="JVR.Colon";var HO=t=>{var{Quote:e={}}=mn();return so(e,t,"Quote"),null};HO.displayName="JVR.Quote";var qO=t=>{var{ValueQuote:e={}}=mn();return so(e,t,"ValueQuote"),null};qO.displayName="JVR.ValueQuote";var GO=t=>{var{Bigint:e={}}=zt();return zr(e,t,"Bigint"),null};GO.displayName="JVR.Bigint";var VO=t=>{var{Date:e={}}=zt();return zr(e,t,"Date"),null};VO.displayName="JVR.Date";var KO=t=>{var{False:e={}}=zt();return zr(e,t,"False"),null};KO.displayName="JVR.False";var YO=t=>{var{Float:e={}}=zt();return zr(e,t,"Float"),null};YO.displayName="JVR.Float";var XO=t=>{var{Int:e={}}=zt();return zr(e,t,"Int"),null};XO.displayName="JVR.Int";var JO=t=>{var{Map:e={}}=zt();return zr(e,t,"Map"),null};JO.displayName="JVR.Map";var QO=t=>{var{Nan:e={}}=zt();return zr(e,t,"Nan"),null};QO.displayName="JVR.Nan";var ZO=t=>{var{Null:e={}}=zt();return zr(e,t,"Null"),null};ZO.displayName="JVR.Null";var eR=t=>{var{Set:e={}}=zt();return zr(e,t,"Set"),null};eR.displayName="JVR.Set";var tR=t=>{var{Str:e={}}=zt();return zr(e,t,"Str"),null};tR.displayName="JVR.StringText";var rR=t=>{var{True:e={}}=zt();return zr(e,t,"True"),null};rR.displayName="JVR.True";var nR=t=>{var{Undefined:e={}}=zt();return zr(e,t,"Undefined"),null};nR.displayName="JVR.Undefined";var iR=t=>{var{Url:e={}}=zt();return zr(e,t,"Url"),null};iR.displayName="JVR.Url";var oR=t=>{var{Copied:e={}}=oo();return Ll(e,t,"Copied"),null};oR.displayName="JVR.Copied";var XB=ie(Cr()),JB=ie(Cr()),Mue=["className","style","value","children","collapsed","indentWidth","displayObjectSize","shortenTextAfterLength","highlightUpdates","enableClipboard","displayDataTypes","objectSortKeys","onExpand"],Ir=(0,YB.forwardRef)((t,e)=>{var{className:r="",style:n,value:i,children:o,collapsed:s,indentWidth:a=15,displayObjectSize:l=!0,shortenTextAfterLength:c=30,highlightUpdates:p=!0,enableClipboard:f=!0,displayDataTypes:m=!0,objectSortKeys:g=!1,onExpand:v}=t,_=It(t,Mue),S=de({lineHeight:1.4,fontFamily:"var(--w-rjv-font-family, Menlo, monospace)",color:"var(--w-rjv-color, #002b36)",backgroundColor:"var(--w-rjv-background-color, #00000000)",fontSize:13},n),T=["w-json-view-container","w-rjv",r].filter(Boolean).join(" ");return(0,JB.jsxs)(aO,{initialState:{value:i,objectSortKeys:g,indentWidth:a,displayObjectSize:l,collapsed:s,enableClipboard:f,shortenTextAfterLength:c,highlightUpdates:p,onExpand:v},initialTypes:{displayDataTypes:m},children:[(0,XB.jsx)(Bv,de({value:i},_,{ref:e,className:T,style:S})),o]})});Ir.Bigint=GO;Ir.Date=VO;Ir.False=KO;Ir.Float=YO;Ir.Int=XO;Ir.Map=JO;Ir.Nan=QO;Ir.Null=ZO;Ir.Set=eR;Ir.String=tR;Ir.True=rR;Ir.Undefined=nR;Ir.Url=iR;Ir.ValueQuote=qO;Ir.Arrow=zO;Ir.Colon=$O;Ir.Quote=HO;Ir.Ellipsis=LO;Ir.BraceLeft=UO;Ir.BraceRight=BO;Ir.BracketsLeft=WO;Ir.BracketsRight=jO;Ir.Copied=oR;Ir.CountInfo=RO;Ir.CountInfoExtra=AO;Ir.KeyName=IO;Ir.displayName="JVR.JsonView";var QB=Ir;var ZB={"--w-rjv-font-family":"monospace","--w-rjv-color":"#002b36","--w-rjv-key-string":"#002b36","--w-rjv-background-color":"#ffffff","--w-rjv-line-color":"#ebebeb","--w-rjv-arrow-color":"var(--w-rjv-color)","--w-rjv-edit-color":"var(--w-rjv-color)","--w-rjv-info-color":"#0000004d","--w-rjv-update-color":"#ebcb8b","--w-rjv-copied-color":"#002b36","--w-rjv-copied-success-color":"#28a745","--w-rjv-curlybraces-color":"#236a7c","--w-rjv-colon-color":"#002b36","--w-rjv-brackets-color":"#236a7c","--w-rjv-quotes-color":"var(--w-rjv-key-string)","--w-rjv-quotes-string-color":"var(--w-rjv-type-string-color)","--w-rjv-type-string-color":"#cb4b16","--w-rjv-type-int-color":"#268bd2","--w-rjv-type-float-color":"#859900","--w-rjv-type-bigint-color":"#268bd2","--w-rjv-type-boolean-color":"#2aa198","--w-rjv-type-date-color":"#586e75","--w-rjv-type-url-color":"#0969da","--w-rjv-type-null-color":"#d33682","--w-rjv-type-nan-color":"#859900","--w-rjv-type-undefined-color":"#586e75"};var is=F(function(e){let r=pe();return JSON.stringify(e.value),h(QB,{shortenTextAfterLength:100,style:r.themeMgr.theme==="light"?ZB:Fue,value:e.value??{},enableClipboard:!1})});var LBe=new Array(1e3).fill(1);var Fue={"--w-rjv-font-family":"monospace","--w-rjv-color":"#79c0ff","--w-rjv-key-string":"#79c0ff","--w-rjv-background-color":"#0d1117","--w-rjv-line-color":"#94949480","--w-rjv-arrow-color":"#ccc","--w-rjv-edit-color":"var(--w-rjv-color)","--w-rjv-info-color":"#7b7b7b","--w-rjv-update-color":"#ebcb8b","--w-rjv-copied-color":"#79c0ff","--w-rjv-copied-success-color":"#28a745","--w-rjv-curlybraces-color":"#8b949e","--w-rjv-colon-color":"#c9d1d9","--w-rjv-brackets-color":"#8b949e","--w-rjv-quotes-color":"var(--w-rjv-key-string)","--w-rjv-quotes-string-color":"var(--w-rjv-type-string-color)","--w-rjv-type-string-color":"#a5d6ff","--w-rjv-type-int-color":"#79c0ff","--w-rjv-type-float-color":"#79c0ff","--w-rjv-type-bigint-color":"#79c0ff","--w-rjv-type-boolean-color":"#ffab70","--w-rjv-type-date-color":"#79c0ff","--w-rjv-type-url-color":"#4facff","--w-rjv-type-null-color":"#ff7b72","--w-rjv-type-nan-color":"#859900","--w-rjv-type-undefined-color":"#79c0ff"};var eW=F(function(e){let r=pe(),n=r.auth.avatar?h("img",{tw:"rounded",style:{width:"1.2rem",height:"1.2rem"},src:r.auth.avatar,alt:"user avatar"}):h("span",{className:"material-symbols-outlined",children:"person"}),i=r.auth.isConnected?h("div",{tw:"flex items-center",children:r.auth.username}):"Login";return console.log("[\u{1F511}] ui updating: isConnected =",r.auth.isConnected),h(Yn,{startIcon:n,title:i,appearance:"subtle",children:P("div",{tw:"flex flex-col",children:[r.auth.user&&P(hr,{children:[P("div",{tw:"btn btn-ghost",children:[h("span",{className:"material-symbols-outlined",children:"info"}),"Infos"]}),h(is,{value:r.auth.user})]}),r.auth.isConnected?h("div",{onClick:()=>r.auth.logout(),tw:"btn",children:"LogOut"}):h("div",{tw:"btn",onClick:()=>{r.auth.startLoginFlowWithGithub()},children:"login"})]})})});var tW=F(function(e){let r=pe(),n=r.ws?.isOpen??!1;return P(Yn,{tw:[n?null:"text-error-content bg-error"],startIcon:h("span",{className:"material-symbols-outlined text-blue-400",children:"account_tree"}),title:"ComfyUI",appearance:"subtle",children:[h(Dt,{onClick:()=>r.layout.FOCUS_OR_CREATE("ComfyUI",{}),label:"Comfy",icon:h("span",{className:"material-symbols-outlined text-cyan-400",children:"account_tree"})}),h(Dt,{onClick:()=>r.layout.FOCUS_OR_CREATE("ComfyUINodeExplorer",{}),icon:h("span",{className:"material-symbols-outlined text-cyan-400",children:"explore"}),label:"Nodes"}),h("div",{className:"divider",children:"hosts"}),r.hosts.map(i=>{let o=i.id===r.configFile.value.mainComfyHostID;return P(Dt,{icon:h("span",{tw:[o?n?"text-green-500":"text-red-500":null],className:"material-symbols-outlined",children:"desktop_mac"}),onClick:()=>i.electAsPrimary(),children:[h("div",{tw:"flex-grow",children:i.data.name}),h("div",{className:"btn btn-xs",onClick:s=>{s.preventDefault(),s.stopPropagation(),r.layout.FOCUS_OR_CREATE("Hosts",{hostID:i.id})},children:h("span",{className:"material-symbols-outlined",children:"settings"})}),h("div",{className:"btn btn-xs",onClick:s=>{s.preventDefault(),s.stopPropagation(),r.layout.FOCUS_OR_CREATE("ComfyUI",{hostID:i.id},"full")},children:h("span",{className:"material-symbols-outlined",children:"open_in_full"})})]},i.id)})]})});var rW=F(function(e){return P("div",{"data-theme":e.theme,className:"bg-base-100 rounded flex gap-1 text-base-content cursor-pointer font-sans p-1",children:[h("div",{className:"font-bold",children:e.theme}),h("div",{tw:"flex-grow"}),h("div",{className:"bg-base-200 flex [height:1rem] w-2 items-center justify-center rounded "}),h("div",{className:"bg-base-300 flex [height:1rem] w-2 items-center justify-center rounded "}),h("div",{className:"bg-primary flex [height:1rem] w-2 items-center justify-center rounded "}),h("div",{className:"bg-secondary flex [height:1rem] w-2 items-center justify-center rounded "}),h("div",{className:"bg-accent flex [height:1rem] w-2 items-center justify-center rounded "}),h("div",{className:"bg-neutral flex [height:1rem] w-2 items-center justify-center rounded "})]})});var nW=F(function(e){let r=pe();return P(Yn,{startIcon:h("span",{className:"material-symbols-outlined text-purple-500",children:"settings"}),title:"Config",appearance:"subtle",children:[h(Dt,{onClick:()=>r.layout.FOCUS_OR_CREATE("Config",{}),icon:h("span",{className:"material-symbols-outlined text-purple-500",children:"settings"}),label:"Config"}),h(Dt,{onClick:()=>r.layout.FOCUS_OR_CREATE("Hosts",{}),icon:h("span",{className:"material-symbols-outlined text-purple-500",children:"cloud"}),label:"ComfyUI Hosts"})]})}),iW=F(function(e){let r=pe();return h(Yn,{startIcon:h("span",{className:"material-symbols-outlined text-primary",children:"color_lens"}),title:"",appearance:"subtle",children:r.themeMgr.themes.map(n=>h("div",{tw:"cursor-pointer hover:bg-base-300 p-0.5",onClick:i=>{i.preventDefault(),i.stopPropagation(),r.themeMgr.theme=n},children:h(rW,{theme:n})},n))})});var oW=F(function(e){let r=pe();return P(Yn,{appearance:"subtle",startIcon:h("span",{className:"material-symbols-outlined text-orange-500",children:"sync"}),title:"Debug",children:[h(Dt,{icon:h("span",{className:"material-symbols-outlined text-orange-500",children:"panorama_horizontal"}),onClick:r.layout.resetCurrent,label:"Fix Layout"}),h(Dt,{icon:h("span",{className:"material-symbols-outlined text-orange-500",children:"sync"}),onClick:r.restart,label:"Reload"}),h("div",{tw:"divider my-0"}),h(Dt,{onClick:()=>{r.db.reset(),r.restart()},icon:h("span",{className:"material-symbols-outlined text-red-500",children:"sync"}),children:"Reset DB"}),h(Dt,{icon:h("span",{className:"material-symbols-outlined text-red-500",children:"bug_report"}),onClick:r.electronUtils.toggleDevTools,label:"console"}),h(Dt,{icon:h("span",{className:"material-symbols-outlined text-red-500",children:"sync"}),onClick:r.fullReset_eraseConfigAndSchemaFilesAndDB,label:"Full Reset"}),h("div",{tw:"divider my-0"}),h(Dt,{icon:h("span",{className:"material-symbols-outlined text-purple-500",children:"storage"}),onClick:r.db.migrate,label:"Migrate"}),h(Dt,{icon:h("span",{className:"material-symbols-outlined text-purple-500",children:"group_work"}),onClick:r.db.runCodegen,label:"CodeGen"})]})});var sW=F(function(e){let r=pe();return P(Yn,{startIcon:h("span",{className:"material-symbols-outlined text-purple-500",children:"help_center"}),title:"Help",appearance:"subtle",children:[h(Dt,{onClick:()=>{window.require("electron").shell.openExternal("https://github.com/rvion/CushyStudio#readme")},icon:h("img",{style:{width:"1rem",height:"1rem"},src:Rr.GithubLogo2_png}),label:"Open Github"}),h(Dt,{onClick:()=>{window.require("electron").shell.openExternal("https://www.CushyStudio.com")},icon:h("img",{style:{width:"1rem",height:"1rem"},src:Rr.GithubLogo2_png}),label:"Open Website"}),h(Dt,{onClick:()=>{window.require("electron").shell.openExternal("https://www.CushyStudio.com/blog")},icon:h("span",{className:"material-symbols-outlined text-purple-300",children:"web"}),label:"Open blog"})]})});var aW=F(function(e){let r=pe();return P(Yn,{startIcon:h("span",{className:"material-symbols-outlined text-red-400",children:"image"}),title:"Layout",appearance:"subtle",children:[h(Dt,{icon:h("span",{className:"material-symbols-outlined text-orange-500",children:"panorama_horizontal"}),onClick:r.layout.resetCurrent,label:"Fix Layout"}),h("div",{className:"divider",children:"Panels"}),h(Dt,{onClick:()=>r.layout.FOCUS_OR_CREATE("Output",{}),icon:h("span",{className:"material-symbols-outlined text-red-400",children:"image"}),label:"Output"}),h(Dt,{onClick:()=>r.layout.FOCUS_OR_CREATE("IFrame",{url:"https://app.posemy.art/"}),icon:h("span",{className:"material-symbols-outlined text-red-400",children:"brush"}),label:"3d Poser (posemy.art)"}),h(Dt,{onClick:()=>r.layout.FOCUS_OR_CREATE("Paint",{}),icon:h("span",{className:"material-symbols-outlined text-red-400",children:"brush"}),label:"paint - Minipaint"}),h(Dt,{onClick:()=>r.layout.FOCUS_OR_CREATE("Gallery",{}),icon:h("span",{className:"material-symbols-outlined text-red-400",children:"image_search"}),label:"Gallery"}),h(Dt,{onClick:()=>r.layout.FOCUS_OR_CREATE("LastImage",{}),icon:h("span",{className:"material-symbols-outlined text-red-400",children:"history"}),label:"Last IMAGE"}),h(Dt,{onClick:()=>r.layout.FOCUS_OR_CREATE("LastStep",{}),icon:h("span",{className:"material-symbols-outlined text-red-400",children:"history"}),label:"Last STEP"}),h("div",{className:"divider",children:"Perspectives"}),h(Dt,{icon:h("span",{className:"material-symbols-outlined text-red-400",children:"history"}),label:"default"})]})});var lW=F(function(e){let r=pe();return P(Yn,{startIcon:h("span",{className:"material-symbols-outlined text-green-400",children:"code"}),title:"Utils",appearance:"subtle",children:[h(Dt,{onClick:()=>r.layout.FOCUS_OR_CREATE("Civitai",{}),icon:h("img",{style:{width:"1em",height:"1em"},src:Rr.CivitaiLogo_png}),label:"Civitai"}),h(Dt,{onClick:()=>r.layout.FOCUS_OR_CREATE("Squoosh",{}),icon:h("img",{style:{width:"1em",height:"1em"},src:Rr.logos_squoosh_png}),label:"Squoosh"})]})});var uW=F(function(e){let r=pe(),n=r.mainHost;return h("div",{tw:"overflow-auto",id:"CushyAppBar",children:P("div",{tw:"flex items-center px-2 overflow-auto",children:[h("img",{style:{width:"1.6rem"},src:Rr.CushyLogo_512_png,alt:""}),h("div",{tw:"px-1",children:h(gB,{updater:r.updater,children:"CushyStudio "})}),h(aW,{}),h(tW,{}),h(lW,{}),h(nW,{}),h(iW,{}),h(sW,{}),h(eW,{}),h(oW,{}),h("div",{className:"flex flex-grow"}),h(uT,{host:n}),h(lT,{host:n}),h(yB,{}),P("label",{tw:"swap swap-flip text-2xl",children:[h("input",{type:"checkbox"}),h("div",{tw:"swap-on",children:"\u{1F608}"}),h("div",{tw:"swap-off",children:"\u{1F607}"})]})]})})});var Ls=ie(ve()),Uue=(0,Ls.createContext)(null),sR={didCatch:!1,error:null},fa=class extends Ls.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=sR}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){let{error:e}=this.state;if(e!==null){for(var r,n,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:o,reason:"imperative-api"}),this.setState(sR)}}componentDidCatch(e,r){var n,i;(n=(i=this.props).onError)===null||n===void 0||n.call(i,e,r)}componentDidUpdate(e,r){let{didCatch:n}=this.state,{resetKeys:i}=this.props;if(n&&r.error!==null&&Bue(e.resetKeys,i)){var o,s;(o=(s=this.props).onReset)===null||o===void 0||o.call(s,{next:i,prev:e.resetKeys,reason:"keys"}),this.setState(sR)}}render(){let{children:e,fallbackRender:r,FallbackComponent:n,fallback:i}=this.props,{didCatch:o,error:s}=this.state,a=e;if(o){let l={error:s,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")a=r(l);else if(n)a=(0,Ls.createElement)(n,l);else if(i===null||(0,Ls.isValidElement)(i))a=i;else throw s}return(0,Ls.createElement)(Uue.Provider,{value:{didCatch:o,error:s,resetErrorBoundary:this.resetErrorBoundary}},a)}};function Bue(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((r,n)=>!Object.is(r,e[n]))}var Ed={};wu(Ed,{basename:()=>ai,default:()=>ao,delimiter:()=>lR,dirname:()=>vh,extname:()=>yh,format:()=>cR,isAbsolute:()=>Ms,join:()=>yr,normalize:()=>vT,normalizeString:()=>Wv,parse:()=>dR,relative:()=>df,resolve:()=>Ao,sep:()=>aR,toNamespacedPath:()=>uR});function Sd(t=""){return!t||!t.includes("\\")?t:t.replace(/\\/g,"/")}var Wue=/^[/\\]{2}/,jue=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,cW=/^[A-Za-z]:$/,aR="/",lR=":",vT=function(t){if(t.length===0)return".";t=Sd(t);let e=t.match(Wue),r=Ms(t),n=t[t.length-1]==="/";return t=Wv(t,!r),t.length===0?r?"/":n?"./":".":(n&&(t+="/"),cW.test(t)&&(t+="/"),e?r?`//${t}`:`//./${t}`:r&&!Ms(t)?`/${t}`:t)},yr=function(...t){if(t.length===0)return".";let e;for(let r of t)r&&r.length>0&&(e===void 0?e=r:e+=`/${r}`);return e===void 0?".":vT(e.replace(/\/\/+/g,"/"))};function zue(){return typeof process<"u"?process.cwd().replace(/\\/g,"/"):"/"}var Ao=function(...t){t=t.map(n=>Sd(n));let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:zue();!i||i.length===0||(e=`${i}/${e}`,r=Ms(i))}return e=Wv(e,!r),r&&!Ms(e)?`/${e}`:e.length>0?e:"."};function Wv(t,e){let r="",n=0,i=-1,o=0,s=null;for(let a=0;a<=t.length;++a){if(a<t.length)s=t[a];else{if(s==="/")break;s="/"}if(s==="/"){if(!(i===a-1||o===1))if(o===2){if(r.length<2||n!==2||r[r.length-1]!=="."||r[r.length-2]!=="."){if(r.length>2){let l=r.lastIndexOf("/");l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=a,o=0;continue}else if(r.length>0){r="",n=0,i=a,o=0;continue}}e&&(r+=r.length>0?"/..":"..",n=2)}else r.length>0?r+=`/${t.slice(i+1,a)}`:r=t.slice(i+1,a),n=a-i-1;i=a,o=0}else s==="."&&o!==-1?++o:o=-1}return r}var Ms=function(t){return jue.test(t)},uR=function(t){return Sd(t)},$ue=/.(\.[^./]+)$/,yh=function(t){let e=$ue.exec(Sd(t));return e&&e[1]||""},df=function(t,e){let r=Ao(t).split("/"),n=Ao(e).split("/"),i=[...r];for(let o of i){if(n[0]!==o)break;r.shift(),n.shift()}return[...r.map(()=>".."),...n].join("/")},vh=function(t){let e=Sd(t).replace(/\/$/,"").split("/").slice(0,-1);return e.length===1&&cW.test(e[0])&&(e[0]+="/"),e.join("/")||(Ms(t)?"/":".")},cR=function(t){let e=[t.root,t.dir,t.base??t.name+t.ext].filter(Boolean);return Sd(t.root?Ao(...e):e.join("/"))},ai=function(t,e){let r=Sd(t).split("/").pop();return e&&r.endsWith(e)?r.slice(0,-e.length):r},dR=function(t){let e=Sd(t).split("/").shift()||"/",r=ai(t),n=yh(r);return{root:e,dir:vh(t),base:r,ext:n,name:r.slice(0,r.length-n.length)}},ao={__proto__:null,basename:ai,delimiter:lR,dirname:vh,extname:yh,format:cR,isAbsolute:Ms,join:yr,normalize:vT,normalizeString:Wv,parse:dR,relative:df,resolve:Ao,sep:aR,toNamespacedPath:uR};var Fl=window.require("child_process"),dW=Fl,VWe=Fl._forkChild,KWe=Fl.ChildProcess,pf=Fl.exec,YWe=Fl.execFile,XWe=Fl.execFileSync,_T=Fl.execSync,JWe=Fl.fork,pW=Fl.spawn,QWe=Fl.spawnSync;xr();var tn=t=>{if(t==null)throw new Error("bang");return t};function fW(t){if(typeof t!="string")throw new Error("\u274C not a string");return t}function gR(t){let e=t.match(/{([^{}]+)}/);if(!e)return[t];let r=e[1].split(","),n=new Set;for(let i of r)gR(t.replace(e[0],i)).forEach(s=>n.add(s));return Array.from(n)}var Uu=class{constructor(e,r,n){this.node=e;this.slotIx=r;this.type=n}};var mW=()=>yR,yR={___AUTO___:!0};var bT=t=>t instanceof Error?t.message:typeof t=="string"?t:typeof t=="object"?t.message||JSON.stringify(t):String(t);xr();Oo();async function hW(t,e,r=30,n,i){let o=e+".frames.txt",s=t.map(p=>`file '${vR($v(e),p).replace("\\","/")}'`).join(`
`);en(o,s,"utf-8");let a=(i?.transparent,"-pix_fmt yuva420p "),l=["ffmpeg","-f concat","-safe 0",`-r ${r}`,`-i "${o}"`,"-c:v libx264",'-vf "fps=60"',`${a}"${e}"`],c=l.join(" ");console.info(`Working directory: ${n}`),console.info(`Creating video with command: ${c}`);try{let p=_T(c,{cwd:n}),f=p.toString();return console.info(`[out] ${p}`),console.info(`Video created successfully: ${e}`),{ffmpegCommand:l.join(` \\
    `),framesFilePath:o,framesFileContent:s}}catch(p){console.error("Error creating video:",bT(p))}}var ur=t=>{if(!Ms(t))throw new Error(`path is not absolute: ${t}`);return t},$r=t=>{if(Ms(t))throw new Error(`path is absolute: ${t}`);return t};var jw=class t{constructor(e,r){this.st=e;this.Konva=r;this.fillFullLayerWithGradient=(e,r,n)=>{r.add(new this.Rect({x:0,y:0,width:e.width(),height:e.height(),fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:e.width(),y:e.height()},fillLinearGradientColorStops:n,listening:!1}))};this.loadImage=this.getHTMLImage_fromURL;this.createContainer=()=>document.getElementById("konvaPreview")??document.createElement("div");this.createContainerDebug=()=>{let e=this.createContainer();return e.style.width="300px",e.id="konvaPreview",e.style.height="450px",e.style.zIndex="99999999",e.style.border="1px solid red",e.style.position="absolute",e.style.top="10px",e.style.left="10px",document.body.appendChild(e),e};this.Stage=r.Stage,this.Layer=r.Layer,this.Image=r.Image,this.Text=r.Text,this.Rect=r.Rect}static{this.init=async e=>{let r=await Promise.resolve().then(()=>ie(yP(),1));return new t(e,r.default)}}getHTMLImage_fromPath(e){return new Promise((r,n)=>{let i=Ms(e)?e:Ao(this.st.rootPath,e),o=new Image;o.onload=()=>r(o),o.onerror=n,o.src="file://"+i})}getHTMLImage_fromURL(e){return new Promise((r,n)=>{let i=new Image;i.onload=()=>r(i),i.onerror=n,i.src=e})}};var vP=async(t,e)=>{if(!t)throw new Error("Missing OPENROUTER_API_KEY");let r=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",body:JSON.stringify(e),headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()};var Bz={"openrouter/auto":{id:"openrouter/auto",name:"Auto (best for prompt)",pricing:{prompt:"-1",completion:"-1"},context_length:128e3,architecture:{tokenizer:"Router",instruct_type:null},top_provider:{max_completion_tokens:null},per_request_limits:null},"mistralai/mistral-7b-instruct":{id:"mistralai/mistral-7b-instruct",name:"Mistral 7B Instruct",pricing:{prompt:"0",completion:"0"},context_length:8192,architecture:{tokenizer:"Mistral",instruct_type:"llama2"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"Infinity",completion_tokens:"Infinity"}},"huggingfaceh4/zephyr-7b-beta":{id:"huggingfaceh4/zephyr-7b-beta",name:"Hugging Face: Zephyr 7B",pricing:{prompt:"0",completion:"0"},context_length:4096,architecture:{tokenizer:"Mistral",instruct_type:"zephyr"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"Infinity",completion_tokens:"Infinity"}},"openchat/openchat-7b":{id:"openchat/openchat-7b",name:"OpenChat 3.5",pricing:{prompt:"0",completion:"0"},context_length:8192,architecture:{tokenizer:"Mistral",instruct_type:"openchat"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"Infinity",completion_tokens:"Infinity"}},"undi95/toppy-m-7b":{id:"undi95/toppy-m-7b",name:"Toppy M 7B",pricing:{prompt:"0",completion:"0"},context_length:32768,architecture:{tokenizer:"Mistral",instruct_type:"alpaca"},top_provider:{max_completion_tokens:2048},per_request_limits:{prompt_tokens:"Infinity",completion_tokens:"Infinity"}},"gryphe/mythomist-7b":{id:"gryphe/mythomist-7b",name:"MythoMist 7B",pricing:{prompt:"0",completion:"0"},context_length:32768,architecture:{tokenizer:"Mistral",instruct_type:"alpaca"},top_provider:{max_completion_tokens:2048},per_request_limits:{prompt_tokens:"Infinity",completion_tokens:"Infinity"}},"nousresearch/nous-capybara-34b":{id:"nousresearch/nous-capybara-34b",name:"Nous: Capybara 34B",pricing:{prompt:"0.000002",completion:"0.000002"},context_length:32e3,architecture:{tokenizer:"Llama2",instruct_type:"vicuna"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"1569799",completion_tokens:"1569799"}},"jebcarter/psyfighter-13b":{id:"jebcarter/psyfighter-13b",name:"Psyfighter 13B",pricing:{prompt:"0.000001",completion:"0.000001"},context_length:4096,architecture:{tokenizer:"Llama2",instruct_type:"alpaca"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"3139598",completion_tokens:"3139598"}},"nousresearch/nous-hermes-llama2-13b":{id:"nousresearch/nous-hermes-llama2-13b",name:"Nous: Hermes 13B",pricing:{prompt:"0.00000015",completion:"0.00000015"},context_length:4096,architecture:{tokenizer:"Llama2",instruct_type:"alpaca"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"20930657",completion_tokens:"20930657"}},"phind/phind-codellama-34b":{id:"phind/phind-codellama-34b",name:"Phind: CodeLlama 34B v2",pricing:{prompt:"0.0000004",completion:"0.0000004"},context_length:4096,architecture:{tokenizer:"Llama2",instruct_type:"alpaca"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"7848996",completion_tokens:"7848996"}},"intel/neural-chat-7b":{id:"intel/neural-chat-7b",name:"Neural Chat 7B v3.1",pricing:{prompt:"0.000005",completion:"0.000005"},context_length:4096,architecture:{tokenizer:"Mistral",instruct_type:"neural"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"627919",completion_tokens:"627919"}},"haotian-liu/llava-13b":{id:"haotian-liu/llava-13b",name:"Llava 13B",pricing:{prompt:"0.000005",completion:"0.000005"},context_length:2048,architecture:{tokenizer:"Llama2",instruct_type:null},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"627919",completion_tokens:"627919"}},"meta-llama/llama-2-13b-chat":{id:"meta-llama/llama-2-13b-chat",name:"Meta: Llama v2 13B Chat",pricing:{prompt:"0.0000002345",completion:"0.0000002345"},context_length:4096,architecture:{tokenizer:"Llama2",instruct_type:"llama2"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"13388480",completion_tokens:"13388480"}},"alpindale/goliath-120b":{id:"alpindale/goliath-120b",name:"Goliath 120B",pricing:{prompt:"0.00000703125",completion:"0.00000703125"},context_length:6144,architecture:{tokenizer:"Llama2",instruct_type:"vicuna"},top_provider:{max_completion_tokens:300},per_request_limits:{prompt_tokens:"446520",completion_tokens:"446520"}},"lizpreciatior/lzlv-70b-fp16-hf":{id:"lizpreciatior/lzlv-70b-fp16-hf",name:"lzlv 70B",pricing:{prompt:"0.00000056",completion:"0.00000076"},context_length:4096,architecture:{tokenizer:"Llama2",instruct_type:"vicuna"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"5606426",completion_tokens:"4131050"}},"openai/gpt-3.5-turbo":{id:"openai/gpt-3.5-turbo",name:"OpenAI: GPT-3.5 Turbo",pricing:{prompt:"0.000001",completion:"0.000002"},context_length:4095,architecture:{tokenizer:"GPT",instruct_type:null},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"3139598",completion_tokens:"1569799"}},"openai/gpt-3.5-turbo-1106":{id:"openai/gpt-3.5-turbo-1106",name:"OpenAI: GPT-3.5 Turbo 16k (preview)",pricing:{prompt:"0.000001",completion:"0.000002"},context_length:16385,architecture:{tokenizer:"GPT",instruct_type:null},top_provider:{max_completion_tokens:4096},per_request_limits:{prompt_tokens:"3139598",completion_tokens:"1569799"}},"openai/gpt-3.5-turbo-0301":{id:"openai/gpt-3.5-turbo-0301",name:"OpenAI: GPT-3.5 Turbo (older v0301)",pricing:{prompt:"0.000001",completion:"0.000002"},context_length:4095,architecture:{tokenizer:"GPT",instruct_type:null},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"3139598",completion_tokens:"1569799"}},"openai/gpt-3.5-turbo-16k":{id:"openai/gpt-3.5-turbo-16k",name:"OpenAI: GPT-3.5 Turbo 16k",pricing:{prompt:"0.000003",completion:"0.000004"},context_length:16385,architecture:{tokenizer:"GPT",instruct_type:null},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"1046532",completion_tokens:"784899"}},"openai/gpt-4-1106-preview":{id:"openai/gpt-4-1106-preview",name:"OpenAI: GPT-4 Turbo (preview)",pricing:{prompt:"0.00001",completion:"0.00003"},context_length:128e3,architecture:{tokenizer:"GPT",instruct_type:null},top_provider:{max_completion_tokens:4096},per_request_limits:{prompt_tokens:"313959",completion_tokens:"104653"}},"openai/gpt-4":{id:"openai/gpt-4",name:"OpenAI: GPT-4",pricing:{prompt:"0.00003",completion:"0.00006"},context_length:8191,architecture:{tokenizer:"GPT",instruct_type:null},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"104653",completion_tokens:"52326"}},"openai/gpt-4-0314":{id:"openai/gpt-4-0314",name:"OpenAI: GPT-4 (older v0314)",pricing:{prompt:"0.00003",completion:"0.00006"},context_length:8191,architecture:{tokenizer:"GPT",instruct_type:null},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"104653",completion_tokens:"52326"}},"openai/gpt-4-32k":{id:"openai/gpt-4-32k",name:"OpenAI: GPT-4 32k",pricing:{prompt:"0.00006",completion:"0.00012"},context_length:32767,architecture:{tokenizer:"GPT",instruct_type:null},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"52326",completion_tokens:"26163"}},"openai/gpt-4-32k-0314":{id:"openai/gpt-4-32k-0314",name:"OpenAI: GPT-4 32k (older v0314)",pricing:{prompt:"0.00006",completion:"0.00012"},context_length:32767,architecture:{tokenizer:"GPT",instruct_type:null},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"52326",completion_tokens:"26163"}},"openai/gpt-4-vision-preview":{id:"openai/gpt-4-vision-preview",name:"OpenAI: GPT-4 Vision (preview)",pricing:{prompt:"0.00001",completion:"0.00003"},context_length:128e3,architecture:{tokenizer:"GPT",instruct_type:null},top_provider:{max_completion_tokens:4096},per_request_limits:{prompt_tokens:"313959",completion_tokens:"104653"}},"openai/text-davinci-002":{id:"openai/text-davinci-002",name:"OpenAI: Davinci 2",pricing:{prompt:"0.00002",completion:"0.00002"},context_length:4095,architecture:{tokenizer:"GPT",instruct_type:"gpt"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"156979",completion_tokens:"156979"}},"openai/gpt-3.5-turbo-instruct":{id:"openai/gpt-3.5-turbo-instruct",name:"OpenAI: GPT-3.5 Turbo Instruct",pricing:{prompt:"0.0000015",completion:"0.000002"},context_length:4095,architecture:{tokenizer:"GPT",instruct_type:"gpt"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"2093065",completion_tokens:"1569799"}},"google/palm-2-chat-bison":{id:"google/palm-2-chat-bison",name:"Google: PaLM 2 Chat",pricing:{prompt:"0.0000005",completion:"0.0000005"},context_length:9216,architecture:{tokenizer:"PaLM",instruct_type:null},top_provider:{max_completion_tokens:1024},per_request_limits:{prompt_tokens:"6279197",completion_tokens:"6279197"}},"google/palm-2-codechat-bison":{id:"google/palm-2-codechat-bison",name:"Google: PaLM 2 Code Chat",pricing:{prompt:"0.0000005",completion:"0.0000005"},context_length:7168,architecture:{tokenizer:"PaLM",instruct_type:null},top_provider:{max_completion_tokens:1024},per_request_limits:{prompt_tokens:"6279197",completion_tokens:"6279197"}},"google/palm-2-chat-bison-32k":{id:"google/palm-2-chat-bison-32k",name:"Google: PaLM 2 Chat 32k",pricing:{prompt:"0.0000005",completion:"0.0000005"},context_length:32e3,architecture:{tokenizer:"PaLM",instruct_type:null},top_provider:{max_completion_tokens:8192},per_request_limits:{prompt_tokens:"6279197",completion_tokens:"6279197"}},"google/palm-2-codechat-bison-32k":{id:"google/palm-2-codechat-bison-32k",name:"Google: PaLM 2 Code Chat 32k",pricing:{prompt:"0.0000005",completion:"0.0000005"},context_length:32e3,architecture:{tokenizer:"PaLM",instruct_type:null},top_provider:{max_completion_tokens:8192},per_request_limits:{prompt_tokens:"6279197",completion_tokens:"6279197"}},"perplexity/pplx-70b-online":{id:"perplexity/pplx-70b-online",name:"Perplexity: PPLX 70B Online",pricing:{prompt:"0",completion:"0.0000028"},context_length:4096,architecture:{tokenizer:"Llama2",instruct_type:null},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"Infinity",completion_tokens:"Infinity"}},"perplexity/pplx-7b-online":{id:"perplexity/pplx-7b-online",name:"Perplexity: PPLX 7B Online",pricing:{prompt:"0",completion:"0.00000028"},context_length:4096,architecture:{tokenizer:"Llama2",instruct_type:null},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"Infinity",completion_tokens:"Infinity"}},"perplexity/pplx-7b-chat":{id:"perplexity/pplx-7b-chat",name:"Perplexity: PPLX 7B Chat",pricing:{prompt:"0.00000007",completion:"0.00000028"},context_length:8192,architecture:{tokenizer:"Llama2",instruct_type:null},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"44851408",completion_tokens:"11212852"}},"perplexity/pplx-70b-chat":{id:"perplexity/pplx-70b-chat",name:"Perplexity: PPLX 70B Chat",pricing:{prompt:"0.0000007",completion:"0.0000028"},context_length:4096,architecture:{tokenizer:"Llama2",instruct_type:null},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"4485140",completion_tokens:"1121285"}},"meta-llama/llama-2-70b-chat":{id:"meta-llama/llama-2-70b-chat",name:"Meta: Llama v2 70B Chat",pricing:{prompt:"0.0000007",completion:"0.00000095"},context_length:4096,architecture:{tokenizer:"Llama2",instruct_type:"llama2"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"4485140",completion_tokens:"3304840"}},"nousresearch/nous-hermes-llama2-70b":{id:"nousresearch/nous-hermes-llama2-70b",name:"Nous: Hermes 70B",pricing:{prompt:"0.0000009",completion:"0.0000009"},context_length:4096,architecture:{tokenizer:"Llama2",instruct_type:"alpaca"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"3488442",completion_tokens:"3488442"}},"meta-llama/codellama-34b-instruct":{id:"meta-llama/codellama-34b-instruct",name:"Meta: CodeLlama 34B Instruct",pricing:{prompt:"0.00000035",completion:"0.0000014"},context_length:16384,architecture:{tokenizer:"Llama2",instruct_type:"llama2"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"8970281",completion_tokens:"2242570"}},"jondurbin/airoboros-l2-70b":{id:"jondurbin/airoboros-l2-70b",name:"Airoboros 70B",pricing:{prompt:"0.0000007",completion:"0.00000095"},context_length:4096,architecture:{tokenizer:"Llama2",instruct_type:"airoboros"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"4485140",completion_tokens:"3304840"}},"migtissera/synthia-70b":{id:"migtissera/synthia-70b",name:"Synthia 70B",pricing:{prompt:"0.0000065625",completion:"0.0000065625"},context_length:8192,architecture:{tokenizer:"Llama2",instruct_type:"vicuna"},top_provider:{max_completion_tokens:300},per_request_limits:{prompt_tokens:"478415",completion_tokens:"478415"}},"open-orca/mistral-7b-openorca":{id:"open-orca/mistral-7b-openorca",name:"Mistral OpenOrca 7B",pricing:{prompt:"0.0000002",completion:"0.0000002"},context_length:8192,architecture:{tokenizer:"Mistral",instruct_type:"gpt"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"15697993",completion_tokens:"15697993"}},"teknium/openhermes-2-mistral-7b":{id:"teknium/openhermes-2-mistral-7b",name:"OpenHermes 2 Mistral 7B",pricing:{prompt:"0.0000002",completion:"0.0000002"},context_length:4096,architecture:{tokenizer:"Mistral",instruct_type:"gpt"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"15697993",completion_tokens:"15697993"}},"teknium/openhermes-2.5-mistral-7b":{id:"teknium/openhermes-2.5-mistral-7b",name:"OpenHermes 2.5 Mistral 7B",pricing:{prompt:"0.0000002",completion:"0.0000002"},context_length:4096,architecture:{tokenizer:"Mistral",instruct_type:"gpt"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"15697993",completion_tokens:"15697993"}},"pygmalionai/mythalion-13b":{id:"pygmalionai/mythalion-13b",name:"Pygmalion: Mythalion 13B",pricing:{prompt:"0.000001125",completion:"0.000001125"},context_length:8192,architecture:{tokenizer:"Llama2",instruct_type:"alpaca"},top_provider:{max_completion_tokens:250},per_request_limits:{prompt_tokens:"2790754",completion_tokens:"2790754"}},"undi95/remm-slerp-l2-13b":{id:"undi95/remm-slerp-l2-13b",name:"ReMM SLERP 13B",pricing:{prompt:"0.000001125",completion:"0.000001125"},context_length:6144,architecture:{tokenizer:"Llama2",instruct_type:"alpaca"},top_provider:{max_completion_tokens:250},per_request_limits:{prompt_tokens:"2790754",completion_tokens:"2790754"}},"xwin-lm/xwin-lm-70b":{id:"xwin-lm/xwin-lm-70b",name:"Xwin 70B",pricing:{prompt:"0.0000065625",completion:"0.0000065625"},context_length:8192,architecture:{tokenizer:"Llama2",instruct_type:"vicuna"},top_provider:{max_completion_tokens:300},per_request_limits:{prompt_tokens:"478415",completion_tokens:"478415"}},"gryphe/mythomax-l2-13b-8k":{id:"gryphe/mythomax-l2-13b-8k",name:"MythoMax 13B 8k",pricing:{prompt:"0.000001125",completion:"0.000001125"},context_length:8192,architecture:{tokenizer:"Llama2",instruct_type:"alpaca"},top_provider:{max_completion_tokens:250},per_request_limits:{prompt_tokens:"2790754",completion_tokens:"2790754"}},"neversleep/noromaid-20b":{id:"neversleep/noromaid-20b",name:"Noromaid 20B",pricing:{prompt:"0.00000225",completion:"0.00000225"},context_length:8192,architecture:{tokenizer:"Llama2",instruct_type:"alpaca"},top_provider:{max_completion_tokens:300},per_request_limits:{prompt_tokens:"1395377",completion_tokens:"1395377"}},"anthropic/claude-2":{id:"anthropic/claude-2",name:"Anthropic: Claude v2.1",pricing:{prompt:"0.000008",completion:"0.000024"},context_length:2e5,architecture:{tokenizer:"Claude",instruct_type:"claude"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"392449",completion_tokens:"130816"}},"anthropic/claude-2.0":{id:"anthropic/claude-2.0",name:"Anthropic: Claude v2.0",pricing:{prompt:"0.000008",completion:"0.000024"},context_length:1e5,architecture:{tokenizer:"Claude",instruct_type:"claude"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"392449",completion_tokens:"130816"}},"anthropic/claude-instant-v1":{id:"anthropic/claude-instant-v1",name:"Anthropic: Claude Instant v1",pricing:{prompt:"0.00000163",completion:"0.00000551"},context_length:1e5,architecture:{tokenizer:"Claude",instruct_type:"claude"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"1926134",completion_tokens:"569800"}},"anthropic/claude-v1":{id:"anthropic/claude-v1",name:"Anthropic: Claude v1",pricing:{prompt:"0.000008",completion:"0.000024"},context_length:9e3,architecture:{tokenizer:"Claude",instruct_type:"claude"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"392449",completion_tokens:"130816"}},"anthropic/claude-1.2":{id:"anthropic/claude-1.2",name:"Anthropic: Claude (older v1)",pricing:{prompt:"0.000008",completion:"0.000024"},context_length:9e3,architecture:{tokenizer:"Claude",instruct_type:"claude"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"392449",completion_tokens:"130816"}},"anthropic/claude-instant-v1-100k":{id:"anthropic/claude-instant-v1-100k",name:"Anthropic: Claude Instant 100k v1",pricing:{prompt:"0.00000163",completion:"0.00000551"},context_length:1e5,architecture:{tokenizer:"Claude",instruct_type:"claude"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"1926134",completion_tokens:"569800"}},"anthropic/claude-v1-100k":{id:"anthropic/claude-v1-100k",name:"Anthropic: Claude 100k v1",pricing:{prompt:"0.000008",completion:"0.000024"},context_length:1e5,architecture:{tokenizer:"Claude",instruct_type:"claude"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"392449",completion_tokens:"130816"}},"anthropic/claude-instant-1.0":{id:"anthropic/claude-instant-1.0",name:"Anthropic: Claude Instant (older v1)",pricing:{prompt:"0.00000163",completion:"0.00000551"},context_length:9e3,architecture:{tokenizer:"Claude",instruct_type:"claude"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"1926134",completion_tokens:"569800"}},"mancer/weaver":{id:"mancer/weaver",name:"Mancer: Weaver (alpha)",pricing:{prompt:"0.0000045",completion:"0.0000045"},context_length:8e3,architecture:{tokenizer:"Llama2",instruct_type:"alpaca"},top_provider:{max_completion_tokens:350},per_request_limits:{prompt_tokens:"697688",completion_tokens:"697688"}},"gryphe/mythomax-l2-13b":{id:"gryphe/mythomax-l2-13b",name:"MythoMax 13B",pricing:{prompt:"0.0000006",completion:"0.0000006"},context_length:4096,architecture:{tokenizer:"Llama2",instruct_type:"alpaca"},top_provider:{max_completion_tokens:null},per_request_limits:{prompt_tokens:"5232664",completion_tokens:"5232664"}}};var zw=class{constructor(e){this.store=e;this.set=e=>{let n={imageID:typeof e=="string"?e:e.id};this.store.update({json:n})};this.clear=()=>{let e={};this.store.update({json:e})};Ce(this)}get image(){return this.store.st.db.media_images.get(this.imageID)}get imageOrCrash(){return this.store.st.db.media_images.getOrThrow(this.imageID)}get data(){return this.store.get()}get imageID(){return this.data.imageID}};var $w=class t{constructor(e){this.step=e;this.fs=yt;this.path=Ed;this.child_process=dW;this.getLoraAssociatedTriggerWords=e=>this.st.configFile.value?.loraPrompts?.[e]?.text;this.create_ComfyUIWorkflow=()=>this.st.db.graphs.create({comfyPromptJSON:{},metadata:{},stepID:this.step.id});this.create_ComfyUIWorkflow_forTestPurpose=e=>{let r=this.st.db.graphs.create({comfyPromptJSON:{},metadata:{},stepID:this.step.id}),n=r.builder,i=n.CheckpointLoaderSimple({ckpt_name:"lyriel_v15.safetensors"});return n.PreviewImage({images:n.VAEDecode({vae:i,samples:n.KSampler({latent_image:n.EmptyLatentImage({}),model:i,sampler_name:"ddim",scheduler:"ddim_uniform",positive:n.CLIPTextEncode({clip:i,text:e.positivePrompt}),negative:n.CLIPTextEncode({clip:i,text:"nsfw, nude"})})})}),r};this.llm_ask_OpenRouter=async e=>await vP(this.st.configFile.value.OPENROUTER_API_KEY,e);this.llm_allModels=Bz;this.llm_ask_PromptMaster=async(e,r="openai/gpt-3.5-turbo-instruct")=>{let n=await vP(this.st.configFile.value.OPENROUTER_API_KEY,{max_tokens:300,model:r,messages:[{role:"system",content:["You are an assistant in charge of writing a prompt to be submitted to a stable distribution ai image generative pipeline.","Write a prompt describing the user submited topic in a way that will help the ai generate a relevant image.","Your answer must be arond 500 chars in length","Start with most important words describing the prompt","Include lots of adjective and advers. no full sentences. remove useless words","try to include a long list coma separated words.","Once main keywords are in, if you still have character to add, include vaiours beauty or artsy words","ONLY answer with the prompt itself. DO NOT answer anything else. No Hello, no thanks, no signature, no nothing."].join(`
`)},{role:"user",content:e}]});if(n.choices.length===0)throw new Error("no choices in response");let i=n.choices[0].message;if(i==null)throw new Error("choice 0 is null");if(typeof i=="string")throw new Error("choice 0 seems to be an error");return{prompt:i.content??"",llmResponse:n}};this.getStore_orCrashIfMissing=e=>this.st.db.custom_datas.getOrThrow(e);this.getStore_orCreateIfMissing=(e,r)=>this.st.db.custom_datas.getOrCreate(e,()=>({id:e,json:r()}));this.executeDraft=async(e,r)=>{throw new Error("\u{1F534} not yet implemented")};this.getLoraAssociatedMetadata=e=>this.st.configFile.value?.loraPrompts?.[e];this.add_previewImageWithAlpha=e=>this.nodes.PreviewImage({images:this.nodes.JoinImageWithAlpha({image:e,alpha:e})});this.add_previewImage=e=>this.nodes.PreviewImage({images:e});this.add_saveImage=(e,r)=>this.nodes.SaveImage({images:e,filename_prefix:r});this.AUTO=mW;this.chooseRandomly=e=>e[Math.floor(Math.random()*e.length)];this.run=async e=>{let r=Date.now(),n=this.step.executable,i=this.step.data.formResult,o=this.step.data.formSerial.values_;this.formResult=i,this.formSerial=o,this.formInstance=e.formInstance;try{if(n==null)return console.log("\u274C action not found"),{type:"error",error:"action not found"};await n.run(this,i),console.log(`\u{1F534} after: size=${this.workflow.nodes.length}`),console.log("[\u2705] RUN SUCCESS");let s=Date.now()-r;return{type:"success"}}catch(s){return this.st.db.runtimeErrors.create({message:s.message??"no-message",infos:s,graphID:this.workflow.id,stepID:this.step.id}),{type:"error",error:s}}};this.hasLora=e=>this.schema.hasLora(e);this.hasCheckpoint=e=>this.schema.hasLora(e);this.exec_imagemagickConvert=(e,r,n)=>{let i=e.absPath,o=`${i}.${n}.png`,s=`convert "${i}" ${r} "${o}"`;return this.exec(s),o};this.getImageStore=e=>{let r=`app:${this.step.app.id}/imageStore/${e}`,n=this.imageStoresIndex.get(r);if(n)return n;let i=this.getStore_orCreateIfMissing(r,()=>({})),o=new zw(i);return this.imageStoresIndex.set(r,o),o};this.imageStoresIndex=new Map;this.findLastImageByPrefix=e=>this.generatedImages.find(r=>r.filename.startsWith(e));this.assets=Rr;this.loadImageSDK=()=>jw.init(this.st);this.sleep=e=>new Promise(r=>setTimeout(r,e));this.expandBraces=e=>gR(e);this.output_GaussianSplat=e=>{this.st.db.media_splats.create({url:e.url,stepID:this.step.id})};this.output_3dImage=e=>{let r=this.generatedImages.find(o=>o.filename.startsWith(e.image)),n=this.generatedImages.find(o=>o.filename.startsWith(e.depth)),i=this.generatedImages.find(o=>o.filename.startsWith(e.normal));if(r==null)throw new Error(`image not found: ${e.image}`);if(n==null)throw new Error(`image not found: ${e.image}`);if(i==null)throw new Error(`image not found: ${e.image}`);this.st.db.media_3d_displacement.create({width:r.data.width??512,height:r.data.height??512,image:r.url,depthMap:n.url,normalMap:i.url,stepID:this.step.id})};this.output_File=async(e,r)=>{let n=this.st.resolve(this.folder,e);en(n,r,"utf-8")};this.output_HTML=e=>{this.st.db.media_texts.create({kind:"html",title:e.title,content:e.htmlContent,stepID:this.step.id})};this.output_Markdown=e=>{let r=typeof e=="string"?"<no-title>":e.title,n=typeof e=="string"?e:e.markdownContent;this.st.db.media_texts.create({kind:"markdown",title:r,content:n,stepID:this.step.id})};this.output_text=e=>{let[r,n]=typeof e=="string"?["<no-title>",e]:[e.title,e.message],i=this.extractString(n);console.info(i),this.step.db.media_texts.create({kind:"text",title:r,content:i,stepID:this.step.id})};this.print=e=>{this.output_text({title:"<no-title>",message:e})};this.downloadURI=(e,r)=>{var n=document.createElement("a");n.download=r,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)};this.output_video=e=>{this.st.db.media_videos.create({url:e.url,absPath:e.filePath,stepID:this.step.id})};this.output_video_ffmpegGeneratedImagesTogether=async(e,r=30,n={})=>{console.log("\u{1F3A5} creating animation");let i=e??this.generatedImages;if(i.length===1)return this.step.recordError("only one image to create animation",{});if(i.length===0)return this.step.recordError("no images to create animation; did you forget to call prompt() first ?",{});console.info("\u{1F3A5} awaiting all files to be ready locally..."),await Promise.all(i.map(p=>p.finished)),console.info("\u{1F3A5} all files are ready locally");let o=this.st.cacheFolderPath,s=ur(yr(o,`video-${Date.now()}-${t.VideoCounter++}.mp4`));console.log("\u{1F3A5} outputAbsPath",o),console.log("\u{1F3A5} targetVideoAbsPath",s);let a=o;console.info(`\u{1F3A5} this.folder.path: ${this.folder}`),console.info(`\u{1F3A5} cwd: ${a}`);let l=i.map(p=>p.absPath).filter(p=>p!=null),c=await hW(l,s,r,a,n);c&&this.st.db.media_texts.create({kind:"markdown",title:"Video creation summary",stepID:this.step.id,content:`# Video creation summary

## command:

\`\`\`
${c.ffmpegCommand}
\`\`\`


## frames file path:

\`\`\`
${c.framesFilePath}
\`\`\`

## frames file content:

\`\`\`
${c.framesFileContent}
\`\`\`

`}),this.st.db.media_videos.create({url:`file://${s}`,absPath:s,stepID:this.step.id,filePath:s})};this.formatEmbeddingForComfyUI=e=>`embedding:${e}`;this.formatAsRelativeDateTime=e=>Ja(e);this.exec=e=>{this.output_text({title:"command",message:"\u{1F525} exec: "+e});let r=this.st.rootPath;return console.log("cwd",r),_T(e,{encoding:"utf-8",cwd:r})};this.loadImageAnswerAsEnum=async e=>{try{if(e.type==="CushyImage"){let r=this.st.db.media_images.getOrThrow(e.imageID);return r.absPath?(await this.upload_FileAtAbsolutePath(r.absPath)).name:r.absPath}if(e.type==="ComfyImage")return e.imageName;if(e.type==="PaintImage")throw new Error("\u{1F534} not implemented");gr(e)}catch(r){throw console.log("\u274C failed to convert ImageAnser to Enum_LoadImage_image",e),r}throw new Error("FAILURE to load image answer as enum")};this.loadImageAnswer2=async e=>{if(e.type==="CushyImage"){let r=this.st.db.media_images.getOrThrow(e.imageID);if(r.absPath){let n=await this.upload_FileAtAbsolutePath(r.absPath);return{img:this.nodes.LoadImage({image:n.name}),width:tn(r.data.width),height:tn(r.data.height)}}}throw new Error("ERROR")};this.loadImageAnswer=async e=>{try{if(e.type==="CushyImage"){let r=this.st.db.media_images.getOrThrow(e.imageID);if(r.absPath){let n=await this.upload_FileAtAbsolutePath(r.absPath);return this.nodes.LoadImage({image:n.name})}return console.log(r.data),this.nodes.Image_Load({image_path:r.url??r.absPath,RGBA:"false"})}if(e.type==="ComfyImage")return this.nodes.LoadImage({image:e.imageName});if(e.type==="PaintImage")return this.nodes.Base64ImageInput({bas64_image:e.base64});throw gr(e),new Error("FAILURE")}catch(r){throw console.log("\u{1F534} failed to convert ImageAnser to _IMAGE",e),r}};this.extractString=e=>typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Uu?e.toString():typeof e=="object"?`${e.$schema.nameInCushy}_${e.uid}(${JSON.stringify(e.json,null,2)})`:`\u274C (impossible to extract string from ${typeof e} / ${e?.constructor?.name})`;this.resolveRelative=e=>$r(e);this.resolveAbsolute=e=>ur(e);this.range=(e,r,n=1)=>{let i=[];for(let o=e;o<r;o+=n)i.push(o);return i};this.load_FileAtAbsolutePath=async e=>{let r=await this.st.uploader.upload_FileAtAbsolutePath(e);return this.loadImageAnswer({type:"ComfyImage",imageName:r.name})};this.load_ImageAtURL=async e=>{let r=await this.st.uploader.upload_ImageAtURL(e);return this.loadImageAnswer({type:"ComfyImage",imageName:r.name})};this.load_dataURL=async e=>{let r=await this.st.uploader.upload_dataURL(e);return this.loadImageAnswer({type:"ComfyImage",imageName:r.name})};this.load_Asset=async e=>{let r=await this.st.uploader.upload_Asset(e);return this.loadImageAnswer({type:"ComfyImage",imageName:r.name})};this.load_Blob=async e=>{let r=await this.st.uploader.upload_Blob(e);return this.loadImageAnswer({type:"ComfyImage",imageName:r.name})};this._promptCounter=0;this.st=e.st,this.folder=e.st.outputFolderPath,this.upload_FileAtAbsolutePath=this.st.uploader.upload_FileAtAbsolutePath.bind(this.st.uploader),this.upload_ImageAtURL=this.st.uploader.upload_ImageAtURL.bind(this.st.uploader),this.upload_dataURL=this.st.uploader.upload_dataURL.bind(this.st.uploader),this.upload_Asset=this.st.uploader.upload_Asset.bind(this.st.uploader),this.upload_Blob=this.st.uploader.upload_Blob.bind(this.st.uploader)}get hosts(){return this.st.db.hosts.findAll()}get mainHost(){return this.st.mainHost}get schema(){return this.st.schema}get workflow(){return this.step.outputWorkflow.item}get nodes(){return this.workflow.builder}get lastImage(){return this.generatedImages[this.generatedImages.length-1]}get generatedImages(){return this.step.generatedImages}static{this.VideoCounter=1}get wildcards(){return this.st.wildcards}randomSeed(){return Math.floor(Math.random()*99999999)}async PROMPT(e){console.info("prompt requested");let r=await this.workflow.PROMPT({step:this.step,idMode:e?.ids});return r.RUNTIME=this,await r.finished,r}};var Wz=(t,e)=>Object.defineProperties(t.prototype,Object.getOwnPropertyDescriptors(e.prototype)),Qu=t=>{};var Un=class{constructor(e){this.p=e;this.map=e=>this.items.map(e);Ce(this)}get items(){let e=this.p.table();return(this.p.cache?.()??!1)||Qu(e.liveEntities.size),e.find(this.p.where(),this.p.options)}get length(){return this.items.length}};var Jn=class{constructor(e,r,n){this.owner=e;this.key=r;this.table=n}get id(){return this.owner.data[this.key]}get debugStr(){return`LiveRef: ${this.owner.table.name}->${this.table}(${this.id})`}get item(){let e=this.owner.db;return this.table().getOrThrow(this.id)}};var Po=class{constructor(e,r,n){this.owner=e;this.key=r;this.table=n}get id(){return this.owner.data[this.key]}get itemOrCrash(){let e=this.owner.db;if(this.id==null)throw new Error("\u274C LiveRefOpt.itemOrCrash: no id");return this.table().getOrThrow(this.id)}get item(){let e=this.owner.db;return this.table().get(this.id)}get debugStr(){return`LiveRefOpt: ${this.owner.table.name}->${this.table().name}(${this.id})`}};var Zu=class{constructor(){this.step=new Po(this,"stepID",()=>this.db.steps)}};function jz(t){let e=new DataView(t);if(![137,80,78,71,13,10,26,10].every((o,s)=>e.getUint8(s)===o))throw new Error("Not a PNG file.");let n=e.getUint32(8);if(e.getUint32(12)===1229472850){let o=e.getUint32(16),s=e.getUint32(20);return{width:o,height:s}}else throw new Error("IHDR chunk not found.")}var Lge=t=>t.comfyHostHttpURL+"/view?"+new URLSearchParams(t.comfyImageInfo).toString(),Hl=class{constructor(){this.promptRef=new Po(this,"promptID",()=>this.db.comfy_prompts);this.onCreate=()=>{this.downloadImageAndSaveToDisk()};this.downloadImageAndSaveToDisk=async()=>{let e=this.data.infos;if(e?.type!=="image-generated-by-comfy"||e.absPath!=null)return!0;let n=await(await fetch(this.url,{headers:{"Content-Type":"image/png"},method:"GET"})).arrayBuffer(),i;try{i=jz(n),this.update}catch(a){console.log(a)}let o=$r(yr(e.comfyImageInfo.subfolder,e.comfyImageInfo.filename)),s=this.st.resolve(this.st.outputFolderPath,o);return this.st.writeBinaryFile(s,Buffer.from(n)),this.update({infos:{...e,absPath:s},width:i?.width,height:i?.height}),console.info("\u{1F5BC}\uFE0F image saved"),this._resolve(this),!0};this.finished=new Promise((e,r)=>{this._resolve=e,this._rejects=r})}get filename(){let e=this.data.infos;return e==null?"null":e.type==="image-local"?ai(e.absPath):e.type==="image-base64"?e.base64Url:e.type==="image-generated-by-comfy"?ai(e.comfyImageInfo.filename):(gr(e),"unknown")}get prompt(){return this.promptRef.item}get graph(){return this.prompt?.graph.item}get ComfyNode(){let e=this.data.promptNodeID;return e==null?null:this.graph?.data.comfyPromptJSON[e]}get ComfyNodeMetadta(){let e=this.data.promptNodeID;return e==null?null:this.graph?.data.metadata[e]}get url(){let e=this.data.infos;return e==null?`file://${Rr.CushyLogo_png}`:e.type==="image-local"?`file://${e.absPath}`:e.type==="image-base64"?e.base64Url:e.type==="image-generated-by-comfy"?e.absPath?`file://${e.absPath}`:Lge(e):(gr(e),`file://${Rr.CushyLogo_png}`)}get absPath(){let e=this.url;if(e.startsWith("file://"))return ur(e.slice(7))}get existsLocally(){return this.absPath!=null}};var ec=class{constructor(){this.step=new Po(this,"stepID",()=>this.db.steps)}};var tc=class{constructor(){this.step=new Po(this,"stepID",()=>this.db.steps);this.prompt=new Po(this,"promptID",()=>this.db.comfy_prompts)}get url(){return this.data.url}};var bf=class{constructor(){this.start=async e=>{if(this.executable==null)return console.log("\u{1F534} no action found");this.runtime=new $w(this),this.update({status:"Running"}),(await this.runtime.run(e)).type==="error"?this.update({status:"Failure"}):this.comfy_prompts.items.every(i=>i.data.executed)&&this.update({status:"Success"})};this.appL=new Jn(this,"appID",()=>this.db.cushy_apps);this.outputWorkflow=new Jn(this,"outputGraphID",()=>this.db.graphs);this._CACHE_INVARIANT=()=>this.data.status!=="Running";this.texts=new Un({table:()=>this.db.media_texts,where:()=>({stepID:this.id}),cache:this._CACHE_INVARIANT});this.images=new Un({table:()=>this.db.media_images,where:()=>({stepID:this.id}),cache:this._CACHE_INVARIANT});this.videos=new Un({table:()=>this.db.media_videos,where:()=>({stepID:this.id}),cache:this._CACHE_INVARIANT});this.displacements=new Un({table:()=>this.db.media_3d_displacement,where:()=>({stepID:this.id}),cache:this._CACHE_INVARIANT});this.splats=new Un({table:()=>this.db.media_splats,where:()=>({stepID:this.id}),cache:this._CACHE_INVARIANT});this.comfy_workflows=new Un({table:()=>this.db.graphs,where:()=>({stepID:this.id}),cache:this._CACHE_INVARIANT});this.comfy_prompts=new Un({table:()=>this.db.comfy_prompts,where:()=>({stepID:this.id}),cache:this._CACHE_INVARIANT});this.runtimeErrors=new Un({table:()=>this.db.runtimeErrors,where:()=>({stepID:this.id}),cache:this._CACHE_INVARIANT});this.runtime=null;this.recordError=(e,r)=>{this.db.runtimeErrors.create({stepID:this.id,graphID:this.outputWorkflow.id,message:e,infos:r})};this.userDefinedExpanded=null}get finalStatus(){return this.status!=="Success"?this.status:this.comfy_prompts.items.every(e=>e.data.executed)?"Success":"Running"}get app(){return this.appL.item}get status(){return this.data.status}get executable(){return this.app.executable}get name(){return this.data.name??this.app.name}get generatedImages(){return this.images.items}get currentlyExecutingOutput(){return this.comfy_prompts.items.find(e=>!e.data.executed)}get lastMediaOutput(){let e=this.outputs,r=e[e.length-1];return r instanceof Hl||r instanceof tc||r instanceof Zu||r instanceof ec||r instanceof Hl?r:null}get lastOutput(){let e=this.outputs;return e[e.length-1]}get outputs(){return[...this.texts.items,...this.images.items,...this.videos.items,...this.splats.items,...this.displacements.items,...this.comfy_workflows.items,...this.comfy_prompts.items,...this.runtimeErrors.items].sort((e,r)=>e.createdAt-r.createdAt)}get defaultExpanded(){return this.data.isExpanded===1}get expanded(){return this.userDefinedExpanded??this.defaultExpanded}set expanded(e){this.update({isExpanded:e?1:0})}};function ql({error:t,resetErrorBoundary:e}){return P("div",{role:"alert",children:[h("p",{children:"Something went wrong:"}),h("pre",{style:{color:"red"},children:t?.message})]})}var ui=F(function(e){let r=pe(),n=e.size?`${e.size}px`:r.historySizeStr;return h(fa,{FallbackComponent:ql,onReset:i=>{},children:h("div",{tw:"rounded cursor-pointer overflow-hidden",className:"virtualBorder shrink-0",style:{width:n,height:n},onClick:()=>_r(()=>r.focusedStepOutput=e.output),onMouseEnter:i=>_r(()=>r.hovered=e.output),onMouseLeave:()=>{r.hovered===e.output&&_r(()=>r.hovered=null)},children:e.children})})});var qr=ie(ve()),va=function(t,e){return Number(t.toFixed(e))},Mge=function(t,e){return typeof t=="number"?t:e},on=function(t,e,r){r&&typeof r=="function"&&r(t,e)},Fge=function(t){return-Math.cos(t*Math.PI)/2+.5},Uge=function(t){return t},Bge=function(t){return t*t},Wge=function(t){return t*(2-t)},jge=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},zge=function(t){return t*t*t},$ge=function(t){return--t*t*t+1},Hge=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},qge=function(t){return t*t*t*t},Gge=function(t){return 1- --t*t*t*t},Vge=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},Kge=function(t){return t*t*t*t*t},Yge=function(t){return 1+--t*t*t*t*t},Xge=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},Xz={easeOut:Fge,linear:Uge,easeInQuad:Bge,easeOutQuad:Wge,easeInOutQuad:jge,easeInCubic:zge,easeOutCubic:$ge,easeInOutCubic:Hge,easeInQuart:qge,easeOutQuart:Gge,easeInOutQuart:Vge,easeInQuint:Kge,easeOutQuint:Yge,easeInOutQuint:Xge},Jz=function(t){typeof t=="number"&&cancelAnimationFrame(t)},Gl=function(t){t.mounted&&(Jz(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function Qz(t,e,r,n){if(t.mounted){var i=new Date().getTime(),o=1;Gl(t),t.animation=function(){if(!t.mounted)return Jz(t.animation);var s=new Date().getTime()-i,a=s/r,l=Xz[e],c=l(a);s>=r?(n(o),t.animation=null):t.animation&&(n(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function Jge(t){var e=t.scale,r=t.positionX,n=t.positionY;return!(Number.isNaN(e)||Number.isNaN(r)||Number.isNaN(n))}function Ld(t,e,r,n){var i=Jge(e);if(!(!t.mounted||!i)){var o=t.setTransformState,s=t.transformState,a=s.scale,l=s.positionX,c=s.positionY,p=e.scale-a,f=e.positionX-l,m=e.positionY-c;r===0?o(e.scale,e.positionX,e.positionY):Qz(t,n,r,function(g){var v=a+p*g,_=l+f*g,S=c+m*g;o(v,_,S)})}}function Qge(t,e,r){var n=t.offsetWidth,i=t.offsetHeight,o=e.offsetWidth,s=e.offsetHeight,a=o*r,l=s*r,c=n-a,p=i-l;return{wrapperWidth:n,wrapperHeight:i,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:p}}var Zge=function(t,e,r,n,i,o,s){var a=t>e?r*(s?1:.5):0,l=n>i?o*(s?1:.5):0,c=t-e-a,p=a,f=n-i-l,m=l;return{minPositionX:c,maxPositionX:p,minPositionY:f,maxPositionY:m}},EP=function(t,e){var r=t.wrapperComponent,n=t.contentComponent,i=t.setup.centerZoomedOut;if(!r||!n)throw new Error("Components are not mounted");var o=Qge(r,n,e),s=o.wrapperWidth,a=o.wrapperHeight,l=o.newContentWidth,c=o.newDiffWidth,p=o.newContentHeight,f=o.newDiffHeight,m=Zge(s,l,c,a,p,f,!!i);return m},TP=function(t,e,r,n){return n?t<e?va(e,2):t>r?va(r,2):va(t,2):va(t,2)},Bh=function(t,e){var r=EP(t,e);return t.bounds=r,r};function Gw(t,e,r,n,i,o,s){var a=r.minPositionX,l=r.minPositionY,c=r.maxPositionX,p=r.maxPositionY,f=0,m=0;s&&(f=i,m=o);var g=TP(t,a-f,c+f,n),v=TP(e,l-m,p+m,n);return{x:g,y:v}}function Vw(t,e,r,n,i,o){var s=t.transformState,a=s.scale,l=s.positionX,c=s.positionY,p=n-a;if(typeof e!="number"||typeof r!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var f=l-e*p,m=c-r*p,g=Gw(f,m,i,o,0,0,null);return g}function d0(t,e,r,n,i){var o=i?n:0,s=e-o;return!Number.isNaN(r)&&t>=r?r:!Number.isNaN(e)&&t<=s?s:t}var zz=function(t,e){var r=t.setup.panning.excluded,n=t.isInitialized,i=t.wrapperComponent,o=e.target,s=i?.contains(o),a=n&&o&&s;if(!a)return!1;var l=Kw(o,r);return!l},$z=function(t){var e=t.isInitialized,r=t.isPanning,n=t.setup,i=n.panning.disabled,o=e&&r&&!i;return!!o},eye=function(t,e){var r=t.transformState,n=r.positionX,i=r.positionY;t.isPanning=!0;var o=e.clientX,s=e.clientY;t.startCoords={x:o-n,y:s-i}},tye=function(t,e){var r=e.touches,n=t.transformState,i=n.positionX,o=n.positionY;t.isPanning=!0;var s=r.length===1;if(s){var a=r[0].clientX,l=r[0].clientY;t.startCoords={x:a-i,y:l-o}}};function rye(t){var e=t.transformState,r=e.positionX,n=e.positionY,i=e.scale,o=t.setup,s=o.disabled,a=o.limitToBounds,l=o.centerZoomedOut,c=t.wrapperComponent;if(!(s||!c||!t.bounds)){var p=t.bounds,f=p.maxPositionX,m=p.minPositionX,g=p.maxPositionY,v=p.minPositionY,_=r>f||r<m,S=n>g||n<v,T=r>f?c.offsetWidth:t.setup.minPositionX||0,w=n>g?c.offsetHeight:t.setup.minPositionY||0,E=Vw(t,T,w,i,t.bounds,a||l),I=E.x,N=E.y;return{scale:i,positionX:_?I:r,positionY:S?N:n}}}function nye(t,e,r,n,i){var o=t.setup.limitToBounds,s=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,p=l.positionX,f=l.positionY;if(!(s===null||a===null||e===p&&r===f)){var m=Gw(e,r,a,o,n,i,s),g=m.x,v=m.y;t.setTransformState(c,g,v)}}var iye=function(t,e,r){var n=t.startCoords,i=t.transformState,o=t.setup.panning,s=o.lockAxisX,a=o.lockAxisY,l=i.positionX,c=i.positionY;if(!n)return{x:l,y:c};var p=e-n.x,f=r-n.y,m=s?l:p,g=a?c:f;return{x:m,y:g}},qw=function(t,e){var r=t.setup,n=t.transformState,i=n.scale,o=r.minScale,s=r.disablePadding;return e>0&&i>=o&&!s?e:0},oye=function(t){var e=t.mounted,r=t.setup,n=r.disabled,i=r.velocityAnimation,o=t.transformState.scale,s=i.disabled,a=!s||o>1||!n||e;return!!a},sye=function(t){var e=t.mounted,r=t.velocity,n=t.bounds,i=t.setup,o=i.disabled,s=i.velocityAnimation,a=t.transformState.scale,l=s.disabled,c=!l||a>1||!o||e;return!(!c||!r||!n)};function aye(t,e){var r=t.setup.velocityAnimation,n=r.equalToMove,i=r.animationTime,o=r.sensitivity;return n?i*e*o:i}function Hz(t,e,r,n,i,o,s,a,l,c){if(i){if(e>s&&r>s){var p=s+(t-s)*c;return p>l?l:p<s?s:p}if(e<o&&r<o){var p=o+(t-o)*c;return p<a?a:p>o?o:p}}return n?e:TP(t,o,s,i)}function lye(t,e){var r=1;return e?Math.min(r,t.offsetWidth/window.innerWidth):r}function uye(t,e){var r=oye(t);if(r){var n=t.lastMousePosition,i=t.velocityTime,o=t.setup,s=t.wrapperComponent,a=o.velocityAnimation.equalToMove,l=Date.now();if(n&&i&&s){var c=lye(s,a),p=e.x-n.x,f=e.y-n.y,m=p/c,g=f/c,v=l-i,_=p*p+f*f,S=Math.sqrt(_)/v;t.velocity={velocityX:m,velocityY:g,total:S}}t.lastMousePosition=e,t.velocityTime=l}}function cye(t){var e=t.velocity,r=t.bounds,n=t.setup,i=t.wrapperComponent,o=sye(t);if(!(!o||!e||!r||!i)){var s=e.velocityX,a=e.velocityY,l=e.total,c=r.maxPositionX,p=r.minPositionX,f=r.maxPositionY,m=r.minPositionY,g=n.limitToBounds,v=n.alignmentAnimation,_=n.zoomAnimation,S=n.panning,T=S.lockAxisY,w=S.lockAxisX,E=_.animationType,I=v.sizeX,N=v.sizeY,C=v.velocityAlignmentTime,k=C,U=aye(t,l),$=Math.max(U,k),G=qw(t,I),K=qw(t,N),X=G*i.offsetWidth/100,te=K*i.offsetHeight/100,ne=c+X,H=p-X,re=f+te,W=m-te,q=t.transformState,se=new Date().getTime();Qz(t,E,$,function(J){var ye=t.transformState,Ne=ye.scale,ae=ye.positionX,Se=ye.positionY,Re=new Date().getTime()-se,Pe=Re/k,Oe=Xz[v.animationType],ct=1-Oe(Math.min(1,Pe)),mt=1-J,wt=ae+s*mt,Me=Se+a*mt,ue=Hz(wt,q.positionX,ae,w,g,p,c,H,ne,ct),Te=Hz(Me,q.positionY,Se,T,g,m,f,W,re,ct);(ae!==wt||Se!==Me)&&t.setTransformState(Ne,ue,Te)})}}function qz(t,e){var r=t.transformState.scale;Gl(t),Bh(t,r),window.TouchEvent!==void 0&&e instanceof TouchEvent?tye(t,e):eye(t,e)}function Zz(t){var e=t.transformState.scale,r=t.setup,n=r.minScale,i=r.alignmentAnimation,o=i.disabled,s=i.sizeX,a=i.sizeY,l=i.animationTime,c=i.animationType,p=o||e<n||!s&&!a;if(!p){var f=rye(t);f&&Ld(t,f,l,c)}}function Gz(t,e,r){var n=t.startCoords,i=t.setup,o=i.alignmentAnimation,s=o.sizeX,a=o.sizeY;if(n){var l=iye(t,e,r),c=l.x,p=l.y,f=qw(t,s),m=qw(t,a);uye(t,{x:c,y:p}),nye(t,c,p,f,m)}}function dye(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,r=t.velocity,n=t.wrapperComponent,i=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var o=n?.getBoundingClientRect(),s=i?.getBoundingClientRect(),a=o?.width||0,l=o?.height||0,c=s?.width||0,p=s?.height||0,f=a<c||l<p,m=!e&&r&&r?.total>.1&&f;m?cye(t):Zz(t)}}function CP(t,e,r,n){var i=t.setup,o=i.minScale,s=i.maxScale,a=i.limitToBounds,l=d0(va(e,2),o,s,0,!1),c=Bh(t,l),p=Vw(t,r,n,l,c,a),f=p.x,m=p.y;return{scale:l,positionX:f,positionY:m}}function e$(t,e,r){var n=t.transformState.scale,i=t.wrapperComponent,o=t.setup,s=o.minScale,a=o.limitToBounds,l=o.zoomAnimation,c=l.disabled,p=l.animationTime,f=l.animationType,m=c||n>=s;if((n>=1||a)&&Zz(t),!(m||!i||!t.mounted)){var g=e||i.offsetWidth/2,v=r||i.offsetHeight/2,_=CP(t,s,g,v);_&&Ld(t,_,p,f)}}var Pd=function(){return Pd=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Pd.apply(this,arguments)};function Vz(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}var Hw={previousScale:1,scale:1,positionX:0,positionY:0},c0={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},t$=function(t){var e,r,n,i;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Hw.scale,scale:(r=t.initialScale)!==null&&r!==void 0?r:Hw.scale,positionX:(n=t.initialPositionX)!==null&&n!==void 0?n:Hw.positionX,positionY:(i=t.initialPositionY)!==null&&i!==void 0?i:Hw.positionY}},Kz=function(t){var e=Pd({},c0);return Object.keys(t).forEach(function(r){var n=typeof t[r]<"u",i=typeof c0[r]<"u";if(i&&n){var o=Object.prototype.toString.call(c0[r]),s=o==="[object Object]",a=o==="[object Array]";s?e[r]=Pd(Pd({},c0[r]),t[r]):a?e[r]=Vz(Vz([],c0[r],!0),t[r],!0):e[r]=t[r]}}),e},r$=function(t,e,r){var n=t.transformState.scale,i=t.wrapperComponent,o=t.setup,s=o.maxScale,a=o.minScale,l=o.zoomAnimation,c=o.smooth,p=l.size;if(!i)throw new Error("Wrapper is not mounted");var f=c?n*Math.exp(e*r):n+e*r,m=d0(va(f,3),a,s,p,!1);return m};function n$(t,e,r,n,i){var o=t.wrapperComponent,s=t.transformState,a=s.scale,l=s.positionX,c=s.positionY;if(!o)return console.error("No WrapperComponent found");var p=o.offsetWidth,f=o.offsetHeight,m=(p/2-l)/a,g=(f/2-c)/a,v=r$(t,e,r),_=CP(t,v,m,g);if(!_)return console.error("Error during zoom event. New transformation state was not calculated.");Ld(t,_,n,i)}function i$(t,e,r,n){var i=t.setup,o=t.wrapperComponent,s=i.limitToBounds,a=t$(t.props),l=t.transformState,c=l.scale,p=l.positionX,f=l.positionY;if(o){var m=EP(t,a.scale),g=Gw(a.positionX,a.positionY,m,s,0,0,o),v={scale:a.scale,positionX:g.x,positionY:g.y};c===a.scale&&p===a.positionX&&f===a.positionY||(n?.(),Ld(t,v,e,r))}}function pye(t,e,r,n){var i=t.getBoundingClientRect(),o=e.getBoundingClientRect(),s=r.getBoundingClientRect(),a=o.x*n.scale,l=o.y*n.scale;return{x:(i.x-s.x+a)/n.scale,y:(i.y-s.y+l)/n.scale}}function fye(t,e,r){var n=t.wrapperComponent,i=t.contentComponent,o=t.transformState,s=t.setup,a=s.limitToBounds,l=s.minScale,c=s.maxScale;if(!n||!i)return o;var p=n.getBoundingClientRect(),f=e.getBoundingClientRect(),m=pye(e,n,i,o),g=m.x,v=m.y,_=f.width/o.scale,S=f.height/o.scale,T=n.offsetWidth/_,w=n.offsetHeight/S,E=d0(r||Math.min(T,w),l,c,0,!1),I=(p.width-_*E)/2,N=(p.height-S*E)/2,C=(p.left-g)*E+I,k=(p.top-v)*E+N,U=EP(t,E),$=Gw(C,k,U,a,0,0,n),G=$.x,K=$.y;return{positionX:G,positionY:K,scale:E}}var mye=function(t){return function(e,r,n){e===void 0&&(e=.5),r===void 0&&(r=300),n===void 0&&(n="easeOut"),n$(t,1,e,r,n)}},hye=function(t){return function(e,r,n){e===void 0&&(e=.5),r===void 0&&(r=300),n===void 0&&(n="easeOut"),n$(t,-1,e,r,n)}},gye=function(t){return function(e,r,n,i,o){i===void 0&&(i=300),o===void 0&&(o="easeOut");var s=t.transformState,a=s.positionX,l=s.positionY,c=s.scale,p=t.wrapperComponent,f=t.contentComponent,m=t.setup.disabled;if(!(m||!p||!f)){var g={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(r)?l:r,scale:Number.isNaN(n)?c:n};Ld(t,g,i,o)}}},yye=function(t){return function(e,r){e===void 0&&(e=200),r===void 0&&(r="easeOut"),i$(t,e,r)}},vye=function(t){return function(e,r,n){r===void 0&&(r=200),n===void 0&&(n="easeOut");var i=t.transformState,o=t.wrapperComponent,s=t.contentComponent;if(o&&s){var a=o$(e||i.scale,o,s);Ld(t,a,r,n)}}},_ye=function(t){return function(e,r,n,i){n===void 0&&(n=600),i===void 0&&(i="easeOut"),Gl(t);var o=t.wrapperComponent,s=typeof e=="string"?document.getElementById(e):e;if(o&&s&&o.contains(s)){var a=fye(t,s,r);Ld(t,a,n,i)}}},wP=function(t){return{instance:t,zoomIn:mye(t),zoomOut:hye(t),setTransform:gye(t),resetTransform:yye(t),centerView:vye(t),zoomToElement:_ye(t)}},bye=function(t){return{instance:t,state:t.transformState}},Lr=function(t){var e={};return Object.assign(e,bye(t)),Object.assign(e,wP(t)),e},bP=!1;function xP(){try{var t={get passive(){return bP=!0,!1}};return t}catch{return bP=!1,bP}}var Kw=function(t,e){var r=t.tagName.toUpperCase(),n=e.find(function(o){return o.toUpperCase()===r});if(n)return!0;var i=e.find(function(o){return t.classList.contains(o)});return!!i},SP=function(t){t&&clearTimeout(t)},xye=function(t,e,r){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(r,")")};var o$=function(t,e,r){var n=r.offsetWidth*t,i=r.offsetHeight*t,o=(e.offsetWidth-n)/2,s=(e.offsetHeight-i)/2;return{scale:t,positionX:o,positionY:s}};function Tye(t){return function(e){t.forEach(function(r){typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var wye=function(t,e){var r=t.setup.wheel,n=r.disabled,i=r.wheelDisabled,o=r.touchPadDisabled,s=r.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,p=a&&!l&&!n&&c;if(!p||i&&!e.ctrlKey||o&&e.ctrlKey)return!1;var f=Kw(c,s);return!f},Sye=function(t){return t?t.deltaY<0?1:-1:0};function Eye(t,e){var r=Sye(t),n=Mge(e,r);return n}function s$(t,e,r){var n=e.getBoundingClientRect(),i=0,o=0;if("clientX"in t)i=(t.clientX-n.left)/r,o=(t.clientY-n.top)/r;else{var s=t.touches[0];i=(s.clientX-n.left)/r,o=(s.clientY-n.top)/r}return(Number.isNaN(i)||Number.isNaN(o))&&console.error("No mouse or touch offset found"),{x:i,y:o}}var Cye=function(t,e,r,n,i){var o=t.transformState.scale,s=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,p=a.zoomAnimation,f=a.disablePadding,m=p.size,g=p.disabled;if(!s)throw new Error("Wrapper is not mounted");var v=o+e*r;if(i)return v;var _=n?!1:!g,S=d0(va(v,3),c,l,m,_&&!f);return S},Dye=function(t,e){var r=t.previousWheelEvent,n=t.transformState.scale,i=t.setup,o=i.maxScale,s=i.minScale;return r?n<o||n>s||Math.sign(r.deltaY)!==Math.sign(e.deltaY)||r.deltaY>0&&r.deltaY<e.deltaY||r.deltaY<0&&r.deltaY>e.deltaY||Math.sign(r.deltaY)!==Math.sign(e.deltaY):!1},Iye=function(t,e){var r=t.setup.pinch,n=r.disabled,i=r.excluded,o=t.isInitialized,s=e.target,a=o&&!n&&s;if(!a)return!1;var l=Kw(s,i);return!l},kye=function(t){var e=t.setup.pinch.disabled,r=t.isInitialized,n=t.pinchStartDistance,i=r&&!e&&n;return!!i},Nye=function(t,e,r){var n=r.getBoundingClientRect(),i=t.touches,o=va(i[0].clientX-n.left,5),s=va(i[0].clientY-n.top,5),a=va(i[1].clientX-n.left,5),l=va(i[1].clientY-n.top,5);return{x:(o+a)/2/e,y:(s+l)/2/e}},a$=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},Aye=function(t,e){var r=t.pinchStartScale,n=t.pinchStartDistance,i=t.setup,o=i.maxScale,s=i.minScale,a=i.zoomAnimation,l=i.disablePadding,c=a.size,p=a.disabled;if(!r||n===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var f=e/n,m=f*r;return d0(va(m,2),s,o,c,!p&&!l)},Oye=160,Rye=100,Pye=function(t,e){var r=t.props,n=r.onWheelStart,i=r.onZoomStart;t.wheelStopEventTimer||(Gl(t),on(Lr(t),e,n),on(Lr(t),e,i))},Lye=function(t,e){var r=t.props,n=r.onWheel,i=r.onZoom,o=t.contentComponent,s=t.setup,a=t.transformState,l=a.scale,c=s.limitToBounds,p=s.centerZoomedOut,f=s.zoomAnimation,m=s.wheel,g=s.disablePadding,v=s.smooth,_=f.size,S=f.disabled,T=m.step,w=m.smoothStep;if(!o)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var E=Eye(e,null),I=v?w*Math.abs(e.deltaY):T,N=Cye(t,E,I,!e.ctrlKey);if(l!==N){var C=Bh(t,N),k=s$(e,o,l),U=S||_===0||p||g,$=c&&U,G=Vw(t,k.x,k.y,N,C,$),K=G.x,X=G.y;t.previousWheelEvent=e,t.setTransformState(N,K,X),on(Lr(t),e,n),on(Lr(t),e,i)}},Mye=function(t,e){var r=t.props,n=r.onWheelStop,i=r.onZoomStop;SP(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(e$(t,e.x,e.y),t.wheelAnimationTimer=null)},Rye);var o=Dye(t,e);o&&(SP(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,on(Lr(t),e,n),on(Lr(t),e,i))},Oye))},Fye=function(t,e){var r=a$(e);t.pinchStartDistance=r,t.lastDistance=r,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,Gl(t)},Uye=function(t,e){var r=t.contentComponent,n=t.pinchStartDistance,i=t.transformState.scale,o=t.setup,s=o.limitToBounds,a=o.centerZoomedOut,l=o.zoomAnimation,c=l.disabled,p=l.size;if(!(n===null||!r)){var f=Nye(e,i,r);if(!(!Number.isFinite(f.x)||!Number.isFinite(f.y))){var m=a$(e),g=Aye(t,m);if(g!==i){var v=Bh(t,g),_=c||p===0||a,S=s&&_,T=Vw(t,f.x,f.y,g,v,S),w=T.x,E=T.y;t.pinchMidpoint=f,t.lastDistance=m,t.setTransformState(g,w,E)}}}},Bye=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,e$(t,e?.x,e?.y)},l$=function(t,e){var r=t.props.onZoomStop,n=t.setup.doubleClick.animationTime;SP(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,on(Lr(t),e,r)},n)},Wye=function(t,e){var r=t.props,n=r.onZoomStart,i=r.onZoom,o=t.setup.doubleClick,s=o.animationTime,a=o.animationType;on(Lr(t),e,n),i$(t,s,a,function(){return on(Lr(t),e,i)}),l$(t,e)};function jye(t,e){var r=t.setup,n=t.doubleClickStopEventTimer,i=t.transformState,o=t.contentComponent,s=i.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,p=r.doubleClick,f=p.disabled,m=p.mode,g=p.step,v=p.animationTime,_=p.animationType;if(!f&&!n){if(m==="reset")return Wye(t,e);if(!o)return console.error("No ContentComponent found");var S=m==="zoomOut"?-1:1,T=r$(t,S,g);if(s!==T){on(Lr(t),e,l);var w=s$(e,o,s),E=CP(t,T,w.x,w.y);if(!E)return console.error("Error during zoom event. New transformation state was not calculated.");on(Lr(t),e,c),Ld(t,E,v,_),l$(t,e)}}}var zye=function(t,e){var r=t.isInitialized,n=t.setup,i=t.wrapperComponent,o=n.doubleClick,s=o.disabled,a=o.excluded,l=e.target,c=i?.contains(l),p=r&&l&&c&&!s;if(!p)return!1;var f=Kw(l,a);return!f},$ye=function(){function t(e){var r=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){r.initializeWindowEvents()},this.unmount=function(){r.cleanupWindowEvents()},this.update=function(n){Bh(r,r.transformState.scale),r.setup=Kz(n)},this.initializeWindowEvents=function(){var n,i=xP(),o=(n=r.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,s=o?.defaultView;s?.addEventListener("mousedown",r.onPanningStart,i),s?.addEventListener("mousemove",r.onPanning,i),s?.addEventListener("mouseup",r.onPanningStop,i),o?.addEventListener("mouseleave",r.clearPanning,i),s?.addEventListener("keyup",r.setKeyUnPressed,i),s?.addEventListener("keydown",r.setKeyPressed,i)},this.cleanupWindowEvents=function(){var n,i,o=xP(),s=(n=r.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,a=s?.defaultView;a?.removeEventListener("mousedown",r.onPanningStart,o),a?.removeEventListener("mousemove",r.onPanning,o),a?.removeEventListener("mouseup",r.onPanningStop,o),s?.removeEventListener("mouseleave",r.clearPanning,o),a?.removeEventListener("keyup",r.setKeyUnPressed,o),a?.removeEventListener("keydown",r.setKeyPressed,o),document.removeEventListener("mouseleave",r.clearPanning,o),Gl(r),(i=r.observer)===null||i===void 0||i.disconnect()},this.handleInitializeWrapperEvents=function(n){var i=xP();n.addEventListener("wheel",r.onWheelZoom,i),n.addEventListener("dblclick",r.onDoubleClick,i),n.addEventListener("touchstart",r.onTouchPanningStart,i),n.addEventListener("touchmove",r.onTouchPanning,i),n.addEventListener("touchend",r.onTouchPanningStop,i)},this.handleInitialize=function(n){var i=r.setup.centerOnInit;r.applyTransformation(),r.onInitCallbacks.forEach(function(o){return o(Lr(r))}),i&&(r.setCenter(),r.observer=new ResizeObserver(function(){var o;r.onInitCallbacks.forEach(function(s){return s(Lr(r))}),r.setCenter(),(o=r.observer)===null||o===void 0||o.disconnect()}),r.observer.observe(n))},this.onWheelZoom=function(n){var i=r.setup.disabled;if(!i){var o=wye(r,n);if(o){var s=r.isPressingKeys(r.setup.wheel.activationKeys);s&&(Pye(r,n),Lye(r,n),Mye(r,n))}}},this.onPanningStart=function(n){var i=r.setup.disabled,o=r.props.onPanningStart;if(!i){var s=zz(r,n);if(s){var a=r.isPressingKeys(r.setup.panning.activationKeys);a&&(n.button===0&&!r.setup.panning.allowLeftClickPan||n.button===1&&!r.setup.panning.allowMiddleClickPan||n.button===2&&!r.setup.panning.allowRightClickPan||(n.preventDefault(),n.stopPropagation(),Gl(r),qz(r,n),on(Lr(r),n,o)))}}},this.onPanning=function(n){var i=r.setup.disabled,o=r.props.onPanning;if(!i){var s=$z(r);if(s){var a=r.isPressingKeys(r.setup.panning.activationKeys);a&&(n.preventDefault(),n.stopPropagation(),Gz(r,n.clientX,n.clientY),on(Lr(r),n,o))}}},this.onPanningStop=function(n){var i=r.props.onPanningStop;r.isPanning&&(dye(r),on(Lr(r),n,i))},this.onPinchStart=function(n){var i=r.setup.disabled,o=r.props,s=o.onPinchingStart,a=o.onZoomStart;if(!i){var l=Iye(r,n);l&&(Fye(r,n),Gl(r),on(Lr(r),n,s),on(Lr(r),n,a))}},this.onPinch=function(n){var i=r.setup.disabled,o=r.props,s=o.onPinching,a=o.onZoom;if(!i){var l=kye(r);l&&(n.preventDefault(),n.stopPropagation(),Uye(r,n),on(Lr(r),n,s),on(Lr(r),n,a))}},this.onPinchStop=function(n){var i=r.props,o=i.onPinchingStop,s=i.onZoomStop;r.pinchStartScale&&(Bye(r),on(Lr(r),n,o),on(Lr(r),n,s))},this.onTouchPanningStart=function(n){var i=r.setup.disabled,o=r.props.onPanningStart;if(!i){var s=zz(r,n);if(s){var a=r.lastTouch&&+new Date-r.lastTouch<200;if(a&&n.touches.length===1)r.onDoubleClick(n);else{r.lastTouch=+new Date,Gl(r);var l=n.touches,c=l.length===1,p=l.length===2;c&&(Gl(r),qz(r,n),on(Lr(r),n,o)),p&&r.onPinchStart(n)}}}},this.onTouchPanning=function(n){var i=r.setup.disabled,o=r.props.onPanning;if(r.isPanning&&n.touches.length===1){if(i)return;var s=$z(r);if(!s)return;n.preventDefault(),n.stopPropagation();var a=n.touches[0];Gz(r,a.clientX,a.clientY),on(Lr(r),n,o)}else n.touches.length>1&&r.onPinch(n)},this.onTouchPanningStop=function(n){r.onPanningStop(n),r.onPinchStop(n)},this.onDoubleClick=function(n){var i=r.setup.disabled;if(!i){var o=zye(r,n);o&&jye(r,n)}},this.clearPanning=function(n){r.isPanning&&r.onPanningStop(n)},this.setKeyPressed=function(n){r.pressedKeys[n.key]=!0},this.setKeyUnPressed=function(n){r.pressedKeys[n.key]=!1},this.isPressingKeys=function(n){return n.length?!!n.find(function(i){return r.pressedKeys[i]}):!0},this.setTransformState=function(n,i,o){var s=r.props.onTransformed;if(!Number.isNaN(n)&&!Number.isNaN(i)&&!Number.isNaN(o)){n!==r.transformState.scale&&(r.transformState.previousScale=r.transformState.scale,r.transformState.scale=n),r.transformState.positionX=i,r.transformState.positionY=o,r.applyTransformation();var a=Lr(r);r.onChangeCallbacks.forEach(function(l){return l(a)}),on(a,{scale:n,positionX:i,positionY:o},s)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(r.wrapperComponent&&r.contentComponent){var n=o$(r.transformState.scale,r.wrapperComponent,r.contentComponent);r.setTransformState(n.scale,n.positionX,n.positionY)}},this.handleTransformStyles=function(n,i,o){return r.props.customTransform?r.props.customTransform(n,i,o):xye(n,i,o)},this.applyTransformation=function(){if(!(!r.mounted||!r.contentComponent)){var n=r.transformState,i=n.scale,o=n.positionX,s=n.positionY,a=r.handleTransformStyles(o,s,i);r.contentComponent.style.transform=a}},this.getContext=function(){return Lr(r)},this.onChange=function(n){return r.onChangeCallbacks.has(n)||r.onChangeCallbacks.add(n),function(){r.onChangeCallbacks.delete(n)}},this.onInit=function(n){return r.onInitCallbacks.has(n)||r.onInitCallbacks.add(n),function(){r.onInitCallbacks.delete(n)}},this.init=function(n,i){r.cleanupWindowEvents(),r.wrapperComponent=n,r.contentComponent=i,Bh(r,r.transformState.scale),r.handleInitializeWrapperEvents(n),r.handleInitialize(i),r.initializeWindowEvents(),r.isInitialized=!0;var o=Lr(r);on(o,void 0,r.props.onInit)},this.props=e,this.setup=Kz(this.props),this.transformState=t$(this.props)}return t}(),DP=qr.default.createContext(null),Hye=function(t,e){return typeof t=="function"?t(e):t},u$=qr.default.forwardRef(function(t,e){var r=(0,qr.useRef)(new $ye(t)).current,n=Hye(t.children,wP(r));return(0,qr.useImperativeHandle)(e,function(){return wP(r)},[r]),(0,qr.useEffect)(function(){r.update(t)},[r,t]),qr.default.createElement(DP.Provider,{value:r},n)}),S$e=qr.default.forwardRef(function(t,e){var r=(0,qr.useRef)(null),n=(0,qr.useContext)(DP);return(0,qr.useEffect)(function(){return n.onChange(function(i){if(r.current){var o=0,s=0;r.current.style.transform=n.handleTransformStyles(o,s,1/i.instance.transformState.scale)}})},[n]),qr.default.createElement("div",Pd({},t,{ref:Tye([r,e])}))});function qye(t,e){e===void 0&&(e={});var r=e.insertAt;if(!(!t||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",r==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var Gye=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,Yz={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};qye(Gye);var c$=function(t){var e=t.children,r=t.wrapperClass,n=r===void 0?"":r,i=t.contentClass,o=i===void 0?"":i,s=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,p=t.contentProps,f=p===void 0?{}:p,m=(0,qr.useContext)(DP),g=m.init,v=m.cleanupWindowEvents,_=(0,qr.useRef)(null),S=(0,qr.useRef)(null);return(0,qr.useEffect)(function(){var T=_.current,w=S.current;return T!==null&&w!==null&&g&&g?.(T,w),function(){v?.()}},[]),qr.default.createElement("div",Pd({},c,{ref:_,className:"react-transform-wrapper ".concat(Yz.wrapper," ").concat(n),style:s}),qr.default.createElement("div",Pd({},f,{ref:S,className:"react-transform-component ".concat(Yz.content," ").concat(o),style:a}),e))};var Yw=t=>d$().openExternal(t,{activate:!0}),Xw=t=>{console.log(`opening ${t}`),d$().showItemInFolder(t)},d$=()=>window.require("electron").shell;var p0=F(function(e){let r=pe(),n=e.imageID?r.db.media_images.get(e.imageID):r.db.media_images.last(),i=n?.url,o=r.configFile.value.galleryBgColor;return P("div",{className:e.className,style:{background:o},tw:"flex flex-col flex-grow bg-base-100 relative",children:[h(Vye,{img:n}),h(u$,{centerZoomedOut:!0,centerOnInit:!0,children:h(c$,{wrapperStyle:{height:"100%",width:"100%",display:"flex"},contentStyle:{height:"100%",width:"100%"},children:i?h("img",{style:{width:"100%",height:"100%",objectFit:"contain"},src:i,alt:"last generated image"}):P("div",{tw:"w-full h-full relative flex",children:[h("div",{style:{fontSize:"3rem",textShadow:"0 0 5px #ffffff"},tw:"animate-pulse absolute self-center w-full text-center text-xl text-black font-bold",children:"no image yet"}),h("img",{style:{width:"100%",height:"100%",objectFit:"contain"},src:Rr.illustrations_image_home_transp_webp,alt:"last generated image"})]})})})]})}),Vye=F(function(e){let r=pe(),n=e.img;return P("div",{tw:"flex items-center gap-2 bg-base-200",children:[h(pB,{name:n?.id??"latent",value:n?.data.star??0,disabled:n==null,onChange:i=>{n?.update({star:i})}}),P(hr,{disableHover:!0,children:[P("div",{children:[h("span",{className:"material-symbols-outlined",children:"info"}),"infos"]}),P("div",{children:[h("div",{children:"Data"}),h(is,{value:n?.data}),h("div",{children:"meta"}),h(is,{value:n?.ComfyNodeMetadta??void 0}),h("div",{children:"node"}),h(is,{value:n?.ComfyNode??void 0})]})]}),P("div",{tw:"btn btn-sm",onClick:()=>{n!=null&&r.db.media_images.delete(n.id)},children:[h("span",{className:"material-symbols-outlined",children:"edit"}),"Edit"]}),P("div",{tw:"btn btn-sm",onClick:()=>{n!=null&&r.db.media_images.delete(n.id)},children:[h("span",{className:"material-symbols-outlined",children:"delete_forever"}),"Delete"]}),P(Yn,{title:"Actions",startIcon:h("span",{className:"material-symbols-outlined",children:"menu"}),children:[h(Dt,{icon:h("span",{className:"material-symbols-outlined",children:"folder"}),size:"sm",disabled:!n?.absPath,onClick:()=>{n?.absPath&&Xw(n.absPath)},children:"open folder"}),h(Dt,{icon:h("span",{className:"material-symbols-outlined",children:"folder"}),size:"xs",disabled:!n?.absPath,onClick:()=>{let i=n?`file://${n.absPath}`:null;i!=null&&Yw(i)},children:"open"})]}),h("div",{tw:"virtualBorder p-1",children:`${n?.data.width??"?"} x ${n?.data.height??"?"}`})]})});var p$=t=>WU(()=>({type:"Image",item:{image:t},collect:e=>({opacity:e.isDragging()?.5:1})}),[t]),f$=(t,e)=>Q1(()=>({accept:["Image",Xa.FILE],collect(r){return{outline:r.isOver()?"1px solid gold":void 0}},drop(r,n){if(n.getItemType()=="Image"){let i=r.image;return e(i)}if(n.getItemType()===Xa.FILE){let i=r.files,o=Array.from(i).find(s=>s.type.startsWith("image/"));if(console.log("[\u{1F5F3}\uFE0F] drop box: image path is",o?.path??"\u274C"),o){let s=t.db.media_images.create({infos:{type:"image-local",absPath:o.path}});return e(s)}else{console.log("Dropped non-image file");return}}throw new Error("Unknown drop type")}}));var Md=F(function(e){let r=pe(),n=typeof e.img=="string"?r.db.media_images.get(e.img):e.img,i=e.size??r.gallerySizeStr,[{opacity:o},s]=p$(n);if(n==null)return h("div",{style:{width:i,height:i},children:"\u274C"});let a=h("img",{src:n.url,ref:s,loading:"lazy",style:{objectFit:"contain",width:i,height:i,opacity:o,borderRadius:".5rem"},onClick:()=>r.layout.FOCUS_OR_CREATE("Image",{imageID:n.id})});return P(hr,{enableRightClick:!0,children:[h("div",{children:a}),h("div",{children:h(gt,{icon:h("span",{className:"material-symbols-outlined",children:"edit"}),onClick:()=>r.layout.FOCUS_OR_CREATE("Paint",{imgID:n.id}),children:"Paint"})})]})}),X$e=F(function(e){let n=pe().configFile.value.galleryImageSize??48;return h("div",{className:"scale-in-center",style:{objectFit:"contain",width:n,height:n,padding:0,borderRadius:".5rem"}})});var m$=F(function(e){let r=e.output;return h(ui,{output:e.output,children:h(Md,{img:e.output,size:"100%"})})}),h$=F(function(e){return h(p0,{imageID:e.output.id})});var _a={primitive:"var(--comfy-primitive)",loader:"var(--comfy-loader)",latent:"var(--comfy-latent)",conditioning:"var(--comfy-conditioning)",sampl:"var(--comfy-sampl)",image:"var(--comfy-image)"},Kye=Object.keys(_a),xf={loaders:_a.loader,latent:_a.latent,"latent/transform":_a.latent,conditioning:_a.conditioning,"conditioning/style_model":_a.conditioning,sampling:_a.sampl,image:_a.image,primitive:_a.primitive};var g$=t=>{let e=t.toLowerCase();if(e.includes("width")||e.includes("height"))return _a.primitive;for(let r of Kye)if(e.startsWith(r))return _a[r];return"var(--comfy-default)"},y$=t=>{let e=t.toLowerCase();return e in Yye?xf[e]:"var(--comfy-default)"},Yye={latent:"blue"};var v$=F(function(e){let{node:r}=e,n=e.size??1.5,i=r?.$schema.category,o=xf[i]??"#354546";return h("div",{style:{flexShrink:0,fontSize:"1rem",backgroundColor:o,lineHeight:`${n}em`,width:`${n}rem`,height:`${n}rem`},className:"nodeRef",children:e.label})});var B$=ie(U$(),1);var MP=B$.default;var tS="[A-Za-z$_][0-9A-Za-z$_]*",W$=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],j$=["true","false","null","undefined","NaN","Infinity"],z$=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],$$=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],H$=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],q$=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],G$=[].concat(H$,z$,$$);function Bve(t){let e=t.regex,r=(q,{after:se})=>{let J="</"+q[0].slice(1);return q.input.indexOf(J,se)!==-1},n=tS,i={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(q,se)=>{let J=q[0].length+q.index,ye=q.input[J];if(ye==="<"||ye===","){se.ignoreMatch();return}ye===">"&&(r(q,{after:J})||se.ignoreMatch());let Ne,ae=q.input.substring(J);if(Ne=ae.match(/^\s*=/)){se.ignoreMatch();return}if((Ne=ae.match(/^\s+extends\s+/))&&Ne.index===0){se.ignoreMatch();return}}},a={$pattern:tS,keyword:W$,literal:j$,built_in:G$,"variable.language":q$},l="[0-9](_?[0-9])*",c=`\\.(${l})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${p})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${p})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},m={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},g={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,m],subLanguage:"xml"}},v={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,m],subLanguage:"css"}},_={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,m],subLanguage:"graphql"}},S={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,m]},w={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},E=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,g,v,_,S,{match:/\$\d+/},f];m.contains=E.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(E)});let I=[].concat(w,m.contains),N=I.concat([{begin:/\(/,end:/\)/,keywords:a,contains:["self"].concat(I)}]),C={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:N},k={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,e.concat(n,"(",e.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},U={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...z$,...$$]}},$={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},G={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[C],illegal:/%/},K={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function X(q){return e.concat("(?!",q.join("|"),")")}let te={match:e.concat(/\b/,X([...H$,"super","import"]),n,e.lookahead(/\(/)),className:"title.function",relevance:0},ne={begin:e.concat(/\./,e.lookahead(e.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},H={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},C]},re="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",W={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(re)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[C]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:N,CLASS_REFERENCE:U},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),$,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,g,v,_,S,w,{match:/\$\d+/},f,U,{className:"attr",begin:n+e.lookahead(":"),relevance:0},W,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[w,t.REGEXP_MODE,{className:"function",begin:re,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:N}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:o},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},G,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[C,t.inherit(t.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},ne,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[C]},te,K,k,H,{match:/\$[(.]/}]}}function V$(t){let e=Bve(t),r=tS,n=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],i={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[e.exports.CLASS_REFERENCE]},o={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:n},contains:[e.exports.CLASS_REFERENCE]},s={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},a=["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"],l={$pattern:tS,keyword:W$.concat(a),literal:j$,built_in:G$.concat(n),"variable.language":q$},c={className:"meta",begin:"@"+r},p=(m,g,v)=>{let _=m.contains.findIndex(S=>S.label===g);if(_===-1)throw new Error("can not find mode to replace");m.contains.splice(_,1,v)};Object.assign(e.keywords,l),e.exports.PARAMS_CONTAINS.push(c),e.contains=e.contains.concat([c,i,o]),p(e,"shebang",t.SHEBANG()),p(e,"use_strict",s);let f=e.contains.find(m=>m.label==="func.def");return f.relevance=0,Object.assign(e,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),e}var rS=ie(ve(),1);MP.registerLanguage("typescript",V$);var nS=t=>{let e=(0,rS.useRef)(null);return(0,rS.useLayoutEffect)(()=>{let r=e.current;r!=null&&MP.highlightElement(r)},[e,t.code]),P("div",{className:"relative",children:[h("div",{className:"absolute top-2 right-2",children:h(gt,{icon:h("span",{className:"material-symbols-outlined",children:"content_copy"}),onClick:()=>{navigator.clipboard.writeText(t.code)}})}),h("code",{className:"language-typescript text-xs "+t.className,style:{whiteSpace:t.wrap?"pre-wrap":"pre"},ref:e,children:t.code})]})},K$=t=>h("code",{className:"language-json text-xs",style:{whiteSpace:"pre-wrap"},children:t.code},t.code);xr();var Y$=F(function(e){let r=e.graph,n=pe(),i=typeof r=="string"?n.db.graphs.getOrThrow(r):r;return P(St.Fragment,{children:[h(Rs,{placement:"auto",speaker:h(Pu,{children:"Download as ComfyUI workflow.json"}),children:h(gt,{appearance:"link",icon:h("span",{className:"material-symbols-outlined",children:"account_tree"}),size:"xs",onClick:async o=>{o.preventDefault(),o.preventDefault();let s=await i.json_workflow();console.log(">>>\u{1F7E2}",{jsonWorkflow:s}),br(i.cacheFolder)||lo(i.cacheFolder,{recursive:!0});let l=i.getTargetWorkflowFilePath();console.log(">>>\u{1F7E2}",{path:l}),window.require("electron").shell.openExternal(`file://${l}/..`),en(l,JSON.stringify(s,null,3))}})}),h(Rs,{placement:"auto",speaker:h(Pu,{children:"Download as ComfyUI prompt"}),children:h(gt,{appearance:"link",icon:h("span",{className:"material-symbols-outlined",children:"message"}),size:"xs",onClick:async o=>{o.preventDefault(),o.stopPropagation();let s=i.json_forPrompt("use_class_name_and_number");br(i.cacheFolder)||lo(i.cacheFolder,{recursive:!0});let l=i.getTargetPromptFilePath();window.require("electron").shell.openExternal(`file://${l}/..`),en(l,JSON.stringify(s,null,3))}})})]})});var X$=F(function(e){let r=e.graph,n=pe(),i=typeof r=="string"?n.db.graphs.getOrThrow(r):r;return h(Rs,{enterable:!0,placement:"autoVerticalEnd",speaker:h(Pu,{children:"Open in ComfyUI"}),children:h(gt,{icon:h("span",{className:"material-symbols-outlined",children:"open_in_new"}),appearance:"link",size:"xs",onClick:async o=>{o.preventDefault(),o.stopPropagation();let s=i?.json_workflow();s!=null&&n.layout.FOCUS_OR_CREATE("ComfyUI",{litegraphJson:s})}})})});var J$=F(function(e){let r=e.graph;return P(rs,{tw:"relative [min-width:2rem]",children:[h(jve,{graph:e.graph}),h(Wve,{graph:e.graph}),P("div",{children:[h(Y$,{graph:r}),h(X$,{graph:r})]}),P("div",{className:"overflow-auto",children:[r.size===0&&h("div",{children:"Empty Graph"}),r.pendingNodes.length>0&&P("div",{children:["+",r.pendingNodes.length," nodes remaining"]}),r.nodesByUpdatedAt.map((n,i)=>P("div",{className:"flex items-center gap-0.5",children:[P(hr,{children:[h("span",{children:n.statusEmoji}),h(K$,{code:JSON.stringify(n.json,null,3)})]}),h(v$,{size:1.1,label:i.toString(),node:n}),h("span",{tw:"text-sm overflow-hidden whitespace-nowrap text-ellipsis",children:n.$schema.nameInComfy})]},n.uid))]})]})}),Wve=F(function(e){let r=e.graph;if(r==null)return h(St.Fragment,{children:"no execution yet"});let n=r.progressCurrentNode;return h($A,{status:n?.isDone?"success":"active",percent:n?.percent})}),jve=F(function(e){let r=e.graph;if(r==null)return null;let n=r.progressGlobal;return h($A,{status:n.isDone?"success":"active",percent:n.percent})});var Mr=(t,e=3)=>{let r=typeof t=="number"?t:parseFloat(t);return isNaN(r)?0:Number(r.toFixed(e))};var Q$=F(function(e){let r=pe(),n=e.output,i=n.graph.item,o=r.historySizeStr;if(i==null)return h(ui,{output:n,children:h("div",{children:"\u274C ERROR"})});let s=n.progressGlobal;return h(ui,{output:n,children:h("div",{tw:"bg-blue-500 ",children:P("div",{className:"radial-progress",style:{"--value":s.percent,"--size":o},role:"progressbar",children:[Mr(s.percent,0),"%"]})})})}),Z$=F(function(e){let r=e.output,n=pe(),i=r.graph.item;return i==null?h(St.Fragment,{children:"no graph"}):P("div",{className:"flex flex-col gap-1",children:[h("div",{tw:"btn btn-sm btn-outline",onClick:()=>{n.stopCurrentPrompt()},children:"STOP GENERATING"}),h(J$,{graph:i})]})});var eH=F(function(e){let r=e.output;return h(ui,{output:e.output,children:h("div",{tw:"text-error-content bg-error font-bold",children:"Runtime Error"})})}),tH=F(function(e){let n=e.output.data;return P(rs,{tw:"w-full h-full",children:[P("div",{className:"bg-error text-error-content",children:[h("div",{tw:"text-xl font-bold",children:"Runtime Error"}),h("div",{tw:"italic",children:n.message})]}),P("div",{children:[h("div",{tw:"font-bold",children:"error infos:"}),h(is,{value:JSON.parse(JSON.stringify(n.infos))})]})]})});function BP(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Ef=BP();function aH(t){Ef=t}var lH=/[&<>"']/,zve=new RegExp(lH.source,"g"),uH=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,$ve=new RegExp(uH.source,"g"),Hve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rH=t=>Hve[t];function Us(t,e){if(e){if(lH.test(t))return t.replace(zve,rH)}else if(uH.test(t))return t.replace($ve,rH);return t}var qve=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Gve(t){return t.replace(qve,(e,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}var Vve=/(^|[^\[])\^/g;function Nr(t,e){let r=typeof t=="string"?t:t.source;e=e||"";let n={replace:(i,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(Vve,"$1"),r=r.replace(i,s),n},getRegex:()=>new RegExp(r,e)};return n}function nH(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}var g0={exec:()=>null};function iH(t,e){let r=t.replace(/\|/g,(o,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),n=r.split(/ \|/),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function iS(t,e,r){let n=t.length;if(n===0)return"";let i=0;for(;i<n;){let o=t.charAt(n-i-1);if(o===e&&!r)i++;else if(o!==e&&r)i++;else break}return t.slice(0,n-i)}function Kve(t,e){if(t.indexOf(e[1])===-1)return-1;let r=0;for(let n=0;n<t.length;n++)if(t[n]==="\\")n++;else if(t[n]===e[0])r++;else if(t[n]===e[1]&&(r--,r<0))return n;return-1}function oH(t,e,r,n){let i=e.href,o=e.title?Us(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){n.state.inLink=!0;let a={type:"link",raw:r,href:i,title:o,text:s,tokens:n.inlineTokens(s)};return n.state.inLink=!1,a}return{type:"image",raw:r,href:i,title:o,text:Us(s)}}function Yve(t,e){let r=t.match(/^(\s+)(?:```)/);if(r===null)return e;let n=r[1];return e.split(`
`).map(i=>{let o=i.match(/^\s+/);if(o===null)return i;let[s]=o;return s.length>=n.length?i.slice(n.length):i}).join(`
`)}var $h=class{options;rules;lexer;constructor(e){this.options=e||Ef}space(e){let r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){let r=this.rules.block.code.exec(e);if(r){let n=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:iS(n,`
`)}}}fences(e){let r=this.rules.block.fences.exec(e);if(r){let n=r[0],i=Yve(n,r[3]||"");return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:i}}}heading(e){let r=this.rules.block.heading.exec(e);if(r){let n=r[2].trim();if(/#$/.test(n)){let i=iS(n,"#");(this.options.pedantic||!i||/ $/.test(i))&&(n=i.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:r[0]}}blockquote(e){let r=this.rules.block.blockquote.exec(e);if(r){let n=iS(r[0].replace(/^ *>[ \t]?/gm,""),`
`),i=this.lexer.state.top;this.lexer.state.top=!0;let o=this.lexer.blockTokens(n);return this.lexer.state.top=i,{type:"blockquote",raw:r[0],tokens:o,text:n}}}list(e){let r=this.rules.block.list.exec(e);if(r){let n=r[1].trim(),i=n.length>1,o={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");let s=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),a="",l="",c=!1;for(;e;){let p=!1;if(!(r=s.exec(e))||this.rules.block.hr.test(e))break;a=r[0],e=e.substring(a.length);let f=r[2].split(`
`,1)[0].replace(/^\t+/,T=>" ".repeat(3*T.length)),m=e.split(`
`,1)[0],g=0;this.options.pedantic?(g=2,l=f.trimStart()):(g=r[2].search(/[^ ]/),g=g>4?1:g,l=f.slice(g),g+=r[1].length);let v=!1;if(!f&&/^ *$/.test(m)&&(a+=m+`
`,e=e.substring(m.length+1),p=!0),!p){let T=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),w=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),E=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),I=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;e;){let N=e.split(`
`,1)[0];if(m=N,this.options.pedantic&&(m=m.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),E.test(m)||I.test(m)||T.test(m)||w.test(e))break;if(m.search(/[^ ]/)>=g||!m.trim())l+=`
`+m.slice(g);else{if(v||f.search(/[^ ]/)>=4||E.test(f)||I.test(f)||w.test(f))break;l+=`
`+m}!v&&!m.trim()&&(v=!0),a+=N+`
`,e=e.substring(N.length+1),f=m.slice(g)}}o.loose||(c?o.loose=!0:/\n *\n *$/.test(a)&&(c=!0));let _=null,S;this.options.gfm&&(_=/^\[[ xX]\] /.exec(l),_&&(S=_[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!_,checked:S,loose:!1,text:l,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=l.trimEnd(),o.raw=o.raw.trimEnd();for(let p=0;p<o.items.length;p++)if(this.lexer.state.top=!1,o.items[p].tokens=this.lexer.blockTokens(o.items[p].text,[]),!o.loose){let f=o.items[p].tokens.filter(g=>g.type==="space"),m=f.length>0&&f.some(g=>/\n.*\n/.test(g.raw));o.loose=m}if(o.loose)for(let p=0;p<o.items.length;p++)o.items[p].loose=!0;return o}}html(e){let r=this.rules.block.html.exec(e);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(e){let r=this.rules.block.def.exec(e);if(r){let n=r[1].toLowerCase().replace(/\s+/g," "),i=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:i,title:o}}}table(e){let r=this.rules.block.table.exec(e);if(!r||!/[:|]/.test(r[2]))return;let n=iH(r[1]),i=r[2].replace(/^\||\| *$/g,"").split("|"),o=r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[],s={type:"table",raw:r[0],header:[],align:[],rows:[]};if(n.length===i.length){for(let a of i)/^ *-+: *$/.test(a)?s.align.push("right"):/^ *:-+: *$/.test(a)?s.align.push("center"):/^ *:-+ *$/.test(a)?s.align.push("left"):s.align.push(null);for(let a of n)s.header.push({text:a,tokens:this.lexer.inline(a)});for(let a of o)s.rows.push(iH(a,s.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return s}}lheading(e){let r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){let r=this.rules.block.paragraph.exec(e);if(r){let n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){let r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:Us(r[1])}}tag(e){let r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(e){let r=this.rules.inline.link.exec(e);if(r){let n=r[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;let s=iS(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=Kve(r[2],"()");if(s>-1){let l=(r[0].indexOf("!")===0?5:4)+r[1].length+s;r[2]=r[2].substring(0,s),r[0]=r[0].substring(0,l).trim(),r[3]=""}}let i=r[2],o="";if(this.options.pedantic){let s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s&&(i=s[1],o=s[3])}else o=r[3]?r[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(n)?i=i.slice(1):i=i.slice(1,-1)),oH(r,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer)}}reflink(e,r){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(/\s+/g," "),o=r[i.toLowerCase()];if(!o){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return oH(n,o,n[0],this.lexer)}}emStrong(e,r,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){let s=[...i[0]].length-1,a,l,c=s,p=0,f=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,r=r.slice(-1*e.length+s);(i=f.exec(r))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&s%3&&!((s+l)%3)){p+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+p);let m=[...i[0]][0].length,g=e.slice(0,s+i.index+m+l);if(Math.min(s,l)%2){let _=g.slice(1,-1);return{type:"em",raw:g,text:_,tokens:this.lexer.inlineTokens(_)}}let v=g.slice(2,-2);return{type:"strong",raw:g,text:v,tokens:this.lexer.inlineTokens(v)}}}}codespan(e){let r=this.rules.inline.code.exec(e);if(r){let n=r[2].replace(/\n/g," "),i=/[^ ]/.test(n),o=/^ /.test(n)&&/ $/.test(n);return i&&o&&(n=n.substring(1,n.length-1)),n=Us(n,!0),{type:"codespan",raw:r[0],text:n}}}br(e){let r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){let r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e){let r=this.rules.inline.autolink.exec(e);if(r){let n,i;return r[2]==="@"?(n=Us(r[1]),i="mailto:"+n):(n=Us(r[1]),i=n),{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let r;if(r=this.rules.inline.url.exec(e)){let n,i;if(r[2]==="@")n=Us(r[0]),i="mailto:"+n;else{let o;do o=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])?.[0]??"";while(o!==r[0]);n=Us(r[0]),r[1]==="www."?i="http://"+r[0]:i=r[0]}return{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let r=this.rules.inline.text.exec(e);if(r){let n;return this.lexer.state.inRawBlock?n=r[0]:n=Us(r[0]),{type:"text",raw:r[0],text:n}}}},Xve=/^(?: *(?:\n|$))+/,Jve=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Qve=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,v0=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Zve=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,cH=/(?:[*+-]|\d{1,9}[.)])/,dH=Nr(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,cH).getRegex(),WP=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,e0e=/^[^\n]+/,jP=/(?!\s*\])(?:\\.|[^\[\]\\])+/,t0e=Nr(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",jP).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),r0e=Nr(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,cH).getRegex(),aS="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",zP=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,n0e=Nr("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",zP).replace("tag",aS).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),pH=Nr(WP).replace("hr",v0).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",aS).getRegex(),i0e=Nr(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",pH).getRegex(),$P={blockquote:i0e,code:Jve,def:t0e,fences:Qve,heading:Zve,hr:v0,html:n0e,lheading:dH,list:r0e,newline:Xve,paragraph:pH,table:g0,text:e0e},sH=Nr("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",v0).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",aS).getRegex(),o0e={...$P,table:sH,paragraph:Nr(WP).replace("hr",v0).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",sH).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",aS).getRegex()},s0e={...$P,html:Nr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",zP).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:g0,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Nr(WP).replace("hr",v0).replace("heading",` *#{1,6} *[^
]`).replace("lheading",dH).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},fH=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,a0e=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,mH=/^( {2,}|\\)\n(?!\s*$)/,l0e=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,_0="\\p{P}$+<=>`^|~",u0e=Nr(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,_0).getRegex(),c0e=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,d0e=Nr(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,_0).getRegex(),p0e=Nr("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,_0).getRegex(),f0e=Nr("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,_0).getRegex(),m0e=Nr(/\\([punct])/,"gu").replace(/punct/g,_0).getRegex(),h0e=Nr(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),g0e=Nr(zP).replace("(?:-->|$)","-->").getRegex(),y0e=Nr("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",g0e).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),sS=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,v0e=Nr(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",sS).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),hH=Nr(/^!?\[(label)\]\[(ref)\]/).replace("label",sS).replace("ref",jP).getRegex(),gH=Nr(/^!?\[(ref)\](?:\[\])?/).replace("ref",jP).getRegex(),_0e=Nr("reflink|nolink(?!\\()","g").replace("reflink",hH).replace("nolink",gH).getRegex(),HP={_backpedal:g0,anyPunctuation:m0e,autolink:h0e,blockSkip:c0e,br:mH,code:a0e,del:g0,emStrongLDelim:d0e,emStrongRDelimAst:p0e,emStrongRDelimUnd:f0e,escape:fH,link:v0e,nolink:gH,punctuation:u0e,reflink:hH,reflinkSearch:_0e,tag:y0e,text:l0e,url:g0},b0e={...HP,link:Nr(/^!?\[(label)\]\((.*?)\)/).replace("label",sS).getRegex(),reflink:Nr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",sS).getRegex()},FP={...HP,escape:Nr(fH).replace("])","~|])").getRegex(),url:Nr(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},x0e={...FP,br:Nr(mH).replace("{2,}","*").getRegex(),text:Nr(FP.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},oS={normal:$P,gfm:o0e,pedantic:s0e},h0={normal:HP,gfm:FP,breaks:x0e,pedantic:b0e},rc=class t{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ef,this.options.tokenizer=this.options.tokenizer||new $h,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={block:oS.normal,inline:h0.normal};this.options.pedantic?(r.block=oS.pedantic,r.inline=h0.pedantic):this.options.gfm&&(r.block=oS.gfm,this.options.breaks?r.inline=h0.breaks:r.inline=h0.gfm),this.tokenizer.rules=r}static get rules(){return{block:oS,inline:h0}}static lex(e,r){return new t(r).lex(e)}static lexInline(e,r){return new t(r).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let r;for(;r=this.inlineQueue.shift();)this.inlineTokens(r.src,r.tokens);return this.tokens}blockTokens(e,r=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let n,i,o,s;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(n=a.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,l=e.slice(1),c;this.options.extensions.startBlock.forEach(p=>{c=p.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o))){i=r[r.length-1],s&&i.type==="paragraph"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n),s=o.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&i.type==="text"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let n,i,o,s=e,a,l,c;if(this.tokens.links){let p=Object.keys(this.tokens.links);if(p.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)p.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,a.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(p=>(n=p.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),i=r[r.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(n=this.tokenizer.emStrong(e,s,c)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),r.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),r.push(n);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let p=1/0,f=e.slice(1),m;this.options.extensions.startInline.forEach(g=>{m=g.call({lexer:this},f),typeof m=="number"&&m>=0&&(p=Math.min(p,m))}),p<1/0&&p>=0&&(o=e.substring(0,p+1))}if(n=this.tokenizer.inlineText(o)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(c=n.raw.slice(-1)),l=!0,i=r[r.length-1],i&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(e){let p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return r}},Hh=class{options;constructor(e){this.options=e||Ef}code(e,r,n){let i=(r||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+Us(i)+'">'+(n?e:Us(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:Us(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,r){return e}heading(e,r,n){return`<h${r}>${e}</h${r}>
`}hr(){return`<hr>
`}list(e,r,n){let i=r?"ol":"ul",o=r&&n!==1?' start="'+n+'"':"";return"<"+i+o+`>
`+e+"</"+i+`>
`}listitem(e,r,n){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,r){let n=r.header?"th":"td";return(r.align?`<${n} align="${r.align}">`:`<${n}>`)+e+`</${n}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,r,n){let i=nH(e);if(i===null)return n;e=i;let o='<a href="'+e+'"';return r&&(o+=' title="'+r+'"'),o+=">"+n+"</a>",o}image(e,r,n){let i=nH(e);if(i===null)return n;e=i;let o=`<img src="${e}" alt="${n}"`;return r&&(o+=` title="${r}"`),o+=">",o}text(e){return e}},y0=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,r,n){return""+n}image(e,r,n){return""+n}br(){return""}},nc=class t{options;renderer;textRenderer;constructor(e){this.options=e||Ef,this.options.renderer=this.options.renderer||new Hh,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new y0}static parse(e,r){return new t(r).parse(e)}static parseInline(e,r){return new t(r).parseInline(e)}parse(e,r=!0){let n="";for(let i=0;i<e.length;i++){let o=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){let s=o,a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){n+=a||"";continue}}switch(o.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{let s=o;n+=this.renderer.heading(this.parseInline(s.tokens),s.depth,Gve(this.parseInline(s.tokens,this.textRenderer)));continue}case"code":{let s=o;n+=this.renderer.code(s.text,s.lang,!!s.escaped);continue}case"table":{let s=o,a="",l="";for(let p=0;p<s.header.length;p++)l+=this.renderer.tablecell(this.parseInline(s.header[p].tokens),{header:!0,align:s.align[p]});a+=this.renderer.tablerow(l);let c="";for(let p=0;p<s.rows.length;p++){let f=s.rows[p];l="";for(let m=0;m<f.length;m++)l+=this.renderer.tablecell(this.parseInline(f[m].tokens),{header:!1,align:s.align[m]});c+=this.renderer.tablerow(l)}n+=this.renderer.table(a,c);continue}case"blockquote":{let s=o,a=this.parse(s.tokens);n+=this.renderer.blockquote(a);continue}case"list":{let s=o,a=s.ordered,l=s.start,c=s.loose,p="";for(let f=0;f<s.items.length;f++){let m=s.items[f],g=m.checked,v=m.task,_="";if(m.task){let S=this.renderer.checkbox(!!g);c?m.tokens.length>0&&m.tokens[0].type==="paragraph"?(m.tokens[0].text=S+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&m.tokens[0].tokens[0].type==="text"&&(m.tokens[0].tokens[0].text=S+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:S+" "}):_+=S+" "}_+=this.parse(m.tokens,c),p+=this.renderer.listitem(_,v,!!g)}n+=this.renderer.list(p,a,l);continue}case"html":{let s=o;n+=this.renderer.html(s.text,s.block);continue}case"paragraph":{let s=o;n+=this.renderer.paragraph(this.parseInline(s.tokens));continue}case"text":{let s=o,a=s.tokens?this.parseInline(s.tokens):s.text;for(;i+1<e.length&&e[i+1].type==="text";)s=e[++i],a+=`
`+(s.tokens?this.parseInline(s.tokens):s.text);n+=r?this.renderer.paragraph(a):a;continue}default:{let s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return n}parseInline(e,r){r=r||this.renderer;let n="";for(let i=0;i<e.length;i++){let o=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){let s=this.options.extensions.renderers[o.type].call({parser:this},o);if(s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=s||"";continue}}switch(o.type){case"escape":{let s=o;n+=r.text(s.text);break}case"html":{let s=o;n+=r.html(s.text);break}case"link":{let s=o;n+=r.link(s.href,s.title,this.parseInline(s.tokens,r));break}case"image":{let s=o;n+=r.image(s.href,s.title,s.text);break}case"strong":{let s=o;n+=r.strong(this.parseInline(s.tokens,r));break}case"em":{let s=o;n+=r.em(this.parseInline(s.tokens,r));break}case"codespan":{let s=o;n+=r.codespan(s.text);break}case"br":{n+=r.br();break}case"del":{let s=o;n+=r.del(this.parseInline(s.tokens,r));break}case"text":{let s=o;n+=r.text(s.text);break}default:{let s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return n}},zh=class{options;constructor(e){this.options=e||Ef}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},UP=class{defaults=BP();options=this.setOptions;parse=this.#e(rc.lex,nc.parse);parseInline=this.#e(rc.lexInline,nc.parseInline);Parser=nc;Renderer=Hh;TextRenderer=y0;Lexer=rc;Tokenizer=$h;Hooks=zh;constructor(...e){this.use(...e)}walkTokens(e,r){let n=[];for(let i of e)switch(n=n.concat(r.call(this,i)),i.type){case"table":{let o=i;for(let s of o.header)n=n.concat(this.walkTokens(s.tokens,r));for(let s of o.rows)for(let a of s)n=n.concat(this.walkTokens(a.tokens,r));break}case"list":{let o=i;n=n.concat(this.walkTokens(o.items,r));break}default:{let o=i;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(s=>{n=n.concat(this.walkTokens(o[s],r))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,r)))}}return n}use(...e){let r=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let s=r.renderers[o.name];s?r.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:r.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=r[o.level];s?s.unshift(o.tokenizer):r[o.level]=[o.tokenizer],o.start&&(o.level==="block"?r.startBlock?r.startBlock.push(o.start):r.startBlock=[o.start]:o.level==="inline"&&(r.startInline?r.startInline.push(o.start):r.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(r.childTokens[o.name]=o.childTokens)}),i.extensions=r),n.renderer){let o=this.defaults.renderer||new Hh(this.defaults);for(let s in n.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(s==="options")continue;let a=s,l=n.renderer[a],c=o[a];o[a]=(...p)=>{let f=l.apply(o,p);return f===!1&&(f=c.apply(o,p)),f||""}}i.renderer=o}if(n.tokenizer){let o=this.defaults.tokenizer||new $h(this.defaults);for(let s in n.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let a=s,l=n.tokenizer[a],c=o[a];o[a]=(...p)=>{let f=l.apply(o,p);return f===!1&&(f=c.apply(o,p)),f}}i.tokenizer=o}if(n.hooks){let o=this.defaults.hooks||new zh;for(let s in n.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(s==="options")continue;let a=s,l=n.hooks[a],c=o[a];zh.passThroughHooks.has(s)?o[a]=p=>{if(this.defaults.async)return Promise.resolve(l.call(o,p)).then(m=>c.call(o,m));let f=l.call(o,p);return c.call(o,f)}:o[a]=(...p)=>{let f=l.apply(o,p);return f===!1&&(f=c.apply(o,p)),f}}i.hooks=o}if(n.walkTokens){let o=this.defaults.walkTokens,s=n.walkTokens;i.walkTokens=function(a){let l=[];return l.push(s.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,r){return rc.lex(e,r??this.defaults)}parser(e,r){return nc.parse(e,r??this.defaults)}#e(e,r){return(n,i)=>{let o={...i},s={...this.defaults,...o};this.defaults.async===!0&&o.async===!1&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);let a=this.#t(!!s.silent,!!s.async);if(typeof n>"u"||n===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(l=>e(l,s)).then(l=>s.hooks?s.hooks.processAllTokens(l):l).then(l=>s.walkTokens?Promise.all(this.walkTokens(l,s.walkTokens)).then(()=>l):l).then(l=>r(l,s)).then(l=>s.hooks?s.hooks.postprocess(l):l).catch(a);try{s.hooks&&(n=s.hooks.preprocess(n));let l=e(n,s);s.hooks&&(l=s.hooks.processAllTokens(l)),s.walkTokens&&this.walkTokens(l,s.walkTokens);let c=r(l,s);return s.hooks&&(c=s.hooks.postprocess(c)),c}catch(l){return a(l)}}}#t(e,r){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+Us(n.message+"",!0)+"</pre>";return r?Promise.resolve(i):i}if(r)return Promise.reject(n);throw n}}},Sf=new UP;function nr(t,e){return Sf.parse(t,e)}nr.options=nr.setOptions=function(t){return Sf.setOptions(t),nr.defaults=Sf.defaults,aH(nr.defaults),nr};nr.getDefaults=BP;nr.defaults=Ef;nr.use=function(...t){return Sf.use(...t),nr.defaults=Sf.defaults,aH(nr.defaults),nr};nr.walkTokens=function(t,e){return Sf.walkTokens(t,e)};nr.parseInline=Sf.parseInline;nr.Parser=nc;nr.parser=nc.parse;nr.Renderer=Hh;nr.TextRenderer=y0;nr.Lexer=rc;nr.lexer=rc.lex;nr.Tokenizer=$h;nr.Hooks=zh;nr.parse=nr;var eqe=nr.options,tqe=nr.setOptions,rqe=nr.use,nqe=nr.walkTokens,iqe=nr.parseInline;var oqe=nc.parse,sqe=rc.lex;var yH=ie(ve(),1);var vH=F(function(e){let r=e.children,[n,i]=(0,yH.useState)(0),o=[],s=[];for(let a=0;a<r.length;a+=2)o.push(r[a]),s.push(r[a+1]);return P("div",{className:"TabUI "+e.className,style:e.style,children:[h("div",{tw:"tablist tabs-lifted",children:o.map((a,l)=>h("a",{tw:["tab",l===n&&"tab-active"],onClick:()=>i(l),children:a},l))}),h("div",{tw:"bg-base-100 text-base-content",children:s[n]})]})});var _H=F(function(e){let r=pe(),n=e.output,i=r.historySize,o=r.historySizeStr,s=n.data.kind==="markdown"?h("div",{tw:["bg-accent text-accent-content","text-center w-full font-bold"],style:{lineHeight:o,fontSize:`${i/3}px`},children:"MD"}):n.data.kind==="html"?h("div",{tw:["bg-purple-500 text-black","text-center w-full font-bold"],style:{lineHeight:o,fontSize:`${i/5}px`},children:"<HTML/>"}):h("div",{tw:"bg-base-200 text-base-content text-xs whitespace-pre-wrap overflow-hidden overflow-ellipsis",children:n.data.content});return h(ui,{output:e.output,children:s})}),bH=F(function(e){return e.output.data.kind==="markdown"?h(rs,{className:"w-full m-2",children:P(vH,{tw:"w-full",children:[h("div",{children:"rendered version"}),h("div",{className:"_MD w-full",dangerouslySetInnerHTML:{__html:nr(e.output.data.content)}}),h("div",{children:"raw version"}),h("pre",{className:"w-full",children:e.output.data.content})]})}):e.output.data.kind==="html"?h(rs,{className:"w-full m-2",children:h("div",{className:"_HTML _MD w-full",dangerouslySetInnerHTML:{__html:e.output.data.content}})}):e.output.data.kind==="text"?P(rs,{className:"w-full m-2",children:[h("div",{tw:"font-bold text-xl",children:"Text:"}),e.output.data.content]}):h("div",{children:"unknown content"})});var xH=ie(ve(),1);var lS=F(function(e){let r=pe(),i=(r.db.hosts.get(e.hostID)??r.mainHost).getServerHostHTTP(),o=async()=>{if(e.litegraphJson==null)return;let s=r.comfyUIIframeRef.current;if(s==null)return;let a=null,l=1e3;for(;a==null&&l>0&&(a=s.contentWindow.app,console.log(`${l} waiting for ComfyUI to be ready...`),a==null);){await new Promise(v=>setTimeout(v,100));l--}if(a==null)return console.log("\u274C error loading app");let c=yi(e.litegraphJson),p=JSON.stringify(c);"viaFile"==="viaFile"?a.handleFile(new File([p],"flow.json")):a.loadGraphData(yi(c))};return(0,xH.useLayoutEffect)(()=>{r.comfyUIIframeRef.current&&o()},[r.comfyUIIframeRef.current]),h(St.Fragment,{children:h("iframe",{ref:r.comfyUIIframeRef,src:i,className:e.className})})});var TH=F(function(e){let n=pe().historySizeStr;return h(ui,{output:e.output,children:h("div",{style:{width:n,height:n},tw:"flex item-center justify-center",children:h("span",{className:"material-symbols-outlined text-primary block",style:{marginTop:`calc(0.2 * ${n})`,fontSize:`calc(0.6 * ${n})`},children:"account_tree"})})})}),wH=F(function(e){let r=e.output;return h(lS,{tw:"w-full h-full",litegraphJson:r?.json_workflow()})});var Ud=ie(ve(),1);var yn=F(function(e){return P("div",{children:[h("div",{tw:"text-base-content",children:e.label}),e.children]})});var A=window.require("three");var Rqe=A.ACESFilmicToneMapping,Pqe=A.AddEquation,Lqe=A.AddOperation,Mqe=A.AdditiveAnimationBlendMode,Fqe=A.AdditiveBlending,Uqe=A.AlphaFormat,Bqe=A.AlwaysCompare,Wqe=A.AlwaysDepth,jqe=A.AlwaysStencilFunc,SH=A.AmbientLight,zqe=A.AnimationAction,$qe=A.AnimationClip,Hqe=A.AnimationLoader,qqe=A.AnimationMixer,Gqe=A.AnimationObjectGroup,Vqe=A.AnimationUtils,Kqe=A.ArcCurve,Yqe=A.ArrayCamera,Xqe=A.ArrowHelper,Jqe=A.AttachedBindMode,Qqe=A.Audio,Zqe=A.AudioAnalyser,eGe=A.AudioContext,tGe=A.AudioListener,rGe=A.AudioLoader,nGe=A.AxesHelper,iGe=A.BackSide,oGe=A.BasicDepthPacking,sGe=A.BasicShadowMap,aGe=A.BatchedMesh,lGe=A.Bone,uGe=A.BooleanKeyframeTrack,cGe=A.Box2,dGe=A.Box3,pGe=A.Box3Helper,fGe=A.BoxGeometry,mGe=A.BoxHelper,hGe=A.BufferAttribute,gGe=A.BufferGeometry,yGe=A.BufferGeometryLoader,vGe=A.ByteType,_Ge=A.Cache,bGe=A.Camera,xGe=A.CameraHelper,TGe=A.CanvasTexture,wGe=A.CapsuleGeometry,SGe=A.CatmullRomCurve3,EGe=A.CineonToneMapping,CGe=A.CircleGeometry,DGe=A.ClampToEdgeWrapping,IGe=A.Clock,kGe=A.Color,NGe=A.ColorKeyframeTrack,AGe=A.ColorManagement,OGe=A.CompressedArrayTexture,RGe=A.CompressedCubeTexture,PGe=A.CompressedTexture,LGe=A.CompressedTextureLoader,MGe=A.ConeGeometry,FGe=A.ConstantAlphaFactor,UGe=A.ConstantColorFactor,BGe=A.CubeCamera,WGe=A.CubeReflectionMapping,jGe=A.CubeRefractionMapping,zGe=A.CubeTexture,$Ge=A.CubeTextureLoader,HGe=A.CubeUVReflectionMapping,qGe=A.CubicBezierCurve,GGe=A.CubicBezierCurve3,VGe=A.CubicInterpolant,KGe=A.CullFaceBack,YGe=A.CullFaceFront,XGe=A.CullFaceFrontBack,JGe=A.CullFaceNone,QGe=A.Curve,ZGe=A.CurvePath,eVe=A.CustomBlending,tVe=A.CustomToneMapping,rVe=A.CylinderGeometry,nVe=A.Cylindrical,iVe=A.Data3DTexture,oVe=A.DataArrayTexture,sVe=A.DataTexture,aVe=A.DataTextureLoader,lVe=A.DataUtils,uVe=A.DecrementStencilOp,cVe=A.DecrementWrapStencilOp,dVe=A.DefaultLoadingManager,pVe=A.DepthFormat,fVe=A.DepthStencilFormat,mVe=A.DepthTexture,hVe=A.DetachedBindMode,gVe=A.DirectionalLight,yVe=A.DirectionalLightHelper,vVe=A.DiscreteInterpolant,_Ve=A.DisplayP3ColorSpace,bVe=A.DodecahedronGeometry,xVe=A.DoubleSide,TVe=A.DstAlphaFactor,wVe=A.DstColorFactor,SVe=A.DynamicCopyUsage,EVe=A.DynamicDrawUsage,CVe=A.DynamicReadUsage,DVe=A.EdgesGeometry,IVe=A.EllipseCurve,kVe=A.EqualCompare,NVe=A.EqualDepth,AVe=A.EqualStencilFunc,OVe=A.EquirectangularReflectionMapping,RVe=A.EquirectangularRefractionMapping,PVe=A.Euler,EH=A.EventDispatcher,LVe=A.ExtrudeGeometry,MVe=A.FileLoader,FVe=A.Float16BufferAttribute,UVe=A.Float32BufferAttribute,BVe=A.Float64BufferAttribute,WVe=A.FloatType,jVe=A.Fog,zVe=A.FogExp2,$Ve=A.FramebufferTexture,HVe=A.FrontSide,qVe=A.Frustum,GVe=A.GLBufferAttribute,VVe=A.GLSL1,KVe=A.GLSL3,YVe=A.GreaterCompare,XVe=A.GreaterDepth,JVe=A.GreaterEqualCompare,QVe=A.GreaterEqualDepth,ZVe=A.GreaterEqualStencilFunc,eKe=A.GreaterStencilFunc,tKe=A.GridHelper,rKe=A.Group,nKe=A.HalfFloatType,iKe=A.HemisphereLight,oKe=A.HemisphereLightHelper,sKe=A.IcosahedronGeometry,aKe=A.ImageBitmapLoader,lKe=A.ImageLoader,uKe=A.ImageUtils,cKe=A.IncrementStencilOp,dKe=A.IncrementWrapStencilOp,pKe=A.InstancedBufferAttribute,fKe=A.InstancedBufferGeometry,mKe=A.InstancedInterleavedBuffer,hKe=A.InstancedMesh,gKe=A.Int16BufferAttribute,yKe=A.Int32BufferAttribute,vKe=A.Int8BufferAttribute,_Ke=A.IntType,bKe=A.InterleavedBuffer,xKe=A.InterleavedBufferAttribute,TKe=A.Interpolant,wKe=A.InterpolateDiscrete,SKe=A.InterpolateLinear,EKe=A.InterpolateSmooth,CKe=A.InvertStencilOp,DKe=A.KeepStencilOp,IKe=A.KeyframeTrack,kKe=A.LOD,NKe=A.LatheGeometry,AKe=A.Layers,OKe=A.LessCompare,RKe=A.LessDepth,PKe=A.LessEqualCompare,LKe=A.LessEqualDepth,MKe=A.LessEqualStencilFunc,FKe=A.LessStencilFunc,UKe=A.Light,BKe=A.LightProbe,WKe=A.Line,jKe=A.Line3,zKe=A.LineBasicMaterial,$Ke=A.LineCurve,HKe=A.LineCurve3,qKe=A.LineDashedMaterial,GKe=A.LineLoop,VKe=A.LineSegments,KKe=A.LinearDisplayP3ColorSpace,YKe=A.LinearEncoding,XKe=A.LinearFilter,JKe=A.LinearInterpolant,QKe=A.LinearMipMapLinearFilter,ZKe=A.LinearMipMapNearestFilter,eYe=A.LinearMipmapLinearFilter,tYe=A.LinearMipmapNearestFilter,rYe=A.LinearSRGBColorSpace,nYe=A.LinearToneMapping,iYe=A.LinearTransfer,oYe=A.Loader,sYe=A.LoaderUtils,aYe=A.LoadingManager,lYe=A.LoopOnce,uYe=A.LoopPingPong,cYe=A.LoopRepeat,dYe=A.LuminanceAlphaFormat,pYe=A.LuminanceFormat,Cf=A.MOUSE,fYe=A.Material,mYe=A.MaterialLoader,CH=A.MathUtils,hYe=A.Matrix3,gYe=A.Matrix4,yYe=A.MaxEquation,qP=A.Mesh,vYe=A.MeshBasicMaterial,_Ye=A.MeshDepthMaterial,bYe=A.MeshDistanceMaterial,xYe=A.MeshLambertMaterial,TYe=A.MeshMatcapMaterial,wYe=A.MeshNormalMaterial,SYe=A.MeshPhongMaterial,EYe=A.MeshPhysicalMaterial,DH=A.MeshStandardMaterial,CYe=A.MeshToonMaterial,DYe=A.MinEquation,IYe=A.MirroredRepeatWrapping,kYe=A.MixOperation,NYe=A.MultiplyBlending,AYe=A.MultiplyOperation,OYe=A.NearestFilter,RYe=A.NearestMipMapLinearFilter,PYe=A.NearestMipMapNearestFilter,LYe=A.NearestMipmapLinearFilter,MYe=A.NearestMipmapNearestFilter,FYe=A.NeverCompare,UYe=A.NeverDepth,BYe=A.NeverStencilFunc,WYe=A.NoBlending,jYe=A.NoColorSpace,zYe=A.NoToneMapping,$Ye=A.NormalAnimationBlendMode,HYe=A.NormalBlending,qYe=A.NotEqualCompare,GYe=A.NotEqualDepth,VYe=A.NotEqualStencilFunc,KYe=A.NumberKeyframeTrack,YYe=A.Object3D,XYe=A.ObjectLoader,JYe=A.ObjectSpaceNormalMap,QYe=A.OctahedronGeometry,ZYe=A.OneFactor,eXe=A.OneMinusConstantAlphaFactor,tXe=A.OneMinusConstantColorFactor,rXe=A.OneMinusDstAlphaFactor,nXe=A.OneMinusDstColorFactor,iXe=A.OneMinusSrcAlphaFactor,oXe=A.OneMinusSrcColorFactor,sXe=A.OrthographicCamera,aXe=A.P3Primaries,lXe=A.PCFShadowMap,uXe=A.PCFSoftShadowMap,cXe=A.PMREMGenerator,dXe=A.Path,IH=A.PerspectiveCamera,kH=A.Plane,NH=A.PlaneGeometry,pXe=A.PlaneHelper,AH=A.PointLight,fXe=A.PointLightHelper,mXe=A.Points,hXe=A.PointsMaterial,gXe=A.PolarGridHelper,yXe=A.PolyhedronGeometry,vXe=A.PositionalAudio,_Xe=A.PropertyBinding,bXe=A.PropertyMixer,xXe=A.QuadraticBezierCurve,TXe=A.QuadraticBezierCurve3,GP=A.Quaternion,wXe=A.QuaternionKeyframeTrack,SXe=A.QuaternionLinearInterpolant,EXe=A.RED_GREEN_RGTC2_Format,CXe=A.RED_RGTC1_Format,DXe=A.REVISION,IXe=A.RGBADepthPacking,kXe=A.RGBAFormat,NXe=A.RGBAIntegerFormat,AXe=A.RGBA_ASTC_10x10_Format,OXe=A.RGBA_ASTC_10x5_Format,RXe=A.RGBA_ASTC_10x6_Format,PXe=A.RGBA_ASTC_10x8_Format,LXe=A.RGBA_ASTC_12x10_Format,MXe=A.RGBA_ASTC_12x12_Format,FXe=A.RGBA_ASTC_4x4_Format,UXe=A.RGBA_ASTC_5x4_Format,BXe=A.RGBA_ASTC_5x5_Format,WXe=A.RGBA_ASTC_6x5_Format,jXe=A.RGBA_ASTC_6x6_Format,zXe=A.RGBA_ASTC_8x5_Format,$Xe=A.RGBA_ASTC_8x6_Format,HXe=A.RGBA_ASTC_8x8_Format,qXe=A.RGBA_BPTC_Format,GXe=A.RGBA_ETC2_EAC_Format,VXe=A.RGBA_PVRTC_2BPPV1_Format,KXe=A.RGBA_PVRTC_4BPPV1_Format,YXe=A.RGBA_S3TC_DXT1_Format,XXe=A.RGBA_S3TC_DXT3_Format,JXe=A.RGBA_S3TC_DXT5_Format,QXe=A.RGB_BPTC_SIGNED_Format,ZXe=A.RGB_BPTC_UNSIGNED_Format,eJe=A.RGB_ETC1_Format,tJe=A.RGB_ETC2_Format,rJe=A.RGB_PVRTC_2BPPV1_Format,nJe=A.RGB_PVRTC_4BPPV1_Format,iJe=A.RGB_S3TC_DXT1_Format,oJe=A.RGFormat,sJe=A.RGIntegerFormat,aJe=A.RawShaderMaterial,OH=A.Ray,lJe=A.Raycaster,uJe=A.Rec709Primaries,cJe=A.RectAreaLight,dJe=A.RedFormat,pJe=A.RedIntegerFormat,fJe=A.ReinhardToneMapping,mJe=A.RenderTarget,hJe=A.RepeatWrapping,gJe=A.ReplaceStencilOp,yJe=A.ReverseSubtractEquation,vJe=A.RingGeometry,_Je=A.SIGNED_RED_GREEN_RGTC2_Format,bJe=A.SIGNED_RED_RGTC1_Format,RH=A.SRGBColorSpace,xJe=A.SRGBTransfer,PH=A.Scene,TJe=A.ShaderChunk,wJe=A.ShaderLib,SJe=A.ShaderMaterial,EJe=A.ShadowMaterial,CJe=A.Shape,DJe=A.ShapeGeometry,IJe=A.ShapePath,kJe=A.ShapeUtils,NJe=A.ShortType,AJe=A.Skeleton,OJe=A.SkeletonHelper,RJe=A.SkinnedMesh,PJe=A.Source,LJe=A.Sphere,MJe=A.SphereGeometry,VP=A.Spherical,FJe=A.SphericalHarmonics3,UJe=A.SplineCurve,BJe=A.SpotLight,WJe=A.SpotLightHelper,jJe=A.Sprite,zJe=A.SpriteMaterial,$Je=A.SrcAlphaFactor,HJe=A.SrcAlphaSaturateFactor,qJe=A.SrcColorFactor,GJe=A.StaticCopyUsage,VJe=A.StaticDrawUsage,KJe=A.StaticReadUsage,YJe=A.StereoCamera,XJe=A.StreamCopyUsage,JJe=A.StreamDrawUsage,QJe=A.StreamReadUsage,ZJe=A.StringKeyframeTrack,eQe=A.SubtractEquation,tQe=A.SubtractiveBlending,Df=A.TOUCH,rQe=A.TangentSpaceNormalMap,nQe=A.TetrahedronGeometry,iQe=A.Texture,LH=A.TextureLoader,oQe=A.TorusGeometry,sQe=A.TorusKnotGeometry,aQe=A.Triangle,lQe=A.TriangleFanDrawMode,uQe=A.TriangleStripDrawMode,cQe=A.TrianglesDrawMode,dQe=A.TubeGeometry,pQe=A.TwoPassDoubleSide,fQe=A.UVMapping,mQe=A.Uint16BufferAttribute,hQe=A.Uint32BufferAttribute,gQe=A.Uint8BufferAttribute,yQe=A.Uint8ClampedBufferAttribute,vQe=A.Uniform,_Qe=A.UniformsGroup,bQe=A.UniformsLib,xQe=A.UniformsUtils,TQe=A.UnsignedByteType,wQe=A.UnsignedInt248Type,SQe=A.UnsignedIntType,EQe=A.UnsignedShort4444Type,CQe=A.UnsignedShort5551Type,DQe=A.UnsignedShortType,IQe=A.VSMShadowMap,ba=A.Vector2,os=A.Vector3,kQe=A.Vector4,NQe=A.VectorKeyframeTrack,AQe=A.VideoTexture,OQe=A.WebGL1Renderer,RQe=A.WebGL3DRenderTarget,PQe=A.WebGLArrayRenderTarget,LQe=A.WebGLCoordinateSystem,MQe=A.WebGLCubeRenderTarget,FQe=A.WebGLMultipleRenderTargets,UQe=A.WebGLRenderTarget,MH=A.WebGLRenderer,BQe=A.WebGLUtils,WQe=A.WebGPUCoordinateSystem,jQe=A.WireframeGeometry,zQe=A.WrapAroundEnding,$Qe=A.ZeroCurvatureEnding,HQe=A.ZeroFactor,qQe=A.ZeroSlopeEnding,GQe=A.ZeroStencilOp,VQe=A._SRGBAFormat,KQe=A.createCanvasElement,YQe=A.sRGBEncoding;var w0e=(t,e,r)=>Math.max(e,Math.min(r,t)),_i=F(function(e){let r=e.value??w0e(1,e.min??-1/0,e.max??1/0),n=e.mode,i=e.step??(n==="int"?1:.1),o=typeof r=="number"&&!isNaN(r);return P("div",{tw:"relative flex items-center gap-1",children:[o?null:P("div",{className:"text-red-500",children:["Invalid value:",h("pre",{children:JSON.stringify(r)})]}),e.hideSlider?null:h(ko,{style:{width:"6rem"},value:r,min:e.min,max:e.max,step:i,onChange:s=>{let a=s.target.value,l=typeof a=="string"?n=="int"?parseInt(a,10):Mr(a,2):a;if(isNaN(l)||typeof l!="number")return console.log(`${JSON.stringify(a)} is not a number`);n=="int"&&(l=Math.round(l)),e.onValueChange(l)}}),h("input",{type:"number",tw:"input input-sm input-bordered",value:r,placeholder:e.placeholder,style:{fontFamily:"monospace",width:r.toString().length+6+"ch"},step:i,onChange:s=>{let a=s.target.value,l=typeof a=="string"?n=="int"?parseInt(a,10):parseFloat(a):a;if(isNaN(l)||typeof l!="number")return console.log(`${JSON.stringify(a)} is not a number`);n=="int"&&(l=Math.round(l)),e.onValueChange(l)}})]})});var FH={type:"change"},KP={type:"start"},UH={type:"end"},uS=new OH,BH=new kH,S0e=Math.cos(70*CH.DEG2RAD),cS=class extends EH{constructor(e,r){super(),this.object=e,this.domElement=r,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new os,this.cursor=new os,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Cf.ROTATE,MIDDLE:Cf.DOLLY,RIGHT:Cf.PAN},this.touches={ONE:Df.ROTATE,TWO:Df.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(L){L.addEventListener("keydown",fr),this._domElementKeyEvents=L},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",fr),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(FH),n.update(),o=i.NONE},this.update=function(){let L=new os,je=new GP().setFromUnitVectors(e.up,new os(0,1,0)),st=je.clone().invert(),wr=new os,Di=new GP,Pa=new os,$o=2*Math.PI;return function(Mp=null){let fu=n.object.position;L.copy(fu).sub(n.target),L.applyQuaternion(je),a.setFromVector3(L),n.autoRotate&&o===i.NONE&&K($(Mp)),n.enableDamping?(a.theta+=l.theta*n.dampingFactor,a.phi+=l.phi*n.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Yt=n.minAzimuthAngle,ti=n.maxAzimuthAngle;isFinite(Yt)&&isFinite(ti)&&(Yt<-Math.PI?Yt+=$o:Yt>Math.PI&&(Yt-=$o),ti<-Math.PI?ti+=$o:ti>Math.PI&&(ti-=$o),Yt<=ti?a.theta=Math.max(Yt,Math.min(ti,a.theta)):a.theta=a.theta>(Yt+ti)/2?Math.max(Yt,a.theta):Math.min(ti,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),n.target.sub(n.cursor),n.target.clampLength(n.minTargetRadius,n.maxTargetRadius),n.target.add(n.cursor),n.zoomToCursor&&C||n.object.isOrthographicCamera?a.radius=se(a.radius):a.radius=se(a.radius*c),L.setFromSpherical(a),L.applyQuaternion(st),fu.copy(n.target).add(L),n.object.lookAt(n.target),n.enableDamping===!0?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),p.set(0,0,0));let mu=!1;if(n.zoomToCursor&&C){let yl=null;if(n.object.isPerspectiveCamera){let vl=L.length();yl=se(vl*c);let bs=vl-yl;n.object.position.addScaledVector(I,bs),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){let vl=new os(N.x,N.y,0);vl.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/c)),n.object.updateProjectionMatrix(),mu=!0;let bs=new os(N.x,N.y,0);bs.unproject(n.object),n.object.position.sub(bs).add(vl),n.object.updateMatrixWorld(),yl=L.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;yl!==null&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(yl).add(n.object.position):(uS.origin.copy(n.object.position),uS.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(uS.direction))<S0e?e.lookAt(n.target):(BH.setFromNormalAndCoplanarPoint(n.object.up,n.target),uS.intersectPlane(BH,n.target))))}else n.object.isOrthographicCamera&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/c)),n.object.updateProjectionMatrix(),mu=!0);return c=1,C=!1,mu||wr.distanceToSquared(n.object.position)>s||8*(1-Di.dot(n.object.quaternion))>s||Pa.distanceToSquared(n.target)>0?(n.dispatchEvent(FH),wr.copy(n.object.position),Di.copy(n.object.quaternion),Pa.copy(n.target),!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",we),n.domElement.removeEventListener("pointerdown",Ve),n.domElement.removeEventListener("pointercancel",it),n.domElement.removeEventListener("wheel",Bt),n.domElement.removeEventListener("pointermove",De),n.domElement.removeEventListener("pointerup",it),n._domElementKeyEvents!==null&&(n._domElementKeyEvents.removeEventListener("keydown",fr),n._domElementKeyEvents=null)};let n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},o=i.NONE,s=1e-6,a=new VP,l=new VP,c=1,p=new os,f=new ba,m=new ba,g=new ba,v=new ba,_=new ba,S=new ba,T=new ba,w=new ba,E=new ba,I=new os,N=new ba,C=!1,k=[],U={};function $(L){return L!==null?2*Math.PI/60*n.autoRotateSpeed*L:2*Math.PI/60/60*n.autoRotateSpeed}function G(){return Math.pow(.95,n.zoomSpeed)}function K(L){l.theta-=L}function X(L){l.phi-=L}let te=function(){let L=new os;return function(st,wr){L.setFromMatrixColumn(wr,0),L.multiplyScalar(-st),p.add(L)}}(),ne=function(){let L=new os;return function(st,wr){n.screenSpacePanning===!0?L.setFromMatrixColumn(wr,1):(L.setFromMatrixColumn(wr,0),L.crossVectors(n.object.up,L)),L.multiplyScalar(st),p.add(L)}}(),H=function(){let L=new os;return function(st,wr){let Di=n.domElement;if(n.object.isPerspectiveCamera){let Pa=n.object.position;L.copy(Pa).sub(n.target);let $o=L.length();$o*=Math.tan(n.object.fov/2*Math.PI/180),te(2*st*$o/Di.clientHeight,n.object.matrix),ne(2*wr*$o/Di.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(te(st*(n.object.right-n.object.left)/n.object.zoom/Di.clientWidth,n.object.matrix),ne(wr*(n.object.top-n.object.bottom)/n.object.zoom/Di.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function re(L){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?c/=L:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function W(L){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?c*=L:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function q(L){if(!n.zoomToCursor)return;C=!0;let je=n.domElement.getBoundingClientRect(),st=L.clientX-je.left,wr=L.clientY-je.top,Di=je.width,Pa=je.height;N.x=st/Di*2-1,N.y=-(wr/Pa)*2+1,I.set(N.x,N.y,1).unproject(n.object).sub(n.object.position).normalize()}function se(L){return Math.max(n.minDistance,Math.min(n.maxDistance,L))}function J(L){f.set(L.clientX,L.clientY)}function ye(L){q(L),T.set(L.clientX,L.clientY)}function Ne(L){v.set(L.clientX,L.clientY)}function ae(L){m.set(L.clientX,L.clientY),g.subVectors(m,f).multiplyScalar(n.rotateSpeed);let je=n.domElement;K(2*Math.PI*g.x/je.clientHeight),X(2*Math.PI*g.y/je.clientHeight),f.copy(m),n.update()}function Se(L){w.set(L.clientX,L.clientY),E.subVectors(w,T),E.y>0?re(G()):E.y<0&&W(G()),T.copy(w),n.update()}function Re(L){_.set(L.clientX,L.clientY),S.subVectors(_,v).multiplyScalar(n.panSpeed),H(S.x,S.y),v.copy(_),n.update()}function Pe(L){q(L),L.deltaY<0?W(G()):L.deltaY>0&&re(G()),n.update()}function Oe(L){let je=!1;switch(L.code){case n.keys.UP:L.ctrlKey||L.metaKey||L.shiftKey?X(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):H(0,n.keyPanSpeed),je=!0;break;case n.keys.BOTTOM:L.ctrlKey||L.metaKey||L.shiftKey?X(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):H(0,-n.keyPanSpeed),je=!0;break;case n.keys.LEFT:L.ctrlKey||L.metaKey||L.shiftKey?K(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):H(n.keyPanSpeed,0),je=!0;break;case n.keys.RIGHT:L.ctrlKey||L.metaKey||L.shiftKey?K(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):H(-n.keyPanSpeed,0),je=!0;break}je&&(L.preventDefault(),n.update())}function ct(){if(k.length===1)f.set(k[0].pageX,k[0].pageY);else{let L=.5*(k[0].pageX+k[1].pageX),je=.5*(k[0].pageY+k[1].pageY);f.set(L,je)}}function mt(){if(k.length===1)v.set(k[0].pageX,k[0].pageY);else{let L=.5*(k[0].pageX+k[1].pageX),je=.5*(k[0].pageY+k[1].pageY);v.set(L,je)}}function wt(){let L=k[0].pageX-k[1].pageX,je=k[0].pageY-k[1].pageY,st=Math.sqrt(L*L+je*je);T.set(0,st)}function Me(){n.enableZoom&&wt(),n.enablePan&&mt()}function ue(){n.enableZoom&&wt(),n.enableRotate&&ct()}function Te(L){if(k.length==1)m.set(L.pageX,L.pageY);else{let st=R(L),wr=.5*(L.pageX+st.x),Di=.5*(L.pageY+st.y);m.set(wr,Di)}g.subVectors(m,f).multiplyScalar(n.rotateSpeed);let je=n.domElement;K(2*Math.PI*g.x/je.clientHeight),X(2*Math.PI*g.y/je.clientHeight),f.copy(m)}function ce(L){if(k.length===1)_.set(L.pageX,L.pageY);else{let je=R(L),st=.5*(L.pageX+je.x),wr=.5*(L.pageY+je.y);_.set(st,wr)}S.subVectors(_,v).multiplyScalar(n.panSpeed),H(S.x,S.y),v.copy(_)}function xe(L){let je=R(L),st=L.pageX-je.x,wr=L.pageY-je.y,Di=Math.sqrt(st*st+wr*wr);w.set(0,Di),E.set(0,Math.pow(w.y/T.y,n.zoomSpeed)),re(E.y),T.copy(w)}function Ae(L){n.enableZoom&&xe(L),n.enablePan&&ce(L)}function M(L){n.enableZoom&&xe(L),n.enableRotate&&Te(L)}function Ve(L){n.enabled!==!1&&(k.length===0&&(n.domElement.setPointerCapture(L.pointerId),n.domElement.addEventListener("pointermove",De),n.domElement.addEventListener("pointerup",it)),_e(L),L.pointerType==="touch"?nt(L):_t(L))}function De(L){n.enabled!==!1&&(L.pointerType==="touch"?rt(L):xt(L))}function it(L){Ie(L),k.length===0&&(n.domElement.releasePointerCapture(L.pointerId),n.domElement.removeEventListener("pointermove",De),n.domElement.removeEventListener("pointerup",it)),n.dispatchEvent(UH),o=i.NONE}function _t(L){let je;switch(L.button){case 0:je=n.mouseButtons.LEFT;break;case 1:je=n.mouseButtons.MIDDLE;break;case 2:je=n.mouseButtons.RIGHT;break;default:je=-1}switch(je){case Cf.DOLLY:if(n.enableZoom===!1)return;ye(L),o=i.DOLLY;break;case Cf.ROTATE:if(L.ctrlKey||L.metaKey||L.shiftKey){if(n.enablePan===!1)return;Ne(L),o=i.PAN}else{if(n.enableRotate===!1)return;J(L),o=i.ROTATE}break;case Cf.PAN:if(L.ctrlKey||L.metaKey||L.shiftKey){if(n.enableRotate===!1)return;J(L),o=i.ROTATE}else{if(n.enablePan===!1)return;Ne(L),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&n.dispatchEvent(KP)}function xt(L){switch(o){case i.ROTATE:if(n.enableRotate===!1)return;ae(L);break;case i.DOLLY:if(n.enableZoom===!1)return;Se(L);break;case i.PAN:if(n.enablePan===!1)return;Re(L);break}}function Bt(L){n.enabled===!1||n.enableZoom===!1||o!==i.NONE||(L.preventDefault(),n.dispatchEvent(KP),Pe(L),n.dispatchEvent(UH))}function fr(L){n.enabled===!1||n.enablePan===!1||Oe(L)}function nt(L){switch(O(L),k.length){case 1:switch(n.touches.ONE){case Df.ROTATE:if(n.enableRotate===!1)return;ct(),o=i.TOUCH_ROTATE;break;case Df.PAN:if(n.enablePan===!1)return;mt(),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(n.touches.TWO){case Df.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Me(),o=i.TOUCH_DOLLY_PAN;break;case Df.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;ue(),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&n.dispatchEvent(KP)}function rt(L){switch(O(L),o){case i.TOUCH_ROTATE:if(n.enableRotate===!1)return;Te(L),n.update();break;case i.TOUCH_PAN:if(n.enablePan===!1)return;ce(L),n.update();break;case i.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Ae(L),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;M(L),n.update();break;default:o=i.NONE}}function we(L){n.enabled!==!1&&L.preventDefault()}function _e(L){k.push(L)}function Ie(L){delete U[L.pointerId];for(let je=0;je<k.length;je++)if(k[je].pointerId==L.pointerId){k.splice(je,1);return}}function O(L){let je=U[L.pointerId];je===void 0&&(je=new ba,U[L.pointerId]=je),je.set(L.pageX,L.pageY)}function R(L){let je=L.pointerId===k[0].pointerId?k[1]:k[0];return U[je.pointerId]}n.domElement.addEventListener("contextmenu",we),n.domElement.addEventListener("pointerdown",Ve),n.domElement.addEventListener("pointercancel",it),n.domElement.addEventListener("wheel",Bt,{passive:!1}),this.update()}};var WH=F(function(e){let r=pe(),n=r.historySize,i=r.historySizeStr;return h(ui,{size:n,output:e.output,children:h("div",{tw:["bg-orange-500 text-black","text-center w-full font-bold"],style:{lineHeight:i,fontSize:`${n/3}px`},children:"3D"})})}),jH=F(function(e){let r=(0,Ud.useMemo)(()=>new YP({image:tn(e.output.data.image),depthMap:tn(e.output.data.depthMap),normalMap:tn(e.output.data.normalMap),width:tn(e.output.data.width),height:tn(e.output.data.height)}),[JSON.stringify(e)]);return(0,Ud.useEffect)(()=>r.cleanup,[r]),(0,Ud.useLayoutEffect)(()=>r.mount(),[r]),P("div",{children:[P("div",{tw:"flex gap-2 px-2",children:[h(yn,{label:"displacement",children:h(_i,{mode:"float",style:{width:"5rem"},min:0,max:8,value:r.displacementScale,onValueChange:n=>{r.displacementScale=n}})}),h(yn,{label:"light",children:h(ko,{style:{width:"5rem"},min:0,max:8,value:r.ambientLightIntensity,onChange:n=>{let i=Mr(n.target.value);r.ambientLightIntensity=i}})}),h(yn,{label:"light color",children:h(Io,{tw:"join-item input-xs",type:"color",style:{width:"5rem"},value:r.ambientLightColor,onChange:n=>{let i=n.target.value,o=typeof i=="string"?parseInt(i.replace("#",""),16):i;r.ambientLightColor=o}})}),h(yn,{label:"Symmetric Model",children:h(vi,{checked:r.isSymmetric,onChange:n=>r.isSymmetric=n.target.checked})})]}),h("div",{ref:r.mountRef})]})}),YP=class{constructor(e){this.p=e;this.mountRef=(0,Ud.createRef)();this.metalness=0;this.roughness=1;this._displacementScale=3;this._ambientLightColor=16777215;this._ambientLightIntensity=1;this._isSymmetric=!1;this.updateGeometry=()=>{let e=this.planeSym.geometry,r=e.attributes.normal;for(let n=0;n<r.count;n++)r.setX(n,-r.getX(n)),r.setY(n,r.getY(n)),r.setZ(n,r.getZ(n));if(r.needsUpdate=!0,e.index){let n=e.index;for(let i=0;i<n.count;i+=3){let o=n.getX(i);n.setX(i,n.getX(i+2)),n.setX(i+2,o)}n.needsUpdate=!0}e.computeVertexNormals(),e.computeVertexNormals(),this.planeSym.geometry.computeVertexNormals(),this.planeSym.geometry.attributes.position.needsUpdate=!0};this.WIDTH=800;this.HEIGHT=800;this.mount=()=>{let e=this.mountRef.current;e&&e.children[0]&&e?.removeChild(e.children[0]),e?.appendChild(this.renderer.domElement)};this.scene=new PH,this.camera=new IH(75,this.WIDTH/this.HEIGHT,.1,1e3),this.renderer=new MH,this.renderer.setSize(this.WIDTH,this.HEIGHT),this.controls=new cS(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.25,this.controls.enableZoom=!0;let r=new LH,n=r.load(e.image);n.colorSpace=RH;let i=r.load(e.depthMap),o=r.load(e.normalMap),s=e.height/e.width;this.geometry=new NH(5,5*s,Math.round(e.width),Math.round(e.height)),this.material=new DH({map:n,transparent:!0,displacementMap:i,displacementScale:this.displacementScale,normalMap:o,metalness:this.metalness,roughness:this.roughness}),this.plane=new qP(this.geometry,this.material),this.planeSym=new qP(this.geometry.clone(),this.material),this.scene.add(this.plane),this.scene.add(this.planeSym),this.camera.position.z=7,this.ambientLight=new SH(16777215,3),this.scene.add(this.ambientLight);let a=new AH(16777215,1);this.camera.add(a);let l=()=>{requestAnimationFrame(l),this.controls.update(),this.renderer.render(this.scene,this.camera)};l(),this.cleanup=()=>{this.mountRef.current?.removeChild(this.renderer.domElement),this.scene.clear(),this.geometry.dispose(),this.material.dispose(),n.dispose(),i.dispose(),o.dispose()},Ce(this,{mountRef:!1})}get displacementScale(){return this._displacementScale}set displacementScale(e){this._displacementScale=e,this.material.displacementScale=e}get ambientLightColor(){return this._ambientLightColor}set ambientLightColor(e){this._ambientLightColor=e,this.ambientLight.color.setHex(e)}get ambientLightIntensity(){return this._ambientLightIntensity}set ambientLightIntensity(e){this._ambientLightIntensity=e,this.ambientLight.intensity=e}get isSymmetric(){return this._isSymmetric}set isSymmetric(e){this._isSymmetric=e,this.updateGeometry()}};var zH=F(function(e){let r=pe(),n=r.historySize,i=r.historySizeStr;return h(ui,{output:e.output,children:h("div",{tw:["bg-red-400 text-black","text-center w-full font-bold"],style:{fontSize:`${n/2}px`},children:h("span",{style:{lineHeight:i},className:"material-symbols-outlined p-0 m-0",children:"play_circle"})})})}),$H=F(function(e){return h("video",{style:{objectFit:"contain"},src:e.output.url,controls:!0,autoPlay:!0,loop:!0})});var E0e=t=>crypto.getRandomValues(new Uint8Array(t)),C0e=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*n*e/t.length);return(o=e)=>{let s="";for(;;){let a=r(i),l=i;for(;l--;)if(s+=t[a[l]&n]||"",s.length===o)return s}}},HH=(t,e=21)=>C0e(t,e,E0e),vt=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");var If=class{constructor(){this.finished=new Promise((e,r)=>{this._resolve=e,this._rejects=r});this.notifyEmptyPrompt=()=>console.log("\u{1F536} No work to do");this.onCreate=e=>{let r=this.st._pendingMsgs.get(e.id);if(r!=null){this.log(`\u{1F7E2} onCreate: ${r.length} pending messages`);for(let n of r)this.onPromptRelatedMessage(n)}};this.step=new Jn(this,"stepID",()=>this.db.steps);this.graph=new Jn(this,"graphID",()=>this.db.graphs);this.onPromptRelatedMessage=e=>{let r=this.graph.item;if(e.type!=="execution_start"){if(e.type==="execution_cached")return r.onExecutionCached(e);if(e.type==="executing")return this.onExecuting(e);if(e.type==="progress")return r.onProgress(e);if(e.type==="executed")return this.onExecuted(e);if(e.type==="execution_error")return this.onError(e);console.log("[\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534}] ",e),gr(e)}};this.onExecuting=e=>{if(this.graph.item.onExecuting(e),e.data.node==null){this._finish({status:"Success"});return}};this.onError=e=>{console.log(">> MARK ERROR"),this.step.item.update({status:"Failure"}),this._finish({status:"Failure",error:e})};this.RUNTIME=null;this.onExecuted=e=>{for(let r of e.data.output.images){let n=e.data.node,i=this.graph.item.data.comfyPromptJSON[n],o=this.graph.item.data.metadata[n];if(i==null)throw new Error("\u274C invariant violation: promptNode is null");let s=this.db.media_images.create({id:vt(),stepID:this.step.id,promptID:this.id,promptNodeID:n,infos:{type:"image-generated-by-comfy",comfyImageInfo:r,comfyHostHttpURL:this.st.getServerHostHTTP()}});this.RUNTIME&&o.storeAs&&this.RUNTIME.getImageStore(o.storeAs).set(s)}};this._finish=e=>{if(this.update({...e,executed:1}),this._resolve==null)throw new Error("\u274C invariant violation: ScriptStep_prompt.resolve is null.");this._resolve(this)}}get progressGlobal(){return this.data.status==="Success"?{countDone:1,countTotal:1,isDone:!0,percent:100}:this.graph.item.progressGlobal}get status(){return this.data.status??"New"}};var kf=class{constructor(){this.prompt=new Jn(this,"promptID",()=>this.db.comfy_prompts);this.graph=new Jn(this,"graphID",()=>this.db.graphs);this.step=new Jn(this,"stepID",()=>this.db.steps)}};var GH=ie(ve(),1);var qH=F(function(e){let r=e.node.status;return r==="executing"?h(Lu,{}):r==="cached"?h("span",{className:"material-symbols-outlined text-green-600",children:"bookmark"}):r==="done"?h("span",{className:"material-symbols-outlined text-green-600",children:"done"}):r==="error"?h("span",{className:"material-symbols-outlined text-red-600",children:"error"}):r==="waiting"?h("span",{className:"material-symbols-outlined text-blue-600",children:"next_plan"}):r==null?h("span",{className:"material-symbols-outlined text-gray-600",children:"contact_support"}):gr(r)});Tv({enforceActions:"never"});var qh=class t{constructor(e,r,n,i={}){this.graph=e;this.uid=r;this.meta=i;this.storeAs=e=>(this.meta.storeAs=e,this);this.tag=e=>(this.meta.tag=e,this);this.progressRatio=0;this.progress=null;this.status=null;this.updatedAt=Date.now();this.disabled=!1;this.$outputs=[];if(this.uidNumber=this.graph._uidNumber++,n==null)throw new Error("invariant violation: jsonExt is null");if(this.$schema=e.schema.nodesByNameInComfy[n.class_type],this.$schema==null)throw console.log("\u274C available nodes:",Object.keys(e.schema.nodesByNameInComfy).join(",")),new Error(`\u274C no schema found for node "${n.class_type}"`);this.uidPrefixed=`${this.$schema.nameInCushy}_${this.uidNumber}`;let o=0;this.json=this._convertPromptExtToPrompt(n),this.graph.registerNode(this);let s={};for(let l of this.$schema.outputs){let c=new Uu(this,o++,l.nameInCushy);s[l.nameInCushy]=c,this.$outputs.push(c)}this.outputs=s;let a={};for(let l of this.$schema.singleOuputs)a[`_${l.typeName}`]=s[l.nameInCushy];Ce(this),fA(this,a)}get isExecuting(){return this.status==="executing"}get statusEmoji(){return(0,GH.createElement)(qH,{node:this})}disable(){this.disabled=!0}get inputs(){return this.json.inputs}set(e){let r=this.graph.cyto;for(let[n,i]of Object.entries(e)){let o=this.serializeValue(n,i),s=this.json.inputs[n];o!==s&&(r&&Array.isArray(o)&&Array.isArray(s)&&(r?.removeEdge(`${s[0]}-${n}->${this.uid}`),r?.addEdge({sourceUID:o[0],targetUID:this.uid,input:n})),this.json.inputs[n]=o)}}get color(){return xf[this.$schema.category]??"#aaa"}_convertPromptExtToPrompt(e){let r={},n=new Set;for(let i of this.$schema.inputs){n.add(i.nameInComfy);let o=this.serializeValue(i.nameInComfy,e.inputs[i.nameInComfy]);r[i.nameInComfy]=o}for(let[i,o]of Object.entries(e.inputs)){if(n.has(i))continue;let s=this.serializeValue(i,o);r[i]=s}return{class_type:this.$schema.nameInComfy,inputs:r}}_incomingNodes(){let e=[];for(let[r,n]of Object.entries(this.inputs))if(n instanceof Array){let[i,o]=n;e.push(i)}return e}_incomingEdges(){let e=[];for(let[r,n]of Object.entries(this.inputs))if(n instanceof Array){let[i,o]=n;e.push({from:i,inputName:r})}return e}get width(){return 300}get height(){return this.$schema.inputs.map(n=>n.opts==null?30:(typeof n.opts=="object"?n.opts:{})?.multiline?40:30).reduce((n,i)=>n+i,0)+30}serializeValue(e,r){if(r==null){let n=this.$schema.inputs.find(o=>o.nameInComfy===e);if(n==null)throw new Error(`\u274C no schema for field "${e}" (of node ${this.$schema.nameInCushy})`);let i=n.opts==null||typeof n.opts!="object"?void 0:n.opts;if(i?.default!=null)return i.default;if(!n.required)return;console.error(e,"is required but value is ",r,this.json),this.graph.recordProblem(`\u{1F534} [serializeValue] field "${e}" (of node ${this.$schema.nameInCushy}#${this.uid}) value is null but field is not optional`);return}if(typeof r=="function")return this.serializeValue(e,r(this.graph.builder,this.graph));if(r===yR){let n=this._getExpecteTypeForField(e);console.info(`\u{1F50D} looking for type ${n} for field ${e}`);for(let i of this.graph.nodes.slice().reverse()){let o=i._getOutputForTypeOrNull(n);if(o!=null)return[i.uid,o.slotIx]}throw new Error(`\u{1F534} [AUTO failed] field "${e}" (of node ${this.$schema.nameInCushy}) value is null`)}if(r instanceof Uu)return[r.node.uid,r.slotIx];if(r instanceof t){let n=this._getExpecteTypeForField(e),i=r._getOutputForTypeOrCrash(n);return[r.uid,i.slotIx]}return r}_getExpecteTypeForField(e){let r=this.$schema.inputs.find(n=>n.nameInComfy===e);if(r==null)throw new Error("\u{1F534} input not found asdf");return r.type}_getOutputForTypeOrCrash(e){let r=this.$schema.outputs.find(i=>i.typeName===e),n=this.outputs[r.nameInCushy];if(n instanceof Uu)return n;throw new Error(`Expected ${r.nameInCushy} to be a NodeOutput`)}_getOutputForTypeOrNull(e){let r=this.$schema.outputs.find(i=>i.typeName===e);if(r==null)return null;let n=this.outputs[r.nameInCushy];if(n==null)return null;if(n instanceof Uu)return n;throw new Error(`Expected ${r.nameInCushy} to be a NodeOutput`)}};var dS=class{constructor(e){this.graph=e;let r=e.st.schema;for(let n of r.nodes)try{Object.defineProperty(this,n.nameInCushy,{value:(i,o)=>{let s;if(o?.id!=null&&o.id!==""){let a=parseInt(o.id,10);!isNaN(a)&&a>this.graph._uidNumber&&(this.graph._uidNumber=Math.round(a+1)),s=o.id}else s=(this.graph._uidNumber++).toString();return new qh(e,s,si({class_type:n.nameInComfy,inputs:i}),si(o??{}))}})}catch(i){console.log(i),console.error("impossible to create builder for node"),console.log("current:",JSON.stringify(n.nameInComfy),JSON.stringify(n.nameInCushy));let o=r.nodes.find(s=>s.nameInCushy===n.nameInCushy);throw console.log("prev",JSON.stringify(o.nameInComfy),JSON.stringify(o.nameInCushy)),i}}};var Gh=window.require("cytoscape"),XP=Gh,GZe=Gh.use,VZe=Gh.warnings,KZe=Gh.version,YZe=Gh.Stylesheet,XZe=Gh.stylesheet;var D0e=window.require("cytoscape-klay"),VH=D0e;XP.use(VH);var KH=t=>{let e=[];for(let s of t.nodes){e.push({data:{label:s.$schema.nameInComfy,id:s.uidNumber,width:s.width*1.2,height:s.height*1.2}});for(let a of s._incomingEdges()){let l=tn(t.nodes.find(f=>f.uid===a.from)?.uidNumber),c=s.uidNumber,p={label:a.inputName,id:`${l}-${a.inputName}->${c}`,source:l,target:c};e.push({data:p})}}let n=XP({headless:!0,elements:e,style:[{selector:"node",style:{label:"data(label)",shape:"rectangle",width:"data(width)",height:"data(height)","font-size":6}},{selector:"edge",style:{"font-size":6,"curve-style":"bezier","target-arrow-shape":"triangle",label:"data(label)"}}],styleEnabled:!0});return n.layout({fit:!0,crossingMinimization:"INTERACTIVE",name:"klay",animate:!1}).run(),n.json()};var I0e=t=>t,YH=t=>t,XH=(t,e)=>{let r=new JP(t),n=Math.max(...t.nodes.map(s=>s.uidNumber));console.groupCollapsed("convertNodeToLiteGraphNode");let i=t.nodes.map(s=>k0e(r,s));console.groupEnd();let o=i.map(s=>s.node);for(let s of o){if(e){let a=e.elements.nodes.find(l=>parseInt(l.data.id,10)===s.id);a?(s.pos[0]=a.position.x,s.pos[1]=a.position.y):console.log("\u274C no pos",s)}for(let a of s.outputs)a.links=r.links.filter(l=>l[3]===s.id&&l[4]===a.slot_index).map(l=>l[0])}return{last_node_id:n,last_link_id:r.nextLinkId,nodes:o,links:r.links,config:{},extra:{},groups:[],version:.4}},k0e=(t,e)=>{let r=[],n=[],i=[];for(let s of e.$schema.inputs){let a=e.serializeValue(s.nameInComfy,e.json.inputs[s.nameInComfy]);if(N0e(a)){console.log("><><>",yi(a));let p=tn(t.graph.nodes.find(f=>f.uid===a[0])?.uidNumber);r.push({name:s.nameInComfy,type:s.type,link:t.allocateLink(p,a[1],e.uidNumber,YH(s.index),s.type)})}else n.push(a);s.type==="INT"&&(s.nameInComfy==="seed"||s.nameInComfy==="noise_seed")&&n.push(!1)}let o=e.$schema.outputs.map((s,a)=>({type:s.typeName,links:[],slot_index:YH(a)}));return{incomingLinks:i,node:{type:e.$schema.nameInComfy,id:e.uidNumber,inputs:r,outputs:o,pos:[0,0],size:[e.width,e.height],widgets_values:n}}},N0e=t=>!!Array.isArray(t),JP=class{constructor(e){this.graph=e;this.nextLinkId=0;this.links=[];this.allocateLink=(e,r,n,i,o)=>{let s=I0e(++this.nextLinkId);return this.links.push([s,e,r,n,i,o]),s}}};var JH=t=>t,QH=t=>t;var pS=class extends Error{constructor(r,n,i){super();this.message=r;this.graph=n;this.details=i}};var Nf=class{constructor(){this.setMetadata=(e,r)=>{this.data.metadata[e]=r};this.getMetadata=e=>this.data.metadata[e]??null;this._problems=[];this.recordProblem=(e,r)=>{this._problems.push({title:e,data:r})};this._builder=null;this.onUpdate=(e,r)=>{let n=this.size;e!=null&&(this.nodes=[],this.nodesIndex.clear(),this.currentExecutingNode=null);for(let[i,o]of Object.entries(tn(r.comfyPromptJSON))){let s=r.metadata?.[i];new qh(this,i,o,s)}};this.registerNode=e=>{if(this.data.comfyPromptJSON==null)throw new Error("graph not hydrated");this.data.comfyPromptJSON[e.uid]=e.json,this.data.metadata[e.uid]=e.meta,this.nodesIndex.set(e.uid,e),this.nodes.push(e),this.cyto?.trackNode(e)};this.nodes=[];this.findNodeByType=e=>this.nodes.find(r=>r.$schema.nameInCushy===e);this.nodesIndex=new Map;this.toMermaid=()=>["graph LR",this.nodes.map(r=>`${r.uid}[${r.$schema.nameInCushy}]`).join(`
`),this.nodes.map(r=>r._incomingEdges().map(n=>{let i=this.nodesIndex.get(n.from);return`${i?.uid??n.from}[${i?.$schema.nameInCushy??n.from}] --> |${n.inputName}|${r.uid}[${r.$schema.nameInCushy}]`}).join(`
`)).join(`
`)].join(`
`);this.json_workflow=()=>{let e=this.json_cyto;return XH(this,e)};this.json_forPrompt=e=>{let r={};for(let n of this.nodes)n.disabled||(e==="use_stringified_numbers_only"?r[n.uid]=n.json:r[n.uidPrefixed]=n.json);return r};this.currentExecutingNode=null;this.onProgress=e=>{if(this.currentExecutingNode==null)return console.log("\u274C no current executing node",e);this.currentExecutingNode.progress=e.data,this.currentExecutingNode.progressRatio=(e.data.value??0)/(e.data.max||1)};this.getTargetWorkflowFilePath=()=>ur(yr(this.st.cacheFolderPath,"workflow.json"));this.getTargetPromptFilePath=()=>ur(yr(this.st.cacheFolderPath,"prompt.json"));this.done=!1;this.onExecuting=e=>{if(this.currentExecutingNode&&(this.currentExecutingNode.status="done"),e.data.node==null){this.currentExecutingNode=null,this.done=!0;return}this.done=!1;let r=this.getNodeOrCrash(e.data.node);this.currentExecutingNode=r,r.status="executing",r.updatedAt=Date.now()};this.onExecutionCached=e=>{for(let r of e.data.nodes){let n=this.getNodeOrCrash(r);n.status="cached"}};this._uidNumber=0;this.getNodeOrCrash=e=>{let r=this.nodesIndex.get(e);if(r==null)throw new Error("Node not found:"+e);return r};this.PROMPT=async e=>{let r=this,n=aB(r.json_forPrompt(e.idMode??"use_stringified_numbers_only")),i=r.json_workflow();console.info("checkpoint:"+JSON.stringify(n));let o={client_id:this.st.comfySessionId,extra_data:{extra_pnginfo:{workflow:i,cushy_app_id:e.step.data.appID,cushy_draft_result:e.step.data.formResult,cushy_draft_serial:e.step.data.formSerial}},prompt:n},s=`${this.st.getServerHostHTTP()}/prompt`;console.info("sending prompt to "+s);let a=this.st.db.graphs.create({comfyPromptJSON:n,metadata:this.data.metadata}),l=await fetch(s,{method:"POST",body:JSON.stringify(o)}),c=await l.json();if(l.status!==200){let p=new pS("ComfyUI Prompt request failed",a,c);return Promise.reject(p)}else return this.st.db.comfy_prompts.create({id:c.prompt_id,executed:0,graphID:a.id,stepID:e.step.id})}}get size(){return this.nodes.length}get builder(){return this._builder?this._builder:(this._builder=new dS(this),this._builder)}get summary1(){return this.nodes.map(e=>e.$schema.nameInCushy)}get schema(){return this.st.schema}get pendingNodes(){return this.nodes.filter(e=>e.status==null||e.status==="waiting")}get nodesByUpdatedAt(){return this.nodes.filter(e=>e.status!=null&&e.status!=="waiting").sort((e,r)=>r.updatedAt-e.updatedAt)}get json_cyto(){return KH(this)}get progressCurrentNode(){let e=this.currentExecutingNode;if(e==null)return null;let r=e.status==="done"?100:e.progressRatio*100,n=e.status==="done";return{percent:r,isDone:n,countDone:e.progressRatio*100,countTotal:100}}get progressGlobal(){let e=this.nodes.length,r=this.nodes.filter(a=>a.status==="done"||a.status==="cached").length,n=this.currentExecutingNode?.progressRatio??0,i=(r+n)/e,o=this.done?100:i*100,s=this.done;return{percent:o,isDone:s,countDone:r+n,countTotal:e}}get cacheFolder(){return this.st.cacheFolderPath}get flowSummaryMd(){return JH(['<pre class="mermaid">',this.toMermaid(),"</pre>"].join(`
`))}get flowSummaryHTML(){return QH(nr(this.flowSummaryMd))}get JSON_forVisDataVisualisation(){let e=this.json_forPrompt("use_stringified_numbers_only"),r=this.schema,n=[],i=[];if(e==null)return{nodes:[],edges:[]};for(let[o,s]of Object.entries(e)){let a=r.nodesByNameInComfy[s.class_type],l=xf[a.category];n.push({id:o,label:s.class_type,color:l,font:{color:"white"},shape:"box"});for(let[c,p]of Object.entries(s.inputs))if(p instanceof Array){let[f,m]=p,g=`${f}-${o}-${m}`;i.push({id:g,from:f,to:o,arrows:"to",label:c,labelHighlightBold:!1,length:200})}}return{nodes:n,edges:i}}};var Af=class{constructor(){this.step=new Po(this,"stepID",()=>this.db.steps)}};var ZH=F(function(e){let r=pe(),n=r.historySize,i=r.historySizeStr;return h(ui,{output:e.output,children:h("div",{tw:"bg-secondary text-secondary-content text-center w-full",style:{lineHeight:i,fontSize:`${n/4}px`},children:"Splat"})})}),eq=F(function(e){return h("iframe",{tabIndex:-1,autoFocus:!0,className:"w-full h-full",frameBorder:"0",src:"https://antimatter15.com/splat/"})});var Vh=F(function(e){let r=e.output;return r instanceof ec?h(_H,{step:e.step,output:r}):r instanceof Hl?h(m$,{step:e.step,output:r}):r instanceof tc?h(zH,{step:e.step,output:r}):r instanceof Af?h(ZH,{step:e.step,output:r}):r instanceof Zu?h(WH,{step:e.step,output:r}):r instanceof If?h(Q$,{step:e.step,output:r}):r instanceof Nf?h(TH,{step:e.step,output:r}):r instanceof bf?h(St.Fragment,{children:"\u{1F534}"}):r instanceof kf?h(eH,{step:e.step,output:r}):(gr(r),P("div",{className:"border",children:["\u274C unhandled message of type `",r.constructor.name,"`"]}))}),Kh=F(function(e){let r=e.output;return r instanceof ec?h(bH,{step:e.step,output:r}):r instanceof Hl?h(h$,{step:e.step,output:r}):r instanceof tc?h($H,{step:e.step,output:r}):r instanceof Af?h(eq,{step:e.step,output:r}):r instanceof Zu?h(jH,{step:e.step,output:r}):r instanceof If?h(Z$,{step:e.step,output:r}):r instanceof Nf?h(wH,{step:e.step,output:r}):r instanceof bf?h(St.Fragment,{children:"\u{1F534}"}):r instanceof kf?h(tH,{step:e.step,output:r}):(gr(r),P("div",{className:"border",children:["\u274C unhandled message of type `",r.type,"`"]}))});var tq=F(function(e){let r=pe();if(jU(s=>!!s.isDragging()))return null;let i=r.hovered;if(i==null||r.showPreviewInPanel)return null;let o=r.showPreviewInFullScreen?{maxHeight:r.showPreviewInFullScreen?"95vh":void 0,maxWidth:r.showPreviewInFullScreen?"95vw":void 0,width:"95%"}:{};return h("div",{children:h("div",{tw:"ml-auto inset-0 text-center",style:{opacity:r.galleryHoverOpacity,boxShadow:"0 0 1rem 0 #ebebebe0",pointerEvents:"none",position:"absolute",zIndex:1050,objectFit:"contain",maxHeight:"100vh",maxWidth:"100vw"},children:h(Kh,{output:i})})})});var rq=F(function(e){let r=pe();return P("div",{className:"relative flex-grow flex flex-col h-full",children:[h(tq,{}),h("div",{id:"hovered-graph",className:"absolute top-3 left-3 right-3 bottom-3 [z-index:2000] overflow-auto pointer-events-none",style:{transition:"all 0.2s ease-in-out",opacity:0}}),h(fa,{FallbackComponent:ql,onReset:n=>{},children:h(r.layout.UI,{})})]})});var Rq=ie(ve(),1);var nq=F(function(e){let r=pe(),n=r.library;return h("div",{tw:"flex w-full",children:P("div",{tw:"btn btn btn-active flex-grow",onClick:()=>r.toggleFullLibrary(),children:[h("span",{className:"material-symbols-outlined",children:"view_list"}),"Apps"]})})});var _tt=HH("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",5),b0=(t,e)=>{throw new Error(`\u{1F534} ${t}`,e)},Of=(t,e)=>{throw new Error(`\u{1F534} INVARIANT VIOLATION: ${t}`,e)};xr();var ir=ie(xa(),1),ut=t=>ir.Type.Union([t,ir.Type.Null(),ir.Type.Undefined()]),sq=ir.Type.Record(ir.Type.String(),ir.Type.Any()),aq=ir.Type.Record(ir.Type.String(),ir.Type.Any()),lq=ir.Type.Record(ir.Type.String(),ir.Type.Any()),uq=ir.Type.Any(),cq=ir.Type.Record(ir.Type.String(),ir.Type.Any()),dq=ir.Type.Record(ir.Type.String(),ir.Type.Any()),pq=ir.Type.Record(ir.Type.String(),ir.Type.Any()),fq=ir.Type.Record(ir.Type.String(),ir.Type.Any()),mq=ir.Type.Array(ir.Type.String()),hq=ir.Type.Record(ir.Type.String(),ir.Type.Any()),gq=ir.Type.Record(ir.Type.String(),ir.Type.Any()),vn=class{constructor(e,r,n,i){this.sql_name=e;this.ts_name=r;this.fields=n;this.schema=i;this.hydrateJSONFields=e=>{if(e==null)debugger;for(let r of this.cols){if(r.type!=="json")continue;let n=e[r.name];if(n==null){if(r.notnull)throw new Error(`json column ${r.name} is null`);e[r.name]=null;continue}e[r.name]=JSON.parse(n)}return e};this.cols=Object.values(n)}};var V=ie(xa(),1);var R0e=V.Type.Object({id:V.Type.Optional(ut(V.Type.String())),name:V.Type.String(),createdAt:V.Type.Number(),sql:V.Type.String()},{additionalProperties:!1}),P0e={id:{cid:0,name:"id",type:"TEXT",notnull:0,dflt_value:null,pk:1},name:{cid:1,name:"name",type:"TEXT",notnull:1,dflt_value:null,pk:0},createdAt:{cid:2,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:null,pk:0},sql:{cid:3,name:"sql",type:"TEXT",notnull:1,dflt_value:null,pk:0}};var L0e=V.Type.Object({id:V.Type.Optional(ut(V.Type.Number())),firstName:V.Type.String(),lastName:V.Type.String(),email:V.Type.String(),passwordHash:V.Type.String()},{additionalProperties:!1}),M0e={id:{cid:0,name:"id",type:"INTEGER",notnull:0,dflt_value:null,pk:1},firstName:{cid:1,name:"firstName",type:"TEXT",notnull:1,dflt_value:null,pk:0},lastName:{cid:2,name:"lastName",type:"TEXT",notnull:1,dflt_value:null,pk:0},email:{cid:3,name:"email",type:"TEXT",notnull:1,dflt_value:null,pk:0},passwordHash:{cid:4,name:"passwordHash",type:"TEXT",notnull:1,dflt_value:null,pk:0}};var F0e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),comfyPromptJSON:aq,stepID:V.Type.Optional(ut(V.Type.String())),metadata:sq},{additionalProperties:!1}),U0e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},comfyPromptJSON:{cid:3,name:"comfyPromptJSON",type:"json",notnull:1,dflt_value:null,pk:0},stepID:{cid:4,name:"stepID",type:"TEXT",notnull:0,dflt_value:null,pk:0},metadata:{cid:5,name:"metadata",type:"json",notnull:1,dflt_value:"'{}'",pk:0}};var B0e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),title:V.Type.Optional(ut(V.Type.String())),appParams:lq,isOpened:V.Type.Number(),appID:V.Type.String()},{additionalProperties:!1}),W0e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},title:{cid:3,name:"title",type:"TEXT",notnull:0,dflt_value:null,pk:0},appParams:{cid:4,name:"appParams",type:"json",notnull:1,dflt_value:null,pk:0},isOpened:{cid:5,name:"isOpened",type:"INT",notnull:1,dflt_value:"1",pk:0},appID:{cid:6,name:"appID",type:"TEXT",notnull:1,dflt_value:null,pk:0}};var j0e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),name:V.Type.Optional(ut(V.Type.String())),rootGraphID:V.Type.String(),currentApp:V.Type.Optional(ut(V.Type.String())),currentDraftID:V.Type.Optional(ut(V.Type.String()))},{additionalProperties:!1}),z0e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},name:{cid:3,name:"name",type:"TEXT",notnull:0,dflt_value:null,pk:0},rootGraphID:{cid:4,name:"rootGraphID",type:"TEXT",notnull:1,dflt_value:null,pk:0},currentApp:{cid:5,name:"currentApp",type:"TEXT",notnull:0,dflt_value:null,pk:0},currentDraftID:{cid:6,name:"currentDraftID",type:"TEXT",notnull:0,dflt_value:null,pk:0}};var $0e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),name:V.Type.Optional(ut(V.Type.String())),formResult:cq,formSerial:dq,outputGraphID:V.Type.String(),status:V.Type.String(),isExpanded:V.Type.Number(),appID:V.Type.String()},{additionalProperties:!1}),H0e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},name:{cid:3,name:"name",type:"TEXT",notnull:0,dflt_value:null,pk:0},formResult:{cid:4,name:"formResult",type:"json",notnull:1,dflt_value:null,pk:0},formSerial:{cid:5,name:"formSerial",type:"json",notnull:1,dflt_value:null,pk:0},outputGraphID:{cid:6,name:"outputGraphID",type:"TEXT",notnull:1,dflt_value:null,pk:0},status:{cid:7,name:"status",type:"TEXT",notnull:1,dflt_value:null,pk:0},isExpanded:{cid:8,name:"isExpanded",type:"INT",notnull:1,dflt_value:"1",pk:0},appID:{cid:9,name:"appID",type:"TEXT",notnull:1,dflt_value:null,pk:0}};var q0e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),stepID:V.Type.String(),graphID:V.Type.String(),executed:V.Type.Number(),error:V.Type.Optional(ut(pq)),status:V.Type.Optional(ut(V.Type.String()))},{additionalProperties:!1}),G0e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},stepID:{cid:3,name:"stepID",type:"TEXT",notnull:1,dflt_value:null,pk:0},graphID:{cid:4,name:"graphID",type:"TEXT",notnull:1,dflt_value:null,pk:0},executed:{cid:5,name:"executed",type:"INT",notnull:1,dflt_value:"0",pk:0},error:{cid:6,name:"error",type:"json",notnull:0,dflt_value:null,pk:0},status:{cid:7,name:"status",type:"TEXT",notnull:0,dflt_value:null,pk:0}},yq=t=>t,V0e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),spec:fq,embeddings:mq,hostID:V.Type.Optional(ut(V.Type.String()))},{additionalProperties:!1}),K0e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},spec:{cid:3,name:"spec",type:"json",notnull:1,dflt_value:null,pk:0},embeddings:{cid:4,name:"embeddings",type:"json",notnull:1,dflt_value:null,pk:0},hostID:{cid:5,name:"hostID",type:"TEXT",notnull:0,dflt_value:null,pk:0}};var Y0e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),kind:V.Type.String(),content:V.Type.String(),stepID:V.Type.Optional(ut(V.Type.String())),title:V.Type.String()},{additionalProperties:!1}),X0e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},kind:{cid:3,name:"kind",type:"TEXT",notnull:1,dflt_value:null,pk:0},content:{cid:4,name:"content",type:"TEXT",notnull:1,dflt_value:null,pk:0},stepID:{cid:5,name:"stepID",type:"TEXT",notnull:0,dflt_value:null,pk:0},title:{cid:6,name:"title",type:"TEXT",notnull:1,dflt_value:"''",pk:0}};var J0e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),absPath:V.Type.Optional(ut(V.Type.String())),stepID:V.Type.Optional(ut(V.Type.String())),promptID:V.Type.Optional(ut(V.Type.String())),filePath:V.Type.Optional(ut(V.Type.String())),url:V.Type.String()},{additionalProperties:!1}),Q0e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},absPath:{cid:3,name:"absPath",type:"TEXT",notnull:0,dflt_value:null,pk:0},stepID:{cid:4,name:"stepID",type:"TEXT",notnull:0,dflt_value:null,pk:0},promptID:{cid:5,name:"promptID",type:"TEXT",notnull:0,dflt_value:null,pk:0},filePath:{cid:6,name:"filePath",type:"TEXT",notnull:0,dflt_value:null,pk:0},url:{cid:7,name:"url",type:"TEXT",notnull:1,dflt_value:null,pk:0}};var Z0e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),width:V.Type.Optional(ut(V.Type.Number())),height:V.Type.Optional(ut(V.Type.Number())),star:V.Type.Optional(ut(V.Type.Number())),infos:V.Type.Optional(ut(hq)),promptID:V.Type.Optional(ut(V.Type.String())),stepID:V.Type.Optional(ut(V.Type.String())),promptNodeID:V.Type.Optional(ut(V.Type.String()))},{additionalProperties:!1}),e_e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},width:{cid:3,name:"width",type:"INT",notnull:0,dflt_value:null,pk:0},height:{cid:4,name:"height",type:"INT",notnull:0,dflt_value:null,pk:0},star:{cid:5,name:"star",type:"INT",notnull:0,dflt_value:null,pk:0},infos:{cid:6,name:"infos",type:"json",notnull:0,dflt_value:null,pk:0},promptID:{cid:7,name:"promptID",type:"TEXT",notnull:0,dflt_value:null,pk:0},stepID:{cid:8,name:"stepID",type:"TEXT",notnull:0,dflt_value:null,pk:0},promptNodeID:{cid:9,name:"promptNodeID",type:"TEXT",notnull:0,dflt_value:null,pk:0}};var t_e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),width:V.Type.Optional(ut(V.Type.Number())),height:V.Type.Optional(ut(V.Type.Number())),image:V.Type.Optional(ut(V.Type.String())),depthMap:V.Type.Optional(ut(V.Type.String())),normalMap:V.Type.Optional(ut(V.Type.String())),stepID:V.Type.Optional(ut(V.Type.String())),promptID:V.Type.Optional(ut(V.Type.String()))},{additionalProperties:!1}),r_e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},width:{cid:3,name:"width",type:"INT",notnull:0,dflt_value:null,pk:0},height:{cid:4,name:"height",type:"INT",notnull:0,dflt_value:null,pk:0},image:{cid:5,name:"image",type:"TEXT",notnull:0,dflt_value:null,pk:0},depthMap:{cid:6,name:"depthMap",type:"TEXT",notnull:0,dflt_value:null,pk:0},normalMap:{cid:7,name:"normalMap",type:"TEXT",notnull:0,dflt_value:null,pk:0},stepID:{cid:8,name:"stepID",type:"TEXT",notnull:0,dflt_value:null,pk:0},promptID:{cid:9,name:"promptID",type:"TEXT",notnull:0,dflt_value:null,pk:0}};var n_e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),message:V.Type.String(),infos:gq,promptID:V.Type.Optional(ut(V.Type.String())),graphID:V.Type.Optional(ut(V.Type.String())),stepID:V.Type.Optional(ut(V.Type.String()))},{additionalProperties:!1}),i_e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},message:{cid:3,name:"message",type:"TEXT",notnull:1,dflt_value:null,pk:0},infos:{cid:4,name:"infos",type:"json",notnull:1,dflt_value:null,pk:0},promptID:{cid:5,name:"promptID",type:"TEXT",notnull:0,dflt_value:null,pk:0},graphID:{cid:6,name:"graphID",type:"TEXT",notnull:0,dflt_value:null,pk:0},stepID:{cid:7,name:"stepID",type:"TEXT",notnull:0,dflt_value:null,pk:0}};var o_e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),stepID:V.Type.Optional(ut(V.Type.String())),url:V.Type.String()},{additionalProperties:!1}),s_e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},stepID:{cid:3,name:"stepID",type:"TEXT",notnull:0,dflt_value:null,pk:0},url:{cid:4,name:"url",type:"TEXT",notnull:1,dflt_value:null,pk:0}};var a_e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),json:uq},{additionalProperties:!1}),l_e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},json:{cid:3,name:"json",type:"json",notnull:1,dflt_value:"'{}'",pk:0}},vq=t=>t,u_e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),path:V.Type.String(),code:V.Type.String(),lastEvaluatedAt:V.Type.Optional(ut(V.Type.Number())),lastSuccessfulEvaluationAt:V.Type.Optional(ut(V.Type.Number()))},{additionalProperties:!1}),c_e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},path:{cid:3,name:"path",type:"TEXT",notnull:1,dflt_value:null,pk:0},code:{cid:4,name:"code",type:"TEXT",notnull:1,dflt_value:null,pk:0},lastEvaluatedAt:{cid:5,name:"lastEvaluatedAt",type:"INT",notnull:0,dflt_value:null,pk:0},lastSuccessfulEvaluationAt:{cid:6,name:"lastSuccessfulEvaluationAt",type:"INT",notnull:0,dflt_value:null,pk:0}},S0=t=>t,d_e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),guid:V.Type.Optional(ut(V.Type.String())),scriptID:V.Type.String(),name:V.Type.Optional(ut(V.Type.String())),illustration:V.Type.Optional(ut(V.Type.String())),description:V.Type.Optional(ut(V.Type.String())),tags:V.Type.Optional(ut(V.Type.String())),publishedAsUserID:V.Type.Optional(ut(V.Type.String())),publishedAt:V.Type.Optional(ut(V.Type.Number()))},{additionalProperties:!1}),p_e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},guid:{cid:3,name:"guid",type:"TEXT",notnull:0,dflt_value:null,pk:0},scriptID:{cid:4,name:"scriptID",type:"TEXT",notnull:1,dflt_value:null,pk:0},name:{cid:5,name:"name",type:"TEXT",notnull:0,dflt_value:null,pk:0},illustration:{cid:6,name:"illustration",type:"TEXT",notnull:0,dflt_value:null,pk:0},description:{cid:7,name:"description",type:"TEXT",notnull:0,dflt_value:null,pk:0},tags:{cid:8,name:"tags",type:"TEXT",notnull:0,dflt_value:null,pk:0},publishedAsUserID:{cid:9,name:"publishedAsUserID",type:"TEXT",notnull:0,dflt_value:null,pk:0},publishedAt:{cid:10,name:"publishedAt",type:"INT",notnull:0,dflt_value:null,pk:0}},ES=t=>t,f_e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),provider_token:V.Type.Optional(ut(V.Type.String())),refresh_token:V.Type.Optional(ut(V.Type.String())),token_type:V.Type.Optional(ut(V.Type.String())),access_token:V.Type.Optional(ut(V.Type.String())),provider_refresh_token:V.Type.Optional(ut(V.Type.String())),expires_at:V.Type.Optional(ut(V.Type.Number())),expires_in:V.Type.Optional(ut(V.Type.Number()))},{additionalProperties:!1}),m_e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},provider_token:{cid:3,name:"provider_token",type:"TEXT",notnull:0,dflt_value:null,pk:0},refresh_token:{cid:4,name:"refresh_token",type:"TEXT",notnull:0,dflt_value:null,pk:0},token_type:{cid:5,name:"token_type",type:"TEXT",notnull:0,dflt_value:null,pk:0},access_token:{cid:6,name:"access_token",type:"TEXT",notnull:0,dflt_value:null,pk:0},provider_refresh_token:{cid:7,name:"provider_refresh_token",type:"TEXT",notnull:0,dflt_value:null,pk:0},expires_at:{cid:8,name:"expires_at",type:"INT",notnull:0,dflt_value:null,pk:0},expires_in:{cid:9,name:"expires_in",type:"INT",notnull:0,dflt_value:null,pk:0}},_q=t=>t,h_e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),isExpanded:V.Type.Optional(ut(V.Type.Number()))},{additionalProperties:!1}),g_e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},isExpanded:{cid:3,name:"isExpanded",type:"INT",notnull:0,dflt_value:null,pk:0}},eg=t=>t,y_e=V.Type.Object({id:V.Type.String(),createdAt:V.Type.Number(),updatedAt:V.Type.Number(),name:V.Type.String(),hostname:V.Type.String(),port:V.Type.Number(),useHttps:V.Type.Number(),isLocal:V.Type.Number(),absolutePathToComfyUI:V.Type.Optional(ut(V.Type.String())),absolutPathToDownloadModelsTo:V.Type.Optional(ut(V.Type.String())),isVirtual:V.Type.Number()},{additionalProperties:!1}),v_e={id:{cid:0,name:"id",type:"string",notnull:1,dflt_value:"hex(randomblob(16))",pk:1},createdAt:{cid:1,name:"createdAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},updatedAt:{cid:2,name:"updatedAt",type:"INTEGER",notnull:1,dflt_value:"now",pk:0},name:{cid:3,name:"name",type:"TEXT",notnull:1,dflt_value:"hex(randomblob(16))",pk:0},hostname:{cid:4,name:"hostname",type:"TEXT",notnull:1,dflt_value:'"localhost"',pk:0},port:{cid:5,name:"port",type:"INT",notnull:1,dflt_value:"8188",pk:0},useHttps:{cid:6,name:"useHttps",type:"INT",notnull:1,dflt_value:"0",pk:0},isLocal:{cid:7,name:"isLocal",type:"INT",notnull:1,dflt_value:"0",pk:0},absolutePathToComfyUI:{cid:8,name:"absolutePathToComfyUI",type:"TEXT",notnull:0,dflt_value:null,pk:0},absolutPathToDownloadModelsTo:{cid:9,name:"absolutPathToDownloadModelsTo",type:"TEXT",notnull:0,dflt_value:null,pk:0},isVirtual:{cid:10,name:"isVirtual",type:"INT",notnull:1,dflt_value:"0",pk:0}},bq={migrations:new vn("migrations","Migrations",P0e,R0e),users:new vn("users","Users",M0e,L0e),graph:new vn("graph","Graph",U0e,F0e),draft:new vn("draft","Draft",W0e,B0e),project:new vn("project","Project",z0e,j0e),step:new vn("step","Step",H0e,$0e),comfy_prompt:new vn("comfy_prompt","ComfyPrompt",G0e,q0e),comfy_schema:new vn("comfy_schema","ComfySchema",K0e,V0e),media_text:new vn("media_text","MediaText",X0e,Y0e),media_video:new vn("media_video","MediaVideo",Q0e,J0e),media_image:new vn("media_image","MediaImage",e_e,Z0e),media_3d_displacement:new vn("media_3d_displacement","Media3dDisplacement",r_e,t_e),runtime_error:new vn("runtime_error","RuntimeError",i_e,n_e),media_splat:new vn("media_splat","MediaSplat",s_e,o_e),custom_data:new vn("custom_data","CustomData",l_e,a_e),cushy_script:new vn("cushy_script","CushyScript",c_e,u_e),cushy_app:new vn("cushy_app","CushyApp",p_e,d_e),auth:new vn("auth","Auth",m_e,f_e),tree_entry:new vn("tree_entry","TreeEntry",g_e,h_e),host:new vn("host","Host",v_e,y_e)};var tg=F(function(e){return h(xq,{get:()=>e.app.isFavorite,set:r=>e.app.setFavorite(r),size:e.size})}),Dtt=F(function(e){return h(xq,{get:()=>!!e.draft.data.isOpened,set:r=>e.draft.update({isOpened:r?1:0}),size:e.size})}),xq=F(function(e){let r=e.size??"1.3rem";return e.get()?h("span",{style:{fontSize:r},tw:["material-symbols-outlined","cursor-pointer","text-yellow-500 hover:text-red-500"],onClick:i=>{i.preventDefault(),i.stopPropagation(),e.set(!1)},children:"star"}):h("span",{tw:["material-symbols-outlined","cursor-pointer","hover:text-yellow-500 text-gray-500"],style:{fontSize:r},onClick:i=>{i.preventDefault(),i.stopPropagation(),e.set(!0)},children:"star"})});var E0=class{constructor(e,r,n){this.st=e;this.id=r;this.appID=n;this.isFolder=!0;this.onPrimaryAction=e=>{this.app!=null&&(e.opened||e.open(),!(this.app.drafts.length>0)&&this.app.createDraft())};this.children=()=>this.app?.drafts.map(e=>`draft#${e.id}`)??[];this.extra=h(b_e,{entry:this});this.actions=[{name:"add Draft",icon:"add",mode:"small",onClick:()=>{this.app!=null&&this.app.createDraft()}}];this.app=e.db.cushy_apps.get(n),Ce(this)}get name(){return`${this.app?.name??"\u274C"}`}get icon(){return this.app?.illustrationPathWithFileProtocol??""}},b_e=F(function(e){return e.entry.app==null?null:h(tg,{app:e.entry.app})});var CS=class{constructor(e,r){this.st=e;this.draft=r;this.isFolder=!1;this.canRename=!0;this.onPrimaryAction=()=>{this.st.currentDraft=this.draft,this.st.layout.FOCUS_OR_CREATE("CurrentDraft",{})};this.icon=h("span",{children:"\u2728"});this.actions=[{name:"add Draft",icon:"play_arrow",mode:"small",onClick:()=>{this.draft.AWAKE(),this.draft.start()}}];this.data=this}get id(){return`draft#${this.draft.id}`}get name(){return`${this.draft.name}`}};var C0=class{constructor(e,r=vt()){this.title=e;this.uid=r;this.isFolder=!1;this.icon=h("span",{className:"material-symbols-outlined",children:"Error"})}get id(){return`error#${this.uid}`}get name(){return`\u274C ${this.title}`}};var DS=class{constructor(e){this.st=e;this.id="#favorites";this.isFolder=!0;this.icon=h("span",{className:"material-symbols-outlined text-yellow-500",children:"star"});this.name="Favorites";this.children=()=>this.st.library.allFavorites.map(e=>`favorite#${e}`)}};Oo();var IS=class{constructor(e,r,n){this.st=e;this.id=r;this.path=n;this.onExpand=async()=>{await this.file.load()};this.isFolder=!0;this.actions=[{name:"add Draft",icon:"find_in_page",mode:"small",onClick:()=>{this.file!=null&&this.file.load()}}];this.onFocusItem=()=>{this.file.hasBeenLoadedAtLeastOnce||this.file.load()};this.onPrimaryAction=e=>{this.file.load(),e.open()};this.children=()=>{if(!this.file.hasBeenLoadedAtLeastOnce)return[];if(this.file==null)return console.log(`[\u{1F534}] TreeFile (${this.id}): FILE is null`),[];if(this.script==null)return console.log(`[\u{1F534}] TreeFile (${this.id}): SCRIPT is null`),[];let e=this.script.apps_viaScript;return e.length===0?(console.log(`[\u{1F534}] TreeFile (${this.id}): APPS.length = 0`),[]):[...e.map(r=>`app#${r.id}`)]};this.file=e.library.getFile(n),Ce(this)}get icon(){return this.path.endsWith(".ts")?Rr.typescript_512_png:this.path.endsWith(".tsx")?Rr.typescript_512_png:this.path.endsWith(".png")?`file://${ph()}/${this.path}`:h("span",{children:"\u2753"})}get script(){return this.file.script0}get name(){return Hv(this.path)}};xr();Oo();var kS=t=>!!(t==="cushy-deck.json"||t==="cushy.json"||t.startsWith(".")||t.startsWith("_")||t.startsWith("node_modules")||t.startsWith("dist")),Tq=t=>!!(t.startsWith("node_modules")||t.startsWith("dist"));var NS=class{constructor(e){this.path=e;this.isFolder=!0;this.onPrimaryAction=e=>{e.toggle()};Ce(this)}get id(){return`path#${this.path}`}get name(){return Hv(this.path)}children(){return ff(this.path).filter(r=>!kS(r)).map(r=>$r(`path#${this.path}/${r}`))}get actions(){return this.path==="library/installed"?[{name:"Find More...",icon:"cloud_download",onClick:()=>{},mode:"full"}]:this.path==="library/local"?[{name:"create...",icon:"add",onClick:()=>{},mode:"full"}]:[]}get icon(){return this.path==="library/installed"?h("span",{className:"material-symbols-outlined text-red-500",children:"get_app"}):this.path==="library/local"?h("span",{className:"material-symbols-outlined text-blue-500",children:"privacy_tip"}):this.path==="library/built-in"?h("span",{className:"material-symbols-outlined text-green-500",children:"apps"}):this.path==="library/sdk-examples"?h("span",{className:"material-symbols-outlined text-green-500",children:"live_help"}):h("span",{className:"material-symbols-outlined text-base-300",children:"folder"})}};var AS=class{constructor(){this.id="#root";this.name="Root item";this.children=()=>["#favorites","path#library/built-in","path#library/local","path#library/installed","path#library/sdk-examples"]}};var OS=(t,e)=>{if(typeof e!="string")throw new Error("[\u{1F534}] itemId must be string");if(e==="#root")return new AS;if(e==="#apps")return si({id:"#apps",name:"Apps",icon:h("span",{className:"material-symbols-outlined",children:"play_arrow"}),children:()=>t.db.cushy_apps.findAll().map(r=>`app#${r.id}`)});if(e==="#favorites")return new DS(t);if(e.startsWith("favorite#")){let r=S0(e.slice(9));return new E0(t,e,r)}if(e.startsWith("app#"))return new E0(t,e,S0(e.slice(4)));if(e.startsWith("draft#")){let r=e.slice(6),n=t.db.drafts.get(r);return n?new CS(t,n):new C0(`Draft ${r} not found`)}if(e.startsWith("path#")){let r=$r(e.slice(5));return mf(r).isDirectory()?new NS(r):new IS(t,e,r)}return console.log("[\u{1F459}] ",`file ${e} not found`),new C0(`file ${e} not found`)};var wq=t=>typeof t=="string"?t:t.id,Sq=t=>t.length===1?`/${t[0]}`:`${Sq(t[1])}/${t[0]}`,RS=class t{constructor(e,r,n){this.tree=e;this.data=r;this.parentId=n;this.onPrimaryAction=()=>this.data.onPrimaryAction?.(this);this.onFocusItem=()=>this.data.onFocusItem?.(this);this.delete=()=>{this.tree.deleteNode(this)};this.getChildAt=e=>this.tree.getNodeBySlot(this.id,e);this.changeKey=e=>{this.tree.changeNodeKey(this,e)};this.detach=()=>(this.parentKey=this.id,this.parentId=null,this);this.parentKey=this.data.id,this.entryL=this.tree.st.db.tree_entries.upsert({id:_q(this.data.id)}),this.tree.indexNode(this),Ce(this)}get opened(){return this.entryL.data.isExpanded??!1}open(){this.data.onExpand?.(this),this.entryL.update({isExpanded:1})}close(){this.entryL.update({isExpanded:0})}toggle(){this.opened?this.close():this.open()}get id(){return this.data.id}get valid(){return!0}get hasChildren(){return this.children.length>0}get children(){let e=this.data.children?.()??[],r=[];for(let n of e){let i=this.tree.getNodeById(n)??new t(this.tree,OS(this.tree.st,n),this.id);r.push(i)}return r}get parent(){if(this.parentId!=null)return this.tree.getNodeById(this.parentId)}get path(){return this.parentId==null?[this.parentKey]:[this.parentKey,this.parent?.path]}get pathStr(){return Sq(this.path)}get depth(){return this.parent==null?0:1+this.parent.depth}get siblingsIncludingSelf(){return this.parent==null?this.tree.topLevelNodes:this.parent.children}get siblingsExcludingSelf(){return this.siblingsIncludingSelf.filter(e=>e!==this)}get nextSibling(){let e=this.siblingsIncludingSelf;if(e.length===0&&b0("IMPOSSIBLE 1"),e[e.length-1]!==this){for(let r=0;r<e.length-1;r++)if(e[r]===this)return e[r+1]}}get prevSibling(){let e=this.siblingsIncludingSelf,r=this;if(e.length===0&&b0("IMPOSSIBLE 2"),e[0]!==r){for(let n=e.length-1;n>0;n--)if(e[n]===r)return e[n-1]}}get firstChild(){let e=this.children;if(e.length!==0)return e[0]}get_descendant_and_self(e){let r=[this],n=0,i;for(;i=r[n++];)e==="bfs"?r.push(...i.children):r.splice(n,0,...i.children);return r}get lastChild(){if(this.children.length!==0)return this.children[this.children.length-1]}get lastDescendant(){let e=this,r;for(;e=e.lastChild;)r=e;return r}get isRoot(){return this.parentId==null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}get rootOrSelf(){return this.root??this}get lastOpenedDescendant(){let e=this,r;if(e.opened){for(;(e=e.lastChild)&&(r=e,!!e.opened););return r}}get_descendant(e){return this.get_descendant_and_self(e).slice(1)}get descendantBFS(){return this.get_descendant("bfs")}get descendantDFS(){return this.get_descendant("dfs")}get nodeAboveInView(){return this.prevSibling?.lastOpenedDescendant??this.prevSibling??this.parent}get nodeBelowInView(){if(this.opened&&this.firstChild)return this.firstChild;if(this.nextSibling)return this.nextSibling;let e=this;for(;e=e.parent;)if(e.nextSibling)return e.nextSibling}get slot(){return`${this.parentId}.${this.parentKey}`}};var PS=class{constructor(e,r){this.st=e;this.topLevelNodes=[];this.nodeById=new Map;this.nodeBySlot=new Map;this.getNodeById=e=>this.nodeById.get(e);this.getNodeBySlot=(e,r)=>{let i=`${e==null?"undefined":wq(e)}.${r}`;return this.nodeBySlot.get(i)};this.changeNodeKey=(e,r)=>{this.deindexNode_bySlot(e),e.parentKey=r,this.indexNode_bySlot(e)};this.indexNode=e=>{this.indexNode_byId(e),this.indexNode_byParent(e),this.indexNode_bySlot(e)};this.deleteNode=e=>{let r=e.get_descendant_and_self("bfs").reverse();for(let n of r)this.deindexNode_byParent(n),this.deindexNode_bySlot(n),this.deindexNode_byId(n)};this.indexNode_byId=e=>{let r=this.nodeById.get(e.id);r&&r!==e&&b0("different node pre-existing for this id"),this.nodeById.set(e.id,e)};this.deindexNode_byId=e=>{let r=this.nodeById.get(e.id);r==null&&Of("node was not properly indexed"),r!==e&&Of("another node was indexed at this id"),this.nodeById.delete(e.id)};this.indexNode_byParent=e=>{};this.deindexNode_byParent=e=>{};this.indexNode_bySlot=e=>{let r=`${e.parentId}.${e.parentKey}`,n=this.nodeBySlot.get(r);n===e&&Of("already indexed at same slot"),n&&Of("different node pre-existing for this slot"),this.nodeBySlot.set(r,e)};this.deindexNode_bySlot=e=>{let r=`${e.parentId}.${e.parentKey}`,n=this.nodeBySlot.get(r);n==null&&Of("node wasn't properly indexed at slot"),n!==e&&Of("a different node was indexed here"),this.nodeBySlot.delete(r)};this.getNodeAtPath=e=>{let r=e.split("/"),n,i;for(let o of r){let s=`${n}.${o}`;if(i=this.nodeBySlot.get(s),i==null)throw new Error("\u{1F534} 1");n=i.id}if(i==null)throw new Error("\u{1F534} 2");return i};for(let n of r){let i=OS(e,n);this.topLevelNodes.push(new RS(this,i,null))}Ce(this,{indexNode:dd})}get nodes(){return Array.from(this.nodeById.values())}get json2(){return this.nodes.map(e=>e.data)}get json2Txt(){return`{
`+this.nodes.map(e=>"    "+JSON.stringify(e.data)).join(`
`)+`
}`}};var Aq=ie(ve(),1);var LS=ie(ve(),1),n3=(0,LS.createContext)(null),Eq=()=>{let t=(0,LS.useContext)(n3);if(t==null)throw new Error("missing editor in current widget react contexts");return t};var Iq=ie(ve(),1);var Cq=F(function(e){let r=e;return h("div",{className:e.className,tw:"btn btn-xs btn-square btn-ghost",onClick:n=>{n.stopPropagation(),r.onClick?.()},children:h("span",{className:"material-symbols-outlined",children:r.icon})},r.name)});var Dq=F(function(e){let r=e.node,n=r.data,i=n.icon;return typeof i=="string"&&(i=h("img",{src:i,style:{width:"1.3rem",height:"1.3rem"}})),P("div",{tw:"flex flex-grow items-center gap-0.5 whitespace-nowrap overflow-ellipsis",children:[i,P("div",{tw:["_TreeItemTitle","cursor-pointer","flex-grow relative overflow-hidden overflow-ellipsis"],onClick:()=>{n.onPrimaryAction?.(r)},children:["\xA0",h("div",{tw:"absolute inset-0",children:n.name})]}),P("div",{tw:"ml-auto opacity-40 hover:opacity-100",children:[n.extra,n.actions?.map((o,s)=>h(Cq,{...o},s))]})]})});var i3=F(function(e){let r=e.node,n=r.children,i=n.length>0,o=Eq(),s=o.at===r;return P(Iq.Fragment,{children:[P("div",{style:{paddingLeft:`${e.depth??0}rem`},onClick:()=>o.focus(r),tw:[{_line:!0,_hasChildren:i,_selected:s,_opened:r.opened,_closed:!r.opened}],children:[i?h("label",{onClick:()=>r.toggle(),className:"swap swap-rotate opacity-50",children:r.opened?h("span",{className:"material-symbols-outlined swap-rotate",children:"keyboard_arrow_down"}):h(St.Fragment,{children:h("span",{className:"material-symbols-outlined swap-rotate",children:"keyboard_arrow_right"})})}):h("div",{tw:"[width:1.3rem]",children:"\xA0"}),h(Dq,{node:r})]}),n.length&&r.opened?h("div",{tw:"borderLeft",style:{marginLeft:".5rem"},children:n.map(a=>h(i3,{node:a},a.id))}):null]},r.id)});var Nq=ie(ve(),1);var kq=(t,e)=>{if(t.key==="/")return e.focusFilter;if(t.key==="a")return t.shiftKey?e.addChild:e.addChildAndFocus;if(t.key==="Backspace")return e.deleteNodeAndFocusNodeAbove;if(t.key==="Delete")return e.deleteNodeAndFocusNodeBelow;if(t.key==="Enter")return e.at?.onPrimaryAction;if(t.key==="PageUp")return e.movePageUp;if(t.key==="PageDown")return e.movePageDown;if(t.key==="k")return e.changeKey;if(t.key==="ArrowUp")return e.moveUp;if(t.key==="ArrowDown")return e.moveDown;if(t.key==="ArrowRight")return e.moveRight;if(t.key==="ArrowLeft")return e.moveLeft};var MS=class{constructor(e){this.tree=e;this.id=vt(4);this.filterRef=(0,Nq.createRef)();this.updateFilter=e=>this.filter=e;this.focusFilter=()=>{let e=this.filterRef.current;e instanceof HTMLElement&&e.focus()};this.focus=e=>{this.at=e};this.onKeyDown=e=>{let r=this.onKeyDownHandlers(e);if(r)return e.stopPropagation(),e.preventDefault(),r();console.log("key-pressed:",e.key)};this.onKeyDownHandlers=e=>kq(e,this);this.changeKey=()=>{if(this.at==null)return this.resetCaretPos();let e=window.prompt("new key",this.at.parentKey);e!=null&&this.at.changeKey(e)};this.deleteNodeAndFocusNodeAbove=()=>{if(this.at==null)return this.resetCaretPos();let e=this.at.nodeAboveInView;this.at.delete(),this.at=e};this.deleteNodeAndFocusNodeBelow=()=>{if(this.at==null)return this.resetCaretPos();let e=this.at.nodeAboveInView;this.at.delete(),this.at=e?.nodeBelowInView??e};this.addChild=()=>{if(this.at==null)return this.resetCaretPos();console.log("[\u{1F459}] TODO")};this.addChildAndFocus=()=>{this.at=this.addChild()};this.resetCaretPos=()=>{this.at=this.tree.topLevelNodes[0]};this.moveUp=()=>{if(this.at==null)return this.resetCaretPos();let e=this.at.nodeAboveInView;e&&(this.at=e)};this.movePageUp=()=>this.resetCaretPos();this.movePageDown=()=>{if(this.at==null)return this.resetCaretPos();let e=this.at,r=100,n=this.at;for(;(e=e.nodeBelowInView)&&r-- >0;)n=e;this.at=n};this.moveDown=()=>{if(this.at==null)return this.resetCaretPos();let e=this.at.nodeBelowInView;e&&(this.at=e)};this.moveRight=()=>{if(this.at==null)return this.resetCaretPos();let e=this.at.children;return e.length>0?this.at.opened?this.at=e[0]:this.at.open():this.moveDown()};this.moveLeft=()=>{if(this.at==null)return this.resetCaretPos();if(this.at.opened)return this.at.close();if(this.at.parent)return this.at=this.at.parent};this.resetCaretPos(),Ce(this,{filterRef:!1,id:!1})}get nodes(){return this.tree.topLevelNodes}get cursorInfos(){let e=this.at;return e==null?null:{slot:e.slot,nodeAboveInTreeview:e.nodeAboveInView?.id,nodeBelowInTreeview:e.nodeBelowInView?.id,lastDescendant:e.lastDescendant?.id,lastChild:e.lastChild?.id,descendant_bfs:e.descendantBFS.map(r=>r.id),descendant_dfs:e.descendantDFS.map(r=>r.id),depth:e.depth,parent:e.parentId,path:e.path,pathStr:e.pathStr,siblingsIncludingSelf:e.siblingsIncludingSelf.map(r=>r.id),siblingsExcludingSelf:e.siblingsExcludingSelf.map(r=>r.id),nextSibling:e.nextSibling?.id,prevSibling:e.prevSibling?.id,firstChild:e.firstChild?.id}}};var Oq=F(function(e){let r=pe(),n=(0,Aq.useMemo)(()=>new MS(e.tree),[e.tree]);return h(n3.Provider,{value:n,children:P("div",{className:"boxed _TreeUI",children:[P("div",{tw:"flex",children:[h("input",{tw:"input input-bordered input-sm flex-grow min-w-0",onChange:i=>n.filter=i.target.value,ref:n.filterRef,type:"text",placeholder:"filter"}),h("div",{tw:"btn btn-square btn-ghost btn-sm shrink-0",onClick:()=>{r.db.tree_entries.updateAll({isExpanded:null})},children:h("span",{className:"material-symbols-outlined",children:"minimize"})})]}),h("div",{className:"w-full",children:h("div",{onKeyDown:n.onKeyDown,tabIndex:-1,children:h("div",{children:n.nodes.map(i=>h(i3,{node:i},i.id))})})})]})})});var Pq=F(function(e){let r=pe(),n=(0,Rq.useMemo)(()=>new PS(r,["#favorites","path#library/built-in","path#library/local","path#library/sdk-examples"]),[]);return P("div",{tw:"flex flex-grow flex-col overflow-auto h-full",children:[h(nq,{}),h(Oq,{tree:n})]})});var Lq=F(function(e){return h("iframe",{className:"w-full h-full",src:"https://civitai.com",frameBorder:"0"})});var Mq=ie(ve(),1);var o3=class{constructor(e){this.pj=e;this.name="";this.input="";this.output="";this.category="";Ce(this)}get nodeEntries(){return Object.entries(this.pj.schema.nodesByNameInComfy)}get matches(){let e=[];for(let[r,n]of this.nodeEntries){let i=r.toLowerCase();this.name&&!i.includes(this.name)||this.input&&!n.inputs.some(o=>i.includes(this.input))||this.output&&!n.outputs.some(o=>o.nameInCushy.includes(this.output))||this.category&&!n.category.includes(this.category)||e.push([i,n])}return e}},s3=F(function(e){let r=pe().getProject(),n=(0,Mq.useMemo)(()=>new o3(r),[]);return h("div",{className:"flex flex-col",children:P("table",{cellPadding:0,cellSpacing:0,className:"table table-zebra-zebra table-zebra table-sm",children:[h("thead",{tw:"sticky top-0 z-40",children:P("tr",{children:[P("th",{children:[h("div",{children:"name"}),h(Io,{value:n.name,onChange:i=>n.name=i.target.value})]}),P("th",{children:[h("div",{children:"input"}),h(Io,{value:n.input,onChange:i=>n.input=i.target.value})]}),P("th",{children:[h("div",{children:"output"}),h(Io,{value:n.output,onChange:i=>n.output=i.target.value})]}),P("th",{children:[h("div",{children:"category"}),h(Io,{value:n.category,onChange:i=>n.category=i.target.value})]})]})}),h("tbody",{children:n.matches.map(([i,o])=>P("tr",{children:[h("td",{tw:"[max-width:10rem] whitespace-pre-wrap",children:i}),h("td",{tw:"[max-width:10rem] whitespace-pre-wrap",children:h("div",{tw:"flex flex-wrap gap-0.5",children:o.inputs.map(s=>h("span",{style:{background:g$(s.nameInComfy)},tw:"rounded bg-gray-700 p-0.5",children:s.nameInComfy}))})}),h("td",{children:h("div",{tw:"flex flex-wrap gap-0.5",children:o.outputs.map(s=>h("span",{style:{background:y$(s.nameInCushy)},tw:"rounded bg-gray-700 p-0.5",children:s.nameInCushy}))})}),h("td",{children:o.category})]},i))})]})})});Oo();var FS=ie(ve(),1);function x_e(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function Fq(t){return x_e(t.toLowerCase())}function Uq(t,e){return Fq(t).includes(Fq(e))}var Bq=ie(Pl(),1);var a3=class{constructor(e,r){this.st=e;this.p=r;this.onChange=this.p.onChange;this.multiple=this.p.multiple??!1;this.searchQuery="";this.anchorRef=FS.default.createRef();this.selectedIndex=0;this.isOpen=!1;this.tooltipPosition={top:0,left:0};this.updatePosition=()=>{let e=this.anchorRef.current?.getBoundingClientRect();e!=null&&(this.tooltipPosition={top:e.bottom+window.scrollY,left:e.left+window.scrollX})};this.onRealWidgetMouseDown=e=>{this.openMenu()};this.openMenu=()=>{this.isOpen=!0,this.updatePosition()};this.onMenuEntryClick=(e,r)=>{e.preventDefault(),e.stopPropagation(),this.selectOption(r),this.anchorRef.current?.focus()};this.handleInputChange=e=>{this.filterOptions(e.target.value),this.updatePosition()};this.onBlur=()=>{this.closeMenu()};this.handleTooltipKeyDown=e=>{e.key==="ArrowDown"?this.navigateSelection("down"):e.key==="ArrowUp"?this.navigateSelection("up"):e.key==="Enter"&&!e.metaKey&&!e.ctrlKey&&this.selectOption(this.selectedIndex)};this.onRealInputKeyUp=e=>{e.key==="Escape"&&(this.closeMenu(),this.anchorRef.current?.focus(),e.preventDefault(),e.stopPropagation())};Ce(this,{anchorRef:!1})}get options(){return this.p.options??[]}get filteredOptions(){return this.searchQuery===""?this.options:this.options.filter(e=>{let r=this.p.getLabelText(e);return Uq(r,this.searchQuery)})}get value(){return this.p.value?.()}get displayValue(){if(this.p.hideValue)return"";let e=this.value;if(e==null)return"Select...";let r=Array.isArray(e)?e.map(this.p.getLabelText).join(", "):this.p.getLabelText(e);return this.p.label?`${this.p.label}: ${r}`:r}closeMenu(){this.isOpen=!1,this.selectedIndex=0,this.searchQuery=""}filterOptions(e){this.searchQuery=e,this.isOpen=!0}selectOption(e){let r=this.filteredOptions[e];r&&(this.onChange?.(r,this),this.searchQuery="",this.closeMenu())}navigateSelection(e){this.updatePosition(),e==="up"&&this.selectedIndex>0?this.selectedIndex--:e==="down"&&this.selectedIndex<this.filteredOptions.length-1&&this.selectedIndex++}},Vl=F(function(e){let r=pe(),n=(0,FS.useMemo)(()=>new a3(r,e),[e]);return h("div",{tw:"flex flex-1 items-center",children:P("div",{className:"relative flex-1",children:[h("span",{tw:"btn btn-sm absolute right-0",className:"material-symbols-outlined",children:"search"}),h("div",{tabIndex:-1,tw:"input input-bordered input-sm w-full overflow-hidden",children:n.displayValue}),h("div",{tw:"absolute top-0 left-0 right-0 z-50",children:h("input",{ref:n.anchorRef,onKeyUp:n.onRealInputKeyUp,onMouseDown:n.onRealWidgetMouseDown,onChange:n.handleInputChange,onKeyDown:n.handleTooltipKeyDown,onFocus:n.openMenu,onBlur:n.onBlur,style:{background:n.searchQuery===""?"none":void 0},tw:"input input-bordered input-sm w-full",type:"text",value:n.searchQuery})}),n.isOpen&&h(T_e,{s:n})]})})}),T_e=F(function(e){let r=e.s;return(0,Bq.createPortal)(P("ul",{style:{pointerEvents:"initial",position:"absolute",zIndex:99999999,top:`${r.tooltipPosition.top}px`,left:`${r.tooltipPosition.left}px`},className:"p-2 bg-base-100 shadow-2xl max-h-60 overflow-auto",children:[r.filteredOptions.length===0?h("li",{className:"p-2",children:"No results"}):null,r.filteredOptions.map((n,i)=>h("li",{style:{minWidth:"10rem"},className:`p-2 hover:bg-base-300 cursor-pointer ${i===r.selectedIndex?"bg-base-300":""}`,onMouseDown:o=>r.onMenuEntryClick(o,i),children:r.p.getLabelUI?r.p.getLabelUI(n):r.p.getLabelText(n)},i))]}),document.getElementById("tooltip-root"))});var Wq=F(function(e){let n=pe().configFile.value,i=e.host,o=i.id===n.mainComfyHostID,s=!!i.data.isVirtual;return P("div",{tw:["virtualBorder","p-2 bg-base-200 w-96 shadow-xl",o&&"bg-base-300"],children:[P("div",{className:"p-2 flex flex-col gap-1",children:[P(Os,{tw:"flex gap-3",children:[h("div",{tw:[o?"btn-success":"btn-info btn-outline","btn btn-md flex-grow font-bold"],onClick:()=>i.electAsPrimary(),children:i.data.name??`${i.data.hostname}:${i.data.port}`}),h("div",{tw:"btn",onClick:()=>{_r(()=>{i.schema.delete(),i.delete()})},children:h("span",{className:"material-symbols-outlined",children:"delete_forever"})})]}),h("div",{tw:"divider m-1"}),h("div",{tw:"font-bold under",children:"Configuration"}),P("div",{tw:"flex gap-1 items-center",children:[h("div",{tw:"w-14",children:"name"}),h("input",{disabled:s,tw:"input input-bordered input-sm w-full",onChange:a=>i.update({name:a.target.value}),value:i.data.name??"unnamed"})]}),P("div",{tw:"flex gap-1 items-center",children:[h("div",{tw:"w-14",children:"Host"}),h("input",{disabled:s,tw:"input input-bordered input-sm w-full",onChange:a=>i.update({hostname:a.target.value}),value:i.data.hostname??""})]}),P("div",{tw:"flex gap-1 items-center",children:[h("div",{tw:"w-14",children:"Port"}),h("input",{disabled:s,tw:"input input-bordered input-sm w-full",value:i.data.port??8188,onChange:a=>{let l=a.target.value;i.update({port:parseInt(l,10)})}})]}),P("div",{tw:"flex gap-2",children:[h(vi,{disabled:s,checked:!!i.data.useHttps,onChange:a=>i.update({useHttps:a.target.checked?1:0}),name:"useHttps"}),h(D0,{children:"use HTTPS"})]}),P("div",{tw:"flex items-center gap-1",children:[h(vi,{disabled:s,onChange:a=>i.update({isLocal:a.target.checked?1:0}),checked:!!i.data.isLocal}),h(D0,{children:"is local"})]}),P("div",{tw:"flex flex-col",children:[h(D0,{children:"absolute path to ComfyUI install folder"}),h("input",{disabled:s,tw:"input input-bordered input-sm w-full",type:"string",onChange:a=>i.update({absolutePathToComfyUI:a.target.value}),value:i.data.absolutePathToComfyUI??""})]}),P("div",{tw:"flex flex-col",children:[h(D0,{children:"Absolute path to model folder"}),h("input",{tw:"input input-bordered input-sm w-full",type:"string",disabled:s,onChange:a=>i.update({absolutePathToComfyUI:a.target.value}),value:i.data.absolutPathToDownloadModelsTo??""})]}),h("div",{tw:"flex",children:P("div",{tw:"italic text-xs text-opacity-50",children:["id: ",i.id]})})]}),h("div",{tw:"divider m-1"}),h("div",{tw:"font-bold under",children:"Status"}),P("div",{tw:"flex gap-1",children:[h(uT,{showIcon:!0,host:i}),h(lT,{showIcon:!0,showSize:!0,host:i})]}),P("div",{children:[P("div",{children:["isLoaded: ",i.isConnected?"true":"false"]}),h("div",{onClick:()=>i.CONNECT(),tw:"btn btn-primary w-full my-1 btn-sm",children:i.isConnected?"Re-Connect":"Connect"})]}),i.data.isVirtual?h("div",{tw:"bg-warning text-warning-content p-0.5 opacity-50",children:"Virtual Host (Types Only)"}):null]})});var D0=F(function(e){return h("div",{tw:"whitespace-nowrap",children:e.children})}),US=F(function(e){let r=pe(),n=r.hosts.items,i=r.mainHost;return P(rs,{tw:"w-full h-full flex flex-col gap-2 p-2",children:[h("div",{tw:"flex flex-wrap gap-2",children:h(Vl,{label:"Current Host",options:n,value:()=>i,onChange:null,getLabelText:o=>o.data.name||o.id})}),P("div",{tw:"flex gap-1",children:[P("div",{tw:"btn-sm btn btn-primary",onClick:()=>{r.configFile.update(()=>{r.db.hosts.create({hostname:"192.168.1.19",port:8188,name:"192.168.1.19",isLocal:0,useHttps:0,absolutePathToComfyUI:ur(xT("comfy")),isVirtual:0})})},children:[h("span",{className:"material-symbols-outlined",children:"add"}),"Add (local network)"]}),P("div",{tw:"btn-sm btn btn-primary",onClick:()=>{r.db.hosts.create({name:`cloud_${vt()}`,hostname:"...",port:443,isLocal:0,useHttps:1,absolutePathToComfyUI:ur(xT("comfy")),isVirtual:0})},children:[h("span",{className:"material-symbols-outlined",children:"add"}),"Add (cloud)"]})]}),h("div",{tw:"flex flex-wrap gap-2",children:n?.map(o=>h(Wq,{host:o},o.id))})]})});var jq=F(function(e){return P("b",{className:`flex ${e.className}`,children:[h("div",{className:"flex-grow mt-auto mb-auto",children:e.label}),e.children]})});var zq=F(function(){let e=pe(),r=e.configFile;return P("div",{className:"flex flex-col gap-2 items-start p-2",children:[h(rs,{header:h(jq,{label:"CONFIG",className:"block"}),className:"col flex-grow",children:P("div",{tw:"flex flex-col gap-1",children:[h(rg,{label:"Comfig file path",children:h("pre",{tw:"bg-base-200 rounded-btn px-2",children:r.path})}),h(rg,{label:"Your github username",children:h(zA,{value:r.value.githubUsername,onChange:n=>{r.update({githubUsername:n.target.value}),e.updateTsConfig()},name:"githubUsername"})}),h(rg,{label:"Gallery Image Size (px)",children:h(_i,{placeholder:"48",min:16,max:256,value:r.value.galleryImageSize??48,mode:"int",onValueChange:n=>r.update({galleryImageSize:n})})}),h(rg,{label:"Enable TypeChecking Default Apps",children:h(vi,{onChange:n=>r.update({enableTypeCheckingBuiltInApps:n.target.checked}),checked:r.value.enableTypeCheckingBuiltInApps??!1})}),h(rg,{label:"Check update every X minutes",children:h(zA,{type:"number",placeholder:"48",name:"galleryImageSize",value:r.value.checkUpdateEveryMinutes??5,min:.5,onChange:n=>{let i=n.target.value;r.update({checkUpdateEveryMinutes:typeof i=="string"?Mr(i,2):typeof i=="number"?i:5})}})}),h(rg,{label:"OpenRouter API KEY",children:h("input",{tw:"input",type:"password",value:r.value.OPENROUTER_API_KEY??"",onChange:n=>r.update({OPENROUTER_API_KEY:n.target.value})})})]})}),h(US,{})]})}),rg=F(function(e){return P("div",{className:"flex gap-2 items-center",children:[h(uB,{children:e.label}),e.children,e.required&&h(lB,{tw:"join-item",children:"Required"})]})});var $q=F(function(e){return P(Dt,{className:e.className,onClick:e.onClick,icon:e.icon,children:[e.label,e.children]})});var BS=class{constructor(e,r,n={}){this.ctx=r;this.conf=n;this.inputHistory=[];this.alwaysMatch=[];this.watchList=[];this.log=(...e)=>console.log(`[Shortcut-Watcher #${this.name}`,...e);this.evInInput=e=>{let r=e.target;return r.tagName==="INPUT"||r.tagName==="SELECT"||r.tagName==="TEXTAREA"||!!r.contentEditable&&r.contentEditable==="true"};this.inputToken=e=>{let r=[];e.ctrlKey&&r.push("ctrl"),e.shiftKey&&r.push("shift"),e.altKey&&r.push("alt"),e.metaKey&&r.push("meta");let n=e.key;return n&&(n===" "?r.push("space"):r.push(n.toLowerCase())),r.sort().join("+").toLowerCase()};this.processKeyDownEvent=e=>{if(["Control","Shift","Alt","Meta"].includes(e.key))return"skipped";let r=this.inputToken(e);this.conf.log&&this.log(r),this.inputHistory.length>3&&this.inputHistory.shift(),this.inputHistory.push(r);let n=this.evInInput(e);for(let[i,o]of this.watchList){if(n&&!o.validInInput)continue;let s=!0;for(let[l,c]of i.entries()){let p=this.inputHistory.length-i.length;if(this.inputHistory[p+l]!==c){s=!1;break}}if(!s)continue;if((this.conf.log||o.action==null)&&this.log(i,`triggered (${o.info})`),this.tryToRun(o,e))return"success"}for(let i of this.alwaysMatch)if(this.tryToRun(i,e))return"success";return this.conf.log&&this.log("nothing found"),"skipped"};this.tryToRun=(e,r)=>{if(e.action==null)return!1;let n=e.action(this.ctx,r);if(this.conf.log&&n==="success"&&this.log("          -> executed"),n==="skipped"||n==="success"&&e.continueAfterSuccess)return!1;if(n==="success")return r.stopPropagation(),r.preventDefault(),!0;throw w_e(n),new Error("INVALID CASE")};this.name=this.conf.name||"no-name",this.shortcuts=e;for(let i of e){if(i.combos===!0){this.alwaysMatch.push(i);continue}for(let o of i.combos){let s=u3(o);this.watchList.push([s,i])}}this.watchList=this.watchList.sort(([i],[o])=>{let s=i.length;return o.length-s}),this.conf.log&&this.log(`${this.watchList.length} loaded`)}},w_e=t=>t;function u3(t){return t.split(" ").map(S_e)}function S_e(t){return t.split("+").map(E_e).sort().join("+").toLowerCase()}function E_e(t){return t==="up"?"ArrowUp":t==="down"?"ArrowDown":t==="left"?"ArrowLeft":t==="right"?"ArrowRight":t}var Hq=F(function(e){if(e.combo==null)return null;let r=u3(e.combo);return h("div",{tw:"whitespace-nowrap",children:r.map(n=>h("span",{tw:"kbd",children:n},n))})});var EY=ie(ve(),1);var ng=F(function(e){let r=e.app;if(r==null)return h("div",{tw:"bg-error text-error-content",style:{height:e.size},children:"ERROR"});let n=r.illustrationPathWithFileProtocol;return n.startsWith("<svg")?h("div",{style:{height:e.size},dangerouslySetInnerHTML:{__html:n}}):h("img",{className:e.className,loading:"lazy",tw:["rounded",e.onClick?"cursor-pointer":null],style:{width:e.size,height:e.size,objectFit:"contain",imageRendering:"pixelated"},src:r.illustrationPathWithFileProtocol,alt:"card illustration",onClick:e.onClick})});var qq=F(function(e){return P("div",{className:"mockup-phone border-primary",children:[h("div",{className:"camera"}),h("div",{className:"display",children:h("div",{className:"artboard artboard-demo phone-1 overflow-auto",children:e.children})})]})});xr();async function Gq(t,e){return new Promise((r,n)=>{let i=Ao(t),o=Ao(t,e);if(!br(i)||!br(o)){n(new Error("Provided path(s) do not exist."));return}pf(`code "${i}"`,s=>{if(s){n(new Error(`Error opening the workspace in VSCode: ${s.message}`));return}pf(`code -r "${o}"`,a=>{if(a){n(new Error(`Error opening the file in VSCode: ${a.message}`));return}r()})})})}function Vq(t){if(t==null)return"null";if(typeof t=="string")return t;if(typeof t=="number")return t.toString();if(typeof t>"u")return"undefined";if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch{return t.toString()}}var Rt={WidgetUI:0,Widget_color:0,Widget_str:0,Widget_strOpt:0,Widget_prompt:0,Widget_promptOpt:0,Widget_seed:0,Widget_int:0,Widget_float:0,Widget_bool:0,Widget_inlineRun:0,Widget_intOpt:0,Widget_floatOpt:0,Widget_markdown:0,Widget_custom:0,Widget_size:0,Widget_matrix:0,Widget_loras:0,Widget_image:0,Widget_imageOpt:0,Widget_selectOneOrCustom:0,Widget_selectMany:0,Widget_selectManyOrCustom:0,Widget_selectOne:0,Widget_list:0,Widget_group:0,Widget_groupOpt:0,Widget_choice:0,Widget_choices:0,Widget_enum:0,Widget_enumOpt:0,Widget_listExt:0};var oc=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="str";this.id=i?.id??vt(),this.state=i??{type:"str",collapsed:n.startCollapsed,active:!0,val:n.default??"",id:this.id},Ce(this)}get serial(){return this.state}get result(){return this.state.val}},Bd=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="markdown";this.id=i?.id??vt(),this.state=i??{type:"markdown",collapsed:n.startCollapsed,active:!0,id:this.id},Ce(this)}get markdown(){let e=this.input.markdown;return typeof e=="string"?e:e(this.builder._ROOT)}get serial(){return this.state}get result(){return this.state}},Wd=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="custom";this.st=()=>this.schema.st;this.reset=()=>this.state.value=this.input.defaultValue();this.id=i?.id??vt(),this.Component=n.Component,this.state=i??{type:"custom",active:!0,id:this.id,value:this.input.defaultValue()},Ce(this,{Component:!1})}get serial(){return this.state}get result(){return this.state.value}},jd=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="color";this.id=i?.id??vt(),this.state=i??{type:"color",collapsed:n.startCollapsed,id:this.id,active:!0,val:n.default??""},Ce(this)}get serial(){return this.state}get result(){return this.state.val}},sc=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!0;this.type="strOpt";this.id=i?.id??vt(),this.state=i??{type:"strOpt",id:this.id,active:n.default!=null,val:n.default??""},Ce(this)}get serial(){return this.state}get result(){if(this.state.active)return this.state.val}},zd=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="prompt";if(this.id=i?.id??vt(),i)this.state=i;else{this.state={type:"prompt",collapsed:n.startCollapsed,id:this.id,active:!0,tokens:[]};let o=n.default;o!=null&&(typeof o=="string"?this.state.tokens=[{type:"text",text:o}]:this.state.tokens=o.tokens)}Ce(this)}get serial(){return this.state}get result(){return JSON.stringify(this.state),this.state}},Kl=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!0;this.type="promptOpt";if(this.id=i?.id??vt(),i)this.state=i;else{this.state={type:"promptOpt",collapsed:n.startCollapsed,id:this.id,active:!1,tokens:[]};let o=n.default;o!=null&&(typeof o=="string"?(this.state.active=!0,this.state.tokens=[{type:"text",text:o}]):this.state.tokens=o.tokens)}Ce(this)}get serial(){return this.state}get result(){if(this.state.active!==!1)return this.state}},$d=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="seed";this.id=i?.id??vt(),this.state=i??{type:"seed",id:this.id,active:!0,val:n.default??0,mode:n.defaultMode??"randomize"},Ce(this)}get serial(){return this.state}get result(){let e=this.builder._cache.count;return this.state.mode==="randomize"?Math.floor(Math.random()*9999999):this.state.val}},Yl=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="int";this.id=i?.id??vt(),this.state=i??{type:"int",collapsed:n.startCollapsed,id:this.id,active:!0,val:n.default??0},Ce(this)}get serial(){return this.state}get result(){return this.state.val}},ac=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="float";this.id=i?.id??vt(),this.state=i??{type:"float",collapsed:n.startCollapsed,id:this.id,active:!0,val:n.default??0},Ce(this)}get serial(){return this.state}get result(){return this.state.val}},lc=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!0;this.type="bool";this.id=i?.id??vt(),this.state=i??{type:"bool",collapsed:n.startCollapsed,id:this.id,active:!0,val:n.default??!1},Ce(this)}get serial(){return this.state}get result(){return this.state.active?this.state.val:!1}},Hd=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="inlineRun";n.text&&(n.label=n.label??" "),this.id=i?.id??vt(),this.state=i??{type:"inlineRun",collapsed:n.startCollapsed,id:this.id,active:!0,val:!1},Ce(this)}get serial(){return this.state}get result(){return this.state.active?this.state.val:!1}},Xl=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!0;this.type="intOpt";this.id=i?.id??vt(),this.state=i??{type:"intOpt",id:this.id,active:n.default!=null,val:n.default??0},Ce(this)}get serial(){return this.state}get result(){if(this.state.active!==!1)return this.state.val}},uc=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!0;this.type="floatOpt";this.id=i?.id??vt(),this.state=i??{type:"floatOpt",id:this.id,active:n.default!=null,val:n.default??0},Ce(this)}get serial(){return this.state}get result(){if(this.state.active!==!1)return this.state.val}},qd=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="size";if(this.id=i?.id??vt(),i)this.state=i;else{let o=n.default?.aspectRatio??"1:1",s=n.default?.modelType??"SD1.5 512",a=512,l=512;this.state={type:"size",id:this.id,aspectRatio:o,modelType:s,height:l,width:a,active:!0}}Ce(this)}get serial(){return this.state}get result(){return this.state}},Gd=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="matrix";this.sep=" &&& ";this.store=new Map;this.key=(e,r)=>`${e}${this.sep}${r}`;this.UPDATE=()=>this.state.selected=this.RESULT;this.setAll=e=>{for(let r of this.allCells)r.value=e};this.setRow=(e,r)=>{for(let n of this.cols){let i=this.get(e,n);i.value=r}this.UPDATE()};this.setCol=(e,r)=>{for(let n of this.rows){let i=this.get(n,e);i.value=r}this.UPDATE()};this.get=(e,r)=>tn(this.store.get(this.key(e,r)));this.set=(e,r,n)=>{let i=this.get(e,r);i.value=n,this.UPDATE()};this.id=i?.id??vt(),this.state=i??{type:"matrix",collapsed:n.startCollapsed,id:this.id,active:!0,selected:[]};let o=n.rows,s=n.cols;for(let[l,c]of o.entries())for(let[p,f]of s.entries())this.store.set(this.key(c,f),{x:l,y:p,col:f,row:c,value:!1});let a=this.state.selected;if(a)for(let l of a)this.store.set(this.key(o[l.x],s[l.y]),l);this.rows=n.rows,this.cols=n.cols,Ce(this)}get serial(){return this.state}get result(){return this.state.selected}get allCells(){return Array.from(this.store.values())}get RESULT(){return this.allCells.filter(e=>e.value)}get firstValue(){return this.allCells[0]?.value??!1}},Vd=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="loras";this.selectedLoras=new Map;this.FOLDER=[];this._insertLora=e=>{let n=e.replace(/\\/g,"/").split("/"),i=this.FOLDER;for(let o=0;o<n.length-1;o++){let s=n[o],a=i.find(l=>l.label===s);if(a==null){let l=n.slice(0,o+1).join("\\"),c={label:s,value:l,children:[]};i.push(c),i=c.children}else i=a.children}i.push({label:n[n.length-1],value:e})};this.id=i?.id??vt(),this.state=i??{type:"loras",collapsed:n.startCollapsed,id:this.id,active:!0,loras:n.default??[]},this.allLoras=r.getLoras();for(let o of this.allLoras)o!=="None"&&this._insertLora(o);for(let o of this.state.loras)this.selectedLoras.set(o.name,o);Ce(this)}get serial(){return this.state}get result(){return this.state.loras}},Jl=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="image";this.id=i?.id??vt(),this.state=i??{type:"image",id:this.id,active:!0,comfy:n.defaultComfy??{imageName:"example.png",type:"ComfyImage"},cushy:n.defaultCushy,paint:n.defaultPaint,pick:n.default??"comfy"},Ce(this)}get serial(){return this.state}get result(){return this.state.pick==="cushy"&&this.state.cushy?this.state.cushy:this.state.pick==="paint"&&this.state.paint?this.state.paint:this.state.comfy}},sl=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!0;this.type="imageOpt";this.id=i?.id??vt(),this.state=i??{type:"imageOpt",collapsed:n.startCollapsed,id:this.id,active:!!n.default,comfy:n.defaultComfy??{imageName:"example.png",type:"ComfyImage"},cushy:n.defaultCushy,paint:n.defaultPaint,pick:n.default??"comfy"},Ce(this)}get serial(){return this.state}get result(){if(this.state.active)return this.state.pick==="cushy"&&this.state.cushy?this.state.cushy:this.state.pick==="paint"&&this.state.paint?this.state.paint:this.state.comfy}},Kd=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="selectOne";this.id=i?.id??vt();let o=this.choices;this.state=i??{type:"selectOne",collapsed:n.startCollapsed,active:!0,id:this.id,query:"",val:n.default??o[0]},Ce(this)}get choices(){let e=this.input.choices;return typeof e=="function"?e(this.builder._ROOT):e}get serial(){return this.state}get result(){return this.state.val}},Yd=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="selectOneOrCustom";this.id=i?.id??vt(),this.state=i??{type:"selectOneOrCustom",collapsed:n.startCollapsed,id:this.id,query:"",val:n.default??n.choices[0]??""},Ce(this)}get serial(){return this.state}get result(){return this.state.val}},Xd=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="selectMany";if(this.id=i?.id??vt(),i){let o=i.values_.map(s=>n.choices.find(a=>a.type===s)).filter(s=>s!=null);this.state={type:"selectMany",collapsed:i.collapsed,id:this.id,query:i.query,values:o}}else this.state={type:"selectMany",collapsed:n.startCollapsed,id:this.id,query:"",values:n.default??[]};Ce(this)}get serial(){let e=this.state.values.map(r=>r.type);return{type:"selectMany",id:this.id,query:this.state.query,values_:e}}get result(){return this.state.values}},Jd=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="selectManyOrCustom";this.id=i?.id??vt(),this.state=i??{type:"selectManyOrCustom",collapsed:n.startCollapsed,id:this.id,query:"",values:n.default??[]},Ce(this)}get serial(){return this.state}get result(){return this.state.values}},Qd=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="list";this.removemAllItems=()=>this.state.items=this.state.items.slice(0,this.input.min??0);this.collapseAllItems=()=>this.state.items.forEach(e=>e.state.collapsed=!0);this.expandAllItems=()=>this.state.items.forEach(e=>e.state.collapsed=!1);this.removeItem=e=>{let r=this.state.items.indexOf(e);r>=0&&this.state.items.splice(r,1)};this.moveItem=(e,r)=>{let n=this.state.items;n?.splice(r,0,n.splice(e,1)[0])};if(this.id=i?.id??vt(),this._reference=n.element(0),i){let o=i.items_.map(s=>e._HYDRATE(s.type,this._reference.input,s));this.state={type:"list",id:this.id,active:i.active,items:o}}else{let s=((l,c,p)=>Math.min(Math.max(l,c),p))(n.defaultLength??0,n.min??0,n.max??10),a=s?new Array(s).fill(0).map((l,c)=>n.element(c)):[];this.state={type:"list",id:this.id,active:!0,items:a}}Ce(this)}get items(){return this.state.items}get serial(){let e=this.state.items.map(r=>r.serial);return{type:"list",id:this.id,active:this.state.active,items_:e}}get result(){return this.state.items.map(e=>e.result)}addItem(){this.state.items.push(this.input.element(this.state.items.length))}},Kq={x:50,y:50,z:0,width:50,height:50,depth:0},Ql=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="listExt";this.removemAllItems=()=>this.state.items=this.state.items.slice(0,this.input.min??0);this.collapseAllItems=()=>this.state.items.forEach(e=>e.item.state.collapsed=!0);this.expandAllItems=()=>this.state.items.forEach(e=>e.item.state.collapsed=!1);this.removeItem=e=>{let r=this.state.items.indexOf(e);r>=0&&this.state.items.splice(r,1)};if(this.id=i?.id??vt(),this._reference=n.element({width:100,height:100,ix:0}).item,i){let o=i.items_.map(({item_:s,...a})=>({item:e._HYDRATE(s.type,this._reference.input,s),...a}));this.state={type:"listExt",id:this.id,active:i.active,items:o,width:i.width,height:i.height}}else{let o=n.width??100,s=n.height??100,l=((p,f,m)=>Math.min(Math.max(p,f),m))(n.defaultLength??0,n.min??0,n.max??10),c=l?new Array(l).fill(0).map((p,f)=>{let m=n.element({width:o,height:s,ix:f});return Object.assign({},Kq,m)}):[];this.state={type:"listExt",id:this.id,active:!0,items:c,width:o,height:s}}Ce(this)}addItem(){let e=this.input.element({width:this.state.width,height:this.state.height,ix:this.state.items.length}),r={...Kq,...e};this.state.items.push(r)}get serial(){let e=this.state.items.map(r=>{let{item:n,...i}=r;return{item_:r.item.serial,...i}});return{type:"listExt",id:this.id,active:this.state.active,items_:e,width:this.state.width,height:this.state.height}}get result(){return{items:this.state.items.map(r=>({...r,item:r.item.result})),width:this.state.width,height:this.state.width}}},Zd=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="group";if(this.id=i?.id??vt(),typeof n.items!="function"){console.log('\u{1F534} group "items" should be af unction');debugger}if(i){let o=n.items();this.state={type:"group",id:this.id,active:i.active,collapsed:i.collapsed,values:{}};let s=i.values_??{};for(let a in o){let l=o[a],c=s[a],p=l.input,f=l.type;c&&f===c.type?this.state.values[a]=this.builder._HYDRATE(f,p,c):this.state.values[a]=l}}else{let o=n.items();this.state={type:"group",id:this.id,active:!0,values:o,vertical:n.verticalLabels??!0}}Ce(this)}get entries(){return Object.entries(this.state.values)}get values(){return this.state.values}get serial(){let e={};for(let r in this.state.values)e[r]=this.state.values[r].serial;return{type:"group",id:this.id,active:this.state.active,values_:e,collapsed:this.state.collapsed}}get result(){let e={};for(let r in this.state.values)e[r]=this.state.values[r].result;return e}},ep=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!0;this.type="groupOpt";if(this.id=i?.id??vt(),i){let o=n.items();this.state={type:"groupOpt",id:this.id,active:i.active,collapsed:i.collapsed,values:{}};let s=i.values_??{};for(let a in o){let l=o[a],c=s[a],p=l.input,f=l.type;c&&f===c.type?this.state.values[a]=this.builder._HYDRATE(f,p,c):this.state.values[a]=l}}else{let o=n.items();this.state={type:"groupOpt",id:this.id,active:n.default??!1,values:o}}Ce(this)}get entries(){return Object.entries(this.state.values)}get values(){return this.state.values}get serial(){let e={};for(let r in this.state.values)e[r]=this.state.values[r].serial;return{type:"groupOpt",id:this.id,active:this.state.active,values_:e,collapsed:this.state.collapsed}}get result(){if(!this.state.active)return;let e={};for(let r in this.state.values)e[r]=this.state.values[r].result;return e}},tp=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="choice";if(this.id=i?.id??vt(),i){let o=n.items();this.state={type:"choice",id:this.id,active:i.active,collapsed:i.collapsed,values:{},pick:i.pick};let s=i.values_??{};for(let a in o){let l=o[a],c=s[a],p=l.input,f=l.type;c&&f===c.type?this.state.values[a]=this.builder._HYDRATE(f,p,c):this.state.values[a]=l}}else{let o=n.items(),s=n.default??Object.keys(o)[0]??"error";this.state={type:"choice",id:this.id,active:!0,values:o,pick:s}}Ce(this)}get pick(){return this.state.pick}get child(){return this.state.values[this.state.pick]}get serial(){let e={};for(let r in this.state.values)e[r]=this.state.values[r].serial;return{type:"choice",id:this.id,active:this.state.active,values_:e,collapsed:this.state.collapsed,pick:this.state.pick}}get result(){if(this.state.active&&this.state.pick!=null)return this.state.values[this.state.pick].result}},rp=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="choices";if(this.id=i?.id??vt(),typeof n.items!="function"){console.log('\u{1F534} choices "items" should be af unction');debugger}if(i){let o=n.items();this.state={type:"choices",id:this.id,active:i.active,collapsed:i.collapsed,branches:this.input.defaultActiveBranches??{},values:{}};let s=i.values_??{};for(let a in o){let l=o[a],c=s[a],p=l.input,f=l.type;c&&f===c.type?this.state.values[a]=this.builder._HYDRATE(f,p,c):this.state.values[a]=l,i.branches[a]!=null&&(this.state.branches[a]=i.branches[a])}}else{let o=n.items();this.state={type:"choices",id:this.id,active:!0,values:o,branches:{}}}Ce(this)}get serial(){let e={};for(let r in this.state.values)e[r]=this.state.values[r].serial;return{type:"choices",id:this.id,active:this.state.active,values_:e,collapsed:this.state.collapsed,branches:this.state.branches}}get result(){let e={};for(let r in this.state.values)this.state.branches[r]===!0&&(e[r]=this.state.values[r].result);return e}},np=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!1;this.type="enum";this.id=i?.id??vt();let o=this.schema.knownEnumsByName.get(n.enumName)?.values??[];this.state=i??{type:"enum",id:this.id,active:!0,val:n.default??o[0]},Ce(this)}get status(){return this.schema.st.fixEnumValue(this.state.val,this.input.enumName,!1)}get serial(){return this.state}get result(){return this.status.finalValue}},Zl=class{constructor(e,r,n,i){this.builder=e;this.schema=r;this.input=n;this.isOptional=!0;this.type="enumOpt";this.id=i?.id??vt();let o=this.schema.knownEnumsByName.get(n.enumName)?.values??[];this.state=i??{type:"enumOpt",id:this.id,active:n.default!=null,val:n.default??o[0]},Ce(this)}get status(){return this.schema.st.fixEnumValue(this.state.val,this.input.enumName,!0)}get serial(){return this.state}get result(){if(this.state.active)return this.status.finalValue}};Rt.Widget_color=jd;Rt.Widget_str=oc;Rt.Widget_strOpt=sc;Rt.Widget_prompt=zd;Rt.Widget_promptOpt=Kl;Rt.Widget_seed=$d;Rt.Widget_int=Yl;Rt.Widget_float=ac;Rt.Widget_bool=lc;Rt.Widget_inlineRun=Hd;Rt.Widget_intOpt=Xl;Rt.Widget_floatOpt=uc;Rt.Widget_markdown=Bd;Rt.Widget_custom=Wd;Rt.Widget_size=qd;Rt.Widget_matrix=Gd;Rt.Widget_loras=Vd;Rt.Widget_image=Jl;Rt.Widget_imageOpt=sl;Rt.Widget_selectOneOrCustom=Yd;Rt.Widget_selectMany=Xd;Rt.Widget_selectManyOrCustom=Jd;Rt.Widget_selectOne=Kd;Rt.Widget_list=Qd;Rt.Widget_group=Zd;Rt.Widget_groupOpt=ep;Rt.Widget_choice=tp;Rt.Widget_choices=rp;Rt.Widget_enum=np;Rt.Widget_enumOpt=Zl;Rt.Widget_listExt=Ql;var iK=ie(oG(),1),oK=ie(uG(),1),sK=ie(mG(),1),aK=ie(MG(),1),lK=ie(jG(),1),uK=ie(NV(),1);Sn();var S1e={blockCursor:"PlaygroundEditorTheme__blockCursor",characterLimit:"PlaygroundEditorTheme__characterLimit",code:"PlaygroundEditorTheme__code",codeHighlight:{atrule:"PlaygroundEditorTheme__tokenAttr",attr:"PlaygroundEditorTheme__tokenAttr",boolean:"PlaygroundEditorTheme__tokenProperty",builtin:"PlaygroundEditorTheme__tokenSelector",cdata:"PlaygroundEditorTheme__tokenComment",char:"PlaygroundEditorTheme__tokenSelector",class:"PlaygroundEditorTheme__tokenFunction","class-name":"PlaygroundEditorTheme__tokenFunction",comment:"PlaygroundEditorTheme__tokenComment",constant:"PlaygroundEditorTheme__tokenProperty",deleted:"PlaygroundEditorTheme__tokenProperty",doctype:"PlaygroundEditorTheme__tokenComment",entity:"PlaygroundEditorTheme__tokenOperator",function:"PlaygroundEditorTheme__tokenFunction",important:"PlaygroundEditorTheme__tokenVariable",inserted:"PlaygroundEditorTheme__tokenSelector",keyword:"PlaygroundEditorTheme__tokenAttr",namespace:"PlaygroundEditorTheme__tokenVariable",number:"PlaygroundEditorTheme__tokenProperty",operator:"PlaygroundEditorTheme__tokenOperator",prolog:"PlaygroundEditorTheme__tokenComment",property:"PlaygroundEditorTheme__tokenProperty",punctuation:"PlaygroundEditorTheme__tokenPunctuation",regex:"PlaygroundEditorTheme__tokenVariable",selector:"PlaygroundEditorTheme__tokenSelector",string:"PlaygroundEditorTheme__tokenSelector",symbol:"PlaygroundEditorTheme__tokenProperty",tag:"PlaygroundEditorTheme__tokenProperty",url:"PlaygroundEditorTheme__tokenOperator",variable:"PlaygroundEditorTheme__tokenVariable"},embedBlock:{base:"PlaygroundEditorTheme__embedBlock",focus:"PlaygroundEditorTheme__embedBlockFocus"},hashtag:"PlaygroundEditorTheme__hashtag",heading:{h1:"PlaygroundEditorTheme__h1",h2:"PlaygroundEditorTheme__h2",h3:"PlaygroundEditorTheme__h3",h4:"PlaygroundEditorTheme__h4",h5:"PlaygroundEditorTheme__h5",h6:"PlaygroundEditorTheme__h6"},image:"editor-image",indent:"PlaygroundEditorTheme__indent",link:"PlaygroundEditorTheme__link",list:{listitem:"PlaygroundEditorTheme__listItem",listitemChecked:"PlaygroundEditorTheme__listItemChecked",listitemUnchecked:"PlaygroundEditorTheme__listItemUnchecked",nested:{listitem:"PlaygroundEditorTheme__nestedListItem"},olDepth:["PlaygroundEditorTheme__ol1","PlaygroundEditorTheme__ol2","PlaygroundEditorTheme__ol3","PlaygroundEditorTheme__ol4","PlaygroundEditorTheme__ol5"],ul:"PlaygroundEditorTheme__ul"},ltr:"PlaygroundEditorTheme__ltr",mark:"PlaygroundEditorTheme__mark",markOverlap:"PlaygroundEditorTheme__markOverlap",paragraph:"PlaygroundEditorTheme__paragraph",quote:"PlaygroundEditorTheme__quote",rtl:"PlaygroundEditorTheme__rtl",table:"PlaygroundEditorTheme__table",tableAddColumns:"PlaygroundEditorTheme__tableAddColumns",tableAddRows:"PlaygroundEditorTheme__tableAddRows",tableCell:"PlaygroundEditorTheme__tableCell",tableCellActionButton:"PlaygroundEditorTheme__tableCellActionButton",tableCellActionButtonContainer:"PlaygroundEditorTheme__tableCellActionButtonContainer",tableCellEditing:"PlaygroundEditorTheme__tableCellEditing",tableCellHeader:"PlaygroundEditorTheme__tableCellHeader",tableCellPrimarySelected:"PlaygroundEditorTheme__tableCellPrimarySelected",tableCellResizer:"PlaygroundEditorTheme__tableCellResizer",tableCellSelected:"PlaygroundEditorTheme__tableCellSelected",tableCellSortedIndicator:"PlaygroundEditorTheme__tableCellSortedIndicator",tableResizeRuler:"PlaygroundEditorTheme__tableCellResizeRuler",tableSelected:"PlaygroundEditorTheme__tableSelected",text:{bold:"PlaygroundEditorTheme__textBold",code:"PlaygroundEditorTheme__textCode",italic:"PlaygroundEditorTheme__textItalic",strikethrough:"PlaygroundEditorTheme__textStrikethrough",subscript:"PlaygroundEditorTheme__textSubscript",superscript:"PlaygroundEditorTheme__textSuperscript",underline:"PlaygroundEditorTheme__textUnderline",underlineStrikethrough:"PlaygroundEditorTheme__textUnderlineStrikethrough"}},AV=S1e;Sn();var OV=F(function(e){let r=e.node;return h("span",{style:{border:"1px solid #747474"},className:"text-red-400 rv-tooltip-container p-1",children:P(hr,{children:[P("span",{children:[r.embeddingName," \u260E\uFE0F"]}),h("span",{children:"embedding"})]})})});var L0=class t extends Lo{constructor(r,n){super(n);this.embeddingName=r}static getType(){return"embedding"}static clone(r){return new t(r.embeddingName,r.__key)}exportJSON(){return{type:t.getType(),embeddingName:this.embeddingName,version:1}}importJSON(r){return new t(r.embeddingName)}static importJSON(r){return new t(r.embeddingName)}isIsolated(){return!0}isInline(){return!0}isKeyboardSelectable(){return!0}createDOM(){return document.createElement("span")}updateDOM(){return!1}decorate(){return h(OV,{node:this})}};function YS(t){return new L0(t)}Sn();var RV=F(function(e){let r=e.node;return P("span",{style:{border:"1px solid #747474"},className:"text-teal-400 rv-tooltip-container p-1",children:[r.booru.text," \u{1F4D7}"]})});var M0=class t extends Lo{constructor(r,n){super(n);this.booru=r}static getType(){return"booru"}static clone(r){return new t(r.booru,r.__key)}exportJSON(){return{type:t.getType(),tag:this.booru,version:1}}importJSON(r){return new t(r.tag)}static importJSON(r){return new t(r.tag)}isIsolated(){return!0}isInline(){return!0}isKeyboardSelectable(){return!0}createDOM(){return document.createElement("span")}updateDOM(){return!1}decorate(){return h(RV,{node:this})}};function XS(t){return new M0(t)}Sn();var PV=ie(Bs(),1);var LV=F(function(e){let r=e.node,[n]=(0,PV.useLexicalComposerContext)(),i=r.loraDef,o=pe(),s=o.configFile.value?.loraPrompts?.[i.name],a=s?.text??"",l=s?.url??"";return h(Rs,{enterable:!0,placement:"bottom",speaker:h(mh,{children:P("div",{children:[h("div",{className:"flex-grow"}),P("div",{children:[h("div",{children:"model strength"}),h("div",{tw:"flex items-center",children:h(_i,{value:i.strength_model??1,step:.1,min:-2,max:2,onValueChange:c=>i.strength_model=c,style:{width:"4.5rem"},mode:"float"})})]}),P("div",{children:[h("div",{children:"clip strength"}),h("div",{tw:"flex items-center",children:h(_i,{value:i.strength_clip??1,step:.1,min:-2,max:2,onValueChange:c=>i.strength_clip=c,style:{width:"4.5rem"},mode:"float"})})]}),P("div",{children:[h("div",{children:"Associated text"}),h(Io,{type:"text",value:a,onChange:c=>{let p=c.target.value;o.configFile.update(f=>{f.loraPrompts||(f.loraPrompts={});let m=f.loraPrompts,g=m[i.name];g||(g=m[i.name]={text:""}),g.text=p})}})]}),P("div",{children:[h(gt,{size:"xs",onClick:()=>Yw(l),appearance:"link",icon:h("span",{className:"material-symbols-outlined",children:"open_in_new"}),children:"Associated URL"}),h(Io,{type:"text",value:l,onChange:c=>{let p=c.target.value;o.configFile.update(f=>{f.loraPrompts||(f.loraPrompts={});let m=f.loraPrompts,g=m[i.name];g||(g=m[i.name]={url:""}),g.url=p})}})]}),h(gt,{size:"xs",icon:h("span",{className:"material-symbols-outlined",children:"delete_forever"}),onClick:()=>n.update(()=>r.remove())})]},i.name)}),children:P("span",{style:{border:"1px solid #747474"},className:"text-blue-400 rv-tooltip-container p-1",children:[i.name,":",i.strength_model,":",i.strength_clip," \u2728",a?`+ "${a}"`:h("span",{tw:"text-red-500",children:"no associated text"})]})})});var F0=class t extends Lo{constructor(r,n){super(n);this.loraDef=si(r)}static getType(){return"lora"}static clone(r){return new t(r.loraDef,r.__key)}exportJSON(){return{type:t.getType(),loraDef:yi(this.loraDef),version:1}}importJSON(r){return new t(r.loraDef)}static importJSON(r){return new t(r.loraDef)}isIsolated(){return!0}isInline(){return!0}isKeyboardSelectable(){return!0}createDOM(){return document.createElement("span")}updateDOM(){return!1}decorate(){return h(LV,{node:this})}};function JS(t){return new F0(t)}Sn();var MV=F(function(e){let r=pe(),n=e.node;return h("span",{style:{border:"1px solid #b2ad54"},className:"text-yellow-500 rv-tooltip-container p-0.5",children:P(hr,{disableHover:!0,children:[P("span",{children:[n.wildcardName,"\u{1F3B2}"]}),h("div",{tw:"w-96 menu",children:(r.wildcards[n.wildcardName]??[]).slice(0,20).join(", ")+"..."})]})})});var U0=class t extends Lo{constructor(r,n){super(n);this.wildcardName=r}static getType(){return"wildcard"}static clone(r){return new t(r.wildcardName,r.__key)}exportJSON(){return{type:t.getType(),payload:this.wildcardName,version:1}}importJSON(r){return new t(r.payload)}static importJSON(r){return new t(r.payload)}isIsolated(){return!0}isInline(){return!0}isKeyboardSelectable(){return!0}createDOM(){return document.createElement("span")}updateDOM(){return!1}decorate(){return h(MV,{node:this})}};function QS(t){return new U0(t)}var cK=ie(ve(),1);Sn();var FV=ie(Bs(),1);var UV=F(function(e){let r=e.node,[n]=(0,FV.useLexicalComposerContext)(),i=r.tag,o=r.setParam;return console.log(o),console.log(r,i),h(Rs,{enterable:!0,placement:"bottom",speaker:h(mh,{children:P("div",{className:"flex items-start",children:[P("div",{className:"shrink-0",children:[i.tag.key,"("]}),h("div",{className:"flex-grow"}),h("input",{tw:"input input-xs",type:"text",value:i.param,step:.1,onChange:s=>{let a=s.target.value;i.param=a},style:{width:"4.5rem"}}),h(gt,{size:"xs",icon:h("span",{className:"material-symbols-outlined",children:"delete_forever"}),onClick:()=>n.update(()=>r.remove())}),h("div",{className:"shrink-0",children:")"})]},i.tag.key)}),children:P("span",{className:"bg-green-800",style:{padding:"1px"},children:["/",i.tag.key,"(",i.param,")"]})})});var B0=class t extends Lo{constructor(r,n){super(n);this.tag=si(r)}setParam(r){this.param=r}static getType(){return"action"}static clone(r){return new t(r.tag,r.__key)}exportJSON(){return{type:t.getType(),tag:this.tag,version:1}}importJSON(r){return new t(r.tag)}static importJSON(r){return new t(r.tag)}isIsolated(){return!0}isInline(){return!0}isKeyboardSelectable(){return!0}createDOM(){return document.createElement("span")}updateDOM(){return!1}decorate(){return h(UV,{node:this})}};function ZS(t,e){return new B0(t,e)}Sn();var W0=class t extends Lo{constructor(r,n){super(n);this.tag=r}static getType(){return"user"}static clone(r){return new t(r.tag,r.__key)}exportJSON(){return{type:t.getType(),tag:this.tag,version:1}}importJSON(r){return new t(r.tag)}static importJSON(r){return new t(r.tag)}isIsolated(){return!0}isInline(){return!0}isKeyboardSelectable(){return!0}createDOM(){return document.createElement("span")}updateDOM(){return!1}decorate(){return P("span",{className:"bg-purple-800",children:["^",this.tag.key]})}};function eE(t,e){return new W0(t,e)}var j0=ie(I3(),1),BV=ie(Bs(),1),z0=ie(ip(),1);Sn();var WV=ie(ve(),1),jV=()=>{let[t]=(0,BV.useLexicalComposerContext)();return(0,WV.useEffect)(()=>(0,z0.mergeRegister)(t.registerCommand(p3,e=>(console.log("\u{1F44B} --- COPY"),(0,j0.copyToClipboard)(t,(0,z0.objectKlassEquals)(e,ClipboardEvent)?e:null),!0),k0),t.registerCommand(f3,e=>(console.log("\u{1F44B} --- CUT"),E1e(e,t),!0),k0),t.registerCommand(h3,e=>{if(console.log("\u{1F44B} --- PASTE"),g3(e.target))return!1;let r=Pf();return Lf(r)?(C1e(e,t),!0):!1},k0)),[t]),null};async function E1e(t,e){await(0,j0.copyToClipboard)(e,(0,z0.objectKlassEquals)(t,ClipboardEvent)?t:null),e.update(()=>{let r=Pf();Lf(r)?r.removeText():d3(r)&&r.getNodes().forEach(n=>n.remove())})}function C1e(t,e){t.preventDefault(),e.update(()=>{let r=Pf(),n=t instanceof InputEvent||t instanceof KeyboardEvent?null:t.clipboardData;n!=null&&Lf(r)&&(0,j0.$insertDataTransferForRichText)(n,r,e)},{tag:"paste"})}var XV=ie(Bs(),1),rE=ie(YV(),1);Sn();var Mf=ie(ve(),1),JV=ie(Pl(),1);var tE=class extends rE.MenuOption{constructor(r){super(r.title);this._candidate=r;this.title=r.title,this.payload=r.value,this.keywords=r.keywords||[]}};function U1e(t){let e="item";return t.isSelected&&(e+=" selected"),h("li",{tabIndex:-1,className:e,ref:t.option.setRefElement,role:"option","aria-selected":t.isSelected,id:"typeahead-item-"+t.index,onMouseEnter:t.onMouseEnter,onClick:t.onClick,children:P("span",{className:"text",children:[t.option._candidate.menuLabel,t.option.title]})},t.option.key)}var B1e=100;function W1e({minLength:t=1,maxLength:e=75}){return(0,Mf.useCallback)(r=>{let n=r.split(/\s+/).pop()?.trim();return n?{leadOffset:r.length-n.length,matchingString:n,replaceableString:n}:null},[e,t])}var QV=F(t=>{let[e]=(0,XV.useLexicalComposerContext)(),[r,n]=(0,Mf.useState)(null),i=pe(),o=t.cs.completionOptions,s=W1e({minLength:0}),a=(0,Mf.useMemo)(()=>r==null||!r.length?o:o.filter(c=>{let p=r[0];if([":","&","*","@","^","/"].includes(p)&&c._candidate.trigger!==p)return!1;let f=r?.replace(/[^a-zA-Z0-9]/g,""),m=new RegExp(f,"gi");return!!(m.exec(c.title)||c.keywords.some(g=>m.exec(g)))}).slice(0,B1e),[o,r]),l=(0,Mf.useCallback)((c,p,f)=>{e.update(()=>{let m=Pf();if(!Lf(m)||c==null)return;p&&p.remove();let g=m.insertNodes([c._candidate.createNode(c.payload)]);console.log(g),f()})},[e]);return h(rE.LexicalTypeaheadMenuPlugin,{onQueryChange:n,onSelectOption:l,triggerFn:s,options:a,menuRenderFn:(c,{selectedIndex:p,selectOptionAndCleanUp:f,setHighlightedIndex:m})=>{if(c.current==null||a.length===0)return null;let g=e.getRootElement();return g==null?null:h(j1e,{root:g,anchorElement:c.current,options:a,selectedIndex:p,setHighlightedIndex:m,selectOptionAndCleanUp:f})}})}),j1e=F(function(e){let r=pe();if(r.currentPromptFocused==null||!ZV(e.root,r.currentPromptFocused))return null;let{anchorElement:i,options:o,selectedIndex:s,setHighlightedIndex:a,selectOptionAndCleanUp:l}=e;return JV.createPortal(h("div",{className:"typeahead-popover emoji-menu ",children:h("ul",{style:{paddingInlineStart:0},children:o.map((c,p)=>h(U1e,{index:p,isSelected:s===p,option:c,onMouseEnter:()=>a(p),onClick:()=>{a(p),l(c)}},c.key))})}),i)});function ZV(t,e){return e==null?!1:e===t?!0:ZV(t,e.parentNode)}Sn();var eK=F(function(e){let r=e.node;return h("span",{style:{border:"1px solid #747474"},className:"text-violet-400 rv-tooltip-container p-1",children:h(Rs,{placement:"bottomStart",speaker:h(Pu,{children:"break"}),children:h("span",{children:"\u2B55\uFE0F"})})})});var $0=class t extends Lo{constructor(r,n){super(n);this.breakType=r}static getType(){return"break"}static clone(r){return new t(r.breakType,r.__key)}exportJSON(){return{type:t.getType(),breakType:this.breakType,version:1}}importJSON(r){return new t(r.breakType)}static importJSON(r){return new t(r.breakType)}isIsolated(){return!0}isInline(){return!0}isKeyboardSelectable(){return!0}createDOM(){return document.createElement("span")}updateDOM(){return!1}decorate(){return h(eK,{node:this})}};function nE(t){return new $0(t)}var Bn=new Map,iE=class t{constructor(e,r){this.st=e;this.providers=[];r.break&&this.providers.push(t.getBreakCompletionProvider(e)),r.embedding&&this.providers.push(t.getEmbeddingCompletionProvider(e)),r.lora&&this.providers.push(t.getLoraCompletionProvider(e)),r.wildcard&&this.providers.push(t.getWildcardCompletionProvider(e)),r.booru&&this.providers.push(t.getBooruCompletionProvider(e)),r.user&&this.providers.push(t.getUserCompletionProvider(e)),r.action&&this.providers.push(t.getActionCompletionProvider(e)),Ce(this)}static{this.getEmbeddingCompletionProvider=e=>{let r="embedding";if(Bn.has(r))return Bn.get(r);let n=s=>YS(s),i=h("span",{tw:"text-red-500",children:"embedding:"}),o=new pc({getValues:()=>e.schema.data.embeddings.map(s=>({trigger:":",title:s,keywords:[s],value:s,createNode:n,menuLabel:i}))});return Bn.set(r,o),o}}static{this.getLoraCompletionProvider=e=>{let r="Completion";if(Bn.has(r))return Bn.get(r);let n=h("span",{tw:"text-blue-500",children:"lora:"}),i=s=>JS({name:s,strength_clip:1,strength_model:1}),o=new pc({getValues:()=>e.schema.getLoras().map(s=>({trigger:"@",title:s.replaceAll("\\","/").replace(".safetensors",""),keywords:[s],value:s,createNode:i,menuLabel:n}))});return Bn.set(r,o),o}}static{this.getWildcardCompletionProvider=e=>{let r="Wildcard";if(Bn.has(r))return Bn.get(r);let n=s=>QS(s),i=h("span",{tw:"text-yellow-500",children:"wildcard:"}),o=new pc({getValues:()=>Object.entries(e.wildcards).map(([s,a])=>({trigger:"*",menuLabel:i,title:s,keywords:a,value:s,createNode:n}))});return Bn.set(r,o),o}}static{this.getBreakCompletionProvider=e=>{let r="Break";if(Bn.has(r))return Bn.get(r);let n=s=>nE("basic"),i=h("span",{tw:"text-neutral-content",children:"break"}),o=new pc({getValues:()=>[{trigger:"|",menuLabel:i,title:"basic break",keywords:["break"],value:"basic",createNode:n}]});return Bn.set(r,o),o}}static{this.getBooruCompletionProvider=e=>{let r="Booru";if(Bn.has(r))return Bn.get(r);let n=s=>XS(s),i=h("span",{tw:"text-yellow-500",children:"danbooru:"}),o=new pc({getValues:()=>e.danbooru.tags.map(s=>({trigger:"&",title:s.text,keywords:s.aliases,value:s,createNode:n,menuLabel:i}))});return Bn.set(r,o),o}}static{this.getUserCompletionProvider=e=>{let r="User";if(Bn.has(r))return Bn.get(r);let n=s=>eE(s),i=h("span",{tw:"text-purple-500",children:"user:"}),o=new pc({getValues:()=>e.userTags.tags.map(s=>({trigger:"^",title:s.key,keywords:[s.key],value:s,createNode:n,menuLabel:i}))});return Bn.set(r,o),o}}static{this.getActionCompletionProvider=e=>{let r="Action";if(Bn.has(r))return Bn.get(r);let n=s=>ZS({tag:s,param:""}),i=h("span",{tw:"text-green-500",children:"action:"}),o=new pc({getValues:()=>e.actionTags.map(s=>({trigger:"/",title:s.key,keywords:[s.key],value:{key:s.key,action:s.method,param:""},createNode:n,menuLabel:i}))});return Bn.set(r,o),o}}get rawCandidates(){return this.providers.flatMap(e=>e.values)}get completionOptions(){return this.rawCandidates.map(e=>new tE(e))}},pc=class{constructor(e){this.p=e;Ce(this)}get values(){return this.p.getValues()}};Sn();var tK=ie(ve(),1),rK=ie(Bs(),1);var R3=ie(ve(),1),P3=R3.default.createContext(null),lg=()=>{let t=R3.default.useContext(P3);if(t==null)throw new Error("missing Draft in context");return t};function nK(){let[t]=(0,rK.useLexicalComposerContext)(),e=lg();return(0,tK.useEffect)(()=>t.registerCommand(m3,r=>r?.metaKey?(console.log("\u{1F44B}\u{1F44B}\u{1F44B}\u{1F44B}\u{1F44B}\u{1F44B}\u{1F44B}"),r?.stopImmediatePropagation(),r?.stopPropagation(),r?.preventDefault(),e.start(),!0):!1,4),[t]),null}var L3=t=>{let e=t.toJSON(),r=[],n=e.root.children[0];if(n==null||n.type!=="paragraph")return console.log("\u274C root.children[0] is not a paragraph"),{debug:"",items:r};let i=`{
`;for(let o of n.children)r.push(o);return i+=`}
`,{items:r,debug:i}};var M3=F(t=>{let e=pe(),r=t.widget,n=(0,cK.useMemo)(()=>new iE(e,{booru:!0,embedding:!0,lora:!0,wildcard:!0,user:!0,action:!0,break:!0}),[]);return P(iK.LexicalComposer,{initialConfig:{nodes:[L0,F0,U0,M0,W0,B0,$0],editorState:()=>{console.log("[\u{1F4AC}] LEXICAL: mounting lexical widget");let o=r.state;if(console.log("[\u{1F4AC}] LEXICAL: initial value is",{initialValue:yi(o)}),typeof o=="string"||o==null){I0().append(jS().append(zS(o??"")));return}let s=jS();o.tokens.forEach(a=>{if(a.type==="booru")return s.append(XS(a.tag));if(a.type==="lora")return s.append(JS(a.loraDef));if(a.type==="wildcard")return s.append(QS(a.payload));if(a.type==="embedding")return s.append(YS(a.embeddingName));if(a.type==="user")return s.append(eE(a.tag));if(a.type==="action")return s.append(ZS(a.tag,""));if(a.type==="linebreak")return s.append(c3());if(a.type==="text")return s.append(zS(a.text));if(a.type==="break")return s.append(nE(a.breakType));gr(a)}),I0().append(s)},namespace:"MyEditor",theme:AV,onError:$1e},children:[h(jV,{}),h(nK,{}),h(uK.PlainTextPlugin,{contentEditable:h(oK.ContentEditable,{onBlur:o=>{e.currentPromptFocused&&e.currentPromptFocused&&e.currentPromptFocused===o.target&&(e.currentPromptFocused=null)},onFocus:o=>{o.target&&e.currentPromptFocused!==o.target&&(e.currentPromptFocused=o.target)},style:{minHeight:"3rem",background:"var(--rs-input-bg)",borderRadius:"0.5rem",paddingLeft:".2rem"},className:"_WidgetPromptUI virtualBorder p-0.5  rounded flex flex-grow border-gray-500 [min-width:8rem]"}),placeholder:null,ErrorBoundary:sK.default}),h(QV,{cs:n}),h(lK.OnChangePlugin,{onChange:(o,s,a)=>{z1e(r,o)}}),h(aK.HistoryPlugin,{})]})});function z1e(t,e){e.read(()=>{I0().__cachedText?(t.state.tokens=L3(e).items,t instanceof Kl&&(t.state.active=!0)):t.state.tokens=L3(e).items})}function $1e(t){console.error(t)}var dK=F(function(e){return null});var pK=F(function(e){let r=lg();return h(gt,{tw:["btn-sm join-item",e.widget.input.kind==="warning"?"btn-warning":"btn-primary"],className:"self-start",icon:r.shouldAutoStart?h("span",{className:"material-symbols-outlined",children:"pause"}):h("span",{className:"material-symbols-outlined",children:"play_arrow"}),onClick:()=>{e.widget.state.val=!0,r.setAutostart(!1),r.start(),setTimeout(()=>{e.widget.state.val=!1},100)},children:e.widget.input.text??"Run"})});var fK=F(function(e){let r=e.widget,n=Object.keys(r.state.values),i=r.state.values[r.state.pick];return P("div",{tw:"_WidgetChoiceUI relative w-full",children:[h(Vl,{getLabelText:o=>o,cleanable:!1,options:n,value:()=>r.state.pick,onChange:o=>{o!=null&&(r.state.pick=o,r.state.active=!0)}}),r.state.collapsed?null:h("div",{tw:[r.input.layout==="H"?"flex":null],className:r.input.className,children:i&&h(ug,{widget:i})})]})});function mK(t){return t==null?"":t.length===0?t:(t=t.replace(/([a-z])([A-Z])/g,"$1 $2"),t=t.replace(/([A-Z])([A-Z][a-z])/g,"$1 $2"),t=t.replace(/_/g," "),t=t.replace(/([a-z])([A-Z])/g,"$1 $2"),t=t.replace(/([A-Z])([A-Z][a-z])/g,"$1 $2"),t[0].toUpperCase()+t.slice(1))}function oE(t){let e=Rt;return!!(t instanceof e.Widget_markdown||t instanceof e.Widget_custom||t instanceof e.Widget_image||t instanceof e.Widget_imageOpt||t instanceof e.Widget_size||t instanceof e.Widget_matrix||t instanceof e.Widget_group||t instanceof e.Widget_groupOpt||t instanceof e.Widget_list||t instanceof e.Widget_choice||t instanceof e.Widget_choices||t instanceof e.Widget_listExt||t instanceof e.Widget_str&&t.input.textarea||t instanceof e.Widget_prompt||t instanceof e.Widget_promptOpt)}var sE=F(function(e){let{rootKey:r,req:n}=e,i=Rt,o=pe(),s=n.input.tooltip,a=n.input.label??mK(r),l=(()=>{if(e.req.input.showID)return!0;if(o.preferedFormLayout==="auto")return!!(n instanceof i.Widget_group||n instanceof i.Widget_groupOpt||n instanceof i.Widget_list||n instanceof i.Widget_matrix||n instanceof i.Widget_listExt||n instanceof i.Widget_str&&n.input.textarea);if(o.preferedFormLayout==="mobile")return!0;if(o.preferedFormLayout==="dense")return!1})(),c=oE(n),p=n.state.collapsed&&c,f=e.req,m=e.isTopLevel?"_isTopLevel":"_isNotTopLevel",g=n instanceof i.Widget_bool?{value:n.state.val,onChange:E=>{n.state.val=E.target.checked,n.state.active=!0}}:{value:n.state.active,onChange:E=>{n.state.active=E.target.checked}},v=n.isOptional||!n.state.active||n instanceof i.Widget_bool,_=p?null:f.state.active?h(fa,{FallbackComponent:ql,onReset:E=>{},children:h(Rt.WidgetUI,{widget:n})}):null,S=P("div",{tw:["_WidgetLabel",l?"w-full":null,_==null?"w-full":null,"min-w-max shrink-0","flex items-center gap-0","hover:bg-base-200 cursor-pointer"],onClick:()=>{if(f.state.collapsed)return f.state.collapsed=!1;c&&f.state.active&&(f.state.collapsed=!0)},children:[v&&h(vi,{color:"green",checked:g.value,onChange:g.onChange,onClick:E=>E.stopPropagation()}),s&&P(hr,{children:[h("span",{className:"material-symbols-outlined",children:"info"}),h(Pu,{children:s})]}),a!==!1&&P("span",{tw:[e.isTopLevel?"font-bold":void 0],style:l?{lineHeight:"2rem"}:{lineHeight:"2rem",display:"inline-block"},children:[a||"...",e.req.input.showID?P("span",{tw:"opacity-50 italic text-sm",children:["#",e.req.id.slice(0,3)]}):null]}),h("span",{tw:"opacity-30 hover:opacity-100",children:f.state.collapsed?"\u25B8 {...}":""})]}),T=a==!1?"":"gap-1",w=l?`_WidgetWithLabelUI ${m} flex flex-col items-baseline`:`_WidgetWithLabelUI ${m} flex flex-row ${T} ${c?"items-baseline":"items-center"}`;return _==null&&(w+=" w-full"),l&&_&&(_=h("div",{tw:"w-full",style:{padding:"0 0rem 0 2rem"},children:_})),e.labelPos==="end"?P("div",{className:w,children:[_,S]},r):P("div",{className:w,children:[S,_]},r)});var hK=F(function(e){let r=e.widget,i=Object.keys(r.state.values).map(s=>({key:s})),o=Object.entries(r.state.branches).map(([s,a])=>({key:s,value:a})).filter(s=>s.value);return P("div",{className:"_WidgetChoicesUI",tw:"relative",children:[h("div",{tw:"flex items-start w-full",children:h(Vl,{tw:"flex-grow",value:()=>o,options:i,getLabelText:s=>s.key??s.key,onChange:s=>{let a=!!r.state.branches[s.key];r.state.branches[s.key]=!a}})}),r.state.collapsed?null:h("div",{tw:[r.input.layout==="H"?"flex":null],className:r.input.className,children:o.map(s=>{let a=r.state.values[s.key];return h(sE,{rootKey:s.key,labelPos:a.input.labelPos,req:a},s.key)})})]})});var gK=F(function(e){let r=e.widget;return h("div",{children:h("input",{value:r.state.val,type:"color",onChange:n=>r.state.val=n.target.value})})});var F3=F(function(e){let r=e.widget,n=r.input.enumName,i=r instanceof Zl,o=r.status;return h(U3,{value:o,disabled:!r.state.active,isOptional:i,enumName:n,onChange:s=>{if(s==null){i&&(r.state.active=!1);return}r.state.val=s}})}),U3=F(function(e){let i=pe().project.schema.knownEnumsByName.get(e.enumName)?.values??[],o=!!(e.value.isSubstitute||e.value.ENUM_HAS_NO_VALUES);return P("div",{tw:"flex-1",children:[h(Vl,{tw:[{"rsx-field-error":o}],size:"sm",disabled:e.disabled,cleanable:e.isOptional,options:i,getLabelText:s=>s.toString(),value:()=>e.value.candidateValue,hideValue:e.displayValue,onChange:s=>{s!=null&&e.onChange(s)}}),P("div",{tw:"flex flex-wrap gap-2",children:[e.value.isSubstitute?h(Rs,{enterable:!0,placement:"bottom",speaker:P(mh,{children:[P("span",{children:[h("span",{tw:"bord",children:e.value.candidateValue})," is not in your ComfyUI install folder"]}),P("div",{children:[h("span",{tw:"bord",children:e.value.finalValue})," used instead"]})]}),children:P("div",{className:"text-orange-500 flex items-center",children:[h("span",{className:"material-symbols-outlined",children:"info"}),h("span",{children:e.value.finalValue})]})}):null,e.value.ENUM_HAS_NO_VALUES?h("div",{tw:"text-red-500",children:"ENUM HAS NO VALUE"}):null]})]})});var B3=F(function(e){let r=e.widget,n=r.input.topLevel,i=Object.entries(r.state.values),o=i.length>0&&!n;return h("div",{tw:["flex rounded-box bg-opacity-95 items-start w-full text-base-content",o?"mb-2":void 0,o?"bg-base-300 bg-opacity-30":void 0,o?"virtualBorder":void 0],style:{position:"relative",paddingLeft:o?".2rem":void 0},children:r.state.collapsed?null:h("div",{tw:["_WidgetGroupUI w-full",r.input.layout==="H"?"flex flex-wrap gap-2":null],className:r.input.className,children:i.map(([s,a],l)=>h(sE,{isTopLevel:n,vertical:r.state.vertical,labelPos:a.input.labelPos,rootKey:s,req:a},s))})})});var aE=F(function(e){let r=e.req,n=r.state.items,i=r.input.max,o=r.input.min;return P(Os,{children:[h(gt,{tw:"btn-sm join-item btn-ghost",disabled:i?r.state.items.length>=i:void 0,icon:h("span",{className:"material-symbols-outlined",children:"add"}),onClick:()=>r.addItem(),children:"Add"}),h(gt,{tw:"btn-sm join-item btn-ghost",disabled:o?r.state.items.length<=o:void 0,icon:h("span",{className:"material-symbols-outlined",children:"delete_forever"}),onClick:()=>r.removemAllItems(),children:"Clear"}),h(gt,{tw:"btn-sm join-item btn-ghost",icon:h("span",{className:"material-symbols-outlined",children:"unfold_less"}),onClick:()=>r.collapseAllItems(),children:"Collapse all"}),h(gt,{tw:"btn-sm join-item btn-ghost",icon:h("span",{className:"material-symbols-outlined",children:"unfold_more"}),onClick:()=>r.expandAllItems(),children:"Expand All"}),h(gt,{tw:"btn-sm join-item btn-ghost",disabled:i?r.state.items.length>=i:void 0,icon:h("span",{className:"material-symbols-outlined",children:"add"}),onClick:()=>{_r(()=>{for(let s=0;s<100;s++)r.addItem()})},children:"Add 100 more"})]})});var cg=function(){return cg=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},cg.apply(this,arguments)};function yK(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}var SK=ie(_K()),Tt=ie(ve()),bK=function(e,r,n){for(var i=e.x,o=e.y,s=(n===void 0?{}:n).fallbackToClosest,a=s===void 0?!1:s,l=1e4,c=-1,p=0;p<r.length;p+=1){var f=r[p];if(i>=f.left&&i<f.right&&o>=f.top&&o<f.bottom)return p;if(a){var m=(f.left+f.right)/2,g=(f.top+f.bottom)/2,v=Math.sqrt(Math.pow(i-m,2)+Math.pow(o-g,2));v<l&&(l=v,c=p)}}return c},xK=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},TK=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},j3=function(e,r){return{x:e.x-r.x,y:e.y-r.y}},EK=function(e){e.preventDefault()},q1e=function(){window.addEventListener("contextmenu",EK,{capture:!0,passive:!1})},wK=function(){window.removeEventListener("contextmenu",EK)},G1e=function(e){var r=e.onStart,n=e.onMove,i=e.onEnd,o=e.allowDrag,s=o===void 0?!0:o,a=e.containerRef,l=e.knobs,c=Tt.default.useRef({x:0,y:0}),p=Tt.default.useRef(void 0),f=Tt.default.useRef(!1),m=Tt.default.useRef({onStart:r,onMove:n,onEnd:i}),g=Tt.default.useState(!1),v=g[0],_=g[1];Tt.default.useEffect(function(){m.current={onStart:r,onMove:n,onEnd:i}},[r,n,i]);var S=function(){p.current&&window.clearTimeout(p.current)},T=Tt.default.useCallback(function(){if(a.current){var X=a.current.getBoundingClientRect();c.current={x:X.left,y:X.top}}},[a]),w=Tt.default.useCallback(function(X){var te=j3(X,c.current);m.current.onMove&&m.current.onMove({pointInWindow:X,point:te})},[]),E=Tt.default.useCallback(function(X){if(f.current){f.current=!1;var te=xK(X),ne=j3(te,c.current);m.current.onStart&&m.current.onStart({point:ne,pointInWindow:te})}else w(xK(X))},[w]),I=Tt.default.useCallback(function(X){X.cancelable?(X.preventDefault(),w(TK(X.touches[0]))):(document.removeEventListener("touchmove",I),m.current.onEnd&&m.current.onEnd())},[w]),N=Tt.default.useCallback(function(){f.current=!1,document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",N),m.current.onEnd&&m.current.onEnd()},[E]),C=Tt.default.useCallback(function(){document.removeEventListener("touchmove",I),document.removeEventListener("touchend",C),wK(),m.current.onEnd&&m.current.onEnd()},[I]),k=Tt.default.useCallback(function(X){X.button===0&&(l?.length&&!l.find(function(te){return te.contains(X.target)})||(document.addEventListener("mousemove",E),document.addEventListener("mouseup",N),T(),f.current=!0))},[E,N,T,l]),U=Tt.default.useCallback(function(X,te){document.addEventListener("touchmove",I,{capture:!1,passive:!1}),document.addEventListener("touchend",C),q1e(),m.current.onStart&&m.current.onStart({point:X,pointInWindow:te})},[C,I]),$=Tt.default.useCallback(function(X){if(!(l?.length&&!l.find(function(H){return H.contains(X.target)}))){T();var te=TK(X.touches[0]),ne=j3(te,c.current);p.current=window.setTimeout(function(){return U(ne,te)},120)}},[U,T,l]),G=Tt.default.useCallback(function(){_(!0),document.removeEventListener("touchstart",G)},[]),K=Tt.default.useCallback(function(){S()},[]);return Tt.default.useLayoutEffect(function(){if(v){var X=a.current;return s&&(X?.addEventListener("touchstart",$,{capture:!0,passive:!1}),document.addEventListener("touchmove",K,{capture:!1,passive:!1}),document.addEventListener("touchend",K,{capture:!1,passive:!1})),function(){X?.removeEventListener("touchstart",$,{capture:!0}),document.removeEventListener("touchmove",K,{capture:!1}),document.removeEventListener("touchend",K,{capture:!1}),document.removeEventListener("touchmove",I),document.removeEventListener("touchend",C),wK(),S()}}return document.addEventListener("touchstart",G),function(){document.removeEventListener("touchstart",G),document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",N)}},[v,s,G,E,I,K,C,N,a,$]),v?{}:{onMouseDown:k}},V1e=function(e){var r=Tt.default.useRef(null);if(!e)return{};var n=function(l){r.current&&(r.current.style.width=l.width+"px",r.current.style.height=l.height+"px",r.current.style.opacity="1",r.current.style.visibility="visible")},i=function(){r.current&&(r.current.style.opacity="0",r.current.style.visibility="hidden")},o=function(l,c,p){if(r.current){var f=c[l],m=p==="y"?f.left:c[l].left,g=p==="x"?f.top:c[l].top;r.current.style.transform="translate3d("+m+"px, "+g+"px, 0px)"}},s=function(){return Tt.default.createElement("div",{ref:r,"aria-hidden":!0,style:{opacity:0,visibility:"hidden",position:"fixed",top:0,left:0,pointerEvents:"none"}},e)};return{show:n,hide:i,setPosition:o,render:s}},K1e="div",z3=Tt.default.createContext(void 0),Y1e=function(e){var r,n=e.children,i=e.allowDrag,o=i===void 0?!0:i,s=e.onSortEnd,a=e.draggedItemClassName,l=e.as,c=e.lockAxis,p=e.customHolderRef,f=e.dropTarget,m=yK(e,["children","allowDrag","onSortEnd","draggedItemClassName","as","lockAxis","customHolderRef","dropTarget"]),g=Tt.default.useRef([]),v=Tt.default.useRef([]),_=Tt.default.useRef([]),S=Tt.default.useRef(null),T=Tt.default.useRef(null),w=Tt.default.useRef(void 0),E=Tt.default.useRef(void 0),I=Tt.default.useRef({x:0,y:0}),N=V1e(f);Tt.default.useEffect(function(){var ne=p?.current||document.body;return function(){T.current&&ne.removeChild(T.current)}},[p]);var C=function(H){if(T.current&&w.current!==void 0){var re=I.current,W=v.current[w.current],q=c==="y"?W.left:H.x-re.x,se=c==="x"?W.top:H.y-re.y;T.current.style.transform="translate3d("+q+"px, "+se+"px, 0px)"}},k=Tt.default.useCallback(function(ne){if(S.current){var H=g.current[ne],re=v.current[ne],W=H.cloneNode(!0);a&&a.split(" ").forEach(function(J){return W.classList.add(J)}),W.style.width=re.width+"px",W.style.height=re.height+"px",W.style.position="fixed",W.style.margin="0",W.style.top="0",W.style.left="0";var q=H.querySelectorAll("canvas");W.querySelectorAll("canvas").forEach(function(J,ye){var Ne;(Ne=J.getContext("2d"))===null||Ne===void 0||Ne.drawImage(q[ye],0,0)});var se=p?.current||document.body;se.appendChild(W),T.current=W}},[p,a]),U=G1e({allowDrag:o,containerRef:S,knobs:_.current,onStart:function(H){var re,W=H.pointInWindow;if(S.current){v.current=g.current.map(function(ye){return ye.getBoundingClientRect()});var q=bK(W,v.current);if(q!==-1){w.current=q,k(q);var se=g.current[q];se.style.opacity="0",se.style.visibility="hidden";var J=se.getBoundingClientRect();I.current={x:W.x-J.left,y:W.y-J.top},C(W),(re=N.show)===null||re===void 0||re.call(N,J),window.navigator.vibrate&&window.navigator.vibrate(100)}}},onMove:function(H){var re,W=H.pointInWindow;C(W);var q=w.current;if(!(q===void 0||w.current===void 0)){var se=v.current[w.current],J={x:c==="y"?se.left:W.x,y:c==="x"?se.top:W.y},ye=bK(J,v.current,{fallbackToClosest:!0});if(ye!==-1){E.current=ye;for(var Ne=q<ye,ae=0;ae<g.current.length;ae+=1){var Se=g.current[ae],Re=v.current[ae];if(Ne&&ae>=q&&ae<=ye||!Ne&&ae>=ye&&ae<=q){var Pe=v.current[Ne?ae-1:ae+1];if(Pe){var Oe=Pe.left-Re.left,ct=Pe.top-Re.top;Se.style.transform="translate3d("+Oe+"px, "+ct+"px, 0px)"}}else Se.style.transform="translate3d(0,0,0)";Se.style.transitionDuration="300ms"}(re=N.setPosition)===null||re===void 0||re.call(N,E.current,v.current,c)}}},onEnd:function(){for(var H,re=0;re<g.current.length;re+=1){var W=g.current[re];W.style.transform="",W.style.transitionDuration=""}var q=w.current;if(q!==void 0){var se=g.current[q];se&&(se.style.opacity="1",se.style.visibility="");var J=E.current;J!==void 0&&q!==J&&(g.current=(0,SK.default)(g.current,q,J),s(q,J))}if(w.current=void 0,E.current=void 0,(H=N.hide)===null||H===void 0||H.call(N),T.current){var ye=p?.current||document.body;ye.removeChild(T.current),T.current=null}}}),$=Tt.default.useCallback(function(ne){g.current.push(ne)},[]),G=Tt.default.useCallback(function(ne){var H=g.current.indexOf(ne);H!==-1&&g.current.splice(H,1)},[]),K=Tt.default.useCallback(function(ne){_.current.push(ne)},[]),X=Tt.default.useCallback(function(ne){var H=_.current.indexOf(ne);H!==-1&&_.current.splice(H,1)},[]),te=Tt.default.useMemo(function(){return{registerItem:$,removeItem:G,registerKnob:K,removeKnob:X}},[$,G,K,X]);return Tt.default.createElement(l||K1e,cg(cg(cg({},o?U:{}),m),{ref:S}),Tt.default.createElement(z3.Provider,{value:te},n,(r=N.render)===null||r===void 0?void 0:r.call(N)))},CK=function(e){var r=e.children,n=Tt.default.useContext(z3);if(!n)throw new Error("SortableItem must be a child of SortableList");var i=n.registerItem,o=n.removeItem,s=Tt.default.useRef(null);return Tt.default.useEffect(function(){var a=s.current;return a&&i(a),function(){a&&o(a)}},[i,o,r]),Tt.default.cloneElement(r,{ref:s})},DK=function(e){var r=e.children,n=Tt.default.useContext(z3);if(!n)throw new Error("SortableKnob must be a child of SortableList");var i=n.registerKnob,o=n.removeKnob,s=Tt.default.useRef(null);return Tt.default.useEffect(function(){var a=s.current;return a&&i(a),function(){a&&o(a)}},[i,o,r]),Tt.default.cloneElement(r,{ref:s})},IK=Y1e;var kK=ie(ve(),1);var NK=F(function(e){let r=e.widget,n=r.state.items,i=r.input.min,o=Rt.WidgetUI;return o==null?h(fn,{type:"error",children:"Internal list failure"}):P("div",{className:"_WidgetListUI",tw:"flex-grow w-full",children:[h(aE,{req:e.widget}),h(IK,{onSortEnd:e.widget.moveItem,className:"list",draggedItemClassName:"dragged",children:h("div",{tw:"flex flex-col gap-1",children:n.map((s,a)=>h(CK,{children:P("div",{tw:"flex items-start",children:[h(DK,{children:h(X1e,{ix:a})}),h(J1e,{req:s}),h(o,{widget:s}),h("div",{tw:[i&&r.state.items.length<=i?"btn-disabled":null,"btn btn-square btn-subtle btn-sm self-start"],onClick:()=>r.removeItem(s),children:"X"})]},s.id)},s.state.id))})})]})}),X1e=(0,kK.forwardRef)((t,e)=>h("div",{ref:e,children:P(hr,{cursor:"cursor-move",children:[h("div",{tw:"btn btn-sm btn-ghost opacity-50 btn-square",children:h("span",{className:"material-symbols-outlined",children:"menu"})}),h("div",{children:t.ix})]})})),J1e=F(function(e){let r=e.req;return oE(e.req)?h("div",{tw:"btn btn-ghost btn-square btn-sm",onClick:()=>r.state.collapsed=!r.state.collapsed,children:r.state.collapsed?h("span",{className:"material-symbols-outlined",children:"keyboard_arrow_right"}):h("span",{className:"material-symbols-outlined",children:"keyboard_arrow_down"})}):null});var AK=F(function(e){let r=e.widget;if(pe().schema==null)return h("div",{children:"\u274C no schema"});let o=r.state.loras,s=o.map(a=>a.name);return P("div",{children:[h(dB,{size:"sm",style:{maxWidth:"300px"},value:s,menuWidth:300,data:r.FOLDER,onChange:a=>{let l=a.map(f=>typeof f=="number"?f.toString():f.replace(/\\/g,"/"));console.log({picks:l});let c=[];for(let f of r.allLoras){let m=f.replace(/\\/g,"/");for(let g of l)typeof g!="number"&&m.startsWith(g)&&c.push(f)}for(let f of r.selectedLoras.keys())c.includes(f)||r.selectedLoras.delete(f);for(let f of c)r.selectedLoras.has(f)||r.selectedLoras.set(f,{strength_clip:1,strength_model:1,name:f});let p=[...r.selectedLoras.values()];r.state.loras=p}}),h("div",{children:[...r.selectedLoras.entries()].map(([a,l])=>P("div",{className:"flex items-start",children:[h("div",{className:"shrink-0",children:a.replace(".safetensors","")}),h("div",{className:"flex-grow"}),h(_i,{value:l.strength_clip,step:.1,onValueChange:c=>l.strength_clip=Mr(c,2),mode:"float"}),h(_i,{value:l.strength_model,step:.1,onValueChange:c=>l.strength_model=Mr(c,2),mode:"float"}),h(gt,{size:"xs",icon:h("span",{className:"material-symbols-outlined",children:"delete"}),onClick:()=>{let c=o.filter(p=>p.name!==a);r.selectedLoras.delete(a),r.state.loras=c}})]},a))})]})});var OK=F(function(e){let r=e.widget;return h("div",{className:"_WidgetMardownUI _MD w-full",dangerouslySetInnerHTML:{__html:nr(r.markdown)}})});var RK=F(function(e){let r=e.widget;return h(r.input.Component,{widget:r,extra:Q1e})}),Q1e={ImageUI:t=>h(Md,{...t}),JsonViewUI:t=>h(is,{...t})};var PK=F(function(e){let r=e.widget,n=r.cols,i=r.rows,o=r.state.collapsed;return h(St.Fragment,{children:P("table",{cellSpacing:0,cellPadding:0,children:[h("thead",{children:P("tr",{children:[h("th",{className:"cursor-pointer hover:text-red-600",onClick:()=>r.setAll(!r.firstValue),children:"all"}),n.map((s,a)=>h("th",{className:"bg-accent text-accent-content",onClick:()=>r.setCol(s,!r.get(i[0],s).value),children:s},a))]})}),h("tbody",{children:i.map((s,a)=>P("tr",{className:"p-0 m-0",children:[h("td",{onClick:()=>r.setRow(s,!r.get(s,n[0]).value),className:"bg-base-300 text-secondary-content bg-secondary cursor-pointer",children:s}),n.map((l,c)=>{let p=r.get(s,l).value;return h("td",{className:"hover:bg-gray-400 cursor-pointer",onClick:()=>r.set(s,l,!p),tw:[p?"bg-success":"bg-base-200"],style:{border:"1px solid #726767",height:"2rem",width:"2rem"}},c)})]},a))})]})})});var $3=F(function(e){let r=e.widget,n=r instanceof Xl?"int":"float",i=r.state.val,o=r.input.step??(n==="int"?1:.1),s=typeof i=="number"&&!isNaN(i);return P("div",{className:"flex gap-1 items-center",children:[s?null:P("div",{className:"text-red-500",children:["Invalid value:",h("pre",{children:JSON.stringify(i)})]}),r.input.hideSlider?null:h(ko,{style:{width:"10rem"},value:i,min:r.input.min,max:r.input.max,step:o,onChange:a=>{let l=a.target.value,c=typeof l=="string"?n=="int"?parseInt(l,10):Mr(l,3):l;if(isNaN(c)||typeof c!="number")return console.log(`${JSON.stringify(l)} is not a number`);n=="int"&&(c=Math.round(c)),r.state.val=c}}),h(aT,{disabled:!r.state.active,min:r.input.min,max:r.input.max,step:o,style:{fontFamily:"monospace",width:i.toString().length+6+"ch"},_size:"sm",value:i,onChange:a=>{let l=a.target.value,c=typeof l=="string"?n=="int"?parseInt(l,10):Mr(l,3):l;if(isNaN(c)||typeof c!="number")return console.log(`${JSON.stringify(l)} is not a number`);n=="int"&&(c=Math.round(c)),r.state.val=c}})]})});var H3=F(function(e){let r=e.widget,n=r.state.val,i=r instanceof Yl?"int":"float",o=r.input.step??(i==="int"?1:.1);return h(_i,{mode:i,value:n,hideSlider:r.input.hideSlider,max:r.input.max,min:r.input.min,step:o,onValueChange:s=>r.state.val=s})});var LK=F(function(e){let r=e.widget,n=r.state.val;return P("div",{tw:"flex items-center join virtualBorder",children:[h("button",{type:"button",tw:["join-item btn-sm btn-ghost",r.state.mode==="randomize"&&"btn-active"],onClick:()=>{r.state.mode="randomize",r.state.active=!0},children:"\u{1F3B2} Rand"}),h("button",{type:"button",tw:["join-item btn-sm btn-ghost",r.state.mode==="fixed"&&"btn-active"],onClick:()=>{r.state.mode="fixed",r.state.active=!0},children:"\u{1F48E} Fixed"}),h(aT,{_size:"sm",style:{fontFamily:"monospace",width:n.toString().length+6+"ch"},className:"input-sm",disabled:!(r.state.mode!=="randomize"||!r.state.active),value:n,min:r.input.min,max:r.input.max,step:1,onChange:i=>{let o=i.target.value,s=typeof o=="string"?parseInt(o,10):o;if(isNaN(s)||typeof s!="number")return console.log(`${JSON.stringify(o)} is not a number`);s=Math.round(s),r.state.val=s}}),h(gt,{size:"sm",appearance:"subtle",onClick:()=>{r.state.mode="fixed",r.state.active=!0,r.state.val=Math.floor(Math.random()*1e6)},icon:h("span",{className:"material-symbols-outlined",children:"autorenew"}),children:"New"})]})});var wa=ie(ve(),1),WK=ie(BK(),1);var jK=t=>{let e=(0,wa.useRef)(null),[r,n]=(0,wa.useState)(!1),[i,o]=(0,wa.useState)(512),[s,a]=(0,wa.useState)(512),[l,c]=(0,wa.useState)(.5),[p,f]=(0,wa.useState)({x:0,y:0});(0,wa.useEffect)(()=>{let S=e.current?.getContext("2d");S&&(S.fillStyle=t.fillStyle,S.fillRect(0,0,i,s))},[i,s]);let m=(0,wa.useMemo)(()=>(0,WK.default)(()=>{let S=e.current?.toDataURL("image/png");S!=null&&t.onChange(S.slice(22))},250),[t.onChange]),g=S=>{n(!0),f({x:S.nativeEvent.offsetX,y:S.nativeEvent.offsetY})},v=()=>n(!1),_=S=>{if(!r)return;let T=e.current?.getContext("2d");T&&(T.lineWidth=5,T.lineCap="round",T.strokeStyle=t.strokeStyle,T.beginPath(),T.moveTo(p.x,p.y),T.lineTo(S.nativeEvent.offsetX,S.nativeEvent.offsetY),T.stroke(),f({x:S.nativeEvent.offsetX,y:S.nativeEvent.offsetY})),m()};return P("div",{style:t.style,className:t.className,children:[P("div",{tw:"flex gap-2 items-start",children:[h(gt,{size:"sm",onClick:()=>{let S=e.current?.getContext("2d");S&&(S.fillStyle=t.fillStyle,S.fillRect(0,0,i,s))},children:"reset"}),h(yn,{label:"Weight",children:h(Io,{tw:"input-xs",style:{fontFamily:"monospace",width:i.toString().length+7+"ch"},type:"number",value:i,onChange:S=>o(Mr(S.target.value))})}),h(yn,{label:"Height",children:h(Io,{tw:"input-xs",style:{fontFamily:"monospace",width:s.toString().length+7+"ch"},type:"number",value:s,onChange:S=>a(Mr(S.target.value))})}),h(yn,{label:"Scale",children:h(ko,{step:.1,min:.5,max:2,style:{width:"8rem"},value:l,onChange:S=>c(Mr(S.target.value))})})]}),h("div",{style:{height:`${l*s}px`},children:h("canvas",{ref:e,width:i,height:s,onMouseDown:g,onMouseMove:_,onMouseUp:v,onMouseLeave:v,style:{transformOrigin:"top left",transform:`scale(${l})`,border:"1px solid gray",display:"block"}})})]})};var lE=ie(ve(),1);var zK=F(function(e){let[r,n]=(0,lE.useState)(()=>e.current??0);(0,lE.useEffect)(()=>{e.current!=null&&n(e.current)});let i=h("div",{style:{width:"fit-content"},tw:"tabs tabs-lifted ",children:e.tabs.map((s,a)=>h("a",{tw:["tab tab-sm",a===r&&"tab-active",e.disabled&&"tab-disabled"],onClick:()=>{e.onClick?.(a),n(a)},children:s.title()},a))}),o=e.tabs[r];return P("div",{style:e.style,tw:["_TabsUI",e.className,e.grow&&"_grow","relative",e.inline&&"flex"],children:[e.bottomTabs?null:i,P("div",{className:"_tab_body bg-base-100 tab-content block",children:[o?h(gTe,{fn:o.body},r):P(St.Fragment,{children:["no tab ",r]}),e.disabled&&h("div",{tw:"inset-0 absolute pointer-events-none",style:{background:"rgba(0,0,0,0.5)"}})]}),e.bottomTabs&&i]})}),gTe=F(function(e){return e.fn()});var V3=F(function(e){let r=e.widget,n=pe(),[i,o]=f$(n,c=>{_r(()=>{console.log("DROPPED",c),r.state.active=!0,r.state.cushy={type:"CushyImage",imageID:c.id},r.state.pick="cushy"})}),s=lg(),a=[{title:()=>h(St.Fragment,{children:"Drop"}),body:()=>h("div",{className:"flex gap-2 p-1 bg-base-100 border border-dashed border-neutral self-center",children:r.state.cushy!=null?P("div",{tw:"flex items-start",children:[h(Md,{img:s.db.media_images.getOrThrow(r.state.cushy.imageID)}),r instanceof sl?h(gt,{size:"sm",onClick:()=>r.state.active=!1,children:"X"}):null]}):h("span",{children:"drop image here"})})},{title:()=>h(St.Fragment,{children:"Pick"}),body:()=>P(St.Fragment,{children:[r.state.comfy&&h("img",{style:{width:"7rem",height:"7rem"},src:`${n.getServerHostHTTP()}/view?filename=${encodeURIComponent(r.state.comfy.imageName)}&type=input&subfolder=`,alt:""}),h(U3,{enumName:"Enum_LoadImage_image",value:n.fixEnumValue(r.state.comfy?.imageName,"Enum_LoadImage_image",r.isOptional),isOptional:r.state.pick!=="comfy"||!r.state.active,onChange:c=>{c==null&&(r instanceof sl||r instanceof Jl)&&r.state.active&&r.state.pick==="comfy"&&(r.state.active=!1),c!=null&&(r.state.comfy.imageName=c,r.state.pick="comfy")}})]})},{title:()=>h(St.Fragment,{children:"Scribble"}),body:()=>h(jK,{tw:"p-2",fillStyle:"black",strokeStyle:"white",onChange:c=>{r.state.paint={type:"PaintImage",base64:c},r.state.pick!=="paint"&&(r.state.pick="paint")}})}],l=!r.state.active||r.state.pick==="cushy"?0:r.state.pick==="comfy"?1:r.state.pick==="paint"?2:(r.state.pick==="asset",3);return h("div",{children:h("div",{style:i,ref:o,className:"flexflex-row items-center",children:h(zK,{current:l,tabs:a,disabled:!r.state.active,onClick:c=>{r.state.active=!0,c===0&&(r.state.pick="cushy"),c===1&&(r.state.pick="comfy"),c===2&&(r.state.pick="paint"),c===3&&(r.state.pick="asset")}})})})});var $K=F(function(e){let r=e.widget,n=r.state.val;return h(Vl,{size:"sm",getLabelText:i=>{let o=typeof i.type=="string"?i.type:"<no label>";return i.label??i.id??o},options:r.choices,value:()=>n,onChange:i=>{if(i==null){if(!r.isOptional)return;r.state.active=!1;return}let o=r.choices.find(s=>s.id===i.id);if(o==null){console.log(`\u274C WidgetSelectOneUI: could not find choice for ${JSON.stringify(i)}`);return}r.state.val=o}})});var HK=ie(ve(),1);var qK=F(function(e){return h(Y3,{size:e.widget.state,bounds:e.widget.input})}),Y3=F(function(e){let r=(0,HK.useMemo)(()=>new K3(e.size),[]),n=o=>h("button",{type:"button",tw:["btn btn-sm join-item btn-ghost",r.desiredAspectRatio===o&&"btn-active"],onClick:()=>r.setAspectRatio(o),children:o}),i=o=>h("button",{type:"button",tw:["btn btn-sm join-item",r.desiredModelType===o&&"btn-active"],onClick:()=>r.setModelType(o),children:o});return P("div",{className:"flex items-center flex-wrap space-x-2",children:[P("div",{className:"flex flex-col gap-1",children:[P("div",{tw:"flex",children:[h("div",{tw:"w-12",children:"Width"}),h(_i,{min:e.bounds?.min??128,max:e.bounds?.max??4096,step:e.bounds?.step??256,mode:"int",tw:"join-item",value:r.width,onValueChange:o=>r.setWidth(o)})]}),P("div",{tw:"flex",children:[h("div",{tw:"w-12",children:"Height"}),h(_i,{tw:"join-item",min:e.bounds?.min??128,max:e.bounds?.max??4096,step:e.bounds?.step??256,mode:"int",value:r.height,onValueChange:o=>r.setHeight(o)})]})]}),P("div",{tw:"flex flex-col gap-1",children:[P("div",{tw:"flex items-centered gap-1",children:[P(Os,{children:[i("1.5"),i("xl")]}),P("div",{tw:"flex items-center",children:["filp:",h(vi,{checked:r.flip,onChange:o=>r.flip=o.target.checked})]})]}),P(Os,{children:[n("1:1"),n("16:9"),n("4:3"),n("3:2"),h("button",{type:"button",tw:["btn btn-sm join-item",r.desiredAspectRatio==="custom"&&"btn-active"],onClick:()=>r.setAspectRatio("custom"),children:"?"})]})]}),h("div",{tw:"bg-primary",style:{width:"2rem",height:`${r.height/r.width*2}rem`}})]})}),K3=class{constructor(e){this.req=e;this.idealSizeforModelType=e=>e==="xl"?{width:1024,height:1024}:e==="2.0"?{width:768,height:768}:e==="2.1"?{width:768,height:768}:e==="1.5"?{width:512,height:512}:e==="1.4"?{width:512,height:512}:{width:this.width,height:this.height};this._flip=!1;this.desiredModelType="1.5";this.desiredAspectRatio="custom";Ce(this),this.desiredAspectRatio=(()=>{let r=Mr(this.realAspectRatio,2);return r===Mr(1/1,2)?"1:1":r===Mr(16/9,2)?"16:9":r===Mr(4/3,2)?"4:3":r===Mr(3/2,2)?"3:2":"custom"})()}get flip(){return this._flip}set flip(e){if(this._flip===e)return;this._flip=e;let n=this.width,i=this.height;this.width=i,this.height=n}get width(){return this.req.width}get height(){return this.req.height}set width(e){this.req.width=e}set height(e){this.req.height=e}setWidth(e){this.width=e,this.desiredAspectRatio!=="custom"&&this.updateHeightBasedOnAspectRatio()}setHeight(e){this.height=e,this.desiredAspectRatio!=="custom"&&this.updateWidthBasedOnAspectRatio()}get realAspectRatio(){return this.width/this.height}setModelType(e){this.desiredModelType=e;let r=this.idealSizeforModelType(e),n=Math.sqrt(this.width**2+this.height**2),i=Math.sqrt(r.width**2+r.height**2),o=i/n;console.log({modelType:e,idealTarget:r,avg:n,avg2:i,factor:o}),this.width=Math.round(this.width*o),this.height=Math.round(this.height*o),console.log(`final is w=${this.width} x h=${this.height}`),console.log(`fixed avg is ${Math.sqrt(this.width**2+this.height**2)}`)}setAspectRatio(e){this.desiredAspectRatio=e,e!=="custom"&&this.updateWidthBasedOnAspectRatio(),this.setModelType(this.desiredModelType)}updateHeightBasedOnAspectRatio(){let[e,r]=this.desiredAspectRatio.split(":").map(Number);this.height=Math.round(this.width*(r/e))}updateWidthBasedOnAspectRatio(){let[e,r]=this.desiredAspectRatio.split(":").map(Number);this.width=Math.round(this.height*(e/r))}};var X3=F(function(e){let r=e.widget,n=r.state.val;return r.input.textarea?h("textarea",{tw:"textarea textarea-bordered textarea-sm w-full",placeholder:r.input.placeHolder,rows:2,value:n,onChange:i=>{let o=i.target.value;r.state.val=o}}):h("input",{tw:"input input-bordered input-sm w-full",placeholder:r.input.placeHolder,value:n,onChange:i=>{let o=i.target.value;r.state.val=o}})});var Uf=ie(ve(),1);var Fct=ie(yP());var co=ie(ve()),tL=ie(J3()),mY=ie(XK()),hY=ie(Q3());var Z3={};wu(Z3,{appendChild:()=>HTe,appendChildToContainer:()=>qTe,appendInitialChild:()=>STe,cancelTimeout:()=>UTe,clearContainer:()=>rwe,commitMount:()=>XTe,commitTextUpdate:()=>YTe,commitUpdate:()=>JTe,createInstance:()=>ETe,createTextInstance:()=>CTe,detachDeletedInstance:()=>nwe,finalizeInitialChildren:()=>DTe,getChildHostContext:()=>MTe,getCurrentEventPriority:()=>iwe,getPublicInstance:()=>ITe,getRootHostContext:()=>LTe,hideInstance:()=>QTe,hideTextInstance:()=>ZTe,idlePriority:()=>pg.unstable_IdlePriority,insertBefore:()=>oY,insertInContainerBefore:()=>GTe,isPrimaryRenderer:()=>jTe,noTimeout:()=>BTe,now:()=>pg.unstable_now,prepareForCommit:()=>kTe,preparePortalMount:()=>NTe,prepareUpdate:()=>ATe,removeChild:()=>VTe,removeChildFromContainer:()=>KTe,resetAfterCommit:()=>OTe,resetTextContent:()=>RTe,run:()=>pg.unstable_runWithPriority,scheduleTimeout:()=>FTe,shouldDeprioritizeSubtree:()=>PTe,shouldSetTextContent:()=>WTe,supportsMutation:()=>$Te,unhideInstance:()=>ewe,unhideTextInstance:()=>twe,warnsIfNotActing:()=>zTe});var dE=ie(J3());var rY=ie(Ht()),ZK={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0},eY=!1,tY=!1,cE=".react-konva-event",_Te=!1;var bTe=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,xTe=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,TTe={};function dg(t,e,r=TTe){if(!eY&&"zIndex"in e&&(console.warn(xTe),eY=!0),!tY&&e.draggable){var n=e.x!==void 0||e.y!==void 0,i=e.onDragEnd||e.onDragMove;n&&!i&&(console.warn(bTe),tY=!0)}for(var o in r)if(!ZK[o]){var s=o.slice(0,2)==="on",a=r[o]!==e[o];if(s&&a){var l=o.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t.off(l,r[o])}var c=!e.hasOwnProperty(o);c&&t.setAttr(o,void 0)}var p=_Te||e._useStrictMode,f={},m=!1;let g={};for(var o in e)if(!ZK[o]){var s=o.slice(0,2)==="on",v=r[o]!==e[o];if(s&&v){var l=o.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e[o]&&(g[l]=e[o])}!s&&(e[o]!==r[o]||p&&e[o]!==t.getAttr(o))&&(m=!0,f[o]=e[o])}m&&(t.setAttrs(f),fc(t));for(var l in g)t.on(l+cE,g[l])}function fc(t){if(!rY.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}var pg=ie(cx()),nY=ie(Q3()),iY={},wTe={};dE.default.Node.prototype._applyProps=dg;function STe(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),fc(t)}function ETe(t,e,r){let n=dE.default[t];n||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),n=dE.default.Group);let i={},o={};for(var s in e){var a=s.slice(0,2)==="on";a?o[s]=e[s]:i[s]=e[s]}let l=new n(i);return dg(l,o),l}function CTe(t,e,r){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function DTe(t,e,r){return!1}function ITe(t){return t}function kTe(){return null}function NTe(){return null}function ATe(t,e,r,n){return wTe}function OTe(){}function RTe(t){}function PTe(t,e){return!1}function LTe(){return iY}function MTe(){return iY}var FTe=setTimeout,UTe=clearTimeout,BTe=-1;function WTe(t,e){return!1}var jTe=!1,zTe=!0,$Te=!0;function HTe(t,e){e.parent===t?e.moveToTop():t.add(e),fc(t)}function qTe(t,e){e.parent===t?e.moveToTop():t.add(e),fc(t)}function oY(t,e,r){e._remove(),t.add(e),e.setZIndex(r.getZIndex()),fc(t)}function GTe(t,e,r){oY(t,e,r)}function VTe(t,e){e.destroy(),e.off(cE),fc(t)}function KTe(t,e){e.destroy(),e.off(cE),fc(t)}function YTe(t,e,r){console.error(`Text components are not yet supported in ReactKonva. You text is: "${r}"`)}function XTe(t,e,r){}function JTe(t,e,r,n,i){dg(t,i,n)}function QTe(t){t.hide(),fc(t)}function ZTe(t){}function ewe(t,e){(e.visible==null||e.visible)&&t.show()}function twe(t,e){}function rwe(t){}function nwe(){}var iwe=()=>nY.DefaultEventPriority;var Cn=ie(ve(),1),owe=Object.defineProperty,swe=Object.defineProperties,awe=Object.getOwnPropertyDescriptors,sY=Object.getOwnPropertySymbols,lwe=Object.prototype.hasOwnProperty,uwe=Object.prototype.propertyIsEnumerable,aY=(t,e,r)=>e in t?owe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lY=(t,e)=>{for(var r in e||(e={}))lwe.call(e,r)&&aY(t,r,e[r]);if(sY)for(var r of sY(e))uwe.call(e,r)&&aY(t,r,e[r]);return t},cwe=(t,e)=>swe(t,awe(e));function dY(t,e,r){if(!t)return;if(r(t)===!0)return t;let n=e?t.return:t.child;for(;n;){let i=dY(n,e,r);if(i)return i;n=e?null:n.sibling}}function pY(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}var eL=pY(Cn.createContext(null)),H0=class extends Cn.Component{render(){return Cn.createElement(eL.Provider,{value:this._reactInternals},this.props.children)}},{ReactCurrentOwner:uY,ReactCurrentDispatcher:cY}=Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function dwe(){let t=Cn.useContext(eL);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");let e=Cn.useId();return Cn.useMemo(()=>{for(let n of[uY?.current,t,t?.alternate]){if(!n)continue;let i=dY(n,!1,o=>{let s=o.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[t,e])}function pwe(){var t,e;let r=dwe(),[n]=Cn.useState(()=>new Map);n.clear();let i=r;for(;i;){let o=(t=i.type)==null?void 0:t._context;o&&o!==eL&&!n.has(o)&&n.set(o,(e=cY?.current)==null?void 0:e.readContext(pY(o))),i=i.return}return n}function fY(){let t=pwe();return Cn.useMemo(()=>Array.from(t.keys()).reduce((e,r)=>n=>Cn.createElement(e,null,Cn.createElement(r.Provider,cwe(lY({},n),{value:t.get(r)}))),e=>Cn.createElement(H0,lY({},e))),[t])}function fwe(t){let e=co.default.useRef({});return co.default.useLayoutEffect(()=>{e.current=t}),co.default.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}var mwe=t=>{let e=co.default.useRef(),r=co.default.useRef(),n=co.default.useRef(),i=fwe(t),o=fY(),s=a=>{let{forwardedRef:l}=t;l&&(typeof l=="function"?l(a):l.current=a)};return co.default.useLayoutEffect(()=>(r.current=new tL.default.Stage({width:t.width,height:t.height,container:e.current}),s(r.current),n.current=q0.createContainer(r.current,hY.LegacyRoot,!1,null),q0.updateContainer(co.default.createElement(o,{},t.children),n.current),()=>{tL.default.isBrowser&&(s(null),q0.updateContainer(null,n.current,null),r.current.destroy())}),[]),co.default.useLayoutEffect(()=>{s(r.current),dg(r.current,t,i),q0.updateContainer(co.default.createElement(o,{},t.children),n.current,null)}),co.default.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},gY="Layer";var yY="Rect";var vY="Transformer",q0=(0,mY.default)(Z3);q0.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:co.default.version,rendererPackageName:"react-konva"});var _Y=co.default.forwardRef((t,e)=>co.default.createElement(H0,{},co.default.createElement(mwe,{...t,forwardedRef:e})));var bY=F(function(e){let r=e.req,n=r.state.items;return h(_Y,{width:r.state.width,height:r.state.height,onContextMenu:i=>{i.evt.preventDefault(),console.log("context menu");let o=i.target.toDataURL();console.log(o)},children:h(gY,{children:n.map(i=>h(hwe,{onChange:o=>Object.assign(i,o),isSelected:i.isSelected,shape:i},`rect-${i.item.id}`))})})}),hwe=F(function(e){let r=Uf.useRef(),n=Uf.useRef();return Uf.useEffect(()=>{e.isSelected&&(n.current.nodes([r.current]),n.current.getLayer().batchDraw())},[e.isSelected]),P(Uf.Fragment,{children:[h(yY,{onClick:()=>{e.shape.isSelected=!e.shape.isSelected},ref:r,fill:`${e.shape.fill}ee`,x:e.shape.x,y:e.shape.y,width:e.shape.width,height:e.shape.height,scaleX:e.shape.scaleX,scaleY:e.shape.scaleY,rotation:e.shape.rotation,draggable:!0,onDragEnd:i=>{e.onChange({x:i.target.x(),y:i.target.y()})},onTransformEnd:i=>{let o=r.current,s=o.scaleX(),a=o.scaleY();e.onChange({x:o.x(),y:o.y(),scaleX:s,scaleY:a,rotation:o.rotation()})}}),e.isSelected&&h(vY,{ref:n,flipEnabled:!1,boundBoxFunc:(i,o)=>Math.abs(o.width)<5||Math.abs(o.height)<5?i:o})]})});var xY=F(function(e){let r=e.req,n=r.state.items,i=n.length,o=i<10?1:i<100?2:3,s=Rt.WidgetUI,a=r.input.min;return h("div",{tw:"flex flex-col gap-1",children:n.map((l,c)=>{let p=l.item;return P("div",{tw:"flex items-start",children:[h("div",{style:{width:`${o}rem`},children:c}),h("input",{value:l.fill,onChange:f=>l.fill=f.target.value,type:"color",tw:"w-7"}),h(gt,{style:{width:`${o}rem`},appearance:"subtle",size:"sm",onClick:()=>p.state.collapsed=!p.state.collapsed,children:p.state.collapsed?"\u25B8":"\u25BF"}),h(s,{widget:p}),h(gt,{appearance:"subtle",disabled:a?r.state.items.length<=a:void 0,tw:"self-start",onClick:()=>r.removeItem(l),size:"sm",children:"X"})]},p.id)})})});var TY=F(function(e){let n=e.req.state,i=bA(()=>({ix:0}));return h("div",{tw:"overflow-auto virtualBorder",children:P("div",{tw:"flex flex-col gap-1",style:{width:n.width*20},children:[h("div",{style:{minHeight:"1rem",width:n.width*20},tw:"bg-base-300 timeline-item w-full relative"}),n.items.map((o,s)=>h("div",{style:{minHeight:"2rem",width:n.width*20},tw:"bg-base-300 timeline-item w-full relative",children:h("div",{tw:[i.ix==s?"bg-primary text-primary-content":"bg-accent text-accent-content","cursor-pointer"],onClick:()=>i.ix=s,style:{height:"100%",position:"absolute",width:o.width*20,left:o.x*20},children:JSON.stringify({duration:o.width,startAt:o.x})})},o.item.id))]})})});var wY=F(function(e){let r=e.widget;return P("div",{className:"_WidgetListExtUI",tw:"flex-grow w-full",children:[h(aE,{req:r}),h(Y3,{size:r.state}),e.widget.input.mode==="timeline"?h(TY,{req:r}):h(bY,{req:r}),h(xY,{req:r})]})});var ug=F(function(e){let r=e.widget;return r==null?h(St.Fragment,{children:"NULL"}):r instanceof $d?h(LK,{widget:r}):r instanceof Yl?h(H3,{widget:r}):r instanceof Xl?h($3,{widget:r}):r instanceof ac?h(H3,{widget:r}):r instanceof uc?h($3,{widget:r}):r instanceof oc?h(X3,{widget:r}):r instanceof sc?h(X3,{widget:r}):r instanceof Jl?h(V3,{widget:r}):r instanceof sl?h(V3,{widget:r}):r instanceof Qd?h(NK,{widget:r}):r instanceof Ql?h(wY,{widget:r}):r instanceof Zd?h(B3,{widget:r}):r instanceof ep?h(B3,{widget:r}):r instanceof qd?h(qK,{widget:r}):r instanceof np?h(F3,{widget:r}):r instanceof Zl?h(F3,{widget:r}):r instanceof Gd?h(PK,{widget:r}):r instanceof lc?h(dK,{widget:r}):r instanceof Hd?h(pK,{widget:r}):r instanceof zd?h(M3,{widget:r}):r instanceof Kl?h(M3,{widget:r}):r instanceof Vd?h(AK,{widget:r}):r instanceof jd?h(gK,{widget:r}):r instanceof Kd?h($K,{widget:r}):r instanceof tp?h(fK,{widget:r}):r instanceof rp?h(hK,{widget:r}):r instanceof Bd?h(OK,{widget:r}):r instanceof Wd?h(RK,{widget:r}):r instanceof Xd?h(St.Fragment,{children:"TODO"}):r instanceof Jd?h(St.Fragment,{children:"TODO"}):r instanceof Yd?h(St.Fragment,{children:"TODO"}):(gr(r),console.log("\u{1F534}",r.type,r),P(fn,{type:"error",showIcon:!0,children:[h("div",{children:r.type}),h("div",{children:r.constructor.name}),h("div",{children:typeof r}),"not supported"]}))});Rt.WidgetUI=ug;var rL=F(function(e){let r=e.res;return r==null?h("div",{children:"not available"}):r.success?e.whenValid(r.value):h("div",{children:P(fn,{type:"error",children:[h("pre",{tw:"bg-red-900",children:JSON.stringify(r.message,null,4)}),h("pre",{tw:"bg-red-900",children:JSON.stringify(r.error,null,4)})]})})});var SY=ie(ve(),1);var pE=F(function(e){let r=(0,SY.useRef)(null);return h(St.Fragment,{children:h("div",{style:e.style,className:"relative overflow-auto "+e.className,ref:r,children:h("div",{className:"absolute inset-0 col",children:e.children})})})});var CY=F(function(e){let r=pe(),n=typeof e.draftID=="string"?r.db.drafts.get(e.draftID):e.draftID;return h(nL,{draft:n})}),nL=F(function(e){let r=pe(),n=e.draft;if((0,EY.useEffect)(()=>n?.AWAKE(),[n?.id]),n==null)return h(fE,{children:"Draft not found"});let i=n.app;if(i==null)return h(fE,{children:"File not found"});let o=i.executable;if(o==null)return h(_we,{app:i});let s=n.gui;if(!s.success)return P(fE,{children:[h("b",{children:"App failed to load"}),P("div",{children:["\u274C ",s.message]}),h("div",{children:Vq(s.error)})]});let{containerClassName:a,containerStyle:l}=o.def??{},c={margin:"0 auto"};return h(P3.Provider,{value:n,children:P("div",{style:yi(l??c),tw:["flex flex-col flex-grow h-full",a],onKeyUp:p=>{p.key==="Enter"&&(p.metaKey||p.ctrlKey)&&(p.preventDefault(),p.stopPropagation(),n.start())},children:[h(bwe,{draft:n}),r.isConfigValueEq("draft.mockup-mobile",!0)?h(qq,{children:h(rL,{res:n.gui,whenValid:p=>h(ug,{widget:p})})}):h(pE,{className:"flex-grow",children:h("div",{tw:"pb-80 pl-2",children:h(rL,{res:n.gui,whenValid:p=>h(ug,{widget:p})})})}),P(Os,{tw:"opacity-50",children:[h(gt,{onClick:()=>r.layout.FOCUS_OR_CREATE("DraftJsonResult",{draftID:n.id}),size:"sm",tw:"tab btn-ghost join-item",children:"Form result"}),h(gt,{onClick:()=>r.layout.FOCUS_OR_CREATE("DraftJsonSerial",{draftID:n.id}),size:"sm",tw:"tab btn-ghost join-item",children:"Form state"}),h(gt,{onClick:()=>r.layout.FOCUS_OR_CREATE("Script",{scriptID:n.app.script.id}),size:"sm",tw:"tab btn-ghost join-item",children:"App code"})]})]})},n.id)}),gwe=F(function(e){let r=e.draft,n=r.shouldAutoStart?"pause":"play_arrow";return P("div",{tw:"flex join virtualBorder",className:e.className,children:[h("div",{tw:["btn btn-square btn-sm self-start join-item btn-neutral",r.shouldAutoStart?"btn-active":null],onClick:()=>r.setAutostart(!r.shouldAutoStart),children:r.shouldAutoStart?h(Lu,{}):h("span",{className:"material-symbols-outlined",children:"repeat"})}),h(gt,{tw:"btn-sm join-item btn-primary",className:"self-start",icon:h("span",{className:"material-symbols-outlined",children:n}),onClick:()=>{r.setAutostart(!1),r.start()},children:"Run"})]})}),ywe=F(function(e){let r=e.draft.file,n=pe();return P(Yn,{tw:[e.className,"btn-square btn-sm"],startIcon:h("span",{className:"material-symbols-outlined",children:"edit"}),title:"",appearance:"subtle",size:DY,children:[h(Dt,{icon:h("span",{className:"material-symbols-outlined"}),onClick:()=>Gq(ph(),r?.absPath??""),children:"Edit App Definition"}),h(Dt,{onClick:()=>Xw(r.absPath),icon:h("span",{className:"material-symbols-outlined"}),children:"Show Item In Folder"}),r?.liteGraphJSON&&h(Dt,{onClick:()=>n.layout.FOCUS_OR_CREATE("ComfyUI",{litegraphJson:r.liteGraphJSON}),children:"Open in ComfyUI"})]})}),vwe=F(function(e){let r=pe(),n=r.preferedFormLayout;return P(Yn,{tw:[e.className],size:DY,appearance:"subtle",startIcon:h("span",{className:"material-symbols-outlined",children:"dynamic_form"}),title:"",children:[P(Dt,{icon:h("span",{className:"material-symbols-outlined",children:"photo_size_select_large"}),onClick:()=>r.preferedFormLayout="auto",active:n=="auto",children:["Auto Layout",h("div",{tw:"badge badge-neutral",children:"recommended"})]}),h(Dt,{icon:h("span",{className:"material-symbols-outlined",children:"photo_size_select_small"}),onClick:()=>r.preferedFormLayout="dense",active:n=="dense",children:"Dense Layout"}),h(Dt,{icon:h("span",{className:"material-symbols-outlined",children:"photo_size_select_actual"}),onClick:()=>r.preferedFormLayout="mobile",active:n=="mobile",children:"Mobile Layout"}),h("hr",{}),h(Dt,{icon:h("span",{className:"material-symbols-outlined",children:"mobile_screen_share"}),onClick:()=>r.setConfigValue("draft.mockup-mobile",!r.getConfigValue("draft.mockup-mobile")),active:r.isConfigValueEq("draft.mockup-mobile",!0),children:"Mobile"})]})}),DY="sm";var fE=F(function(e){return h("div",{tw:"h-full",children:h(fn,{type:"error",children:e.children})})}),_we=F(function(e){let r=e.app;return h(fE,{children:h("h3",{tw:"text-red-600",children:"invalid action"})})}),bwe=F(function(e){let{draft:r}=e,n=r.appRef.item,i=pe();return h("div",{tw:"flex p-1 bg-base-300 border-b border-b-base-300",children:P("div",{tw:"flex gap-0.5 flex-grow relative text-base-content py-1",children:[h(ng,{app:n,size:"4rem"}),P("div",{tw:"ml-1 flex-grow",children:[P("div",{tw:["flex items-center","overflow-hidden overflow-ellipsis whitespace-nowrap"],style:{height:"2rem",fontSize:"1.4rem"},children:[h(tg,{app:n}),h("span",{children:n.name}),P("div",{tw:["absolute right-0"],children:[h("button",{disabled:n.isPublishing,tw:"btn btn-ghost btn-square btn-sm",onClick:async()=>{await n.publish()},children:n.isPublishing?h(Lu,{}):h("span",{className:"material-symbols-outlined",children:"publish"})}),h(ywe,{draft:r}),h(vwe,{}),h("div",{tw:"btn btn-ghost btn-square btn-sm",onClick:()=>{i.layout.FOCUS_OR_CREATE("Draft",{draftID:r.id},"LEFT_PANE_TABSET")},children:h("span",{className:"material-symbols-outlined",children:"open_in_new"})}),h("div",{tw:"btn btn-ghost btn-square btn-sm",onClick:()=>{let o=r.clone();i.layout.FOCUS_OR_CREATE("Draft",{draftID:o.id},"LEFT_PANE_TABSET")},children:h("span",{className:"material-symbols-outlined",children:"content_copy"})})]})]}),P("div",{style:{height:"2rem"},className:"flex items-center gap-2 justify-between text-sm",children:[h("input",{tw:"input input-bordered input-sm flex-grow",onChange:o=>r.update({title:o.target.value}),value:r.data.title??"no title"}),h(gwe,{tw:"flex-shrink-0",draft:r})]})]})]})})});var IY=F(function(e){let r=pe(),n=r.currentDraft;return n==null?P($q,{tw:"m-2",onClick:()=>r.toggleFullLibrary(),icon:h("span",{className:"material-symbols-outlined",children:"play_circle"}),label:"Open Card Picker",children:["Open the App Library",h(Hq,{combo:"meta+1"})]}):n.file==null?P(fn,{type:"error",showIcon:!0,children:['app "',n.data.appID,'" not found']}):h(nL,{draft:n})});var kY=F(function(e){let r=pe(),n=typeof e.draftID=="string"?r.db.drafts.get(e.draftID):e.draftID;return n==null?P(St.Fragment,{children:['\u{1F534} draft with id "',e.draftID,'" not found']}):h(is,{value:n.gui.value?.result})});var NY=F(function(e){let r=pe(),n=typeof e.draftID=="string"?r.db.drafts.get(e.draftID):e.draftID;return n==null?null:h("div",{children:h(is,{value:n.gui.value?.serial})})});var OY=ie(ve(),1);var iL=F(function(e){let r=e.app,n=r.file,i=pe(),o=(()=>{let s="px-1 py-0.5 overflow-hidden text-ellipsis block whitespace-nowrap self-stretch",a=i.library.imageSize;if(n.absPath.endsWith(".ts"))return h("span",{tw:[s,"bg-primary text-primary-content"],style:{maxWidth:a},children:"Cushy Action"});if(n.absPath.endsWith(".json"))return h("span",{tw:[s,"bg-secondary text-secondary-content"],style:{maxWidth:a},children:"ComfyUI Workflow JSON"});if(n.absPath.endsWith(".png"))return h("span",{tw:[s,"bg-accent text-accent-content"],style:{maxWidth:a},children:"ComfyUI Workflow Image"})})();return P("div",{style:{width:i.library.imageSize},tw:["flex flex-col","p-0.5 bg-base-300 text-base-content shadow-xl border border-neutral border-opacity-25","card STYLE_A",e.active?"active":"not-active","cursor-pointer"],children:[P("div",{tw:"flex items-start flex-grow",style:{fontSize:"1rem"},children:[i.library.showFavorites?h(tg,{app:r,size:"1.5rem"}):null,h("div",{style:{width:i.library.imageSize,height:"3rem"},tw:"overflow-hidden overflow-ellipsis pt-1 font-bold",children:r.name})]}),P("div",{tw:"flex",children:[h(ng,{app:r,size:i.library.imageSize}),i.library.showDescription?h("div",{tw:"flex-grow flex flex-col ml-1 w-44"}):null]}),h("div",{tw:"italic text-xs whitespace-nowrap overflow-ellipsis overflow-hidden text-opacity-50",children:n.relPath}),o]})});xr();var oL=[".ts",".tsx",".json",".png",".webp"],mE=t=>oL.some(e=>t.endsWith(e));var AY=(t,e)=>{let r=[];return n(e),r;function n(i){let o=ff(i);for(let a of o){if(a==="_actionTags.ts"||a==="_actionTags.js"){let v=function(_){try{_.forEach(S=>{S.key=`${m||""}/${S.key}`,g.st.actionTags.push(S)}),console.log(`[\u{1F3F7}\uFE0F] Loaded action tags for ${i}`)}catch{console.log(`[\u{1F534}] Failed to load action tags for ${i}/_actionTags.ts
Got: ${_}`)}};var s=v;let m=i.split("/").at(-1),g=t;try{new Function("actionTags",Pn(ur(yr(i,a))).toString())(v)}catch{console.log(`[\u{1F534}] Failed to load action tags for ${i}/_actionTags.ts`)}}if(kS(a))continue;let l=ur(yr(i,a));if(mf(l).isDirectory()){n(l);continue}let p=$r(ao.relative(t.st.rootPath,l));if(!mE(p))continue;let f=t.getFile(p);r.push(f)}}};var RY=F(function(e){let r=pe(),n=r.library;return(0,OY.useEffect)(()=>{r.fetcAllPublishedApps()},[]),P("div",{tw:"relative h-full flex-grow flex flex-col",children:[P("div",{tw:"bg-base-200 p-4",children:[h("div",{tw:"flex gap-2",children:h("div",{tw:"mr-2 text-2xl",children:"Library"})}),P("div",{tw:"flex gap-1 items-center",children:[P(Os,{children:[h(cB,{children:h("span",{className:"material-symbols-outlined",children:"search"})}),h("input",{tw:"join-item input input-sm",type:"string",value:n.query,onChange:i=>{let o=i.target.value;n.query=o},onKeyDown:i=>{if(i.key==="Enter"){let o=n.appsFiltered[n.selectionCursor];if(o==null)return;o.openLastDraftAsCurrent(),r.closeFullLibrary()}else i.key==="ArrowDown"?n.selectionCursor++:i.key==="ArrowUp"&&n.selectionCursor--},autoFocus:!0,placeholder:"search"})]}),h("div",{tw:"btn-sm btn btn-primary",onClick:async()=>{let i=AY(r.library,r.libraryFolderPathAbs);console.log("[\u{1F459}] allFiles:",i.length);for(let o of i)await o.load()},children:"Rebuild local store"}),h(yn,{label:"Descriptions",children:h(vi,{onChange:i=>r.library.showDescription=i.target.checked,checked:r.library.showDescription})}),h(yn,{label:"Drafts",children:h(vi,{onChange:i=>r.library.showDrafts=i.target.checked,checked:r.library.showDrafts})}),h(yn,{label:"Favorites",children:h(vi,{onChange:i=>r.library.showFavorites=i.target.checked,checked:r.library.showFavorites})}),h(yn,{label:"size",children:h(ko,{min:3,max:20,style:{width:"5rem"},onChange:i=>r.library.imageSize=`${i.target.value}rem`,value:parseInt(r.library.imageSize.slice(0,-3),10)})})]})]}),h("div",{tw:"flex flex-grow p-4",children:P(pE,{tw:"flex-grow",children:[h("div",{tw:"text-3xl text-accent font-bold",children:"Installed Apps"}),h("div",{children:"--"}),h("div",{tw:"text-3xl text-accent font-bold",children:"App marketplace"}),h("div",{tw:"flex flex-wrap  gap-2",children:r._allPublishedApps?.data?.map(i=>P("div",{tw:"w-96 h-80 virtualBorder",children:[h("div",{tw:"font-bold",children:i.name}),h("img",{style:{width:"5rem",height:"5rem"},src:i.illustration_url??""}),P(hr,{disableHover:!0,children:[h("div",{tw:"font-bold",children:i.description}),h("pre",{tw:"bg-base-300 text-xs overflow-auto",children:JSON.stringify(i,null,3)})]})]},i.id))}),h("div",{tw:"divider"}),h("div",{tw:"text-3xl text-accent font-bold",children:"Built-in Apps"}),h("div",{tw:"flex flex-wrap  gap-2",children:r.library.appsFilteredBuiltIn.map((i,o)=>h("div",{children:h(iL,{active:r.library.selectionCursor===o,app:i})},i.id))}),h("div",{tw:"divider"}),h("div",{tw:"text-3xl text-accent font-bold",children:"Local Apps"}),h("div",{tw:"flex flex-wrap  gap-2",children:r.library.appsFilteredLocal.map((i,o)=>h("div",{children:h(iL,{active:r.library.selectionCursor===o,app:i})},i.id))})]})})]})});var PY=F(function(e){let r=pe();return P("div",{className:"flex flex-col bg-base-100 h-full",style:{background:r.configFile.value.galleryBgColor},children:[h(xwe,{}),h("div",{className:"flex flex-wrap overflow-auto",children:r.imageToDisplay.map(n=>h(ui,{output:n,size:r.gallerySize,children:h(Md,{img:n})},n.id))})]})}),eft=F(function(e){let r=pe(),n=r.latentPreview;if(n!=null)return h("img",{style:{objectFit:"contain",opacity:1,padding:"0.2rem",borderRadius:".5rem",width:r.gallerySizeStr,height:r.gallerySizeStr},src:n.url})}),xwe=F(function(e){let r=pe();return P("div",{tw:"flex overflow-auto gap-2 px-2 bg-base-200 w-full flex-shrink-0",children:[e.children,h(yn,{label:"Size",children:h(ko,{style:{width:"5rem"},min:32,max:200,onChange:n=>r.gallerySize=Mr(n.target.value),value:r.gallerySize})}),h(yn,{label:"background",children:P("div",{tw:"join",children:[h(gt,{tw:"btn-neutral join-item ",icon:h("span",{className:"material-symbols-outlined",children:"format_color_reset"}),size:"xs",onClick:()=>r.configFile.update({galleryBgColor:void 0})}),h(Io,{tw:"join-item input-xs",type:"color",value:r.configFile.value.galleryBgColor||"#000000",onChange:n=>r.configFile.update({galleryBgColor:n.target.value})})]})}),h(yn,{label:"full-screen",children:h(vi,{checked:r.showPreviewInFullScreen??!0,onChange:n=>r.showPreviewInFullScreen=n.target.checked})}),h(yn,{label:"in-panel",children:h(vi,{checked:r.showPreviewInPanel,onChange:n=>r.showPreviewInPanel=n.target.checked})}),h(yn,{label:"hover opacity",children:h(ko,{style:{width:"5rem"},step:.01,min:0,max:1,onChange:n=>r.galleryHoverOpacity=Mr(n.target.value),value:r.galleryHoverOpacity})})]})});var MY=ie(ve(),1),FY=ie(Pl(),1);var LY=(t,e)=>{let r=global.window,n=r.document,i=n.documentElement,o=n.querySelector("body");if(o==null)throw new Error("no body");if(t==null)return console.log("no canvas yet");let s=t.getContext("2d");if(s==null)throw new Error("no ctx");let a=ae=>`rgba(0,0,0,${ae/100})`,c={viewport:null,styles:{"header,footer,section,article":a(8),"h1,a":a(10),"h2,h3,h4":a(8)},back:a(2),view:a(5),drag:a(10),interval:null},p=Object.assign(c,e),f=(ae,Se,Re,Pe)=>Re.split(/\s+/).forEach(Oe=>ae[Se](Oe,Pe)),m=(ae,Se,Re)=>f(ae,"addEventListener",Se,Re),g=(ae,Se,Re)=>f(ae,"removeEventListener",Se,Re),v=(ae,Se,Re,Pe)=>({x:ae,y:Se,w:Re,h:Pe}),_=(ae,Se={x:0,y:0})=>v(ae.x-Se.x,ae.y-Se.y,ae.w,ae.h),S=()=>v(0,0,i.scrollWidth,i.scrollHeight),T=()=>v(r.pageXOffset,r.pageYOffset,i.clientWidth,i.clientHeight),w=ae=>{let Se=ae.getBoundingClientRect();return{x:Se.left+r.pageXOffset,y:Se.top+r.pageYOffset}},E=ae=>{let{x:Se,y:Re}=w(ae),Pe=ae.offsetWidth??ae.width?.baseVal?.value,Oe=ae.offsetHeight??ae.height?.baseVal?.value;return v(Se,Re,Pe,Oe)},I=ae=>{let{x:Se,y:Re}=w(ae);return v(Se+ae.clientLeft,Re+ae.clientTop,ae.clientWidth,ae.clientHeight)},N=ae=>{let{x:Se,y:Re}=w(ae);return v(Se+ae.clientLeft-ae.scrollLeft,Re+ae.clientTop-ae.scrollTop,ae.scrollWidth,ae.scrollHeight)},C=(()=>{let ae=t.clientWidth,Se=t.clientHeight;return(Re,Pe)=>Math.min(ae/Re,Se/Pe)})(),k=(ae,Se)=>{t.width=ae,t.height=Se,t.style.width=`${ae}px`,t.style.height=`${Se}px`},U=p.viewport,$=ae=>{let Se=U||n;return Array.from(Se.querySelectorAll(ae))},G=!1,K,X,te,ne,H,re=(ae,Se)=>{Se&&(s.beginPath(),s.rect(ae.x,ae.y,ae.w,ae.h),s.fillStyle=Se,s.fill())},W=ae=>{Object.keys(ae).forEach(Se=>{let Re=ae[Se];$(Se).forEach(Pe=>{let Oe=E(Pe),ct=_(Oe,K);re(ct,Re)})})},q=()=>{K=U?N(U):S(),X=U?I(U):T(),te=C(K.w,K.h),k(K.w*te,K.h*te),s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.width,t.height),s.scale(te,te),re(_(K,K),p.back),W(p.styles),re(_(X,K),G?p.drag:p.view)},se=ae=>{ae.preventDefault();let Se=I(t),Re=(ae.pageX-Se.x)/te-X.w*ne,Pe=(ae.pageY-Se.y)/te-X.h*H;U?(U.scrollLeft=Re,U.scrollTop=Pe):r.scrollTo(Re,Pe),q()},J=ae=>{G=!1,t.style.cursor="pointer",o.style.cursor="auto",g(r,"mousemove",se),g(r,"mouseup",J),se(ae)},ye=ae=>{G=!0;let Se=I(t),Re=_(X,K);ne=((ae.pageX-Se.x)/te-Re.x)/Re.w,H=((ae.pageY-Se.y)/te-Re.y)/Re.h,(ne<0||ne>1||H<0||H>1)&&(ne=.5,H=.5),t.style.cursor="crosshair",o.style.cursor="crosshair",m(r,"mousemove",se),m(r,"mouseup",J),se(ae)};return(()=>{t.style.cursor="pointer",m(t,"mousedown",ye),m(U||r,"load resize scroll",q),p.interval&&p.interval>0&&setInterval(()=>q(),p.interval),q()})(),{redraw:q}};var UY=F(function(e){let r=e.graph,n=document.querySelector("#map"),i=r.json_cyto;(0,MY.useLayoutEffect)(()=>{r!=null&&n!=null&&i!=null&&LY(document.querySelector("#map"),{viewport:o,styles:{"div.node":"rgba(176, 80, 80, 0.8)"},back:"rgba(0,0,0,0.02)",view:"rgba(0,0,0,0.05)",drag:"rgba(0,0,0,0.10)"})},[r,n,i]);let o=document.getElementById("hovered-graph");if(o==null||i.elements.nodes==null)return null;let s=h(St.Fragment,{children:i.elements.nodes.map(a=>h("div",{className:"node",style:{position:"absolute",top:a.position.y,left:a.position.x,width:a.data.width,height:a.data.height,background:"#aaa"}},a.data.id))});return P("div",{children:[h("canvas",{onMouseEnter:()=>o.style.opacity="0.8",onMouseLeave:()=>o.style.opacity="0",id:"map",style:{width:"200px",height:"200px",zIndex:1e3}}),(0,FY.createPortal)(s,o)]})});var BY=F(function(e){let n=pe().db.graphs.last();return h("div",{children:n&&h(fa,{FallbackComponent:ql,onReset:i=>{},children:h(UY,{graph:n})})})});var WY=F(function(e){let r=pe();return h("div",{children:h("div",{tw:"p-2",children:h(gt,{onClick:()=>{},appearance:"ghost",color:"green",tw:"w-full self-start",children:"Create action"})})})});xr();var hE=ie(ve(),1);var Twe=()=>document.getElementById("miniPaint").contentWindow.Layers,sL=class{constructor(e){this.st=e}loadImage(e){let r=document.createElement("img");r.crossOrigin="Anonymous",r.src=e.url,r.onload=function(){var i=document.getElementById("miniPaint").contentWindow.Layers,o={name:vt(),type:"image",data:r,width:r.naturalWidth||r.width,height:r.naturalHeight||r.height,width_original:r.naturalWidth||r.width,height_original:r.naturalHeight||r.height};i.insert(o)}}saveImage(){console.log("a");var e=Twe(),r=document.createElement("canvas");console.log("b");var n=r.getContext("2d"),i=e.get_dimensions();console.log("c"),r.width=i.width,r.height=i.height,console.log("d"),e.convert_layers_to_canvas(n),console.log("e");var o=r.toDataURL();console.log(`${o.length} bytes`);let s=vt();r.toBlob(async a=>{if(a==null)throw new Error("\u274C blob is null");let l=s+".png",c="minipaint",p=yr(this.st.outputFolderPath,c);lo(p,{recursive:!0});let f=$r(yr(c,l)),m=this.st.resolve(this.st.outputFolderPath,f),g=await a.arrayBuffer();br(this.st.outputFolderPath)||(console.log(`creating dir ${this.st.outputFolderPath}`),lo(this.st.outputFolderPath,{recursive:!0})),en(m,Buffer.from(g)),console.log("saved"),this.st.db.media_images.create({infos:{type:"image-local",absPath:m}})})}},jY=F(function(e){let r=pe(),n=(0,hE.useMemo)(()=>new sL(r),[]);return(0,hE.useLayoutEffect)(()=>{if(e.imgID==null)return;let i=r.db.media_images.getOrThrow(e.imgID);setTimeout(()=>n.loadImage(i),100)},[e.imgID]),P("div",{className:"flex-grow flex flex-col h-full",children:[h("div",{className:"absolute top-1 right-2",children:h(gt,{size:"sm",icon:h("span",{className:"material-symbols-outlined",children:"save"}),appearance:"primary",color:"green",onClick:()=>{_r(()=>{n.saveImage()})},children:"Save"})}),h("iframe",{style:{border:"none",flexGrow:1,minWidth:"200px",width:"100%"},id:"miniPaint",src:"http://localhost:8788/public/minipaint/index.html",allow:"camera"})]})});var zY=t=>t==="New"?"\u{1F195}":t==="Scheduled"?"\u{1F552}":t==="Running"?h(Lu,{}):t==="Success"?"\u2705":t==="Failure"?"\u274C":(gr(t),"\u{1F937}");var jft=F(function(e){let r=e.step;return P("div",{tw:"flex flex-wrap",children:[h(G0,{step:r}),r.outputs?.map((n,i)=>h(Vh,{step:r,output:n},i))]})}),G0=F(function(e){let r=pe(),n=r.focusedStepL,i=e.step,o=n===i,s=r.historySizeStr;return P("div",{tw:["virtualBorder relative overflow-hidden","cursor-pointer justify-between text-xs text-gray-400 hover:bg-base-200",e.className],onClick:()=>i.expanded=!i.expanded,style:{borderTop:"1px solid #2d2d2d"},children:[h("div",{tw:["cursor-pointer",n===i?"border-2 border-primary":""],onClick:()=>r.focusedStepID=i.id,style:{outline:o?"4px solid white":void 0,width:s,height:s,flexShrink:0},children:i.app?h(ng,{tw:"opacity-40 hover:opacity-100",size:s,app:i.app}):h("div",{style:{width:s,height:s},children:"\u2753"})}),h("div",{className:"text-xs whitespace-nowrap overflow-ellipsis opacity-90 bg-black text-white absolute top-0 right-0",children:zY(e.step.finalStatus)})]})});var wwe=F(function(e){let r=pe(),n=r.db.media_images.last(),i=r.latentPreview;if(i==null)return null;if(n==null||i.receivedAt>n.createdAt)return h("img",{tw:"absolute bottom-0 right-0 shadow-xl z-50",style:{width:r.latentSizeStr,height:r.latentSizeStr,objectFit:"contain"},src:i.url,alt:"last generated image"})}),$Y=F(function(e){let r=pe(),n=r.focusedStepL;if(n==null)return null;let i=r.hovered??r.focusedStepOutput??n.lastMediaOutput??r.db.media_images.last(),o=null,s=n.currentlyExecutingOutput;return h(St.Fragment,{children:P("div",{tw:["flex flex-col","flex-grow h-full w-full"],children:[h(Swe,{}),h("div",{tw:["animate-in zoom-in-75","flex flex-grow overflow-auto"],children:i&&h(Kh,{output:i})}),h("div",{tw:["flex flex-grow overflow-auto absolute pointer-events-none inset-0 z-30"],children:o&&h(Kh,{output:o})}),s&&h("div",{tw:["flex flex-grow overflow-auto top-20 absolute z-20 bg-base-100 bg-opacity-80"],children:h(Kh,{output:s})}),h(wwe,{})]})})}),Swe=F(function(e){let r=pe(),n=r.focusedStepL,i=r.historySizeStr;return P("div",{tw:"flex flex-wrap gap-0.5 p-1 overflow-auto flex-shrink-0 bg-base-300 items-center",children:[P(hr,{tw:"self-start",disableHover:!0,children:[h("div",{style:{width:i,height:i,lineHeight:i},tw:"btn h-full",children:h("span",{className:"material-symbols-outlined",children:"settings"})}),P("div",{tw:"flex flex-col gap-1 p-2 shadow-xl",children:[h(yn,{label:"Output Preview Size (px)",children:h(_i,{style:{width:"5rem"},mode:"int",min:32,max:200,onValueChange:o=>r.historySize=o,value:r.historySize})}),h(yn,{label:"Latent Size (%)",children:h(_i,{style:{width:"5rem"},mode:"int",min:3,max:100,onValueChange:o=>r.latentSize=o,value:r.latentSize})})]})]}),n&&h(G0,{step:n}),n?.outputs?.map((o,s)=>h(Vh,{step:n,output:o},s))]})});var HY=F(function(e){return h("iframe",{className:"w-full h-full",frameBorder:"0",src:"https://squoosh.app/"})});var qY=(t,e=!1)=>{if(t==null)return"<\u274C date error>";let r=new Date(new Date().setHours(0,0,0,0)),n=new Date(r.getFullYear(),r.getMonth(),r.getDate()-1,0,0,0,0),i=new Date(r.getFullYear(),r.getMonth(),r.getDate()-6,0,0,0,0),o=new Date(r.getFullYear(),0,1),s="";return e&&(s=Ewe(t)),t>=r?t.toLocaleTimeString("en-US",{hour12:!0,hour:"numeric",minute:"2-digit"})+s:t>=n?"Yesterday":t>=i?Cwe[t.getDay()]+s:t>=o?t.toLocaleDateString("en-US",{month:"long",day:"numeric"})+s:t.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})+s},Ewe=t=>{let e=Date.now(),r=t.getTime(),n=Math.floor((e-r)/1e3),i=n/31536e3;return i>1?fg(Math.floor(i),"year"):(i=n/2592e3,i>1?fg(Math.floor(i),"month"):(i=n/86400,i>1?fg(Math.floor(i),"day"):(i=n/3600,i>1?fg(Math.floor(i),"hour"):(i=n/60,i>1?fg(Math.floor(i),"minute"):fg(Math.floor(i),"second")))))},Cwe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],fg=(t,e)=>" ("+t+` ${t>1?`${e}s`:e} ago)`;var GY=F(function(e){let r=e.val??!1;return P("label",{className:"swap swap-rotate opacity-50",children:[h("input",{type:"checkbox",checked:r,onChange:n=>{e.set?.(!n.target.checked)}}),h("span",{className:"material-symbols-outlined swap-on",children:"keyboard_arrow_right"}),h("span",{className:"material-symbols-outlined swap-off",children:"keyboard_arrow_down"})]})});var KY=F(function(e){let r=e.step,n=r.expanded;if(!n)return h(VY,{className:"py-2",step:r});if(n)return P("div",{children:[h(VY,{className:"py-2",step:r}),h(aL,{step:r})]})}),VY=F(function(e){let r=e.step;return P("div",{tw:["bg-base-200","flex items-center","cursor-pointer text-xs text-opacity-50 hover:bg-base-200",e.className],onClick:()=>r.expanded=!r.expanded,style:{borderTop:"1px solid #2d2d2d"},children:[h(GY,{val:r.expanded}),h("b",{children:r.name??r.name}),h("div",{tw:"flex-grow"}),h("div",{className:"text-xs opacity-50",children:qY(new Date(r.createdAt))})]})}),aL=F(function(e){let r=e.step;return P("div",{className:"flex flex-wrap",children:[r&&h(G0,{step:r}),r.outputs?.map((n,i)=>h(Vh,{step:r,output:n},i))]})});var YY=F(function(e){let r=pe(),n=r.db.steps.getLastN(r.__TEMPT__maxStepsToShow);return P("div",{className:"flex flex-col",children:[h(ko,{style:{width:"5rem"},min:1,max:100,value:r.__TEMPT__maxStepsToShow,onChange:i=>r.__TEMPT__maxStepsToShow=parseInt(i.target.value,10)}),h("div",{className:"flex flex-col flex-grow",style:{overflow:"auto"},children:n.map(i=>h(KY,{step:i},i.id))})]})}),XY=F(function(e){let n=pe().db.steps.last();return n==null?null:h("div",{className:"flex flex-col",children:h(aL,{step:n})})});var JY=F(function(e){return h("iframe",{className:"w-full h-full",src:"http://localhost:8788/library/_doc/index.html",frameBorder:"0"})});var QY=F(function(e){return h("iframe",{className:"w-full h-full",src:e.url})});var ZY=F(function(e){return P("div",{style:{alignItems:"center",justifyContent:"center",color:"red",background:"#280606",height:"100%",display:"flex",overflow:"auto",flexDirection:"column"},children:[h("h1",{children:e.err.title}),h("h3",{children:e.err.help})]})});var eX=F(function(e){let n=pe().db.cushy_scripts.get(e.scriptID);return n==null?h(ZY,{err:{title:"Script not found",help:"maybe the database was reset?"}}):P("div",{children:[P("div",{children:["id: ",n.id]}),P("div",{children:["created at: ",Ja(n.createdAt)]}),P("div",{children:["updated at: ",Ja(n.updatedAt)]}),P("div",{children:["extracted from: ",n.relPath]}),h(nS,{code:n.data.code})]})});var uX=ie(ve(),1);var tX=t=>({success:!0,value:t}),rX=t=>({success:!1,value:t}),nX=t=>({success:!0,value:t}),gE=(t,e)=>({success:!1,message:t,error:e,value:void 0});function iX(t){return new Promise((e,r)=>{let n=new FileReader;n.onload=i=>{console.log("\u{1F7E2}",i);let o=i.target?.result;if(o==null||typeof o=="string")return r("file load error");let s=new Uint8Array(o);console.log("\u{1F7E2}",s);let a=lL(s);if(!a.success)return console.log("\u{1F534}",a.value),r(a.value);console.log("\u{1F7E2}",a.value),e(a.value)},n.readAsArrayBuffer(t)})}var lL=t=>{let e=new DataView(t.buffer,t.byteOffset,t.byteLength);if(e.getUint32(0)!==2303741511)return rX("Not a valid PNG file");let r=8,n={};for(;r<t.length;){let i=e.getUint32(r);if(String.fromCharCode(...t.slice(r+4,r+8))==="tEXt"){let s=r+8;for(;t[s]!==0;)s++;let a=String.fromCharCode(...t.slice(r+8,s)),l=t.slice(s+1,r+8+i),c=Array.from(l).map(p=>String.fromCharCode(p)).join("");n[a]=c}r+=12+i}return tX(n)};var oX=ie(ve(),1);var yE=class{constructor(e){this.fn=e;this.done=!1;this.value=null;this.update=()=>this.fn?.(this);this.isRunning=!1;this.logs=[];this.addLog=e=>{this.logs.push(e)};this.promise=new Promise((r,n)=>{this.resolve=i=>{this.done=!0,this.isRunning=!1,Dwe(i)?i.then(o=>this.value=o):this.value=i,r(i)},this.reject=i=>{this.done=!0,this.isRunning=!1,n(i)}}),this.then=this.promise.then.bind(this.promise),wv(this,{done:si,value:si})}},Dwe=t=>t!=null&&typeof t.then=="function";var sX=(t,e)=>(0,oX.useMemo)(()=>{let r=new yE;return t().then(r.resolve).catch(r.reject),r},e);var lp={BOOLEAN:"boolean",FLOAT:"number",INT:"number",STRING:"string"},aX=Object.keys(lp),lX=t=>t.type==="INT"&&(t.nameInComfy==="seed"||t.nameInComfy==="noise_seed")?2:t.isPrimitive||t.type.startsWith("Enum_")?1:0,uL=(t,e)=>t==="INT"?e==="seed"||e==="noise_seed"?2:1:t==="BOOLEAN"||t==="FLOAT"||t==="STRING"||t==="COMBO"?1:t==="INT:seed"||t==="INT:noise_seed"?2:0;var vE=(t,e)=>{let r={},n=(...s)=>console.log("[\u{1F525}] converter \u2139\uFE0F :",...s),i=(...s)=>console.error("[\u{1F525}] converter \u{1F534} :",...s),o={};for(let s of e.nodes)if(s.type==="PrimitiveNode"){if(s.widgets_values==null){i(`PrimitiveNode#${s.id} has no widget values`),n(`skipping PrimitiveNode#${s.id} because it has no widget values`,s);continue}n(`found primitive ${s.type}#${s.id} with value ${tn(s.widgets_values[0])}`),o[s.id]=tn(s.widgets_values[0])}for(let s of e.nodes){let a=`\u{1F48E} node ${s.type}#${s.id}`,l=`${a} | `;if(n(`${a} \u{1F7F0} ---------------------------------------------`),s.isVirtualNode){n(`    | [\u{1F536} WARN] virtual node ${s.id}(${s.type}) skipped`);continue}if(s.mode===2){n(`    | [\u{1F536} WARN] muted node ${s.id}(${s.type}) skipped`);continue}if(s.type==="Reroute"){n(`    | [\u{1F536} WARN] "Reroute" node ${s.id} skipped`);continue}if(s.type==="Note"){n(`    | [\u{1F536} WARN] "Note" node ${s.id} skipped`);continue}if(s.type==="PrimitiveNode"){n(`    | [\u{1F536} WARN] PrimitiveNode#${s.id} => will be inlined by children`);continue}let c={},p=new Set((s?.inputs??[]).map(T=>T.name)),f=s.type,m=t.nodesByNameInComfy[f];if(m==null)throw n(`\u274C missing schema for: ${f}`),n("\u274C node causing a crash:",{node:s}),n("\u274C current prompt Step is:",{prompt:r}),new Error(`\u274C node ${s.id}(${s.type}) has no schema`);let g=m.inputs;if(g==null)throw new Error(`\u274C node ${s.id}(${s.type}) has no input`);let v=0,_=s?.inputs??[];for(let T of g){let w=_.find(I=>I.name===T.nameInComfy),E=w?.type?uL(w.type,T.nameInComfy):lX(T);if(E){let I=s.widgets_values[v];n(`${l} \u{1F7F0} ${T.nameInComfy} = ${I} [VALUE] (consume ${E} fields)`),c[T.nameInComfy]=I,v+=E}else{if(!p.has(T.nameInComfy))throw new Error(`\u{1F534}, ${T.type}, ${T.nameInComfy}, ${E}`);n(`${l} \u{1F47B} ${T.nameInComfy} [LINK] ${T.type}`)}}let S=T=>{let w=e.links.find(N=>N[0]===T);if(w==null)throw new Error(`Node ${s.id}(${s.type}) references a non-existing link (id=${T}})`);let E=w[1],I=e.nodes.find(N=>N.id===E);if(I==null)throw new Error(`link ${T} references a non-existent parent node ${E}`);return{node:I,link:w}};e:for(let T of s?.inputs??[]){if(uL(T.type,T.name)>0)continue;let E=null,I=100;for(;(E==null||E.node.type==="Reroute")&&I-- >0;){E!=null&&n(`${l} \u{1F525} ${T.name}... skipping reroute`);let N=E?.node.inputs?.[0].link??T.link;if(N==null){n(`${l} [\u{1F536} WARN] node ${s.id}(${s.type}) has an empty input slot`);continue e}E=S(N)}if(E==null)throw new Error(`no parent found for ${s.id}.${T.name})`);n(`${l} \u{1F7F0} ${T.name} = [${String(E.node.id)}, ${E.link[2]}] [LINK ${E.node.type}]`),c[T.name]=[String(E.node.id),E.link[2]]}n(`    | [\u{1F7E2} OK] node ${s.id}(${s.type}) => ${JSON.stringify(c)}`),r[String(s.id)]={inputs:c,class_type:s.type}}return n("\u{1F7E2} converted:",{prompt:r}),r};var cX=F(function(e){let r=e.file,[n,i]=(0,uX.useState)(null),o=pe();if(!r.name.endsWith(".png"))return h(St.Fragment,{children:"not a png"});let l=sX(()=>iX(r),[]).value;if(l==null)return h(St.Fragment,{children:"loading..."});let c=l.workflow;if(c==null)return h(St.Fragment,{children:"\u274C1. no workflow in metadata"});let p;try{p=JSON.parse(c)}catch{return h(St.Fragment,{children:"\u274C2. workflow is not valid json"})}let f;try{f=vE(o.schema,p)}catch(g){return console.log(g),h(St.Fragment,{children:"\u274C3. cannot convert LiteGraph To Prompt"})}let m=[{title:"autoui+id",conf:{preserveId:!0,autoUI:!0}},{title:"autoui",conf:{preserveId:!1,autoUI:!0}},{title:"base+id",conf:{preserveId:!0,autoUI:!1}},{title:"base",conf:{preserveId:!1,autoUI:!1}}];return P(rs,{className:e.className,tw:"bg-base-300 overflow-auto virtua",children:[h(V0,{k:"name",v:r.name}),h(V0,{k:"size",v:r.size}),h(V0,{k:"name",v:r.type}),h(V0,{k:"metadata",v:l}),h(V0,{k:"workflowJSON",v:p}),h("div",{tw:"join",children:m.map(g=>h("div",{tw:"btn btn-sm btn-outline join-item",onClick:async()=>{let v=o.importer.convertPromptToCode(f,{title:r.name,author:"unknown",preserveId:g.conf.preserveId??!1,autoUI:g.conf.autoUI??!0});i(v)},children:g.title},g.title))}),n&&h(nS,{code:n})]})}),V0=F(function(e){return P("div",{className:"flex items-start gap-1",children:[P("div",{className:"text-neutral-content italic",children:[e.k,":"]}),h("div",{children:typeof e.v=="object"?h("pre",{children:JSON.stringify(e.v)}):e.v})]})});var dX=F(function(e){let r=pe();return P("div",{tw:"w-full h-full",children:[h("div",{tw:"flex flex-col gap-3 m-3",children:r.droppedFiles.map(n=>h(cX,{file:n},n.name))}),h("div",{tw:"relative w-96 h-96 virtualBorder",children:h(sT,{})})]})});var K0={Gallery:{name:"Gallery",widget:PY,header:t=>({title:"\u{1F391} Gallery",icon:void 0})},Paint:{name:"Paint",widget:jY,header:t=>({title:"\u{1F3A8} Paint",icon:Rr.minipaint_images_logo_svg})},Image:{name:"Image",widget:p0,header:t=>({title:"\u{1F387} Image",icon:void 0})},Marketplace:{name:"Marketplace",widget:WY,header:t=>({title:"Marketplace",icon:Rr.CushyLogo_512_png})},Deck:{name:"Deck",widget:s3,header:t=>({title:"Deck",icon:void 0})},FileList:{name:"FileList",widget:Pq,header:t=>({title:"FileList",icon:void 0})},Import:{name:"Import",widget:dX,header:t=>({title:"Import",icon:void 0})},ComfyUI:{name:"ComfyUI",widget:lS,header:t=>({title:"ComfyUI",icon:Rr.ComfyUILogo_png})},ComfyUINodeExplorer:{name:"ComfyUINodeExplorer",widget:s3,header:t=>({title:"ComfyUINodeExplorer",icon:Rr.ComfyUILogo_png})},Output:{name:"Output",widget:$Y,header:t=>({title:"Output",icon:void 0})},Steps:{name:"Steps",widget:YY,header:t=>({title:"Steps",icon:void 0})},LastGraph:{name:"LastGraph",widget:BY,header:t=>({title:"\u23F1\uFE0F LastGraph",icon:void 0})},LastImage:{name:"LastImage",widget:p0,header:t=>({title:"\u23F1\uFE0F LastImage",icon:void 0})},LastStep:{name:"LastStep",widget:XY,header:t=>({title:"LastStep",icon:void 0})},CardPicker3UI:{name:"CardPicker3UI",widget:RY,header:t=>({title:"CardPicker3UI",icon:void 0})},Draft:{name:"Draft",widget:CY,header:t=>({title:"Draft",icon:void 0})},DraftJsonResult:{name:"DraftJsonResult",widget:kY,header:t=>({title:"DraftJsonResult",icon:void 0})},DraftJsonSerial:{name:"DraftJsonSerial",widget:NY,header:t=>({title:"DraftJsonSerial",icon:void 0})},Script:{name:"Script",widget:eX,header:t=>({title:"Script",icon:void 0})},CurrentDraft:{name:"CurrentDraft",widget:IY,header:t=>({title:"CurrentDraft",icon:void 0})},Civitai:{name:"Civitai",widget:Lq,header:t=>({title:"Civitai",icon:Rr.CivitaiLogo_png})},Squoosh:{name:"Squoosh",widget:HY,header:t=>({title:"Squoosh",icon:void 0})},IFrame:{name:"IFrame",widget:QY,header:t=>({title:"IFrame",icon:void 0})},Config:{name:"Config",widget:zq,header:t=>({title:"Config",icon:void 0})},Hosts:{name:"Hosts",widget:US,header:t=>({title:"Hosts",icon:void 0})},TypeDoc:{name:"TypeDoc",widget:JY,header:t=>({title:"TypeDoc",icon:Rr.typescript_512_png})}};var _E=F(function(e){let{panel:r,panelProps:n}=e,i=K0[r];if(i==null)return P(fn,{type:"error",showIcon:!0,children:["no panel definition for ",r]});let o=i.widget;return h(fa,{FallbackComponent:ql,onReset:s=>{},children:h(o,{...n,className:"w-full h-full border-none"})})});var pX=F(function(e){let r=pe(),n=r.layout.fullPageComp;return n==null?null:P(St.Fragment,{children:[h("div",{tw:"absolute top-1 right-1",onClick:()=>{r.layout.fullPageComp=null},style:{zIndex:101},children:h("div",{tw:"btn btn-subtle",children:h("span",{className:"material-symbols-outlined",children:"close"})})}),h("div",{onKeyUp:i=>{i.key==="Escape"&&(r.layout.fullPageComp=null)},tw:"absolute fade-in",style:{top:0,left:"0",height:"100%",width:"100%",zIndex:100},children:h("div",{tw:"bg-base-100 h-full",children:h(_E,{panel:n.panel,panelProps:n.props})})})]})});var fX=F(function(){let e=pe(),r=(0,bE.useRef)(null);return(0,bE.useEffect)(()=>{let n=r.current;if(n==null)return;function i(o){let s=e.shortcuts.processKeyDownEvent(o);if(s==="success"){o.preventDefault(),o.stopPropagation();return}document.activeElement==null&&(o.preventDefault(),o.stopPropagation(),n?.focus()),s==="skipped"&&o.key==="w"&&(o.ctrlKey||o.metaKey)&&(o.preventDefault(),o.stopPropagation())}return window.addEventListener("keydown",i),document.activeElement===document.body&&n.focus(),()=>window.removeEventListener("keydown",i)},[r.current,e]),P("div",{"data-theme":e.themeMgr.theme,id:"CushyStudio",tabIndex:-1,ref:r,tw:["col grow h100 text-base-content"],children:[h("div",{id:"tooltip-root",tw:"pointer-events-none absolute inset-0 w-full h-full"}),h(uW,{}),h(pX,{}),h("div",{className:"flex flex-grow relative",children:h(rq,{})})]})});xr();var dne=ie(ve(),1);var mX=ie(pL(),1);xr();var Iwe="    ";function Y0(t,e=3,r=0){if(r>e||typeof t!="object"||t===null)return JSON.stringify(t);let n="    ".repeat(r+1),i=`{
`,o=Object.keys(t);for(let s=0;s<o.length;s++){let a=o[s],l=t[a];if(l===void 0)continue;let c=typeof l;if(s>0&&(i+=","),Array.isArray(l))i+=`${n}${JSON.stringify(a)}: ${JSON.stringify(l)}`;else if(c==="object"&&l!==null)i+=`${n}${JSON.stringify(a)}: ${Y0(l,e,r+1)}`;else{let p=c==="string"?JSON.stringify(l):l;i+=`${n}${JSON.stringify(a)}: ${p}`}i+=`
`}return i+=`${Iwe.repeat(Math.max(0,r))}}`,i}var mg=class{constructor(e){this.p=e;this.finished=new Promise((e,r)=>{this.ready_yes=e,this.ready_no=r});this.erase=()=>{console.info(`[\u{1F4BE}] CONFIG erasing [${this.fileName}]`),zv(this._path),this.init(this.p)};this.save=()=>{console.info(`[\u{1F4BE}] CONFIGsaving [${this.fileName}] to ${this._path}`);let e=this.p.maxLevel,r=e==null?JSON.stringify(this.value,null,4):Y0(this.value,e);return en(this._path,r),!0};this.update=e=>(typeof e=="function"?e(this.value):Object.assign(this.value,e),this.save());this.init=e=>{if(br(this.folderPath)||(console.info("[\u{1F4BE}]",`${this.fileName} creating missing folder [${this.folderPath}]`),lo(this.folderPath,{recursive:!0})),this._path=yr(this.folderPath,this.fileName),!br(this._path))console.info("[\u{1F4BE}]",`${this.fileName} not found, creating default`),this._value=e.init(),this.save();else{let i=Pn(this._path,"utf-8");this._value=mX.default.parse(i)}return this._value};this.filePath=e.path,this.fileName=ai(e.path),this.folderPath=ur(vh(e.path)),this.folderName=ai(this.folderPath),this.init(e),Ce(this),e.fixup?.(this)}get folder(){return tn(this.folderPath)}get path(){return tn(this._path)}get value(){return tn(this._value)}};var X0=eg("virtual-base"),hX=eg("virtual-full");var gX=()=>new mg({path:ur(Ao("CONFIG.json")),maxLevel:3,init:()=>({mainComfyHostID:X0,galleryImageSize:48,theme:"dark"})});var yX=()=>new mg({path:ur(Ao("tsconfig.custom.json")),maxLevel:1,init:()=>({include:[...fL],exclude:[]})}),fL=["src","library/local","schema/global.d.ts"];var mc=new Uint32Array(65536),kwe=(t,e)=>{let r=t.length,n=e.length,i=1<<r-1,o=-1,s=0,a=r,l=r;for(;l--;)mc[t.charCodeAt(l)]|=1<<l;for(l=0;l<n;l++){let c=mc[e.charCodeAt(l)],p=c|s;c|=(c&o)+o^o,s|=~(c|o),o&=c,s&i&&a++,o&i&&a--,s=s<<1|1,o=o<<1|~(p|s),s&=p}for(l=r;l--;)mc[t.charCodeAt(l)]=0;return a},Nwe=(t,e)=>{let r=e.length,n=t.length,i=[],o=[],s=Math.ceil(r/32),a=Math.ceil(n/32);for(let v=0;v<s;v++)o[v]=-1,i[v]=0;let l=0;for(;l<a-1;l++){let v=0,_=-1,S=l*32,T=Math.min(32,n)+S;for(let w=S;w<T;w++)mc[t.charCodeAt(w)]|=1<<w;for(let w=0;w<r;w++){let E=mc[e.charCodeAt(w)],I=o[w/32|0]>>>w&1,N=i[w/32|0]>>>w&1,C=E|v,k=((E|N)&_)+_^_|E|N,U=v|~(k|_),$=_&k;U>>>31^I&&(o[w/32|0]^=1<<w),$>>>31^N&&(i[w/32|0]^=1<<w),U=U<<1|I,$=$<<1|N,_=$|~(C|U),v=U&C}for(let w=S;w<T;w++)mc[t.charCodeAt(w)]=0}let c=0,p=-1,f=l*32,m=Math.min(32,n-f)+f;for(let v=f;v<m;v++)mc[t.charCodeAt(v)]|=1<<v;let g=n;for(let v=0;v<r;v++){let _=mc[e.charCodeAt(v)],S=o[v/32|0]>>>v&1,T=i[v/32|0]>>>v&1,w=_|c,E=((_|T)&p)+p^p|_|T,I=c|~(E|p),N=p&E;g+=I>>>n-1&1,g-=N>>>n-1&1,I>>>31^S&&(o[v/32|0]^=1<<v),N>>>31^T&&(i[v/32|0]^=1<<v),I=I<<1|S,N=N<<1|T,p=N|~(w|I),c=I&w}for(let v=f;v<m;v++)mc[t.charCodeAt(v)]=0;return g},Awe=(t,e)=>{if(t.length<e.length){let r=e;e=t,t=r}return e.length===0?t.length:t.length<=32?kwe(t,e):Nwe(t,e)},vX=(t,e)=>{let r=1/0,n=0;for(let i=0;i<e.length;i++){let o=Awe(t,e[i]);o<r&&(r=o,n=i)}return e[n]};var Owe=t=>e=>(t(e),"success");var eu=(t,e)=>({combos:Array.isArray(t)?t:[t],action:Owe(e),validInInput:!0}),_X=[eu(["meta+shit+e,","ctrl+shitt+e"],t=>t.layout.FOCUS_OR_CREATE("FileList",{})),eu(["meta+,","ctrl+,"],t=>t.layout.FOCUS_OR_CREATE("Config",{})),eu(["meta+escape","ctrl+escape"],t=>t.closeFullLibrary()),eu(["meta+1","ctrl+1","meta+p","ctrl+p","meta+j"],t=>t.toggleFullLibrary()),eu(["meta+3","ctrl+3"],t=>t.layout.FOCUS_OR_CREATE("Paint",{})),eu(["meta+4","ctrl+4"],t=>t.layout.FOCUS_OR_CREATE("ComfyUI",{})),eu(["meta+5","ctrl+5"],t=>t.layout.FOCUS_OR_CREATE("Gallery",{})),eu(["meta+6","ctrl+6"],t=>t.layout.FOCUS_OR_CREATE("Config",{})),eu(["meta+7","ctrl+7"],t=>t.layout.FOCUS_OR_CREATE("Civitai",{})),eu(["meta+8","ctrl+8"],t=>t.layout.FOCUS_OR_CREATE("Hosts",{})),{combos:["meta+w","ctrl+w"],validInInput:!0,action:t=>t.layout.closeCurrentTab(),info:"Tooggle Graph Monitor"},{combos:["escape"],validInInput:!0,action:t=>t.layout.fullPageComp==null?"skipped":(t.layout.fullPageComp=null,"success"),info:"Close Full-Screen Panel if open"}];var Fo=window.require("events");var Cgt=Fo.addAbortListener,Dgt=Fo.once,Igt=Fo.on,kgt=Fo.getEventListeners,Ngt=Fo.getMaxListeners,bX=Fo.EventEmitter,Agt=Fo.usingDomains,Ogt=Fo.captureRejectionSymbol,Rgt=Fo.captureRejections,Pgt=Fo.EventEmitterAsyncResource,Lgt=Fo.errorMonitor,Mgt=Fo.defaultMaxListeners,Fgt=Fo.setMaxListeners,Ugt=Fo.init,Bgt=Fo.listenerCount;xr();Oo();var sn=window.require("os"),xX=sn,jgt=sn.arch,zgt=sn.availableParallelism,$gt=sn.cpus,Hgt=sn.endianness,qgt=sn.freemem,Ggt=sn.getPriority,Vgt=sn.homedir,Kgt=sn.hostname,Ygt=sn.loadavg,Xgt=sn.networkInterfaces,Jgt=sn.platform,Qgt=sn.release,Zgt=sn.setPriority,eyt=sn.tmpdir,tyt=sn.totalmem,ryt=sn.type,nyt=sn.userInfo,iyt=sn.uptime,oyt=sn.version,syt=sn.machine,ayt=sn.constants,lyt=sn.EOL,uyt=sn.devNull;var TX=300,up=20,J0=1e7,wX=xX.platform();var Rwe=wX==="darwin",mL=wX==="win32",cp=Rwe||mL,SX=3e3,EX=2e4,hL=1250;var tu;(function(t){t[t.DIR=1]="DIR",t[t.FILE=2]="FILE"})(tu||(tu={}));var Bf;(function(t){t.CHANGE="change",t.RENAME="rename"})(Bf||(Bf={}));var Q0;(function(t){t.CHANGE="change",t.ERROR="error"})(Q0||(Q0={}));var ft;(function(t){t.ADD="add",t.ADD_DIR="addDir",t.CHANGE="change",t.RENAME="rename",t.RENAME_DIR="renameDir",t.UNLINK="unlink",t.UNLINK_DIR="unlinkDir"})(ft||(ft={}));var Uo;(function(t){t.ALL="all",t.CLOSE="close",t.ERROR="error",t.READY="ready"})(Uo||(Uo={}));var{now:Pwe}=Date,gL=Pwe;var Lwe=(t,e=1,r)=>{e=Math.max(1,e);let n=r?.leading??!1,i=r?.trailing??!0,o=Math.max(r?.maxWait??1/0,e),s,a,l=0,c=0,p=()=>{let I=gL(),N=I-l,C=I-c,k=N>=e||C>=o;return[I,k]},f=I=>{if(c=I,!s)return;let N=s;s=void 0,t.apply(void 0,N)},m=()=>{w(0)},g=()=>{a&&(m(),f(gL()))},v=I=>{if(c=I,n)return f(I)},_=I=>{if(i&&s)return f(I);s=void 0},S=()=>{a=void 0;let[I,N]=p();return N?_(I):T(I)},T=I=>{let N=I-l,C=I-c,k=e-N,U=o-C,$=Math.min(k,U);return w($)},w=I=>{a&&clearTimeout(a),!(I<=0)&&(a=setTimeout(S,I))},E=(...I)=>{let[N,C]=p(),k=!!a;if(s=I,l=N,(C||!a)&&w(e),C)return k?f(N):v(N)};return E.cancel=m,E.flush=g,E},xE=Lwe;xr();Oo();xr();yL();var hc=(t,e)=>function(...n){return t.apply(void 0,n).catch(e)},ru=(t,e)=>function(...n){try{return t.apply(void 0,n)}catch(i){return e(i)}};var DX=WA.getuid?!WA.getuid():!1,IX=1e4,ss=()=>{};var Z0={isChangeErrorOk:t=>{if(!Z0.isNodeError(t))return!1;let{code:e}=t;return e==="ENOSYS"||!DX&&(e==="EINVAL"||e==="EPERM")},isNodeError:t=>t instanceof Error,isRetriableError:t=>{if(!Z0.isNodeError(t))return!1;let{code:e}=t;return e==="EMFILE"||e==="ENFILE"||e==="EAGAIN"||e==="EBUSY"||e==="EACCESS"||e==="EACCES"||e==="EACCS"||e==="EPERM"},onChangeError:t=>{if(!Z0.isNodeError(t))throw t;if(!Z0.isChangeErrorOk(t))throw t}},Wn=Z0;var vL=class{constructor(){this.interval=25,this.intervalId=void 0,this.limit=IX,this.queueActive=new Set,this.queueWaiting=new Set,this.init=()=>{this.intervalId||(this.intervalId=setInterval(this.tick,this.interval))},this.reset=()=>{this.intervalId&&(clearInterval(this.intervalId),delete this.intervalId)},this.add=e=>{this.queueWaiting.add(e),this.queueActive.size<this.limit/2?this.tick():this.init()},this.remove=e=>{this.queueWaiting.delete(e),this.queueActive.delete(e)},this.schedule=()=>new Promise(e=>{let r=()=>this.remove(n),n=()=>e(r);this.add(n)}),this.tick=()=>{if(!(this.queueActive.size>=this.limit)){if(!this.queueWaiting.size)return this.reset();for(let e of this.queueWaiting){if(this.queueActive.size>=this.limit)break;this.queueWaiting.delete(e),this.queueActive.add(e),e()}}}}},kX=new vL;var gc=(t,e)=>function(n){return function i(...o){return kX.schedule().then(s=>{let a=c=>(s(),c),l=c=>{if(s(),Date.now()>=n)throw c;if(e(c)){let p=Math.round(100*Math.random());return new Promise(m=>setTimeout(m,p)).then(()=>i.apply(void 0,o))}throw c};return t.apply(void 0,o).then(a,l)})}},yc=(t,e)=>function(n){return function i(...o){try{return t.apply(void 0,o)}catch(s){if(Date.now()>n)throw s;if(e(s))return i.apply(void 0,o);throw s}}};var SSe={attempt:{chmod:hc(Ti(yt.chmod),Wn.onChangeError),chown:hc(Ti(yt.chown),Wn.onChangeError),close:hc(Ti(yt.close),ss),fsync:hc(Ti(yt.fsync),ss),mkdir:hc(Ti(yt.mkdir),ss),realpath:hc(Ti(yt.realpath),ss),stat:hc(Ti(yt.stat),ss),unlink:hc(Ti(yt.unlink),ss),chmodSync:ru(yt.chmodSync,Wn.onChangeError),chownSync:ru(yt.chownSync,Wn.onChangeError),closeSync:ru(yt.closeSync,ss),existsSync:ru(yt.existsSync,ss),fsyncSync:ru(yt.fsync,ss),mkdirSync:ru(yt.mkdirSync,ss),realpathSync:ru(yt.realpathSync,ss),statSync:ru(yt.statSync,ss),unlinkSync:ru(yt.unlinkSync,ss)},retry:{close:gc(Ti(yt.close),Wn.isRetriableError),fsync:gc(Ti(yt.fsync),Wn.isRetriableError),open:gc(Ti(yt.open),Wn.isRetriableError),readFile:gc(Ti(yt.readFile),Wn.isRetriableError),rename:gc(Ti(yt.rename),Wn.isRetriableError),stat:gc(Ti(yt.stat),Wn.isRetriableError),write:gc(Ti(yt.write),Wn.isRetriableError),writeFile:gc(Ti(yt.writeFile),Wn.isRetriableError),closeSync:yc(yt.closeSync,Wn.isRetriableError),fsyncSync:yc(yt.fsyncSync,Wn.isRetriableError),openSync:yc(yt.openSync,Wn.isRetriableError),readFileSync:yc(yt.readFileSync,Wn.isRetriableError),renameSync:yc(yt.renameSync,Wn.isRetriableError),statSync:yc(yt.statSync,Wn.isRetriableError),writeSync:yc(yt.writeSync,Wn.isRetriableError),writeFileSync:yc(yt.writeFileSync,Wn.isRetriableError)}},NX=SSe;xr();Oo();var _L=()=>{};var bL=()=>{let t=_L,e=_L,r=!1,n=!1;return{promise:new Promise((l,c)=>{t=p=>(r=!0,l(p)),e=p=>(n=!0,c(p))}),resolve:t,reject:e,isPending:()=>!r&&!n,isResolved:()=>r,isRejected:()=>n}};bL.wrap=async t=>{let e=bL();return await t(e),e.promise};var AX=bL;var OX=t=>typeof t=="function",RX=()=>{let{promise:t,resolve:e}=AX(),r=0;return{promise:t,increment:()=>{r+=1},decrement:()=>{r-=1,!r&&e()}}};var ESe=(t,e)=>{let r=e?.followSymlinks??!1,n=e?.depth??1/0,i=e?.limit??1/0,o=e?.ignore??(()=>!1),s=OX(o)?o:H=>o.test(H),a=e?.signal??{aborted:!1},l=[],c=new Set,p=[],f=new Set,m=[],g=new Set,v={},_=new Set,S={directories:[],directoriesNames:new Set,files:[],filesNames:new Set,symlinks:[],symlinksNames:new Set,map:{}},T={directories:l,directoriesNames:c,files:p,filesNames:f,symlinks:m,symlinksNames:g,map:v},{promise:w,increment:E,decrement:I}=RX(),N=0,C=(H,re,W,q)=>{_.has(re)||N>=i||(N+=1,H.directories.push(re),H.directoriesNames.add(W),l.push(re),c.add(W),_.add(re),!(q>=n)&&(N>=i||X(re,q+1)))},k=(H,re,W)=>{_.has(re)||N>=i||(N+=1,H.files.push(re),H.filesNames.add(W),p.push(re),f.add(W),_.add(re))},U=(H,re,W,q)=>{_.has(re)||N>=i||(N+=1,H.symlinks.push(re),H.symlinksNames.add(W),m.push(re),g.add(W),_.add(re),r&&(q>=n||N>=i||te(re,q+1)))},$=(H,re,W,q,se)=>{a.aborted||s(re)||(q.isDirectory()?C(H,re,W,se):q.isFile()?k(H,re,W):q.isSymbolicLink()&&U(H,re,W,se))},G=(H,re,W,q)=>{if(a.aborted)return;let se=re===Ln.sep?"":Ln.sep,J=W.name,ye=`${re}${se}${J}`;s(ye)||(W.isDirectory()?C(H,ye,J,q):W.isFile()?k(H,ye,J):W.isSymbolicLink()&&U(H,ye,J,q))},K=(H,re,W,q)=>{for(let se=0,J=W.length;se<J;se++)G(H,re,W[se],q)},X=(H,re)=>{a.aborted||re>n||N>=i||(E(),yt.readdir(H,{withFileTypes:!0},(W,q)=>{if(W||a.aborted||!q.length)return I();let se=v[H]={directories:[],directoriesNames:new Set,files:[],filesNames:new Set,symlinks:[],symlinksNames:new Set};K(se,H,q,re),I()}))},te=async(H,re)=>{E(),yt.realpath(H,(W,q)=>{if(W||a.aborted)return I();yt.stat(q,async(se,J)=>{if(se||a.aborted)return I();let ye=Ln.basename(q),Ne=v[H]={directories:[],directoriesNames:new Set,files:[],filesNames:new Set,symlinks:[],symlinksNames:new Set};$(Ne,q,ye,J,re),I()})})};return(async(H,re=1)=>(H=Ln.normalize(H),_.add(H),X(H,re),await w,a.aborted?S:T))(t)},PX=ESe;var nu={lang:{debounce:xE,attempt:t=>{try{return t()}catch(e){return nu.lang.castError(e)}},castArray:t=>nu.lang.isArray(t)?t:[t],castError:t=>nu.lang.isError(t)?t:nu.lang.isString(t)?new Error(t):new Error("Unknown error"),defer:t=>setTimeout(t,0),isArray:t=>Array.isArray(t),isError:t=>t instanceof Error,isFunction:t=>typeof t=="function",isNaN:t=>Number.isNaN(t),isNumber:t=>typeof t=="number",isPrimitive:t=>{if(t===null)return!0;let e=typeof t;return e!=="object"&&e!=="function"},isShallowEqual:(t,e)=>{if(t===e)return!0;if(nu.lang.isNaN(t))return nu.lang.isNaN(e);if(nu.lang.isPrimitive(t)||nu.lang.isPrimitive(e))return t===e;for(let r in t)if(!(r in e))return!1;for(let r in e)if(t[r]!==e[r])return!1;return!0},isSet:t=>t instanceof Set,isString:t=>typeof t=="string",isUndefined:t=>t===void 0,noop:()=>{},uniq:t=>t.length<2?t:Array.from(new Set(t))},fs:{getDepth:t=>Math.max(0,t.split(Ln.sep).length-1),getRealPath:(t,e)=>{try{return e?yt.realpathSync.native(t):yt.realpathSync(t)}catch{return}},isSubPath:(t,e)=>e.startsWith(t)&&e[t.length]===Ln.sep&&e.length-t.length>Ln.sep.length,poll:(t,e=EX)=>NX.retry.stat(e)(t,{bigint:!0}).catch(nu.lang.noop),readdir:async(t,e,r=1/0,n=1/0,i,o)=>{if(o&&r===1&&t in o){let s=o[t];return[s.directories,s.files]}else{let s=await PX(t,{depth:r,limit:n,ignore:e,signal:i});return[s.directories,s.files]}}}},Lt=nu;Oo();var xL=class{constructor(e,r,n){this.base=n,this.watcher=e,this.handler=r.handler,this.fswatcher=r.watcher,this.options=r.options,this.folderPath=r.folderPath,this.filePath=r.filePath,this.handlerBatched=this.base?this.base.onWatcherEvent.bind(this.base):this._makeHandlerBatched(this.options.debounce)}_isSubRoot(e){return this.filePath?e===this.filePath:e===this.folderPath||Lt.fs.isSubPath(this.folderPath,e)}_makeHandlerBatched(e=TX){return(()=>{let r=this.watcher._readyWait,n=[],i=new Set,o=async(a,l)=>{let c=this.options.ignoreInitial?[]:a,p=await this.eventsPopulate([...l]),f=this.eventsDeduplicate([...c,...p]);this.onTargetEvents(f)},s=Lt.lang.debounce(()=>{this.watcher.isClosed()||(r=o(n,i),n=[],i=new Set)},e);return async(a,l="",c=!1)=>{c?await this.eventsPopulate([l],n,!0):i.add(l),r.then(s)}})()}eventsDeduplicate(e){if(e.length<2)return e;let r={};return e.reduce((n,i)=>{let[o,s]=i,a=r[s];return o===a||o===ft.CHANGE&&a===ft.ADD||(r[s]=o,n.push(i)),n},[])}async eventsPopulate(e,r=[],n=!1){return await Promise.all(e.map(async i=>{let o=await this.watcher._poller.update(i,this.options.pollingTimeout);await Promise.all(o.map(async s=>{r.push([s,i]),s===ft.ADD_DIR?await this.eventsPopulateAddDir(e,i,r,n):s===ft.UNLINK_DIR&&await this.eventsPopulateUnlinkDir(e,i,r,n)}))})),r}async eventsPopulateAddDir(e,r,n=[],i=!1){if(i)return n;let o=this.options.recursive?this.options.depth??up:Math.min(1,this.options.depth??up),s=this.options.limit??J0,[a,l]=await Lt.fs.readdir(r,this.options.ignore,o,s,this.watcher._closeSignal),c=[...a,...l];return await Promise.all(c.map(p=>{if(!this.watcher.isIgnored(p,this.options.ignore)&&!e.includes(p))return this.eventsPopulate([p],n,!0)})),n}async eventsPopulateUnlinkDir(e,r,n=[],i=!1){if(i)return n;for(let o of this.watcher._poller.stats.keys())Lt.fs.isSubPath(r,o)&&(e.includes(o)||await this.eventsPopulate([o],n,!0));return n}onTargetAdd(e){this._isSubRoot(e)&&(this.options.renameDetection?this.watcher._locker.getLockTargetAdd(e,this.options.renameTimeout):this.watcher.event(ft.ADD,e))}onTargetAddDir(e){e!==this.folderPath&&this.options.recursive&&!cp&&this.options.native!==!1&&this.watcher.watchDirectory(e,this.options,this.handler,void 0,this.base||this),this._isSubRoot(e)&&(this.options.renameDetection?this.watcher._locker.getLockTargetAddDir(e,this.options.renameTimeout):this.watcher.event(ft.ADD_DIR,e))}onTargetChange(e){this._isSubRoot(e)&&this.watcher.event(ft.CHANGE,e)}onTargetUnlink(e){this.watcher.watchersClose(Ln.dirname(e),e,!1),this._isSubRoot(e)&&(this.options.renameDetection?this.watcher._locker.getLockTargetUnlink(e,this.options.renameTimeout):this.watcher.event(ft.UNLINK,e))}onTargetUnlinkDir(e){this.watcher.watchersClose(Ln.dirname(e),e,!1),this.watcher.watchersClose(e),this._isSubRoot(e)&&(this.options.renameDetection?this.watcher._locker.getLockTargetUnlinkDir(e,this.options.renameTimeout):this.watcher.event(ft.UNLINK_DIR,e))}onTargetEvent(e){let[r,n]=e;r===ft.ADD?this.onTargetAdd(n):r===ft.ADD_DIR?this.onTargetAddDir(n):r===ft.CHANGE?this.onTargetChange(n):r===ft.UNLINK?this.onTargetUnlink(n):r===ft.UNLINK_DIR&&this.onTargetUnlinkDir(n)}onTargetEvents(e){for(let r of e)this.onTargetEvent(r)}onWatcherEvent(e,r,n=!1){return this.handlerBatched(e,r,n)}onWatcherChange(e=Bf.CHANGE,r){if(this.watcher.isClosed())return;let n=Ln.resolve(this.folderPath,r||"");this.filePath&&n!==this.folderPath&&n!==this.filePath||this.watcher.isIgnored(n,this.options.ignore)||this.onWatcherEvent(e,n)}onWatcherError(e){mL&&e.code==="EPERM"?this.onWatcherChange(Bf.CHANGE,""):this.watcher.error(e)}async init(){await this.initWatcherEvents(),await this.initInitialEvents()}async initWatcherEvents(){let e=this.onWatcherChange.bind(this);this.fswatcher.on(Q0.CHANGE,e);let r=this.onWatcherError.bind(this);this.fswatcher.on(Q0.ERROR,r)}async initInitialEvents(){let e=!this.watcher.isReady();if(this.filePath){if(this.watcher._poller.stats.has(this.filePath))return;await this.onWatcherEvent(Bf.CHANGE,this.filePath,e)}else{let r=this.options.recursive&&cp&&this.options.native!==!1?this.options.depth??up:Math.min(1,this.options.depth??up),n=this.options.limit??J0,[i,o]=await Lt.fs.readdir(this.folderPath,this.options.ignore,r,n,this.watcher._closeSignal,this.options.readdirMap),s=[this.folderPath,...i,...o];await Promise.all(s.map(a=>{if(!this.watcher._poller.stats.has(a)&&!this.watcher.isIgnored(a,this.options.ignore))return this.onWatcherEvent(Bf.CHANGE,a,e)}))}}},LX=xL;var Bo={interval:100,intervalId:void 0,fns:new Map,init:()=>{Bo.intervalId||(Bo.intervalId=setInterval(Bo.resolve,Bo.interval))},reset:()=>{Bo.intervalId&&(clearInterval(Bo.intervalId),delete Bo.intervalId)},add:(t,e)=>{Bo.fns.set(t,Date.now()+e),Bo.init()},remove:t=>{Bo.fns.delete(t)},resolve:()=>{if(!Bo.fns.size)return Bo.reset();let t=Date.now();for(let[e,r]of Bo.fns)r>=t||(Bo.remove(e),e())}},e_=Bo;var t_=class t{constructor(e){this._watcher=e,this.reset()}getLockAdd(e,r=hL){let{ino:n,targetPath:i,events:o,locks:s}=e,a=()=>{let f=this._watcher._poller.paths.find(n||-1,m=>m!==i);if(f&&f!==i){if(Lt.fs.getRealPath(i,!0)===f)return;this._watcher.event(o.rename,f,i)}else this._watcher.event(o.add,i)};if(!n)return a();let l=()=>{s.add.delete(n),e_.remove(c)},c=()=>{l(),a()};e_.add(c,r);let p=()=>{let f=s.unlink.get(n);if(!f)return;l();let m=f();i===m?o.change&&this._watcher._poller.stats.has(i)&&this._watcher.event(o.change,i):this._watcher.event(o.rename,m,i)};s.add.set(n,p),p()}getLockUnlink(e,r=hL){let{ino:n,targetPath:i,events:o,locks:s}=e,a=()=>{this._watcher.event(o.unlink,i)};if(!n)return a();let l=()=>{s.unlink.delete(n),e_.remove(c)},c=()=>{l(),a()};e_.add(c,r);let p=()=>(l(),i);s.unlink.set(n,p),s.add.get(n)?.()}getLockTargetAdd(e,r){let n=this._watcher._poller.getIno(e,ft.ADD,tu.FILE);return this.getLockAdd({ino:n,targetPath:e,events:t.FILE_EVENTS,locks:this._locksFile},r)}getLockTargetAddDir(e,r){let n=this._watcher._poller.getIno(e,ft.ADD_DIR,tu.DIR);return this.getLockAdd({ino:n,targetPath:e,events:t.DIR_EVENTS,locks:this._locksDir},r)}getLockTargetUnlink(e,r){let n=this._watcher._poller.getIno(e,ft.UNLINK,tu.FILE);return this.getLockUnlink({ino:n,targetPath:e,events:t.FILE_EVENTS,locks:this._locksFile},r)}getLockTargetUnlinkDir(e,r){let n=this._watcher._poller.getIno(e,ft.UNLINK_DIR,tu.DIR);return this.getLockUnlink({ino:n,targetPath:e,events:t.DIR_EVENTS,locks:this._locksDir},r)}reset(){this._locksAdd=new Map,this._locksAddDir=new Map,this._locksUnlink=new Map,this._locksUnlinkDir=new Map,this._locksDir={add:this._locksAddDir,unlink:this._locksUnlinkDir},this._locksFile={add:this._locksAdd,unlink:this._locksUnlink}}};t_.DIR_EVENTS={add:ft.ADD_DIR,rename:ft.RENAME_DIR,unlink:ft.UNLINK_DIR};t_.FILE_EVENTS={add:ft.ADD,change:ft.CHANGE,rename:ft.RENAME,unlink:ft.UNLINK};var MX=t_;var TL=class{constructor(){this.map=new Map}clear(){this.map.clear()}delete(e,r){if(Lt.lang.isUndefined(r))return this.map.delete(e);if(this.map.has(e)){let n=this.map.get(e);if(Lt.lang.isSet(n)){let i=n.delete(r);return n.size||this.map.delete(e),i}else if(n===r)return this.map.delete(e),!0}return!1}find(e,r){if(this.map.has(e)){let n=this.map.get(e);if(Lt.lang.isSet(n))return Array.from(n).find(r);if(r(n))return n}}get(e){return this.map.get(e)}has(e,r){if(Lt.lang.isUndefined(r))return this.map.has(e);if(this.map.has(e)){let n=this.map.get(e);return Lt.lang.isSet(n)?n.has(r):n===r}return!1}set(e,r){if(this.map.has(e)){let n=this.map.get(e);Lt.lang.isSet(n)?n.add(r):n!==r&&this.map.set(e,new Set([n,r]))}else this.map.set(e,r);return this}},wL=TL;var SL=class{constructor(e){this.ino=e.ino<=Number.MAX_SAFE_INTEGER?Number(e.ino):e.ino,this.size=Number(e.size),this.atimeMs=Number(e.atimeMs),this.mtimeMs=Number(e.mtimeMs),this.ctimeMs=Number(e.ctimeMs),this.birthtimeMs=Number(e.birthtimeMs),this._isFile=e.isFile(),this._isDirectory=e.isDirectory(),this._isSymbolicLink=e.isSymbolicLink()}isFile(){return this._isFile}isDirectory(){return this._isDirectory}isSymbolicLink(){return this._isSymbolicLink}},FX=SL;var EL=class{constructor(){this.inos={},this.paths=new wL,this.stats=new Map}getIno(e,r,n){let i=this.inos[r];if(!i)return;let o=i[e];if(o&&!(n&&o[1]!==n))return o[0]}getStats(e){return this.stats.get(e)}async poll(e,r){let n=await Lt.fs.poll(e,r);if(!(!n||!(n.isFile()||n.isDirectory())))return new FX(n)}reset(){this.inos={},this.paths=new wL,this.stats=new Map}async update(e,r){let n=this.getStats(e),i=await this.poll(e,r);if(this.updateStats(e,i),!n&&i){if(i.isFile())return this.updateIno(e,ft.ADD,i),[ft.ADD];if(i.isDirectory())return this.updateIno(e,ft.ADD_DIR,i),[ft.ADD_DIR]}else if(n&&!i){if(n.isFile())return this.updateIno(e,ft.UNLINK,n),[ft.UNLINK];if(n.isDirectory())return this.updateIno(e,ft.UNLINK_DIR,n),[ft.UNLINK_DIR]}else if(n&&i){if(n.isFile()){if(i.isFile())return n.ino===i.ino&&!n.size&&!i.size?[]:(this.updateIno(e,ft.CHANGE,i),[ft.CHANGE]);if(i.isDirectory())return this.updateIno(e,ft.UNLINK,n),this.updateIno(e,ft.ADD_DIR,i),[ft.UNLINK,ft.ADD_DIR]}else if(n.isDirectory()){if(i.isFile())return this.updateIno(e,ft.UNLINK_DIR,n),this.updateIno(e,ft.ADD,i),[ft.UNLINK_DIR,ft.ADD];if(i.isDirectory())return n.ino===i.ino?[]:(this.updateIno(e,ft.UNLINK_DIR,n),this.updateIno(e,ft.ADD_DIR,i),[ft.UNLINK_DIR,ft.ADD_DIR])}}return[]}updateIno(e,r,n){let i=this.inos[r]=this.inos[r]||(this.inos[r]={}),o=n.isFile()?tu.FILE:tu.DIR;i[e]=[n.ino,o]}updateStats(e,r){if(r)this.paths.set(r.ino,e),this.stats.set(e,r);else{let n=this.stats.get(e)?.ino||-1;this.paths.delete(n,e),this.stats.delete(e)}}},CL=EL;var DL=class t extends bX{constructor(e,r,n){super(),this._closed=!1,this._ready=!1,this._closeAborter=new AbortController,this._closeSignal=this._closeAborter.signal,this.on(Uo.CLOSE,()=>this._closeAborter.abort()),this._closeWait=new Promise(i=>this.on(Uo.CLOSE,i)),this._readyWait=new Promise(i=>this.on(Uo.READY,i)),this._locker=new MX(this),this._roots=new Set,this._poller=new CL,this._pollers=new Set,this._subwatchers=new Set,this._watchers={},this._watchersLock=Promise.resolve(),this._watchersRestorable={},this.watch(e,r,n)}isClosed(){return this._closed}isIgnored(e,r){return!!r&&(Lt.lang.isFunction(r)?!!r(e):r.test(e))}isReady(){return this._ready}close(){return this._locker.reset(),this._poller.reset(),this._roots.clear(),this.watchersClose(),this.isClosed()?!1:(this._closed=!0,this.emit(Uo.CLOSE))}error(e){if(this.isClosed())return!1;let r=Lt.lang.castError(e);return this.emit(Uo.ERROR,r)}event(e,r,n){return this.isClosed()?!1:(this.emit(Uo.ALL,e,r,n),this.emit(e,r,n))}ready(){return this.isClosed()||this.isReady()?!1:(this._ready=!0,this.emit(Uo.READY))}pollerExists(e,r){for(let n of this._pollers)if(n.targetPath===e&&Lt.lang.isShallowEqual(n.options,r))return!0;return!1}subwatcherExists(e,r){for(let n of this._subwatchers)if(n.targetPath===e&&Lt.lang.isShallowEqual(n.options,r))return!0;return!1}watchersClose(e,r,n=!0){if(e){let i=this._watchers[e];if(i)for(let o of[...i])r&&o.filePath!==r||this.watcherClose(o);if(n)for(let o in this._watchers)Lt.fs.isSubPath(e,o)&&this.watchersClose(o,r,!1)}else for(let i in this._watchers)this.watchersClose(i,r,!1)}watchersLock(e){return this._watchersLock.then(()=>this._watchersLock=new Promise(async r=>{await e(),r()}))}watchersRestore(){delete this._watchersRestoreTimeout;let e=Object.entries(this._watchersRestorable);this._watchersRestorable={};for(let[r,n]of e)this.watchPath(r,n.options,n.handler)}async watcherAdd(e,r){let{folderPath:n}=e;(this._watchers[n]=this._watchers[n]||[]).push(e);let o=new LX(this,e,r);return await o.init(),o}watcherClose(e){e.watcher.close();let r=this._watchers[e.folderPath];if(r){let o=r.indexOf(e);r.splice(o,1),r.length||delete this._watchers[e.folderPath]}let n=e.filePath||e.folderPath;this._roots.has(n)&&(this._watchersRestorable[n]=e,this._watchersRestoreTimeout||(this._watchersRestoreTimeout=Lt.lang.defer(()=>this.watchersRestore())))}watcherExists(e,r,n,i){if(this._watchers[e]?.find(a=>a.handler===n&&(!a.filePath||a.filePath===i)&&a.options.ignore===r.ignore&&!!a.options.native==!!r.native&&(!r.recursive||a.options.recursive)))return!0;let s=Ln.dirname(e);for(let a=1;a<1/0;a++){if(this._watchers[s]?.find(p=>(a===1||p.options.recursive&&a<=(p.options.depth??up))&&p.handler===n&&(!p.filePath||p.filePath===i)&&p.options.ignore===r.ignore&&!!p.options.native==!!r.native&&(!r.recursive||p.options.recursive&&cp&&p.options.native!==!1)))return!0;if(!cp)break;let c=Ln.dirname(e);if(s===c)break;s=c}return!1}async watchDirectories(e,r,n,i,o){if(this.isClosed())return;e=Lt.lang.uniq(e).sort();let s;for(let a of e)if(!this.isIgnored(a,r.ignore)&&!this.watcherExists(a,r,n,i))try{let l=!r.recursive||cp&&r.native!==!1?r:{...r,recursive:!1},p={watcher:yt.watch(a,l),handler:n,options:r,folderPath:a,filePath:i},f=s=await this.watcherAdd(p,o);if(this._roots.has(i||a)){let g={...r,ignoreInitial:!0,recursive:!1},v=Ln.dirname(a),_=a;await this.watchDirectories([v],g,n,_,f)}}catch(l){this.error(l)}return s}async watchDirectory(e,r,n,i,o){if(!this.isClosed()&&!this.isIgnored(e,r.ignore)){if(!r.recursive||cp&&r.native!==!1)return this.watchersLock(()=>this.watchDirectories([e],r,n,i,o));{r={...r,recursive:!0};let s=r.depth??up,a=r.limit??J0,[l]=await Lt.fs.readdir(e,r.ignore,s,a,this._closeSignal,r.readdirMap);return this.watchersLock(async()=>{let c=await this.watchDirectories([e],r,n,i,o);if(l.length){let p=Lt.fs.getDepth(e);for(let f of l){let m=Lt.fs.getDepth(f),g=Math.max(0,s-(m-p)),v={...r,depth:g};await this.watchDirectories([f],v,n,i,o||c)}}})}}}async watchFileOnce(e,r,n){if(this.isClosed()||(r={...r,ignoreInitial:!1},this.subwatcherExists(e,r)))return;let i={targetPath:e,options:r},o=(c,p)=>{p===e&&(l(),n())},s=new t(o),a=()=>{this._subwatchers.add(i),this.on(Uo.CLOSE,l),s.watchFile(e,r,o)},l=()=>{this._subwatchers.delete(i),this.removeListener(Uo.CLOSE,l),s.close()};return a()}async watchFile(e,r,n){if(this.isClosed()||this.isIgnored(e,r.ignore))return;r={...r,recursive:!1};let i=Ln.dirname(e);return this.watchDirectory(i,r,n,e)}async watchPollingOnce(e,r,n){if(this.isClosed())return;let i=!1,o=new CL,s=await this.watchPolling(e,r,async()=>{i||!(await o.update(e,r.pollingTimeout)).length||i||(i=!0,s(),n())})}async watchPolling(e,r,n){if(this.isClosed())return Lt.lang.noop;if(this.pollerExists(e,r))return Lt.lang.noop;let i={...r,interval:r.pollingInterval??SX},o={targetPath:e,options:r},s=()=>{this._pollers.add(o),this.on(Uo.CLOSE,a),yt.watchFile(e,i,n)},a=()=>{this._pollers.delete(o),this.removeListener(Uo.CLOSE,a),yt.unwatchFile(e,n)};return Lt.lang.attempt(s),()=>Lt.lang.attempt(a)}async watchUnknownChild(e,r,n){if(this.isClosed())return;let i=()=>this.watchPath(e,r,n);return this.watchFileOnce(e,r,i)}async watchUnknownTarget(e,r,n){if(this.isClosed())return;let i=()=>this.watchPath(e,r,n);return this.watchPollingOnce(e,r,i)}async watchPaths(e,r,n){if(this.isClosed())return;if(e=Lt.lang.uniq(e).sort(),e.every((o,s)=>e.every((a,l)=>l===s||!Lt.fs.isSubPath(o,a))))await Promise.all(e.map(o=>this.watchPath(o,r,n)));else for(let o of e)await this.watchPath(o,r,n)}async watchPath(e,r,n){if(this.isClosed()||(e=Ln.resolve(e),this.isIgnored(e,r.ignore)))return;let i=await Lt.fs.poll(e,r.pollingTimeout);if(i){if(i.isFile())return this.watchFile(e,r,n);if(i.isDirectory())return this.watchDirectory(e,r,n);this.error(`"${e}" is not supported`)}else{let o=Ln.dirname(e);return(await Lt.fs.poll(o,r.pollingTimeout))?.isDirectory()?this.watchUnknownChild(e,r,n):this.watchUnknownTarget(e,r,n)}}async watch(e,r,n=Lt.lang.noop){if(Lt.lang.isFunction(e))return this.watch([],{},e);if(Lt.lang.isUndefined(e))return this.watch([],r,n);if(Lt.lang.isFunction(r))return this.watch(e,{},r);if(Lt.lang.isUndefined(r))return this.watch(e,{},n);if(this.isClosed())return;this.isReady()&&(r.readdirMap=void 0);let i=Lt.lang.castArray(e);i.forEach(o=>this._roots.add(o)),await this.watchPaths(i,r,n),!this.isClosed()&&(n!==Lt.lang.noop&&this.on(Uo.ALL,n),r.readdirMap=void 0,this.ready())}},UX=DL;xr();Oo();var Avt=["//     _______     ___    _    .-'''-. .---.  .---.   ____     __            ____    .-------. .-------.","//     /   __  \\  .'   |  | |  / _     \\|   |  |_ _|   \\   \\   /  /         .'  __ `. \\  _(`)_ \\\\  _(`)_ \\","//    | ,_/  \\__) |   .'  | | (`' )/`--'|   |  ( ' )    \\  _. /  '         /   '  \\  \\| (_ o._)|| (_ o._)|","//  ,-./  )       .'  '_  | |(_ o _).   |   '-(_{;}_)    _( )_ .'          |___|  /  ||  (_,_) /|  (_,_) /","//  \\  '_ '`)     '   ( \\.-.| (_,_). '. |      (_,_) ___(_ o _)'              _.-`   ||   '-.-' |   '-.-'","//   > (_)  )  __ ' (`. _` /|.---.  \\  :| _ _--.   ||   |(_,_)'            .'   _    ||   |     |   |","//  (  .  .-'_/  )| (_ (_) _)\\    `-'  ||( ' ) |   ||   `-'  /             |  _( )_  ||   |     |   |","//   `-'`-'     /  \\ /  . \\ / \\       / (_{;}_)|   | \\      /              \\ (_ o _) //   )     /   )","//     `._____.'    ``-'`-''   `-...-'  '(_,_) '---'  `-..-'                '.(_,_).' `---'     `---'"].join(`
`),BX=["// \u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588    \u2588\u2584     \u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588    \u2584\u2588    \u2588\u2584    \u2584\u2588\u2588   \u2584           \u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588    \u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584    \u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584","// \u2588\u2588\u2588    \u2588\u2588\u2588 \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588   \u2588\u2588\u2584        \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2588\u2588","// \u2588\u2588\u2588    \u2588\u2580  \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2580    \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588\u2584\u2584\u2584\u2588\u2588\u2588        \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2588\u2588","// \u2588\u2588\u2588        \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588         \u2584\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2588\u2588\u2588\u2584\u2584 \u2580\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2588        \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2588\u2588","// \u2588\u2588\u2588        \u2588\u2588\u2588    \u2588\u2588\u2588 \u2580\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 \u2580\u2580\u2588\u2588\u2588\u2580\u2580\u2580\u2580\u2588\u2588\u2588\u2580  \u2584\u2588\u2588   \u2588\u2588\u2588      \u2580\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 \u2580\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2580  \u2580\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2580","// \u2588\u2588\u2588    \u2588\u2584  \u2588\u2588\u2588    \u2588\u2588\u2588          \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588   \u2588\u2588\u2588        \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588          \u2588\u2588\u2588","// \u2588\u2588\u2588    \u2588\u2588\u2588 \u2588\u2588\u2588    \u2588\u2588\u2588    \u2584\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588   \u2588\u2588\u2588        \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588          \u2588\u2588\u2588","// \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2580  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2580   \u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2580    \u2588\u2588\u2588    \u2588\u2580     \u2580\u2588\u2588\u2588\u2588\u2588\u2580         \u2588\u2588\u2588    \u2588\u2580   \u2584\u2588\u2588\u2588\u2588\u2580       \u2584\u2588\u2588\u2588\u2588\u2580"].join(`
`),Ovt=["//  \u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588    \u2588\u2584     \u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588    \u2584\u2588    \u2588\u2584    \u2584\u2588\u2588   \u2584      \u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588     \u2588\u2588\u2588     \u2588\u2588\u2588    \u2588\u2584  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584   \u2584\u2588   \u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2584","// \u2588\u2588\u2588    \u2588\u2588\u2588 \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588   \u2588\u2588\u2584   \u2588\u2588\u2588    \u2588\u2588\u2588 \u2580\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588\u2588\u2588    \u2588\u2588\u2588 \u2588\u2588\u2588   \u2580\u2588\u2588\u2588 \u2588\u2588\u2588  \u2588\u2588\u2588    \u2588\u2588\u2588","// \u2588\u2588\u2588    \u2588\u2580  \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2580    \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588\u2584\u2584\u2584\u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2580     \u2580\u2588\u2588\u2588\u2580\u2580\u2588\u2588 \u2588\u2588\u2588    \u2588\u2588\u2588 \u2588\u2588\u2588    \u2588\u2588\u2588 \u2588\u2588\u2588\u258C \u2588\u2588\u2588    \u2588\u2588\u2588","// \u2588\u2588\u2588        \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588         \u2584\u2588\u2588\u2588\u2584\u2584\u2584\u2584\u2588\u2588\u2588\u2584\u2584 \u2580\u2580\u2580\u2580\u2580\u2580\u2588\u2588\u2588   \u2588\u2588\u2588            \u2588\u2588\u2588   \u2580 \u2588\u2588\u2588    \u2588\u2588\u2588 \u2588\u2588\u2588    \u2588\u2588\u2588 \u2588\u2588\u2588\u258C \u2588\u2588\u2588    \u2588\u2588\u2588","// \u2588\u2588\u2588        \u2588\u2588\u2588    \u2588\u2588\u2588 \u2580\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 \u2580\u2580\u2588\u2588\u2588\u2580\u2580\u2580\u2580\u2588\u2588\u2588\u2580  \u2584\u2588\u2588   \u2588\u2588\u2588 \u2580\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588     \u2588\u2588\u2588     \u2588\u2588\u2588    \u2588\u2588\u2588 \u2588\u2588\u2588    \u2588\u2588\u2588 \u2588\u2588\u2588\u258C \u2588\u2588\u2588    \u2588\u2588\u2588","// \u2588\u2588\u2588    \u2588\u2584  \u2588\u2588\u2588    \u2588\u2588\u2588          \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588   \u2588\u2588\u2588          \u2588\u2588\u2588     \u2588\u2588\u2588     \u2588\u2588\u2588    \u2588\u2588\u2588 \u2588\u2588\u2588    \u2588\u2588\u2588 \u2588\u2588\u2588  \u2588\u2588\u2588    \u2588\u2588\u2588","// \u2588\u2588\u2588    \u2588\u2588\u2588 \u2588\u2588\u2588    \u2588\u2588\u2588    \u2584\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588    \u2588\u2588\u2588   \u2588\u2588\u2588   \u2588\u2588\u2588    \u2584\u2588    \u2588\u2588\u2588     \u2588\u2588\u2588     \u2588\u2588\u2588    \u2588\u2588\u2588 \u2588\u2588\u2588   \u2584\u2588\u2588\u2588 \u2588\u2588\u2588  \u2588\u2588\u2588    \u2588\u2588\u2588","// \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2580  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2580   \u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2580    \u2588\u2588\u2588    \u2588\u2580     \u2580\u2588\u2588\u2588\u2588\u2588\u2580   \u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2580     \u2584\u2588\u2588\u2588\u2588\u2580   \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2580  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2580  \u2588\u2580    \u2580\u2588\u2588\u2588\u2588\u2588\u2588\u2580"].join(`
`);async function WX(t){let e=window.require("esbuild"),r=yr(t.root,"dist");return e.context({entryPoints:t.entrypoints,outbase:t.root,bundle:!0,format:"esm",banner:{js:BX},jsx:"transform",jsxSideEffects:!1,target:["deno1"],loader:{".png":"dataurl",".jpg":"dataurl",".svg":"dataurl"},outdir:r,external:["react","mobx","mobx-react-lite"]})}var TE=class{constructor(e,r,n){this.library=e;this.absPath=r;this.relPath=n;this.matchesSearch=e=>{if(e==="")return!0;let r=e.toLowerCase();return ai(this.relPath).toLowerCase().includes(r)};this.errors=[];this.addError=(e,r=null)=>(this.errors.push({title:e,details:r}),{type:"FAILURE"});this.codeJS=null;this.scripts=new Un({table:()=>this.st.db.cushy_scripts,where:()=>({path:this.relPath})});this.liteGraphJSON=null;this.promptJSON=null;this.png=null;this.successfullLoadStrategies=null;this.isLoading=!1;this.hasBeenLoadedAtLeastOnce=!1;this.load=async e=>{if(this.isLoading)return{type:"cached"};if(this.isLoading=!0,this.hasBeenLoadedAtLeastOnce&&!e?.force)return{type:"cached"};let r=null;for(let n of this.strategies){let i=await this.loadWithStrategy(n);if(i.type==="SUCCESS"){r=i.script,this.script0=i.script,this.successfullLoadStrategies=n;break}}return this.hasBeenLoadedAtLeastOnce=!0,this.isLoading=!1,r==null?(console.log("[\u{1F534}] LibFile: LOAD FAILURE !"),{type:"failed"}):{type:"newScript",script:r}};this.loadWithStrategy=async e=>{if(e==="asCushyStudioAction")return this.load_asTypescriptFile();if(e==="asComfyUIPrompt")return this.load_asComfyUIPromptJSON();if(e==="asComfyUIWorkflow")return this.load_asComfyUIWorkflowJSON();if(e==="asComfyUIGeneratedPng")return this.load_asComfyUIGeneratedPng();if(e==="asA1111PngGenerated")return this.png==null&&(this.png=this.absPath),this.addError("\u274C can not import file as Automaric1111 image",{reason:"not supported yet"}),{type:"FAILURE"};throw gr(e),new Error(`[\u{1F494}] TOOL: unknown strategy ${e}`)};this.load_asTypescriptFile=async()=>{try{let r=await(await this._esbuildContext).rebuild(),n=ao.join(this.folderAbs,"dist",this.deckRelativeFilePath),i=ao.extname(n),o=n.slice(0,-i.length)+".js";return this.codeJS=Pn(o,"utf-8"),{type:"SUCCESS",script:this.UPSERT_SCRIPT(this.codeJS)}}catch(e){return console.error(`[\u{1F534}] failed to load ${this.relPath}`,e),this.addError("transpile error in load_asCushyStudioAction",e)}};this.load_asComfyUIPromptJSON=async()=>{try{let e=JSON.parse(Pn(this.absPath,"utf-8")),r=ao.basename(this.absPath),n=ao.dirname(this.absPath),i=r;return this.codeJS=this.st.importer.convertPromptToCode(e,{title:i,author:n,preserveId:!0,autoUI:!1}),this.promptJSON=e,{type:"SUCCESS",script:this.UPSERT_SCRIPT(this.codeJS)}}catch(e){return this.addError("\u274C [load_asComfyUIPrompt] crash",e)}};this.load_asComfyUIWorkflowJSON=()=>{let e=Pn(this.absPath,"utf-8");return this.importWorkflowFromStr(e)};this.load_asComfyUIGeneratedPng=async()=>{console.log("\u{1F7E2} found ",this.absPath),this.png=this.absPath;let e=lL(Pn(this.absPath));if(e==null)return this.addError("\u274C [load_asComfyUIGeneratedPng] no metadata in png",null);if(!e.success)return this.addError("\u274C [load_asComfyUIGeneratedPng] metadata extraction failed",e.value);let r=e.value,n=r.workflow;return n==null?this.addError("\u274C [load_asComfyUIGeneratedPng] no workflow in metadata",r):await this.importWorkflowFromStr(n,{illustration:this.relPath})};this.importWorkflowFromStr=async(e,r={})=>{let n;try{n=JSON.parse(e)}catch(o){return this.addError("\u274C3. workflow is not valid json",o)}let i;try{i=vE(this.st.schema,n)}catch(o){return console.error(o),this.addError("\u274C failed to import workflow: cannot convert LiteGraph To Prompt",o)}this.liteGraphJSON=n,this.promptJSON=i;try{return this.codeJS=this.st.importer.convertPromptToCode(i,{illustration:r.illustration,author:r.author,title:r.name??ao.basename(this.absPath),preserveId:!0,autoUI:!0}),{type:"SUCCESS",script:this.UPSERT_SCRIPT(this.codeJS)}}catch(o){return this.addError("\u274C failed to import workflow: cannot convert LiteGraph To Prompt",o)}};this.UPSERT_SCRIPT=e=>(console.groupCollapsed(`[\u{1F459}] script extracted for ${this.relPath}`),console.log(e),console.groupEnd(),this.st.db.cushy_scripts.upsert({id:vq(this.relPath),code:e,path:this.relPath}));this.st=e.st,this.strategies=this.findLoadStrategies(),Ce(this,{_esbuildContext:!1})}get baseName(){return ai(this.relPath)}get folderAbs(){return ur($v(this.absPath))}get score(){return 0}get deckRelativeFilePath(){return df(this.folderAbs,this.absPath)}findLoadStrategies(){return this.absPath.endsWith(".ts")?["asCushyStudioAction"]:this.absPath.endsWith(".tsx")?["asCushyStudioAction"]:this.absPath.endsWith(".js")?["asCushyStudioAction"]:this.absPath.endsWith(".json")?["asComfyUIWorkflow","asComfyUIPrompt"]:this.absPath.endsWith(".png")?["asComfyUIGeneratedPng","asA1111PngGenerated"]:["asCushyStudioAction","asComfyUIWorkflow","asComfyUIPrompt","asComfyUIGeneratedPng","asA1111PngGenerated"]}get _esbuildContext(){if(!this.relPath.endsWith(".ts")&&!this.relPath.endsWith(".tsx"))throw new Error("esbuild can only work on .ts or .tsx files");let e=WX({entrypoints:[this.absPath],root:this.folderAbs});return Object.defineProperty(this,"_esbuildContext",{value:e}),e}};var wE=class{constructor(e){this.st=e;this.query="";this.showDescription=!0;this.showDrafts=!0;this.showFavorites=!0;this.imageSize="11rem";this.selectionCursor=0;this.appsC=new Un({where:()=>({id:{$like:`%${this.query}%`}}),table:()=>this.st.db.cushy_apps,options:{limit:100}});this.fileIndex=new Map;this.getFile=e=>{let r=this.fileIndex.get(e);if(r)return r;let n=ur(ao.join(this.st.rootPath,e)),i=new TE(this,n,e);return this.fileIndex.set(e,i),i};this.getFileOrThrow=e=>{let r=this.fileIndex.get(e);if(r==null)throw new Error(`card not found: ${e}`);return r};this.isExpanded=e=>this.expanded.has(e);this.expand=e=>{this.expanded.add(e)};this.collapse=e=>{this.expanded.delete(e);let r=this.st.typecheckingConfig,i=r.value.include.filter(o=>!o.startsWith(`library/${e}`));r.update({include:i})};let i=e.typecheckingConfig.value.include.filter(s=>s.startsWith("library/")&&s.endsWith("/**/*")).map(s=>s.slice(8,-5));this.expanded=new Set(i);let o=this.st.hotReloadPersistentCache;o.watcher&&o.watcher.close(),this.watcher=o.watcher=new UX("library",{recursive:!0,depth:20,ignore:s=>{let a=ao.basename(s);return Tq(a)}}),this.watcher.on("all",(s,a,l)=>{if(s==="change"){let c=ao.relative(this.st.rootPath,a);if(console.log(`[\u{1F441}\uFE0F] changed: ${c}`),!(c.startsWith("library/")||c.startsWith("library\\")))return;let m=e.currentDraft?.file;if(m==null)return console.log("[\u{1F441}\uFE0F] \u274C no current app");console.log(`[\u{1F441}\uFE0F] reloading: ${m.relPath}`);let g=m.load({force:!0}).then(v=>{v.type==="newScript"&&v.script.extractApps()})}}),Ce(this,{getFile:dd})}get appsFiltered(){return this.appsC.items}get appsFilteredBuiltIn(){return this.appsFiltered.filter(e=>e.isBuiltIn)}get appsFilteredLocal(){return this.appsFiltered.filter(e=>e.isLocal)}get allFavorites(){return this.st.favoriteApps}get expandedPaths(){return[...this.expanded]}};var jX=t=>{if(Ed.isAbsolute(t))throw new Error(`card path (${t}) must be relative`);if(!(t.startsWith("library/")||t.startsWith("library\\")))throw new Error(`card path (${t}) must start with 'library/'`);if(!mE(t))throw new Error(`card path (${t}) must end with ${oL.join(" or ")}`);return t};var SE=class{constructor(e){this.p=e;this.map=e=>this.items.map(e);Ce(this)}get items(){let e=this.p.remoteTable();return(this.p.cache?.()??!1)||Qu(e.liveEntities.size),e.find(this.p.remoteQuery())}};var EE=class{constructor(e){this.st=e;this.themes=["light","dark","cupcake","valentine","wireframe","aqua","forest"];Ce(this)}toggle(){this.theme=this.theme==="dark"?"light":"dark"}get theme(){return this.st.configFile.value.theme??"dark"}set theme(e){this.st.configFile.update({theme:e})}};xr();var zX=ie(NL(),1),CE=class t{constructor(){this.tags=[];this.parseRow=e=>({key:e[0],value:e[1]});if(t._instance)throw new Error("UserTags is a singleton");t._instance=this;let e=Pn("completions/user.def","utf-8"),r=(0,zX.parse)(e,{delimiter:"|",header:!1});r.errors.length>0&&console.warn(r.errors);let i=r.data.map(this.parseRow);this.tags=i,console.log(`[\u{1F3F7}\uFE0F] UserTags: ${this.tags.length} tags parsed`)}static{this.build=()=>(t._instance||(t._instance=new t),t._instance)}autocomplete(){}};var BQ=ie(TJ(),1);xr();var ZL=ie(gQ(),1);var yQ=t=>typeof t=="object"&&t!=null&&"$like"in t;var zn=class{constructor(e,r,n,i,o){this.db=e;this.name=r;this.emoji=n;this.InstanceClass=i;this.opts=o;this.liveEntities=new Map;this.infos=bq[this.name];this.getOrCreateInstanceForExistingData=e=>{let r=e.id,n=this.liveEntities.get(r);return n||this._createInstance(e)};this.stmt_first=this.db.prepareGet0(this.infos,`select * from ${this.name} order by createdAt asc limit 1`);this.first=()=>{let e=this.stmt_first();return e==null?null:this.getOrCreateInstanceForExistingData(e)};this.firstOrCrash=()=>{let e=this.first();if(e==null)throw new Error("collection is empty");return e};this.stmt_last=this.db.prepareGet0(this.infos,`select * from ${this.name} order by createdAt desc limit 1`);this.last=()=>{let e=this.stmt_last();return Qu(this.liveEntities.size),e==null?null:this.getOrCreateInstanceForExistingData(e)};this.lastOrCrash=()=>{let e=this.last();if(e==null)throw new Error("collection is empty");return e};this.stmt_lastN=this.db.prepareAll(this.infos,`select * from ${this.name} order by createdAt desc limit ?`);this.getLastN=e=>(Qu(this.liveEntities.size),this.stmt_lastN(e).map(n=>this.getOrCreateInstanceForExistingData(n)));this.stmt_getByID=this.db.prepareGet(this.infos,`select * from ${this.name} where id = ?`);this.get=e=>{if(e==null)return null;let r=this.liveEntities.get(e);if(r)return r;let n=this.stmt_getByID(e);return n==null?null:this._createInstance(n)};this.getOrThrow=e=>{if(e==null)throw new Error("ERR:  getOrThrow called without id");let r=this.get(e);if(r==null)throw new Error(`ERR: ${this.name}(${e}) not found`);return r};this.getOrCreate=(e,r)=>{let n=this.get(e);if(n==null){let i=r();if(i.id&&i.id!==e)throw new Error("GET OR CREATE INVARIANT VIOLATION");return i.id==null&&(i.id=e),this.create(i)}return n};this.stmt_deleteByID=this.db.prepareDelete(`delete from ${this.name} where id = ?`);this.zz_deleted=!1;this.delete=e=>{console.log("[\u{1F459}] "),this.stmt_deleteByID(e),this.zz_deleted=!0,this.liveEntities.delete(e)};this.updateAll=e=>{let r=`update ${this.name} set ${Object.keys(e).map(i=>`${i} = @${i}`).join(", ")}`;this.db.db.prepare(r).run(e);for(let i of this.liveEntities.values())i.update_LiveOnly(e)};this.findAll=()=>this.db.db.prepare(`select * from ${this.name}`).all().map(i=>this.infos.hydrateJSONFields(i)).map(i=>this.getOrCreateInstanceForExistingData(i));this.find=(e,r={})=>{let n=[],i={};Object.entries(e).forEach(([c,p])=>{if(yQ(p))if("$like"in p)i[c]=p.$like,n.push(`${c} like @${c}`);else throw new Error("[\u{1F459}] \u{1F534}");else i[c]=p,n.push(`${c} = @${c}`)});let o=`select * from ${this.name}`;return n.length>0&&(o+=` where ${n.join(" and ")}`),r.limit&&(o+=` limit ${r.limit}`),this.db.db.prepare(o).all(i).map(c=>this.infos.hydrateJSONFields(c)).map(c=>this.getOrCreateInstanceForExistingData(c))};this.insert=e=>{if(Array.isArray(e))throw new Error("insert does not support arrays");if(typeof e!="object")throw new Error("insert does not support non-objects");let r=this.infos,n=Object.keys(e),i=[`insert into ${r.sql_name}`,`(${n.map(o=>o).join(", ")})`,"values",`(${n.map(o=>`@${o}`).join(", ")})`,"returning *"].join(" ");try{let o=this.db.db.prepare(i),s=Object.fromEntries(Object.entries(e).map(([l,c])=>Array.isArray(c)?[l,JSON.stringify(c)]:typeof c=="object"&&c!=null?[l,JSON.stringify(c)??"null"]:[l,c])),a=o.get(s);return this.infos.hydrateJSONFields(a),this._createInstance(a)}catch(o){throw console.log(i),o}};this.upsert=e=>{let r=e.id,n=this.get(r);return n?(n.update(e),n):this.create(e)};this.create=e=>{if(this.opts?.singleton&&this.size!==0)throw new Error("ERR: singleton already exists");let r=e.id??vt();e.id==null&&(e.id=r);let n=Date.now();e.createdAt=n,e.updatedAt=n;let i=Object.fromEntries(Object.entries(e).map(([s,a])=>Array.isArray(a)?[s,JSON.stringify(a)]:typeof a=="object"&&a!=null?[s,JSON.stringify(a)??"null"]:[s,a]));this.insert(i);let o=this._createInstance(e);return o.onCreate?.(e),o};this._createInstance=e=>{let r=new this.Ktor,n=this.infos.schema;if(!ZL.Value.Check(n,e)){let o=[...ZL.Value.Errors(n,e)];console.log("\u274C",this.name);for(let s of o)console.log("\u274C",JSON.stringify(s))}return r.init(this,e),this.liveEntities.set(e.id,r),r};this.db._tables.push(this);let s=class{get id(){return this.data.id}get createdAt(){return this.data.createdAt}get updatedAt(){return this.data.updatedAt}get tableName(){return this.table.name}update_LiveOnly(a){Object.assign(this.data,a)}update(a){if(Array.isArray(a))throw new Error("insert does not support arrays");if(typeof a!="object")throw new Error("insert does not support non-objects");if(Object.keys(a).every(v=>this.data[v]===a[v]))return;let c=this.onUpdate?JSON.parse(JSON.stringify(this.data)):void 0,p=this.table.infos,f=Object.keys(a),m=[`update ${p.sql_name}`,"set",f.map(v=>`${v} = @${v}`).join(", "),"where id = @id","returning *"].join(" "),g=Date.now();try{let v=this.db.db.prepare(m),_=Object.fromEntries(Object.entries(a).map(([S,T])=>Array.isArray(T)?[S,JSON.stringify(T)]:typeof T=="object"&&T!=null?[S,JSON.stringify(T)??"null"]:[S,T]));_.updatedAt=g,_.id=this.id,v.get(_),Object.assign(this.data,a),this.data.updatedAt=g,this.onUpdate?.(c,this.data)}catch(v){throw console.log(m),v}}clone(a){let l=Object.assign({},yi(this.data),{id:vt(),...a});return this.table.create(l)}delete(){this.table.delete(this.data.id)}toJSON(){return this.data}init(a,l){this.db=a.db,this.st=a.db.st,this.table=a,this.data=l,this.onHydrate?.(l),this.onUpdate?.(void 0,l),Ce(this)}log(...a){console.log(`[${this.table.emoji}] ${this.table.name}:`,...a)}};Ce(this,{Ktor:!1,_createInstance:dd,get:dd}),Wz(i,s),this.Ktor=i}get size(){return Qu(this.liveEntities.size),this.db._getCount(this.name)}get Last10(){return Qu(this.liveEntities.size),this.stmt_lastN(10).map(r=>this.getOrCreateInstanceForExistingData(r))}get values(){return 0}};var ei=(t,e)=>`--sql
        create table ${t} (
            id string primary key not null default (hex(randomblob(16))),
            createdAt integer not null default now,
            updatedAt integer not null default now,
            ${e.join(`,
`)}
        );`;var vQ=()=>{let t=new Set;for(let e of e5){if(t.has(e.id))throw new Error(`duplicate migration id: ${e.id}`);t.add(e.id)}},e5=[{id:"1b5eb947",name:"create users table",up:`--sql
            create table users (
                id           integer primary key,
                firstName    text    not null,
                lastName     text    not null,
                email        text    not null unique,
                passwordHash text    not null
            );`},{id:"UA2XmUXnK9",name:"create graph table",up:ei("graph",["comfyPromptJSON json not null"])},{id:"lRtCJxvumg",name:"create misc tables",up:[ei("draft",["title          text","appPath        text                           not null","appParams      json                           not null"]),ei("project",["name           text","rootGraphID    text    references graph(id)   not null","currentApp     text","currentDraftID text    references draft(id)"]),ei("step",["name           text","appPath        text                           not null","formResult     json                           not null","formSerial     json                           not null","outputGraphID  text     references graph(id)  not null","status         text                           not null"]),ei("comfy_prompt",["stepID         text     references step(id)   not null","graphID        text     references graph(id)  not null","executed       int                            not null default 0","error          json"]),ei("comfy_schema",["spec           json                             not null","embeddings     json                             not null"])]},{id:"OHwk_shY_c",name:"create misc tables",up:[ei("media_text",["kind text not null","content text not null","stepID text references step(id)"]),ei("media_video",["absPath text"]),ei("media_image",["base64URL text"]),ei("media_3d_displacement",["width     int","height    int","image     text","depthMap  text","normalMap text"])]},{id:"whR8E1Uh05",name:"fix image",up:["alter table media_image add column width int","alter table media_image add column height int","alter table media_image add column star int","alter table media_image add column infos json"]},{id:"PONTSFSpA_",name:"fix image2",up:["alter table media_image drop column base64URL"]},{id:"R1lQ0YLIqO",name:"add promptID to image",up:["alter table media_image add column promptID text references comfy_prompt(id)","alter table media_image add column stepID   text references step(id)"]},{id:"x8cqAoMEvu",name:"add runtime error",up:[ei("runtime_error",["message text not null","infos json not null","promptID text references comfy_prompt(id)","graphID text references graph(id)"])]},{id:"0D1XHSH0Dk",name:"add runtime error",up:["alter table runtime_error add column stepID text references step(id)"]},{id:"oOzhdq3rM2",name:"add step and prompt to video",up:["alter table media_video add column stepID text references step(id)","alter table media_video add column promptID text references comfy_prompt(id)"]},{id:"isTECbxy71",name:"add step and prompt to video",up:["alter table media_3d_displacement add column stepID text references step(id)","alter table media_3d_displacement add column promptID text references comfy_prompt(id)"]},{id:"XXDvvMf4Eu",name:"add step and graph",up:["alter table graph add column stepID text references step(id)"]},{id:"4cjq8_0hGP",name:"add gaussian splat support",up:[ei("media_splat",["stepID text references step(id)"])]},{id:"-apJ3x9uB4",name:"add gaussian splat support",up:["alter table media_splat add column url text not null"]},{id:"kIoMnNKcix",name:"add non nullable title field to MediaText",up:["alter table media_text add column title text not null default ''"]},{id:"5Ka1ddK8ma",name:"add filePath and url to MediaVideo",up:["alter table media_video add column filePath text","alter table media_video add column url text not null"]},{id:"sS4mA__Ofg",name:"add isOpened to drafts",up:["alter table draft add column isOpened int not null default 1"]},{id:"M2uSmJqhbF",name:"new runtime datastore",up:[ei("custom_data",["data json not null default '{}'"])]},{id:"9e3b92c6-8a71-4a51-af90-03b2f0d48ec8",name:"new runtime datastore",up:["alter table custom_data rename column data to json"]},{id:"UI2LFUl9Lq",name:"step.isExpanded",up:["alter table step add column isExpanded int not null default 1"]},{id:"V_WM75Ppn3",name:"prompt.status",up:["alter table comfy_prompt add column status text"]},{id:"JIf9D18H7R",name:"create cushy_script table",up:[ei("cushy_script",["path text not null","code text not null"])]},{id:"hG9xjiZn4I",name:"create cushy_app table",up:[ei("cushy_app",["guid text unique","scripID text references graph(id) not null"])]},{id:"kn8M4lrSlB",name:"create cushy_app table",up:["alter table cushy_app rename column scripID to scriptID"]},{id:"H2wy77-Rvx",name:"create cushy_app table",up:["alter table cushy_app drop column scriptID","alter table cushy_app add column scriptID text references cushy_script(id) not null"]},{id:"baWamSPnwf",name:"create drafts now based on cushy_app table",up:["alter table draft drop column appPath","alter table draft add column appID text references cushy_app(id) not null"]},{id:"D9nJFXN2t0",name:"idem for step",up:["alter table step drop column appPath","alter table step add column appID text references cushy_app(id) not null"]},{id:"ZVMqRs0ogh",name:"add user table",up:[ei("auth",["expires_at text","expires_in text","provider_token text","refresh_token text","token_type text","access_token text"]),"alter table cushy_app add column name text","alter table cushy_app add column illustration text"]},{id:"-U4fPEdWdv",name:"provider_refresh_token",up:["alter table auth add column provider_refresh_token text"]},{id:"3ZOHzNx4CL",name:"auth.expires_at & auth.expires_in are numbers",up:["alter table auth drop column expires_at","alter table auth drop column expires_in","alter table auth add column expires_at int ","alter table auth add column expires_in int "]},{id:"SKEO1Da-aa",name:"add app description and tags",up:["alter table cushy_app add column description text","alter table cushy_app add column tags text"]},{id:"W4Srl6gMMD",name:"add app description and tags",up:[ei("tree_infos",["isExpanded int"])]},{id:"8OUHASEkDa",name:"add app description and tags",up:["drop table tree_infos",ei("tree_entry",["isExpanded int"])]},{id:"TsqhCRBCgq",name:"switch comfy_host to proper table",up:[ei("comfy_host",["name text not null default (hex(randomblob(16)))",'hostname text not null default "localhost"',"port int not null default 8188","useHttps int not null default 0","isLocal int not null default 0","localPath text"]),"alter table comfy_schema add column hostID text references comfy_host(id)"]},{id:"ssH7sUSqD8",name:"rename comfy_host to hosts",up:["alter table comfy_host rename to host"]},{id:"ikhG_dD58q",name:"tweak host table",up:["alter table host rename column localPath to absolutePathToComfyUI","alter table host add column absolutPathToDownloadModelsTo text"]},{id:"F4j-vbWNqe",name:"more host table tweaks",up:["alter table host add column isVirtual int not null default 0"]},{id:"dCGQQaHT8F",name:"misc",up:["alter table cushy_app add column publishedID text","alter table cushy_app add column publishedAs text","alter table cushy_script add column lastEvaluatedAt text","alter table cushy_script add column lastSuccessfulEvaluation text"]},{id:"XemPQB9Biq",name:"misc",up:["alter table cushy_app add column publishedVersion int","alter table cushy_app add column publishedAt text"]},{id:"qDXgzrF5GN",name:"misc",up:["alter table cushy_app    rename column publishedAs to publishedAsUserID","alter table cushy_app    drop column publishedID","alter table cushy_app    drop column publishedVersion","alter table cushy_app    drop column publishedAt","alter table cushy_script drop column lastEvaluatedAt","alter table cushy_script drop column lastSuccessfulEvaluation","alter table cushy_app    add column publishedAt INT","alter table cushy_script add column lastEvaluatedAt INT","alter table cushy_script add column lastSuccessfulEvaluationAt INT"]},{id:"aqBUfUJihT",name:"misc",up:["alter table media_image add column promptNodeID text"]},{id:"9tHBrHFrCu",name:"misc",up:["alter table graph add column metadata json"]},{id:"gz_W2ilKV1",name:"misc",up:["alter table graph drop column metadata","alter table graph add column metadata json default '{}'"]},{id:"yACVuOp3-B",name:"misc",up:["alter table graph drop column metadata","alter table graph add column metadata json not null default '{}'"]}];var _Q=t=>{let e=t.db,r=e.prepare("select * from migrations").all();for(let n of e5)r.find(o=>o.id===n.id)||(t.log("\u{1F535} MUST RUN |",n.name),e.transaction(()=>{let o=Date.now();t.log("\u{1F535}",n.id,"running");let s=Array.isArray(n.up)?n.up:[n.up];for(let l of s)t.log(e.prepare(l).run());t.log("\u{1F535}",n.id,"saving that it has run");let a=e.prepare("insert into migrations (id, createdAt, name, sql) values (@id, @createdAt, @name, @sql)");t.log(a.run({id:n.id,name:n.name,createdAt:o,sql:s.join(`;
`)}))})())};xr();var bQ=(t,e)=>t.prepare(`pragma table_info(${e})`).all();var xQ=(t,e)=>t.prepare(`pragma foreign_key_list(${e})`).all();var TQ=ie(pL(),1),wQ=t=>{let e=t.db,r="";r+=`import * as T from './TYPES_json'
`,r+=`import { Type } from '@sinclair/typebox'
`,r+=`
`;let n="",o=e.prepare("select name from sqlite_master where type='table'").all();t.log(`found tables ${o.map(a=>a.name)}`);let s=`
`;s+=`declare type TableNameInDB =
`;for(let a of o)s+=`    | '${a.name}'
`;s+=`
`,n+=s;for(let a of o){let l=l_(a.name),c=xQ(e,a.name),p=bQ(e,a.name),f=`
`,m=`
`,g=`
`;n+=`declare type ${l}ID = Branded<string, { ${l}ID: true }>
`,f+=`export const as${l}ID = (s: string): ${l}ID => s as any
`,m=`export const ${l}Schema = Type.Object({
`,f+=`export type ${l}T = {
`,g+=`export const ${l}Fields = {
`;for(let v of p){let _=`/** @default: ${JSON.stringify(v.dflt_value)??"null"}, sqlType: ${v.type} */`,S=(()=>{let E=c.find(I=>I.from===v.name);if(E!=null)return`${l_(E.table)}ID`;if(v.name==="id")return`${l}ID`;if(v.name==="appPath")return"AppPath";if(v.name==="status")return"T.StatusT";if(v.type==="INT"||v.type==="INTEGER")return"number";if(v.type==="TEXT"||v.type==="string")return"string";if(v.type==="json")return`T.${l}_${v.name}`;throw new Error(`unknown type '${v.type}' in ${l}.${v.name}`)})(),T=(()=>{if(c.find(E=>E.from===v.name))return"Type.String()";if(v.type==="INT"||v.type==="INTEGER")return"Type.Number()";if(v.type==="TEXT"||v.type==="string")return"Type.String()";if(v.type==="json")return`T.${l}_${v.name}_Schema`;throw new Error(`unknown type '${v.type}' in ${l}.${v.name}`)})();m+=v.notnull?`    ${v.name}: ${T},
`:`    ${v.name}: Type.Optional(T.Nullable(${T})),
`;let w=v.notnull?":":"?:";f+=`    ${_}
`,f+=`    ${v.name}${w} ${v.notnull?S:`Maybe<${S}>`};

`,g+=`    ${v.name}: ${TQ.default.stringify(v)},
`}f+="}",m+="},{ additionalProperties: false })",g+=`}
`,r+=f+`
`,r+=m+`
`,r+=g+`
`}r+=`
export const schemas = {
`;for(let a of o)r+=`    ${a.name}: new T.TableInfo(
`,r+=`        '${a.name}',
`,r+=`        '${l_(a.name)}',
`,r+=`        ${l_(a.name)}Fields,
`,r+=`        ${l_(a.name)}Schema,
`,r+=`    ),
`;r+="}",en("src/db/TYPES.gen.ts",r),en("src/db/TYPES.d.ts",n)},l_=t=>{let e=t.replace(/_(.)/g,(r,n)=>n.toUpperCase());return e=e[0].toUpperCase()+e.slice(1),e};var SQ=t=>{let e=`--sql
        create table if not exists migrations (
            id         text    primary key,
            name       text    not null,
            createdAt integer not null,
            sql        text    not null
        );
    `,r=t.db.prepare(e).run();t.log(r)};var _C=class{};xr();var EQ=async t=>{let e=await t.arrayBuffer();return t5(e)},t5=async t=>{let e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(i=>i.toString(16).padStart(2,"0")).join("")};var et=ie(ve(),1);function CQ(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=CQ(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function KDe(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=CQ(t))&&(n&&(n+=" "),n+=e);return n}var wc=KDe;var c_=t=>typeof t=="number"&&!isNaN(t),Gf=t=>typeof t=="string",us=t=>typeof t=="function",TC=t=>Gf(t)||us(t)?t:null,r5=t=>(0,et.isValidElement)(t)||Gf(t)||us(t)||c_(t);function YDe(t,e,r){r===void 0&&(r=300);let{scrollHeight:n,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=n+"px",i.transition=`all ${r}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,r)})})}function EC(t){let{enter:e,exit:r,appendPosition:n=!1,collapse:i=!0,collapseDuration:o=300}=t;return function(s){let{children:a,position:l,preventExitTransition:c,done:p,nodeRef:f,isIn:m}=s,g=n?`${e}--${l}`:e,v=n?`${r}--${l}`:r,_=(0,et.useRef)(0);return(0,et.useLayoutEffect)(()=>{let S=f.current,T=g.split(" "),w=E=>{E.target===f.current&&(S.dispatchEvent(new Event("d")),S.removeEventListener("animationend",w),S.removeEventListener("animationcancel",w),_.current===0&&E.type!=="animationcancel"&&S.classList.remove(...T))};S.classList.add(...T),S.addEventListener("animationend",w),S.addEventListener("animationcancel",w)},[]),(0,et.useEffect)(()=>{let S=f.current,T=()=>{S.removeEventListener("animationend",T),i?YDe(S,p,o):p()};m||(c?T():(_.current=1,S.className+=` ${v}`,S.addEventListener("animationend",T)))},[m]),et.default.createElement(et.default.Fragment,null,a)}}function DQ(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}var Ia={list:new Map,emitQueue:new Map,on(t,e){return this.list.has(t)||this.list.set(t,[]),this.list.get(t).push(e),this},off(t,e){if(e){let r=this.list.get(t).filter(n=>n!==e);return this.list.set(t,r),this}return this.list.delete(t),this},cancelEmit(t){let e=this.emitQueue.get(t);return e&&(e.forEach(clearTimeout),this.emitQueue.delete(t)),this},emit(t){this.list.has(t)&&this.list.get(t).forEach(e=>{let r=setTimeout(()=>{e(...[].slice.call(arguments,1))},0);this.emitQueue.has(t)||this.emitQueue.set(t,[]),this.emitQueue.get(t).push(r)})}},bC=t=>{let{theme:e,type:r,...n}=t;return et.default.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${r})`,...n})},n5={info:function(t){return et.default.createElement(bC,{...t},et.default.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return et.default.createElement(bC,{...t},et.default.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return et.default.createElement(bC,{...t},et.default.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return et.default.createElement(bC,{...t},et.default.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return et.default.createElement("div",{className:"Toastify__spinner"})}};function XDe(t){let[,e]=(0,et.useReducer)(g=>g+1,0),[r,n]=(0,et.useState)([]),i=(0,et.useRef)(null),o=(0,et.useRef)(new Map).current,s=g=>r.indexOf(g)!==-1,a=(0,et.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:s,getToast:g=>o.get(g)}).current;function l(g){let{containerId:v}=g,{limit:_}=a.props;!_||v&&a.containerId!==v||(a.count-=a.queue.length,a.queue=[])}function c(g){n(v=>g==null?[]:v.filter(_=>_!==g))}function p(){let{toastContent:g,toastProps:v,staleId:_}=a.queue.shift();m(g,v,_)}function f(g,v){let{delay:_,staleId:S,...T}=v;if(!r5(g)||function(X){return!i.current||a.props.enableMultiContainer&&X.containerId!==a.props.containerId||o.has(X.toastId)&&X.updateId==null}(T))return;let{toastId:w,updateId:E,data:I}=T,{props:N}=a,C=()=>c(w),k=E==null;k&&a.count++;let U={...N,style:N.toastStyle,key:a.toastKey++,...Object.fromEntries(Object.entries(T).filter(X=>{let[te,ne]=X;return ne!=null})),toastId:w,updateId:E,data:I,closeToast:C,isIn:!1,className:TC(T.className||N.toastClassName),bodyClassName:TC(T.bodyClassName||N.bodyClassName),progressClassName:TC(T.progressClassName||N.progressClassName),autoClose:!T.isLoading&&($=T.autoClose,G=N.autoClose,$===!1||c_($)&&$>0?$:G),deleteToast(){let X=DQ(o.get(w),"removed");o.delete(w),Ia.emit(4,X);let te=a.queue.length;if(a.count=w==null?a.count-a.displayedToast:a.count-1,a.count<0&&(a.count=0),te>0){let ne=w==null?a.props.limit:1;if(te===1||ne===1)a.displayedToast++,p();else{let H=ne>te?te:ne;a.displayedToast=H;for(let re=0;re<H;re++)p()}}else e()}};var $,G;U.iconOut=function(X){let{theme:te,type:ne,isLoading:H,icon:re}=X,W=null,q={theme:te,type:ne};return re===!1||(us(re)?W=re(q):(0,et.isValidElement)(re)?W=(0,et.cloneElement)(re,q):Gf(re)||c_(re)?W=re:H?W=n5.spinner():(se=>se in n5)(ne)&&(W=n5[ne](q))),W}(U),us(T.onOpen)&&(U.onOpen=T.onOpen),us(T.onClose)&&(U.onClose=T.onClose),U.closeButton=N.closeButton,T.closeButton===!1||r5(T.closeButton)?U.closeButton=T.closeButton:T.closeButton===!0&&(U.closeButton=!r5(N.closeButton)||N.closeButton);let K=g;(0,et.isValidElement)(g)&&!Gf(g.type)?K=(0,et.cloneElement)(g,{closeToast:C,toastProps:U,data:I}):us(g)&&(K=g({closeToast:C,toastProps:U,data:I})),N.limit&&N.limit>0&&a.count>N.limit&&k?a.queue.push({toastContent:K,toastProps:U,staleId:S}):c_(_)?setTimeout(()=>{m(K,U,S)},_):m(K,U,S)}function m(g,v,_){let{toastId:S}=v;_&&o.delete(_);let T={content:g,props:v};o.set(S,T),n(w=>[...w,S].filter(E=>E!==_)),Ia.emit(4,DQ(T,T.props.updateId==null?"added":"updated"))}return(0,et.useEffect)(()=>(a.containerId=t.containerId,Ia.cancelEmit(3).on(0,f).on(1,g=>i.current&&c(g)).on(5,l).emit(2,a),()=>{o.clear(),Ia.emit(3,a)}),[]),(0,et.useEffect)(()=>{a.props=t,a.isToastActive=s,a.displayedToast=r.length}),{getToastToRender:function(g){let v=new Map,_=Array.from(o.values());return t.newestOnTop&&_.reverse(),_.forEach(S=>{let{position:T}=S.props;v.has(T)||v.set(T,[]),v.get(T).push(S)}),Array.from(v,S=>g(S[0],S[1]))},containerRef:i,isToastActive:s}}function IQ(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function kQ(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function JDe(t){let[e,r]=(0,et.useState)(!1),[n,i]=(0,et.useState)(!1),o=(0,et.useRef)(null),s=(0,et.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,a=(0,et.useRef)(t),{autoClose:l,pauseOnHover:c,closeToast:p,onClick:f,closeOnClick:m}=t;function g(I){if(t.draggable){I.nativeEvent.type==="touchstart"&&I.nativeEvent.preventDefault(),s.didMove=!1,document.addEventListener("mousemove",T),document.addEventListener("mouseup",w),document.addEventListener("touchmove",T),document.addEventListener("touchend",w);let N=o.current;s.canCloseOnClick=!0,s.canDrag=!0,s.boundingRect=N.getBoundingClientRect(),N.style.transition="",s.x=IQ(I.nativeEvent),s.y=kQ(I.nativeEvent),t.draggableDirection==="x"?(s.start=s.x,s.removalDistance=N.offsetWidth*(t.draggablePercent/100)):(s.start=s.y,s.removalDistance=N.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent/100))}}function v(I){if(s.boundingRect){let{top:N,bottom:C,left:k,right:U}=s.boundingRect;I.nativeEvent.type!=="touchend"&&t.pauseOnHover&&s.x>=k&&s.x<=U&&s.y>=N&&s.y<=C?S():_()}}function _(){r(!0)}function S(){r(!1)}function T(I){let N=o.current;s.canDrag&&N&&(s.didMove=!0,e&&S(),s.x=IQ(I),s.y=kQ(I),s.delta=t.draggableDirection==="x"?s.x-s.start:s.y-s.start,s.start!==s.x&&(s.canCloseOnClick=!1),N.style.transform=`translate${t.draggableDirection}(${s.delta}px)`,N.style.opacity=""+(1-Math.abs(s.delta/s.removalDistance)))}function w(){document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",w),document.removeEventListener("touchmove",T),document.removeEventListener("touchend",w);let I=o.current;if(s.canDrag&&s.didMove&&I){if(s.canDrag=!1,Math.abs(s.delta)>s.removalDistance)return i(!0),void t.closeToast();I.style.transition="transform 0.2s, opacity 0.2s",I.style.transform=`translate${t.draggableDirection}(0)`,I.style.opacity="1"}}(0,et.useEffect)(()=>{a.current=t}),(0,et.useEffect)(()=>(o.current&&o.current.addEventListener("d",_,{once:!0}),us(t.onOpen)&&t.onOpen((0,et.isValidElement)(t.children)&&t.children.props),()=>{let I=a.current;us(I.onClose)&&I.onClose((0,et.isValidElement)(I.children)&&I.children.props)}),[]),(0,et.useEffect)(()=>(t.pauseOnFocusLoss&&(document.hasFocus()||S(),window.addEventListener("focus",_),window.addEventListener("blur",S)),()=>{t.pauseOnFocusLoss&&(window.removeEventListener("focus",_),window.removeEventListener("blur",S))}),[t.pauseOnFocusLoss]);let E={onMouseDown:g,onTouchStart:g,onMouseUp:v,onTouchEnd:v};return l&&c&&(E.onMouseEnter=S,E.onMouseLeave=_),m&&(E.onClick=I=>{f&&f(I),s.canCloseOnClick&&p()}),{playToast:_,pauseToast:S,isRunning:e,preventExitTransition:n,toastRef:o,eventHandlers:E}}function NQ(t){let{closeToast:e,theme:r,ariaLabel:n="close"}=t;return et.default.createElement("button",{className:`Toastify__close-button Toastify__close-button--${r}`,type:"button",onClick:i=>{i.stopPropagation(),e(i)},"aria-label":n},et.default.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},et.default.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function QDe(t){let{delay:e,isRunning:r,closeToast:n,type:i="default",hide:o,className:s,style:a,controlledProgress:l,progress:c,rtl:p,isIn:f,theme:m}=t,g=o||l&&c===0,v={...a,animationDuration:`${e}ms`,animationPlayState:r?"running":"paused",opacity:g?0:1};l&&(v.transform=`scaleX(${c})`);let _=wc("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${m}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":p}),S=us(s)?s({rtl:p,type:i,defaultClassName:_}):wc(_,s);return et.default.createElement("div",{role:"progressbar","aria-hidden":g?"true":"false","aria-label":"notification timer",className:S,style:v,[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{f&&n()}})}var ZDe=t=>{let{isRunning:e,preventExitTransition:r,toastRef:n,eventHandlers:i}=JDe(t),{closeButton:o,children:s,autoClose:a,onClick:l,type:c,hideProgressBar:p,closeToast:f,transition:m,position:g,className:v,style:_,bodyClassName:S,bodyStyle:T,progressClassName:w,progressStyle:E,updateId:I,role:N,progress:C,rtl:k,toastId:U,deleteToast:$,isIn:G,isLoading:K,iconOut:X,closeOnClick:te,theme:ne}=t,H=wc("Toastify__toast",`Toastify__toast-theme--${ne}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":te}),re=us(v)?v({rtl:k,position:g,type:c,defaultClassName:H}):wc(H,v),W=!!C||!a,q={closeToast:f,type:c,theme:ne},se=null;return o===!1||(se=us(o)?o(q):(0,et.isValidElement)(o)?(0,et.cloneElement)(o,q):NQ(q)),et.default.createElement(m,{isIn:G,done:$,position:g,preventExitTransition:r,nodeRef:n},et.default.createElement("div",{id:U,onClick:l,className:re,...i,style:_,ref:n},et.default.createElement("div",{...G&&{role:N},className:us(S)?S({type:c}):wc("Toastify__toast-body",S),style:T},X!=null&&et.default.createElement("div",{className:wc("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!K})},X),et.default.createElement("div",null,s)),se,et.default.createElement(QDe,{...I&&!W?{key:`pb-${I}`}:{},rtl:k,theme:ne,delay:a,isRunning:e,isIn:G,closeToast:f,hide:p,type:c,style:E,className:w,controlledProgress:W,progress:C||0})))},CC=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},eIe=EC(CC("bounce",!0)),T_t=EC(CC("slide",!0)),w_t=EC(CC("zoom")),S_t=EC(CC("flip")),wC=(0,et.forwardRef)((t,e)=>{let{getToastToRender:r,containerRef:n,isToastActive:i}=XDe(t),{className:o,style:s,rtl:a,containerId:l}=t;function c(p){let f=wc("Toastify__toast-container",`Toastify__toast-container--${p}`,{"Toastify__toast-container--rtl":a});return us(o)?o({position:p,rtl:a,defaultClassName:f}):wc(f,TC(o))}return(0,et.useEffect)(()=>{e&&(e.current=n.current)},[]),et.default.createElement("div",{ref:n,className:"Toastify",id:l},r((p,f)=>{let m=f.length?{...s}:{...s,pointerEvents:"none"};return et.default.createElement("div",{className:c(p),style:m,key:`container-${p}`},f.map((g,v)=>{let{content:_,props:S}=g;return et.default.createElement(ZDe,{...S,isIn:i(S.toastId),style:{...S.style,"--nth":v+1,"--len":f.length},key:`toast-${S.key}`},_)}))}))});wC.displayName="ToastContainer",wC.defaultProps={position:"top-right",transition:eIe,autoClose:5e3,closeButton:NQ,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var i5,qf=new Map,u_=[],tIe=1;function AQ(){return""+tIe++}function rIe(t){return t&&(Gf(t.toastId)||c_(t.toastId))?t.toastId:AQ()}function d_(t,e){return qf.size>0?Ia.emit(0,t,e):u_.push({content:t,options:e}),e.toastId}function SC(t,e){return{...e,type:e&&e.type||t,toastId:rIe(e)}}function xC(t){return(e,r)=>d_(e,SC(t,r))}function Fr(t,e){return d_(t,SC("default",e))}Fr.loading=(t,e)=>d_(t,SC("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Fr.promise=function(t,e,r){let n,{pending:i,error:o,success:s}=e;i&&(n=Gf(i)?Fr.loading(i,r):Fr.loading(i.render,{...r,...i}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(p,f,m)=>{if(f==null)return void Fr.dismiss(n);let g={type:p,...a,...r,data:m},v=Gf(f)?{render:f}:f;return n?Fr.update(n,{...g,...v}):Fr(v.render,{...g,...v}),m},c=us(t)?t():t;return c.then(p=>l("success",s,p)).catch(p=>l("error",o,p)),c},Fr.success=xC("success"),Fr.info=xC("info"),Fr.error=xC("error"),Fr.warning=xC("warning"),Fr.warn=Fr.warning,Fr.dark=(t,e)=>d_(t,SC("default",{theme:"dark",...e})),Fr.dismiss=t=>{qf.size>0?Ia.emit(1,t):u_=u_.filter(e=>t!=null&&e.options.toastId!==t)},Fr.clearWaitingQueue=function(t){return t===void 0&&(t={}),Ia.emit(5,t)},Fr.isActive=t=>{let e=!1;return qf.forEach(r=>{r.isToastActive&&r.isToastActive(t)&&(e=!0)}),e},Fr.update=function(t,e){e===void 0&&(e={}),setTimeout(()=>{let r=function(n,i){let{containerId:o}=i,s=qf.get(o||i5);return s&&s.getToast(n)}(t,e);if(r){let{props:n,content:i}=r,o={delay:100,...n,...e,toastId:e.toastId||t,updateId:AQ()};o.toastId!==t&&(o.staleId=t);let s=o.render||i;delete o.render,d_(s,o)}},0)},Fr.done=t=>{Fr.update(t,{progress:1})},Fr.onChange=t=>(Ia.on(4,t),()=>{Ia.off(4,t)}),Fr.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Fr.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Ia.on(2,t=>{i5=t.containerId||t,qf.set(i5,t),u_.forEach(e=>{Ia.emit(0,e.content,e.options)}),u_=[]}).on(3,t=>{qf.delete(t.containerId||t),qf.size===0&&Ia.off(0).off(1).off(5)});var o5="bottom-left",p_=t=>Fr(t,{type:"success",position:o5}),OQ=t=>Fr(t,{type:"info",position:o5}),f_=t=>Fr(t,{type:"error",position:o5});function RQ(t="test",e={},r="base64"){if(typeof t!="string"||!t.length||t==="[deleted]")return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><rect fill="#afb3b9" x="10" y="10" width="20" height="20" /></svg>';let i={background:[240,240,240,0],margin:.05,size:40,saturation:.7,brightness:.5,...e},o=Math.abs(iIe(t)).toString().repeat(15),s=parseInt(o.substr(-7),16)/268435455,a=nIe(s,i.saturation,i.brightness),l=`rgba(${a.red}, ${a.green}, ${a.blue}, 1 )`,c="rgba("+i.background.join(",")+")",p=Math.floor(i.size*i.margin),f=Math.floor((i.size-p*2)/5),m=Math.floor((i.size-f*5)/2),g,v=[];o.split("").forEach((E,I)=>{g=parseInt(o.charAt(I),16)%2?c:l,I<5?v.push({x:2*f+m,y:I*f+m,w:f,h:f,color:g}):I<10?(v.push({x:1*f+m,y:(I-5)*f+m,w:f,h:f,color:g}),v.push({x:3*f+m,y:(I-5)*f+m,w:f,h:f,color:g})):I<15&&(v.push({x:0*f+m,y:(I-10)*f+m,w:f,h:f,color:g}),v.push({x:4*f+m,y:(I-10)*f+m,w:f,h:f,color:g}))});let _=v.filter(E=>E.color!==c),T=(_.length?_:v).map((E,I)=>`M${E.x},${E.y} h${E.w} v${E.h} h${0-E.h}z`).join(" "),w=`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" style="background-color: ${c};" viewBox="0 0 40 40"><path shape-rendering="crispEdges" style="fill: ${l}; stroke: ${l}; stroke-width: 1; max-width: 100%; max-height: 100%;" d="${T}" /></svg>`;return r==="svg"?w:"data:image/svg+xml;base64,"+btoa(w)}function nIe(t,e,r){t*=6;let n=[r+=e*=r<.5?r:1-r,r-t%1*e*2,r-=e*=2,r,r+t%1*e,r+e];return{red:Math.round(n[~~t%6]*255),green:Math.round(n[(t|16)%6]*255),blue:Math.round(n[(t|8)%6]*255)}}var DC=65521;function iIe(t){for(var e=1,r=0,n=0,i=t.length,o=i&-4;n<o;){for(var s=Math.min(n+4096,o);n<s;n+=4)r+=(e+=t.charCodeAt(n))+(e+=t.charCodeAt(n+1))+(e+=t.charCodeAt(n+2))+(e+=t.charCodeAt(n+3));e%=DC,r%=DC}for(;n<i;n++)r+=e+=t.charCodeAt(n);return e%=DC,r%=DC,e|r<<16}var IC=class{constructor(){this._scriptL=new Jn(this,"scriptID",()=>this.db.cushy_scripts);this._draftsCollection=new Un({table:()=>this.db.drafts,where:()=>({appID:this.id})});this.openLastDraftAsCurrent=()=>{this.st.currentDraft=this.getLastDraft()};this.getLastDraft=()=>{let e=this.drafts;return e.length>0?e[0]:this.createDraft()};this.setFavorite=e=>{let r=this.st.configFile.update(n=>{n.favoriteApps==null&&(n.favoriteApps=[]);let i=n.favoriteApps;if(e)i.includes(this.id)||i.unshift(this.id);else{let o=i.indexOf(this.id);o!==-1&&i.splice(o,1)}})};this.createDraft=()=>{let e=this.name+" "+this._draftsCollection.items.length+1;return this.st.db.drafts.create({appParams:{},appID:this.id,isOpened:1,title:e})};this.matchesSearch=e=>{if(e==="")return!0;let r=e.toLowerCase(),n=this.name.toLowerCase(),i=this.description.toLowerCase();return n.includes(r)||i.includes(r)};this.isPublishing=!1;this.FAIL_prepublish=(e,r)=>{let n=`[\u{1F680}] \u274C pre-publish check failed: ${e}`;throw console.log(n),f_(n),new Error([n,r].join(`
`))};this.publish=async()=>{if(!this.isPublishing){this.isPublishing=!0;try{let e=this.st,r=this.executable;if(r==null)return this.FAIL_prepublish("no valid compiled app found");if(r.illustration==null||r.name==null||r.description==null)return console.error(this.executable?.metadata),this.FAIL_prepublish(`missing metadata (${["illustration","name","description"].filter(E=>r[E]==null).join(", ")})`,[" | app({"," |     metadata: {"," |    \u{1F449}   name: 'Cushy Diffusion UI',"," |    \u{1F449}   illustration: IMG,"," |    \u{1F449}   description: 'A card that contains all the features needed to play with stable diffusion',"," |     },"," |     ui: (ui) => ({"," |        ..."].join(`
`));if(r.illustration.startsWith("data:"))return this.FAIL_prepublish("invalid illustration","illustration must be a path to a local file, not a base64 encoded image");let n=e.supabase,i=e.auth.user?.id;if(i==null)throw new Error("not logged in");console.log("[\u{1F680}] \u2705 logged-in");let o=`${i}/${this.id}`;console.log(`[\u{1F680}] \u2705 starting publish flow for app ${o}`);let s=await n.from("published_apps").select("*").eq("user_id",i).eq("app_id",this.id);if(s.error)throw console.log("[\u{1F680}] publish failed due to some postgres error",s.error),s.error;let a=s.data.at(0),l=r.illustration,c=l.startsWith("file://")?l.slice(7):l,p=yh(c);if(![".png",".jpg",".jpeg"].includes(p))return this.FAIL_prepublish("invalid illustration",` | illustration must be a png or jpg file, not a ${p} file`);if(!br(c))return this.FAIL_prepublish("illustration file not found",` | no image found from path "${c}"`);let g=Pn(c),v=await t5(g),_=`${i}/${v}${p}`,{data:S,error:T}=await n.storage.from("Apps").upload(_,g,{cacheControl:"3600",upsert:!1});if(T&&T.message!=="The resource already exists"&&T.error!=="Duplicate")throw console.error(T.message==="The resource already exists"),new Error("[\u{1F680}] \u274C publish failed due to some storage error",T);console.log(`[\u{1F680}] \u2705 illustration ${_} uploaded !`);let w=n.storage.from("Apps").getPublicUrl(_).data.publicUrl;if(console.log(`[\u{1F680}] \u2705 illustration public url is ${w}`),a==null){console.log(`[\u{1F680}] no published app for ${o} found; publishing...`);let E=await n.from("published_apps").insert({user_id:i,app_id:this.id,name:this.name,description:this.description,illustration_url:w,tags:this.executable?.tags});console.log(`[\u{1F680}] \u2705 ${o} published !`,E),p_(`[\u{1F680}] \u2705 ${o} published !`)}else{console.log("[\u{1F680}] app found",a,"updating...");let E=await n.from("published_apps").update({app_id:this.id,name:this.name,description:this.description,illustration_url:w,tags:this.executable?.tags}).eq("id",a.id);console.log(`[\u{1F680}] \u2705 ${o} updated !`,E),p_(`[\u{1F680}] \u2705 ${o} updated !`)}this.update({publishedAsUserID:i,publishedAt:Date.now()})}catch(e){f_(e.message??"[\u{1F680}] \u274C publish failed !"),console.error("[\u{1F680}] \u274C publish failed !"),console.error(e)}finally{this.isPublishing=!1}}}}get script(){return this._scriptL.item}get drafts(){return this._draftsCollection.items}get isLocal(){return this.script.relPath.startsWith("library/local")}get isBuiltIn(){return this.script.relPath.startsWith("library/built-in")}get isFavorite(){return this.st.configFile.value.favoriteApps?.includes(this.id)??!1}get executable(){return this.script.getExecutable_orExtract(this.id)}get uid(){return this.data.createdAt}get name(){if(this.executable?.metadata?.name)return this.executable.metadata.name;let e=this.script.relPath,r=ai(e);return r=r.endsWith(".ts")?r.slice(0,-3):r,r.match(/comfyworkflows_[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}/)&&(r=`ComfyWorkflow ${r.slice(-12,-4)}`),r}get relPath(){return this._scriptL.item.relPath}get file(){return this.st.library.getFile(this.relPath)}get description(){return this.data.description??"<no description>"}get illustrationPath_eiter_RelativeToDeckRoot_or_Base64Encoded_or_SVG(){return this.data.illustration?this.data.illustration:this.relPath.endsWith(".png")?this.relPath:RQ(this.relPath)}get illustrationPathWithFileProtocol(){let e=this.illustrationPath_eiter_RelativeToDeckRoot_or_Base64Encoded_or_SVG;if(e?.startsWith("data:")||e?.startsWith("http"))return e;if(e?.startsWith("<svg"))throw new Error("SVG not supported");return e?e.startsWith("/")?`file://${e}`:`file://${yr(this.st.rootPath,e)}`:`file://${yr(this.st.rootPath,"library/CushyStudio/default/_illustrations/default-card-illustration.jpg")}`}};function PQ(t){let e=oIe(t),r=t;return e.forEach(n=>{let i=new RegExp(`import\\s+.*?from\\s+['"]${n.moduleName}['"];?`),o=sIe(n);r=r.replace(i,o)}),r}function oIe(t){let e=/import\s+(?:(\w+),\s*)?\{\s*([^}]+)\s*\}\s+from\s+["'](.+?)["'];?/g,r=[],n;for(;(n=e.exec(t))!==null;){let[i,o,s,a]=n,l={};s.split(",").forEach(c=>{let p=c.trim().split(/\s+as\s+/);l[p[0]]=p[1]||p[0]}),r.push({moduleName:a,defaultImport:o,namedImports:l})}return r}function sIe(t){let{moduleName:e,defaultImport:r,namedImports:n}=t,i=[];r&&i.push(r);let o=Object.entries(n).map(([s,a])=>s===a?s:`${s}: ${a}`);return o.length>0&&i.push(`{ ${o.join(", ")} }`),`const ${i.join(", ")} = CUSHY_IMPORT("${e}");`}var LQ=ie(ve(),1);var MQ=t=>{if(console.log("\u{1F534} mod",t),t==="react")return LQ.default;if(t==="mobx")return hA;if(t==="mobx-react-lite")return{observer:F};if(t==="react/jsx-runtime")return{jsx:h,jsxs:P};throw new Error("unsupported import: "+t)};var kC=class{constructor(e,r,n){this.script=e;this.ix=r;this.def=n}get ui(){return this.def.ui}get run(){return this.def.run}get metadata(){return this.def.metadata}get name(){return this.def.metadata?.name??ai(this.script.relPath)}get tags(){return this.def.metadata?.tags??[]}get description(){return this.def.metadata?.description}get illustration(){return this.def.metadata?.illustration}get appID(){return S0(this.script.relPath+":"+this.ix)}};var NC=class{constructor(){this.apps_viaDB=new Un({table:()=>this.db.cushy_scripts,where:()=>({scriptID:this.id})});this._apps_viaScript=null;this.onHydrate=()=>{this.data.lastEvaluatedAt==null&&this.extractApps()};this.errors=[];this.addError=(e,r=null)=>(this.errors.push({title:e,details:r}),0);this._EXECUTABLES=null;this.extractApps=()=>(this._EXECUTABLES=this._EVALUATE_SCRIPT(),_r(()=>{this._apps_viaScript=this._EXECUTABLES.map(r=>this.db.cushy_apps.upsert({id:r.appID,scriptID:this.id,description:r.description,illustration:r.illustration,name:r.name,tags:r.tags.join(",")}));let e=Date.now();this._apps_viaScript.length===0?this.update({lastEvaluatedAt:e}):this.update({lastEvaluatedAt:e,lastSuccessfulEvaluationAt:e})}),this._EXECUTABLES);this._EVALUATE_SCRIPT=()=>{OQ(`evaluating script: ${this.relPath}`);let e=this.data.code,r=[],n=(o,s)=>{let a=typeof o!="string"?o:s,l=a.metadata?.name??ai(this.relPath);console.info(`[\u{1F499}] found action: "${l}"`,{path:this.relPath}),r.push(a)},i;try{i=PQ(e)}catch{return console.error("\u274C impossible to replace imports"),[]}try{return new Function("action","card","app","CUSHY_IMPORT",i)(n,n,n,MQ),r.map((s,a)=>new kC(this,a,s))}catch(o){return console.error("[\u{1F4DC}] CushyScript execution failed:",o),console.groupCollapsed("[\u{1F4DC}] <script that failed>"),console.log(i),console.groupEnd(),[]}}}get relPath(){return $r(this.data.path)}get apps_viaScript(){return this._apps_viaScript==null&&this.extractApps(),this._apps_viaScript}get file(){return this.st.library.getFile(this.relPath)}get EXECUTABLES(){return this._EXECUTABLES==null?this.extractApps():this._EXECUTABLES}getExecutable_orNull(e){return this._EXECUTABLES?.find(r=>e===r.appID)}getExecutable_orExtract(e){return this.EXECUTABLES.find(r=>e===r.appID)}};var AC=class{constructor(){this.get=()=>this.data.json}};var OC=class{};var FQ=t=>{let e=t[0].split(`
`).slice(1),r=(e[0]??"").match(/^\s*/)[0].length;return e=e.map(n=>n.slice(r)),e.join(`
`)};var RC=class{constructor(e){this.schema=e;this.string=e=>new oc(this,this.schema,e);this.color=e=>new jd(this,this.schema,e);this.size=e=>new qd(this,this.schema,e);this.stringOpt=e=>new sc(this,this.schema,e);this.str=e=>new oc(this,this.schema,e);this.strOpt=e=>new sc(this,this.schema,e);this.prompt=e=>new zd(this,this.schema,e);this.promptOpt=e=>new Kl(this,this.schema,e);this.seed=e=>new $d(this,this.schema,e);this.int=e=>new Yl(this,this.schema,e);this.intOpt=e=>new Xl(this,this.schema,e);this.float=e=>new ac(this,this.schema,e);this.floatOpt=e=>new uc(this,this.schema,e);this.number=e=>new ac(this,this.schema,e);this.numberOpt=e=>new uc(this,this.schema,e);this.matrix=e=>new Gd(this,this.schema,e);this.boolean=e=>new lc(this,this.schema,e);this.bool=e=>new lc(this,this.schema,e);this.inlineRun=e=>new Hd(this,this.schema,e);this.loras=e=>new Vd(this,this.schema,e);this.image=e=>new Jl(this,this.schema,e);this.markdown=e=>new Bd(this,this.schema,typeof e=="string"?{markdown:e}:e);this.custom=e=>new Wd(this,this.schema,e);this.imageOpt=e=>new sl(this,this.schema,e);this.selectOneOrCustom=e=>new Yd(this,this.schema,e);this.selectManyOrCustom=e=>new Jd(this,this.schema,e);this.enum=e=>new np(this,this.schema,e);this.enumOpt=e=>new Zl(this,this.schema,e);this.list=e=>new Qd(this,this.schema,e);this.listExt=e=>new Ql(this,this.schema,e);this.timeline=e=>new Ql(this,this.schema,{mode:"timeline",...e});this.regional=e=>new Ql(this,this.schema,{mode:"regional",...e});this.groupOpt=e=>new ep(this,this.schema,e);this.group=e=>new Zd(this,this.schema,e);this.selectOne=e=>new Kd(this,this.schema,e);this.selectMany=e=>new Xd(this,this.schema,e);this.choice=e=>new tp(this,this.schema,e);this.choices=e=>new rp(this,this.schema,e);this._FIX_INDENTATION=FQ;this._cache={count:0};this._HYDRATE=(e,r,n)=>{if(e==="bool")return new lc(this,this.schema,r,n);if(e==="inlineRun")return new Hd(this,this.schema,r,n);if(e==="str")return new oc(this,this.schema,r,n);if(e==="strOpt")return new sc(this,this.schema,r,n);if(e==="int")return new Yl(this,this.schema,r,n);if(e==="seed")return new $d(this,this.schema,r,n);if(e==="intOpt")return new Xl(this,this.schema,r,n);if(e==="float")return new ac(this,this.schema,r,n);if(e==="floatOpt")return new uc(this,this.schema,r,n);if(e==="matrix")return new Gd(this,this.schema,r,n);if(e==="prompt")return new zd(this,this.schema,r,n);if(e==="promptOpt")return new Kl(this,this.schema,r,n);if(e==="loras")return new Vd(this,this.schema,r,n);if(e==="image")return new Jl(this,this.schema,r,n);if(e==="imageOpt")return new sl(this,this.schema,r,n);if(e==="selectOneOrCustom")return new Yd(this,this.schema,r,n);if(e==="selectManyOrCustom")return new Jd(this,this.schema,r,n);if(e==="enum")return new np(this,this.schema,r,n);if(e==="enumOpt")return new Zl(this,this.schema,r,n);if(e==="list")return new Qd(this,this.schema,r,n);if(e==="listExt")return new Ql(this,this.schema,r,n);if(e==="groupOpt")return new ep(this,this.schema,r,n);if(e==="group")return new Zd(this,this.schema,r,n);if(e==="selectOne")return new Kd(this,this.schema,r,n);if(e==="selectMany")return new Xd(this,this.schema,r,n);if(e==="size")return new qd(this,this.schema,r,n);if(e==="color")return new jd(this,this.schema,r,n);if(e==="choice")return new tp(this,this.schema,r,n);if(e==="choices")return new rp(this,this.schema,r,n);if(e==="markdown")return new Bd(this,this.schema,r,n);if(e==="custom")return new Wd(this,this.schema,r,n);console.log(`\u{1F534} unknown type ${e}`),gr(e)};Ce(this)}};var PC=class{constructor(){this.shouldAutoStart=!1;this.appRef=new Jn(this,"appID",()=>this.db.cushy_apps);this.autoStartTimer=null;this.start=()=>{this.st.focusedStepID=null,this.st.focusedStepOutput=null;let e=this.gui.value;if(e==null)throw new Error("invalid req");let r=this.st.project.rootGraph.item;if(r==null)throw new Error("invalid graph");let n=e.builder;n._cache.count++;let i=r.clone(),o=this.db.steps.create({name:this.data.title,appID:this.data.appID,formResult:e.result,formSerial:e.serial,outputGraphID:i.id,isExpanded:1,status:"New"});return i.update({stepID:o.id}),o.start({formInstance:e}),o};this.gui=gE("not loaded yet");this.onHydrate=()=>{};this.isInitializing=!1;this.isInitialized=!1;this.AWAKE=()=>{if(this.isInitializing||this.isInitialized)return;this.isInitializing=!0;let e=Sv(()=>this.executable,n=>{if(console.log(`[\u{1F98A}] form: awakening app ${this.data.appID}`),n!=null)try{let i=new RC(this.st.schema),o=n.ui,s=o==null?i._HYDRATE("group",{topLevel:!0,items:()=>({})},this.data.appParams):i._HYDRATE("group",{topLevel:!0,items:()=>o(i)},this.data.appParams);i._ROOT=s,this.gui=nX(s),console.log("[\u{1F98A}] form: setup")}catch(i){console.error(i),this.gui=gE("ui function crashed",i);return}},{fireImmediately:!0}),r=pA(()=>{let n=this.gui.value;if(n==null)return null;let i=n.builder._cache.count,o=JSON.stringify(n.serial);_r(()=>{console.log("[\u{1F98A}] form: updating"),this.update({appParams:n.serial})})});return this.isInitialized=!0,this.isInitializing=!1,()=>{e(),r(),this.isInitialized=!1,this.gui=gE("not loaded yet")}}}get app(){return this.appRef.item}get executable(){return this.app.executable}get name(){return this.data.title??this.id}setAutostart(e){this.shouldAutoStart=e,this.shouldAutoStart?(this.autoStartTimer&&clearInterval(this.autoStartTimer),this.autoStartTimer=setInterval(()=>this.start(),2e3)):this.autoStartTimer&&(clearInterval(this.autoStartTimer),this.autoStartTimer=null)}get file(){return this.st.library.getFile(this.appRef.item.relPath)}};var LC=class{constructor(){this.rootGraph=new Jn(this,"rootGraphID",()=>this.db.graphs);this.draft=new Po(this,"currentDraftID",()=>this.db.drafts)}get schema(){return this.st.schema}};var yp=(t,e)=>{let r="";for(let n of t)r+=lIe(n,e);return r},aIe=/[a-zA-Z0-9]/,lIe=(t,e)=>{if(aIe.test(t))return t;if(e===" "){if(t===" ")return"_";if(t==="_")return"$_"}else{if(t===" ")return"$_";if(t==="_")return"_"}return t==="$"?"$$":t==="*"?"$Star":t==="&"?"$And":t==="("?"$1":t===")"?"$2":t==="/"?"$3":t===":"?"$4":t==="."?"$5":t==="+"?"$6":t==="-"?"$7":t==="|"?"$8":t===","?"$9":`$$${t.charCodeAt(0).toString(16).toUpperCase()}`};var Sc=class{constructor(e=0,r=[]){this._indent=e;this.tab="   ";this.content="";this.append=e=>this.content+=e;this.writeLine=e=>(this.content+=e.split(`
`).map(r=>UQ(this._indent,this.tab)+r).join(`
`)+`
`,this);this.w=(e,r={if:!0})=>{r.if&&this.writeLine(e)};this.newLine=()=>this.content+=`
`;this.line=(...e)=>this.writeLine(e.join(""));this.indent=()=>this._indent++;this.deindent=()=>this._indent--;this.indented=e=>{this._indent++,e(),this._indent--};this.bar=e=>this.w(uIe(e,"// "));for(let n of r)this.writeLine(n)}},UQ=(t,e)=>{let r="";for(let n=0;n<t;n++)r+=e;return r},uIe=(t,e="")=>{let r="=============================================================================";return`${e}|${r}|
${e}| ${t} ${UQ(r.length-t.length-4," ")}  |
${e}|${r}|`};var Cg=t=>typeof t!="string"?"string":t.match(/^[a-zA-Z_][a-zA-Z0-9_]*$/)?t:`"${t}"`,s5=t=>typeof t!="string"?"string":t.match(/^[a-zA-Z_][a-zA-Z0-9_]*$/)?`.${t}`:`["${t}"]`;var MC=class{constructor(){this.RUN_BASIC_CHECKS=()=>{let e=Object.keys(this.data.spec).length,r=this.nodes.length;e!==r&&console.log(`\u{1F534} ${e} != ${r}`)};this.hasLora=e=>this.getLoras().includes(e);this.getLoras=()=>this.knownEnumsByName.get("Enum_LoraLoader_lora_name")?.values??[];this.hasImage=e=>this.getImages().includes(e);this.getImages=()=>this.knownEnumsByName.get("Enum_LoadImage_image")?.values??[];this.unsafely_addImageInSchemaWithoutReloading=e=>{let r=this.knownEnumsByName.get("Enum_LoadImage_image");if(r==null)throw new Error("Enum_LoadImage_image not found");r.values.push(e)};this.hasCheckpoint=e=>this.getCheckpoints().includes(e);this.getCheckpoints=()=>this.knownEnumsByName.get("Enum_CheckpointLoaderSimple_ckpt_name")?.values??[];this.getEnumOptionsForSelectPicker=e=>(this.knownEnumsByName.get(e)?.values??[]).map(n=>({asOptionLabel:n.toString(),value:n}));this.knownTypes=new Set;this.knownEnumsByName=new Map;this.knownEnumsByHash=new Map;this.nodes=[];this.nodesByNameInComfy={};this.nodesByNameInCushy={};this.nodesByProduction={};this.enumsAppearingInOutput=new Set;this.onHydrate=()=>{};this.hostRef=new Jn(this,"hostID",()=>this.db.hosts);this.processEnumNameOrValue=e=>{let r=[];for(let o of e.comfyEnumDef)typeof o=="string"||typeof o=="boolean"||typeof o=="number"?r.push(o):r.push(o.content);let n=r.length===0?`[[empty:${e.candidateName}]]`:r.sort().join("|"),i=this.knownEnumsByHash.get(n);return i==null?(i=si({enumNameInCushy:e.candidateName,values:r,aliases:[]}),this.knownEnumsByHash.set(n,i)):i.aliases.push(e.candidateName),this.knownEnumsByName.set(e.candidateName,i),i.enumNameInCushy};this.codegenDTS=()=>{let e="../src/",r=new Sc,n=r.w;n(""),n(`import type { ComfyNode } from '${e}core/ComfyNode'`),n(`import type { ComfyNodeMetadata } from '${e}types/ComfyNodeID'`),n(`import type { ComfyNodeOutput } from '${e}core/Slot'`),n(`import type { ComfyNodeSchemaJSON } from '${e}types/ComfySchemaJSON'`),n(""),n(`import type { GlobalFunctionToDefineAnApp } from '${e}cards/App'`),n(""),n("// CONTENT IN THIS FILE:"),n("//"),n("//  0. Entrypoint"),n("//  1. Requirable"),n("//  2. Embeddings"),n("//  3. Suggestions"),n("//  4. TYPES"),n("//  5. ACCEPTABLE"),n("//  6. ENUMS"),n("//  7. INTERFACES"),n("//  8. NODES"),n("//  9. INDEX"),n(""),n("declare global {"),n(""),n("/** @deprecated use the global 'app' function instead to register an app */"),n("const action: GlobalFunctionToDefineAnApp"),n(""),n("/** @deprecated use the global 'app' function instead to register an app */"),n("const card: GlobalFunctionToDefineAnApp"),n(""),n("const app: GlobalFunctionToDefineAnApp"),n(""),n(""),n(`
// 0. Entrypoint --------------------------`),n("export interface ComfySetup {");for(let s of this.nodes)n(`    /* category:${s.category}, name:"${s.nameInComfy}", output:${s.outputs.map(a=>a.nameInCushy).join("+")} */`),n(`    ${s.nameInCushy}(p: ${s.nameInCushy}_input, meta?: ComfyNodeMetadata): ${s.nameInCushy}`);n("}"),n(`
// 1. Requirable --------------------------`),n("export interface Requirable {");let i=this.requirables;for(let s of i)n(`    ${Cg(s.name)}: ${s.name},`);n("}"),n(`
// 2. Embeddings -------------------------------`),n(`export type Embeddings = ${this.data.embeddings.length==0?'""':this.data.embeddings.map(s=>cIe(s)).join(" | ")}`),n(`
// 3. Suggestions -------------------------------`);for(let[s,a]of Object.entries(lp))n(`export interface CanProduce_${a} {}`);for(let[s,a]of Object.entries(this.nodesByProduction))n(`export interface CanProduce_${s} extends Pick<ComfySetup, ${a.map(l=>`'${l}'`).join(" | ")}> { }`);for(let s of this.knownTypes)s in this.nodesByProduction||n(`export interface CanProduce_${s} {}`);n(`
// 4. TYPES -------------------------------`);let o=[...this.knownTypes.values()].map(s=>({comfyType:s,normalizedType:s,tsType:this.toTSType(s)})).sort((s,a)=>a.tsType.length-s.tsType.length);for(let s of o)n(`export type ${s.normalizedType} = ${s.tsType}`);n(`
// 5. ACCEPTABLE INPUTS -------------------------------`);for(let s of o)n(`export type _${s.normalizedType} = ${s.tsType} | HasSingle_${s.normalizedType} | ((x: CanProduce_${s.normalizedType}) => _${s.normalizedType})`);n(`
// 6. ENUMS -------------------------------`);for(let s of this.knownEnumsByHash.values())if(s.values.length>0){if(n(`export type ${s.enumNameInCushy} = ${s.values.map(a=>`${JSON.stringify(a)}`).join(" | ")}`),s.aliases.length>0)for(let a of s.aliases)n(`export type ${a} = ${s.enumNameInCushy}`)}else n(`export type ${s.enumNameInCushy} = '\u{1F534}' // never`);n("export type KnownEnumNames = keyof Requirable"),n(`
// 7. INTERFACES --------------------------`);for(let s of this.knownTypes.values())n(`export interface HasSingle_${s} { _${s}: ${s} } // prettier-ignore`);for(let s of this.enumsAppearingInOutput.values())n(`export interface HasSingle_${s} { _${s}: ${s} } // prettier-ignore`);n(`
// 8. NODES -------------------------------`);for(let s of this.nodes)n(s.codegen());n(`
// 9. INDEX -------------------------------`),n("export type Schemas = {");for(let s of this.nodes)n(`    ${s.nameInCushy}: ComfyNodeSchemaJSON,`);return n("}"),n("export type ComfyNodeType = keyof Schemas"),n("}"),r.content};this.toTSType=e=>lp[e]?`${lp[e]} | ComfyNodeOutput<'${e}'>`:`ComfyNodeOutput<'${e}'>`}get size(){return console.log("[\u{1F459}] ",yi(this.data.spec),Object.keys(this.data.spec).length),Object.keys(this.data.spec).length}onUpdate(){this.log(`updating schema (${this.id})`),this.knownTypes.clear(),this.knownEnumsByHash.clear(),this.knownEnumsByName.clear(),this.nodes.splice(0,this.nodes.length),this.nodesByNameInComfy={},this.nodesByNameInCushy={},this.nodesByProduction={},this.enumsAppearingInOutput.clear();let e=Object.entries(this.data.spec);for(let r of e){let n=r[0],i=r[1],s=yp(n," "),a=[],l=[],c=new a5(n,s,i.category,a,l);this.nodesByNameInComfy[n]=c,this.nodesByNameInCushy[s]=c,this.nodes.push(c);let p={};for(let[v,_]of i.output.entries()){let S=i.output_name[v]||(typeof _=="string"?_:`input_${v}`),T=yp(S,"_"),w=p[T]??=0,E=w===0?T:`${T}_${w}`;p[T]++;let I;if(typeof _=="string")I=yp(_,"_"),this.knownTypes.add(I);else if(Array.isArray(_)){let C=`Enum_${s}_${E}_out`;I=this.processEnumNameOrValue({candidateName:C,comfyEnumDef:_}),this.enumsAppearingInOutput.add(I)}else throw new Error(`invalid output ${v} "${_}" in node "${n}"`);let N=this.nodesByProduction[I];N==null?this.nodesByProduction[I]=[s]:N.push(s),l.push({typeName:I,nameInCushy:E,isPrimitive:!1})}let f=Object.entries(i.input?.optional??{}).map(([v,_])=>({required:!1,name:v,spec:_})),g=[...Object.entries(i.input?.required??{}).map(([v,_])=>({required:!0,name:v,spec:_})).filter(v=>f.find(_=>_.name===v.name)==null),...f];for(let v of g){let _=v.name,S=yp(v.name,"_"),T=v.spec,w=T[0],E=T[1],I;if(typeof w=="string")I=yp(w,"_"),this.knownTypes.add(I);else if(Array.isArray(w)){let N=`Enum_${s}_${S}`;I=this.processEnumNameOrValue({candidateName:N,comfyEnumDef:w})}else throw new Error(`invalid input "${v.name}" in node "${n}"`);if(I)c.inputs.push({required:v.required,nameInComfy:_,nameInComfyEscaped:Cg(_),type:I,opts:E,isPrimitive:aX.includes(I),index:c.inputs.length});else throw console.log(yi({ipt:v,typeDef:T,typeStuff:w})),console.log(yi({typeStuff:w})),new Error("object type not supported")}}}get requirables(){let e=[];for(let r of this.knownTypes)e.push({name:r,kind:"prim"});for(let r of this.knownEnumsByName)e.push({name:r[0],kind:"enum"});for(let r of this.nodes)e.push({name:r.nameInCushy,kind:"node"});return e}},a5=class{constructor(e,r,n,i,o){this.nameInComfy=e;this.nameInCushy=r;this.category=n;this.inputs=i;this.outputs=o;this.singleOuputs=[];this.category=this.category.replaceAll("/","_")}codegen(){let e=new Sc,r=e.w,n={};for(let o of this.outputs)n[o.typeName]=(n[o.typeName]??0)+1;this.singleOuputs=this.outputs.filter(o=>n[o.typeName]===1);let i=this.singleOuputs.map(o=>`HasSingle_${o.typeName}`);i.push(`ComfyNode<${this.nameInCushy}_input, ${this.nameInCushy}_output>`),r(`// ${this.nameInComfy} [${this.category}]`),r(`export interface ${this.nameInCushy} extends ${i.join(", ")} {`),r(`    nameInComfy: "${this.nameInComfy}"`),r("}"),r(`export interface ${this.nameInCushy}_output {`),this.outputs.forEach((o,s)=>{r(`    ${Cg(o.nameInCushy)}: ComfyNodeOutput<'${o.typeName}', ${s}>,`)}),r("}"),r(`export interface ${this.nameInCushy}_input {`);for(let o of this.inputs){let s=typeof o.opts=="string"?null:o.opts,a=o.type.startsWith("Enum_")?o.type:`_${o.type}`;s&&r(`    ${this.renderOpts(s)}`);let l=s?.default!==void 0||!o.required;r(`    ${o.nameInComfyEscaped}${l?"?":""}: ${a}`)}return r("}"),e.content}renderOpts(e){if(e==null||typeof e=="string")return null;let r="/**";return e.default!=null&&(r+=this.nameInComfy==="Cache Node"?" default='<redacted>'":` default=${JSON.stringify(e.default)}`),e.min!=null&&(r+=` min=${JSON.stringify(e.max)}`),e.max!=null&&(r+=` max=${JSON.stringify(e.max)}`),e.step!=null&&(r+=` step=${JSON.stringify(e.step)}`),r+=" */",r}},cIe=t=>t.includes("'")?`"${t}"`:`'${t}'`;var l5="src/db/cushy-1.db";xr();var FC=class{constructor(e){this.options=e;this.messageBuffer=[];this.isOpen=!1;this.debugMessages=[];this.addInfo=e=>{this.debugMessages.push({type:"info",timestamp:Date.now(),message:e}),console.info("[\u{1F9E6}] WS:",e)};this.addError=e=>{this.debugMessages.push({type:"error",timestamp:Date.now(),message:e}),console.error("[\u{1F9E6}] WS:",e)};this.url=e.url(),Ce(this),Sv(e.url,r=>this.updateURL(r),{fireImmediately:!0})}updateURL(e){this.url=e,this.connect()}connect(){this.isOpen=!1;let e=this.currentWS;this.reconnectTimeout&&clearTimeout(this.reconnectTimeout),this.currentWS=null,e&&(this.addInfo("Previous WebSocket discarded"),e.close());let r=new WebSocket(this.url);r.binaryType="arraybuffer",this.currentWS=r,this.options.onMessage&&(r.onmessage=n=>{this.options.onMessage(n)}),r.onopen=n=>{r===this.currentWS&&(this.addInfo("\u2705 WebSocket connected to "+this.url),this.isOpen=!0,this.options.onConnectOrReconnect(),this.flushMessageBuffer())},r.onclose=n=>{r===this.currentWS&&(this.addError(`WebSocket closed (reason=${JSON.stringify(n.reason)}, code=${n.code})`),this.isOpen=!1,this.addInfo("\u23F1\uFE0F reconnecting in 2 seconds..."),this.reconnectTimeout=setTimeout(()=>this.connect(),2e3))},r.onerror=n=>{r===this.currentWS&&(this.addError("WebSocket ERROR"+JSON.stringify(n)),console.error({event:n}))}}send(e){this.isOpen?this.currentWS?.send(e):this.messageBuffer.push(e)}flushMessageBuffer(){for(;this.messageBuffer.length>0;){let e=this.messageBuffer.shift();this.currentWS?.send(e)}}addEventListener(e,r,n){this.currentWS?.addEventListener(e,r,n)}removeEventListener(e,r,n){this.currentWS?.removeEventListener(e,r)}};var UC=class{constructor(){this.fileCacheFolder=null;this.comfyJSONPath=null;this.embeddingsPath=null;this.sdkDTSPath=null;this.schema=null;this.onHydrate=()=>{this.fileCacheFolder=this.st.resolve(this.st.rootPath,$r(`schema/hosts/${this.id}`)),br(this.fileCacheFolder)||(console.log("\u{1F7E2} creating folder",this.fileCacheFolder),lo(this.fileCacheFolder)),this.comfyJSONPath=this.st.resolve(this.fileCacheFolder,$r("object_info.json")),this.embeddingsPath=this.st.resolve(this.fileCacheFolder,$r("embeddings.json")),this.sdkDTSPath=this.st.resolve(this.fileCacheFolder,$r("sdk.dts.txt"));let r=yq(this.id);this.schema=this.st.db.comfy_schemas.getOrCreate(r,()=>({id:r,embeddings:[],spec:{},hostID:this.id}))};this.electAsPrimary=()=>{p_(`Primary host set to ${this.data.name}`),this.st.configFile.update({mainComfyHostID:this.id}),this._copyGeneratedSDKToGlobalDTS(),this.CONNECT()};this.downloadFileIfMissing=(e,r)=>{console.log("[\u{1F534}] NOT IMPLEMENTED")};this._copyGeneratedSDKToGlobalDTS=()=>{if(!br(this.sdkDTSPath))return void f_(`No SDK found for ${this.data.name}`);pR(this.sdkDTSPath,this.st.primarySdkDtsPath)};this.getWSUrl=()=>{let e=this.data.useHttps?"wss":"ws",r=this.data.hostname,n=this.data.port;return`${e}://${r}:${n}/ws`};this.schemaRetrievalLogs=[];this.resetLog=()=>{this.schemaRetrievalLogs.splice(0,this.schemaRetrievalLogs.length)};this.addLog=(...e)=>{this.schemaRetrievalLogs.push(e.join(" ")),console.info("[\u{1F431}] CONFY:",...e)};this.CONNECT=()=>{this.data.isVirtual?this.updateSchemaFromFileCache():this.initWebsocket(),this.data.isVirtual};this.writeSDKToDisk=()=>{let e=this.schema.codegenDTS();en(this.sdkDTSPath,e,"utf-8"),this.isPrimary&&en(this.st.primarySdkDtsPath,e,"utf-8"),this.st.githubUsername==="rvion"&&en("tmp/docs/ex/a.md","```ts\n"+e+"\n```\n","utf-8")};this.ws=null;this.initWebsocket=()=>(console.log("[\u{1F462}] WEBSOCKET: starting client to ComfyUI"),this.ws=new FC({onConnectOrReconnect:()=>this.fetchAndUdpateSchema(),onMessage:this.st.onMessage,url:this.getWSUrl,onClose:()=>{}}),this.ws);this._isUpdatingSchema=!1;this.schemaUpdateResult=null;this.updateSchemaFromFileCache=()=>{let e=this.st.readJSON(this.comfyJSONPath),r=this.st.readJSON(this.embeddingsPath);this.schema.update({spec:e,embeddings:r}),this.schema.RUN_BASIC_CHECKS(),this.writeSDKToDisk()};this.fetchAndUdpateSchema=async()=>{try{if(this.data.isVirtual)return;this.isUpdatingSchema=!0;let e={"Content-Type":"application/json"},r=`${this.getServerHostHTTP()}/object_info`,i=await(await fetch(r,{method:"GET",headers:e})).json(),o=Y0(i,4);en(this.comfyJSONPath,o,"utf-8");let s=`${this.getServerHostHTTP()}/embeddings`,l=await(await fetch(s,{method:"GET",headers:e})).json();en(this.embeddingsPath,JSON.stringify(l),"utf-8"),this.schema.update({spec:i,embeddings:l}),this.schema.RUN_BASIC_CHECKS(),this.writeSDKToDisk(),this.isUpdatingSchema=!1,this.schemaUpdateResult={type:"success"}}catch(e){this.isUpdatingSchema=!1,this.schemaUpdateResult={type:"error",error:e},console.error(e),console.error("\u{1F534} FAILURE TO GENERATE nodes.d.ts",bT(e)),br(this.sdkDTSPath)||this.writeSDKToDisk()}finally{this.isUpdatingSchema=!1}}}getServerHostHTTP(){let e=this.data.useHttps?"https":"http",r=this.data.hostname,n=this.data.port;return`${e}://${r}:${n}`}get isConnected(){return this.ws?.isOpen}get isPrimary(){return this.st.configFile.value.mainComfyHostID===this.id}get isUpdatingSchema(){return this._isUpdatingSchema}set isUpdatingSchema(e){this._isUpdatingSchema=e}};var dIe=0,BC=class{constructor(e){this.st=e;this._tables=[];this.migrate=()=>{vQ(),_Q(this)};this.runCodegen=()=>{wQ(this)};this._getCount=e=>this.db.prepare(`select count(id) as count from ${e}`).get().count;this.prepareGet=(e,r)=>{try{let n=this.db.prepare(r);return i=>{let o=n.get(i);return o==null?null:(e.hydrateJSONFields(o),o)}}catch(n){throw console.log(r),n}};this.prepareGet0=(e,r)=>{try{let n=this.db.prepare(r);return()=>{let i=n.get();return i==null?null:(e.hydrateJSONFields(i),i)}}catch(n){throw console.log(r),n}};this.prepareAll=(e,r)=>{try{let n=this.db.prepare(r);return i=>n.all(i).map(o=>e.hydrateJSONFields(o))}catch(n){throw console.log(r),n}};this.prepareDelete=e=>{let r=this.db.prepare(e);return n=>r.run(n)};this.log=(...e)=>console.log(`{${dIe++}}`,...e);this.reset=()=>this.erase();this.erase=()=>{this.db.close(),zv(l5)};let r=(0,BQ.default)(l5,{nativeBinding:"node_modules/better-sqlite3/build/Release/better_sqlite3.node"});r.pragma("journal_mode = WAL"),this.db=r,SQ(this),this.migrate(),Ce(this),this.projects=new zn(this,"project","\u{1F920}",LC,{singleton:!0}),this.custom_datas=new zn(this,"custom_data","\u{1F381}",AC),this.comfy_schemas=new zn(this,"comfy_schema","\u{1F4D1}",MC),this.hosts=new zn(this,"host","\u{1F4D1}",UC),this.comfy_prompts=new zn(this,"comfy_prompt","\u2753",If),this.cushy_scripts=new zn(this,"cushy_script","\u2B50\uFE0F",NC),this.cushy_apps=new zn(this,"cushy_app","\u{1F31F}",IC),this.media_texts=new zn(this,"media_text","\u{1F4AC}",ec),this.media_images=new zn(this,"media_image","\u{1F5BC}\uFE0F",Hl),this.media_videos=new zn(this,"media_video","\u{1F5BC}\uFE0F",tc),this.media_splats=new zn(this,"media_splat","\u{1F5BC}\uFE0F",Af),this.media_3d_displacement=new zn(this,"media_3d_displacement","\u{1F5BC}\uFE0F",Zu),this.tree_entries=new zn(this,"tree_entry","\u{1F5BC}\uFE0F",OC),this.runtimeErrors=new zn(this,"runtime_error","\u274C",kf),this.drafts=new zn(this,"draft","\u{1F4DD}",PC),this.graphs=new zn(this,"graph","\u{1F4CA}",Nf),this.steps=new zn(this,"step","\u{1F6B6}\u200D\u2642\uFE0F",bf),this.auths=new zn(this,"auth","\u{1F6B6}\u200D\u2642\uFE0F",_C)}};function Vf(t){return typeof t=="string"?JSON.stringify(t):typeof t=="number"||typeof t=="boolean"?t.toString():t}function jQ(t,e){return pIe(t,e)}function pIe(t,e){let r=t.length,n=new Array(r),i={},o=r;for(;o--;)i[o]||s(WQ(t[o]),o,[]);return n;function s(a,l,c){let p=l;if(c.indexOf(a)>=0)throw console.log(c,a),new Error("Cyclic dependency: "+JSON.stringify(a));if(t.indexOf(a)==-1)throw new Error("[toposort] Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(a)+"; known nodes are "+JSON.stringify(t));if(i[p])return;i[p]=!0;let f=e.filter(m=>m[0]===a);if(p=f.length,p){let m=c.concat(a);do{let g=WQ(f[--p])[1];s(g,t.indexOf(g),m)}while(p)}n[--r]=a}}function WQ(t){if(t==null)throw new Error("BONG");return t}var WC=class{constructor(){this.outputNamer={};this.name=e=>{let r=this.outputNamer[e]??=0,n=r===0?e:`${e}_${r}`;return this.outputNamer[e]++,n}}};var jC=class{constructor(e){this.st=e;this.UI_ONLY_ATTRIBUTES=["Random seed after every gen","choose file to upload"];this.RULES=[e=>{e.nodeName==="KSampler"&&e.inputName==="sampler_name"&&typeof e.valueStr=="string"&&e.valueStr.startsWith("sample_")&&(e.valueStr=e.valueStr.replace("sample_",""))}];this.knownAliaes={LatentUpscaleBy:"Latent Upscale by Factor (WAS)"};this.nameDedupeCache={};this.mkVarNameForNodeType=(e,r)=>e==="CheckpointLoaderSimple"?this.finalizeName("ckpt"):r.length===1?this.finalizeName(r[0]):this.finalizeName(e);this.finalizeName=e=>{let r=this.smartTrim(this.smartDownCase(e));return this.nameDedupeCache[r]==null?(this.nameDedupeCache[r]=1,r):`${r}_${this.nameDedupeCache[r]++}`};this.smartDownCase=e=>e===e.toUpperCase()?e.toLowerCase():e[0].toLowerCase()+e.slice(1);this.smartTrim=e=>e!=="Loader"&&e.endsWith("Loader")?e.slice(0,-6):e!=="Image"&&e.endsWith("Image")?e.slice(0,-5):e;this.convertPromptToCode=(e,r)=>{let n=Object.entries(e),i=Object.keys(e),o=[];for(let[N,C]of n){let k=Object.entries(C.inputs);for(let[U,$]of k)if(Array.isArray($)){let G=$[0],K=N;o.push([G,K])}}console.log(`1. toposrt (${o.map(N=>N.join("->")).join(",")})`);let s=jQ(i,o),a=new Sc,l=new Sc,c=new Sc,{w:p,append:f}=a,{w:m,append:g}=l,{w:v,append:_}=c;p("app({ "),p("    metadata:{"),r.author&&p(`        author: ${JSON.stringify(r.author)},`),r.title&&p(`        name: ${JSON.stringify(r.title)},`),r.illustration&&p(`        illustration: ${JSON.stringify(r.illustration)},`),p("    },"),m("    run: async (run, ui) => {"),m("        const graph = run.nodes"),v("    ui: (form) => ({");let S=new Map,T=new Map,w=new WC;for(let N of s){let C=e[N],k=yp(C.class_type," "),U=this.mkVarNameForNodeType(k,[]);S.set(N,U);let $=this.st.schema.nodesByNameInCushy[k]??this.st.schema.nodesByNameInCushy[this.knownAliaes[k]];if($==null){let ne=`schema not found for ${k}`;throw console.error("\u{1F525}",ne),console.error("\u{1F525}",`known schemas: ${Object.keys(this.st.schema.nodesByNameInCushy).join(", ")}`),new Error(ne)}let G=0;for(let ne of $.outputs??[]){let H=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(ne.nameInCushy);T.set(`${N}-${G++}`,H?`${U}.outputs.${ne.nameInCushy}`:`${U}.outputs["${ne.nameInCushy}"]`)}if(C==null)throw new Error("node not found");g(`        const ${U} = graph.${k}({`);let K=w.name(`${C.class_type}`),X=Object.entries(C.inputs)??[],te=[];for(let[ne,H]of X){let re=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(ne);if(this.UI_ONLY_ATTRIBUTES.includes(ne))continue;let W=Array.isArray(H)?T.get(H.join("-")):H,q={inputName:ne,nodeName:k,valueStr:W};for(let J of this.RULES)J(q);let se=re?ne:`'${ne}'`;if(Array.isArray(H))g(`${se}: ${q.valueStr}, `);else if(r.autoUI){let J=$.inputs.find(ae=>ae.nameInComfy===ne),ye=w.name(ne),Ne={typeofValue:W==null?typeof W:"strOpt",name:ye,schema:J,nameEscaped:Cg(ye),default:W};te.push(`${Ne.nameEscaped}: ${I(Ne)} /* ${Ne.schema?.type} */,`),g(`${se}: ${E(Ne,K)}, `)}else g(`${se}: ${Vf(q.valueStr)}, `)}if(te.length===1)_(`        ${K}: form.group({`),_(` items:() => ({ ${te[0]} })`),_(`}),
`);else if(te.length>0){v(`        ${K}: form.group({`),v("           items:() => ({");for(let ne of te)v("                "+ne);v("            }),"),v("        }),")}r.preserveId?m(`}, {id: '${N}'})`):m("})")}m("        await run.PROMPT()"),m("    },");function E(N,C){let k=N.schema,U=N.name,$=C?`ui.${C}`:"ui";return k==null?"null":k.type==="Enum_LoadImage_image"?`await run.loadImageAnswerAsEnum(${$}${s5(U)})`:`${$}${s5(U)}`}function I(N){let C="form",k=N.schema;if(k==null)return`${C}.${N.typeofValue}({default: ${Vf(N.default)}})`;if(N.name==="seed"&&k.type==="INT")return`${C}.seed({default: ${Vf(N.default)}})`;if(k.type==="Enum_LoadImage_image")return`${C}.image({default: ${Vf(N.default)}})`;if(k.type.startsWith("Enum_"))return`${C}.enum({default: ${Vf(N.default)}, enumName: ${JSON.stringify(k.type)}})`;if(k.type in lp){let U=(()=>{let ne=k.type.toLowerCase();return ne==="boolean"?"boolean":ne==="float"?"float":ne==="int"||ne==="integer"?"int":ne==="string"?"string":lp[k.type]??"str"})();!k.required&&U!="boolean"&&(U+="Opt");let $=typeof k.opts=="object"?k.opts:{},G=$.min!=null?`, min: ${$.min}`:"",K=$.max!=null?`, max: ${$.max}`:"",X=$.step!=null?`, step: ${$.step}`:"",te=`${G}${K}${X}`;return`${C}.${U}({default: ${Vf(N.default)}${te}})`}}return v("    }),"),p(c.content),p(l.content),p("})"),a.content}}};var bo=ie(MZ(),1);var M2=ie(ve(),1);var V5=t=>Yke(G5(t)),Yke=t=>{let e=0,r,n;for(r=0;r<t.length;r++)n=t.charCodeAt(r),e=(e<<5)-e+n,e|=0;return e};function G5(t){let e=typeof t;if(e==="string")return JSON.stringify(t);if(Array.isArray(t)){let r="[",n=t.length-1;for(let i=0;i<t.length;i++)r+=G5(t[i]),i!==n&&(r+=",");return`${r}]`}if(e==="object"&&t!==null){let r="{",n=Object.keys(t).filter(i=>t[i]!==void 0).sort();for(let i=0;i<n.length;i++){let o=n[i],s=t[o];s!==void 0&&(i!==0&&(r+=","),r+=`${JSON.stringify(o)}:${G5(s)}`)}return`${r}}`}if(e==="number"||e==="boolean"||t==null)return`${t}`;throw new TypeError(`Invalid JSON type of ${e}, value ${t}. FJSH can only hash JSON objects.`)}var FZ="LEFT_PANE_TABSET",UZ="RIGHT_PANE_TABSET";var L2=class{constructor(e){this.st=e;this.modelKey=0;this.setModel=e=>{this.model=e,this.modelKey++};this.currentPerspectiveName="default";this.allPerspectives=[{label:"default",value:"default"},{label:"test",value:"test"}];this.saveCurrent=()=>this.saveCurrentAs(this.currentPerspectiveName);this.saveCurrentAsDefault=()=>this.saveCurrentAs("default");this.saveCurrentAs=e=>{let r=this.model.toJson();this.st.configFile.update(n=>{n.layouts_v8??={},n.layouts_v8[e]=r})};this.resetCurrent=()=>this.reset(this.currentPerspectiveName);this.resetDefault=()=>this.reset("default");this.reset=e=>{this.st.configFile.update(r=>{r.layouts_v8??={},delete r.layouts_v8[e]}),e===this.currentPerspectiveName&&this.setModel(bo.Model.fromJson(this.build()))};this.layoutRef=(0,M2.createRef)();this.updateCurrentTab=e=>{let r=this.currentTab;r!=null&&this.model.doAction(bo.Actions.updateNodeAttributes(r.getId(),e))};this.currentTabSet=null;this.currentTab=null;this.currentTabID=null;this.UI=F(()=>(console.log("[\u{1F4A0}] Rendering Layout"),h(bo.Layout,{onModelChange:e=>{_r(()=>{this.currentTabSet=e.getActiveTabset(),this.currentTab=this.currentTabSet?.getSelectedNode(),this.currentTabID=this.currentTab?.getId()}),console.log("[\u{1F4A0}] Layout: \u{1F4E6} onModelChange"),this.saveCurrentAsDefault()},ref:this.layoutRef,model:this.model,factory:this.factory})));this.nextPaintIDx=0;this.openAppInMainPanel=e=>{throw new Error("not implemented")};this.openAppInNewPanel=e=>{throw new Error("not implemented")};this.renameTab=(e,r)=>{this.model.getNodeById(e)!=null&&this.model.doAction(bo.Actions.renameTab(e,r))};this.renameCurrentTab=e=>{let r=this.model.getActiveTabset();if(r==null)return;let n=r.getSelectedNode();if(n==null)return;let i=n.getId();this.model.doAction(bo.Actions.renameTab(i,e))};this.closeCurrentTab=()=>{if(this.fullPageComp!=null)return this.fullPageComp=null,"success";let e=this.model.getActiveTabset();if(e==null)return"skipped";let r=e.getSelectedNode();if(r==null)return"skipped";let n=r.getId();this.model.doAction(bo.Actions.deleteTab(n));let i=e.getSelectedNode();return i!=null&&this.model.doAction(bo.Actions.selectTab(i.getId())),"success"};this.closeTab=e=>{let r=this.currentTabID===e;return this.model.doAction(bo.Actions.deleteTab(e)),"success"};this.TOGGLE_FULL=(e,r)=>{this.fullPageComp==null||this.fullPageComp.panel!==e?this.fullPageComp={props:r,panel:e}:this.fullPageComp=null};this.FOCUS_OR_CREATE=(e,r,n=UZ)=>{if(n==="full")return this.TOGGLE_FULL(e,r),null;let i=this.layoutRef.current;if(i==null)return void console.log("\u274C no currentLayout");let o=`/${e}/${V5(r??{})}`,s;s=this.model.getNodeById(o),console.log(`\u{1F98A} prevTab for ${o}:`,s);let{icon:a,title:l}=K0[e].header(r);if(s==null){let c=n==="current"?this.currentTabSet?.getId()??FZ:n;if(i.addTabToTabSet(c,{component:e,id:o,icon:a,name:l,config:r}),s=this.model.getNodeById(o),s==null)return void console.log("\u274C no tabAdded")}else this.model.doAction(bo.Actions.updateNodeAttributes(o,{config:r})),this.model.doAction(bo.Actions.selectTab(o));return this.model.doAction(bo.Actions.updateNodeAttributes(o,r)),s};this._add=e=>{let{panel:r,props:n}=e,i=`/${r}/${V5(n??{})}`,{icon:o,title:s}=K0[r].header(n);return{id:i,type:"tab",name:s,config:n,component:e.panel,enableClose:e.canClose??!0,enableRename:!1,enableFloat:!0,icon:o}};this.build=()=>({global:{splitterSize:6,borderEnableAutoHide:!0,borderAutoSelectTabWhenClosed:!0},borders:[{type:"border",location:"left",selected:0,show:!0,children:[this._add({panel:"FileList",props:{},canClose:!1,width:250})]},{type:"border",location:"right",show:!0,selected:0,children:[this._add({panel:"Steps",props:{},canClose:!1})]}],layout:{id:"rootRow",type:"row",children:[{id:"leftPane",type:"row",width:100,children:[{type:"tabset",id:FZ,minWidth:150,minHeight:150,width:512,enableClose:!1,enableDeleteWhenEmpty:!1,children:[this._add({panel:"CurrentDraft",canClose:!1,props:{},width:512})]}]},{id:"rightPane",type:"row",weight:100,children:[{type:"tabset",id:UZ,enableClose:!1,enableDeleteWhenEmpty:!1,minWidth:100,minHeight:100,children:[this._add({panel:"Output",props:{},canClose:!1})]},{type:"tabset",height:256,minWidth:100,minHeight:100,children:[this._add({panel:"Gallery",props:{}}),this._add({panel:"LastImage",props:{}})]}]}]}});this.fullPageComp=null;this.factory=e=>{let r=e.getComponent();if(r==null)return h(fn,{type:"error",showIcon:!0,children:"no panel (TabNode.getComponent())"});let n=e.getConfig();return n==null?h(fn,{type:"error",showIcon:!0,children:"no panel props (TabNode.getConfig())"}):(0,M2.createElement)(_E,{panel:r,panelProps:n})};let n=e.configFile.value.layouts_v8?.default??this.build();try{this.setModel(bo.Model.fromJson(n))}catch(i){console.log("[\u{1F4A0}] Layout: \u274C error loading layout",i),this.setModel(bo.Model.fromJson(this.build()))}Ce(this,{layoutRef:!1})}};xr();var Q2=ie(HZ(),1),K2=ie(K5(),1);var Gte=ie(X5(),1),$g=ie(X5(),1),X2=Object.defineProperty,mNe=Object.defineProperties,hNe=Object.getOwnPropertyDescriptor,gNe=Object.getOwnPropertyDescriptors,m4=Object.getOwnPropertyNames,qZ=Object.getOwnPropertySymbols,Tee=Object.prototype.hasOwnProperty,yNe=Object.prototype.propertyIsEnumerable,GZ=(t,e,r)=>e in t?X2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Aa=(t,e)=>{for(var r in e||(e={}))Tee.call(e,r)&&GZ(t,r,e[r]);if(qZ)for(var r of qZ(e))yNe.call(e,r)&&GZ(t,r,e[r]);return t},P_=(t,e)=>mNe(t,gNe(e)),vNe=t=>X2(t,"__esModule",{value:!0}),We=(t,e)=>function(){return t&&(e=(0,t[m4(t)[0]])(t=0)),e},_Ne=(t,e)=>function(){return e||(0,t[m4(t)[0]])((e={exports:{}}).exports,e),e.exports},Hn=(t,e)=>{for(var r in e)X2(t,r,{get:e[r],enumerable:!0})},bNe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of m4(e))!Tee.call(t,i)&&(r||i!=="default")&&X2(t,i,{get:()=>e[i],enumerable:!(n=hNe(e,i))||n.enumerable});return t},In=(t=>(e,r)=>t&&t.get(e)||(r=bNe(vNe({}),e,1),t&&t.set(e,r),r))(typeof WeakMap<"u"?new WeakMap:0),R_=(t,e,r)=>new Promise((n,i)=>{var o=l=>{try{a(r.next(l))}catch(c){i(c)}},s=l=>{try{a(r.throw(l))}catch(c){i(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(o,s);a((r=r.apply(t,e)).next())});function xNe(...t){let e=new String(t);return J2.set(e,t),e}function G2(t){return t instanceof String&&J2.has(t)}function VZ(t){return J2.get(t)||[]}var J2,U_=We({"src/lib/args/pathspec.ts"(){J2=new WeakMap}}),kc,Ap=We({"src/lib/errors/git-error.ts"(){kc=class extends Error{constructor(t,e){super(e),this.task=t,Object.setPrototypeOf(this,new.target.prototype)}}}}),B_,qg=We({"src/lib/errors/git-response-error.ts"(){Ap(),B_=class extends kc{constructor(t,e){super(void 0,e||String(t)),this.git=t}}}}),wee,See=We({"src/lib/errors/task-configuration-error.ts"(){Ap(),wee=class extends kc{constructor(t){super(void 0,t)}}}});function Eee(t){return typeof t=="function"?t:am}function Cee(t){return typeof t=="function"&&t!==am}function Dee(t,e){let r=t.indexOf(e);return r<=0?[t,""]:[t.substr(0,r),t.substr(r+1)]}function Iee(t,e=0){return kee(t)&&t.length>e?t[e]:void 0}function sm(t,e=0){if(kee(t)&&t.length>e)return t[t.length-1-e]}function kee(t){return!!(t&&typeof t.length=="number")}function W_(t="",e=!0,r=`
`){return t.split(r).reduce((n,i)=>{let o=e?i.trim():i;return o&&n.push(o),n},[])}function h4(t,e){return W_(t,!0).map(r=>e(r))}function g4(t){return(0,Q2.exists)(t,Q2.FOLDER)}function vr(t,e){return Array.isArray(t)?t.includes(e)||t.push(e):t.add(e),e}function Nee(t,e){return Array.isArray(t)&&!t.includes(e)&&t.push(e),t}function Z2(t,e){if(Array.isArray(t)){let r=t.indexOf(e);r>=0&&t.splice(r,1)}else t.delete(e);return e}function Np(t){return Array.isArray(t)?t:[t]}function Aee(t){return Np(t).map(String)}function an(t,e=0){if(t==null)return e;let r=parseInt(t,10);return isNaN(r)?e:r}function L_(t,e){let r=[];for(let n=0,i=t.length;n<i;n++)r.push(e,t[n]);return r}function M_(t){return(Array.isArray(t)?Buffer.concat(t):t).toString("utf-8")}function Oee(t,e){return Object.assign({},...e.map(r=>r in t?{[r]:t[r]}:{}))}function r4(t=0){return new Promise(e=>setTimeout(e,t))}var Hg,am,j_,eD=We({"src/lib/utils/util.ts"(){Hg="\0",am=()=>{},j_=Object.prototype.toString.call.bind(Object.prototype.toString)}});function uu(t,e,r){return e(t)?t:arguments.length>2?r:void 0}function y4(t,e){let r=G2(t)?"string":typeof t;return/number|string|boolean/.test(r)&&(!e||!e.includes(r))}function v4(t){return!!t&&j_(t)==="[object Object]"}function Ree(t){return typeof t=="function"}var z_,xo,Pee,V2,_4,Lee=We({"src/lib/utils/argument-filters.ts"(){eD(),U_(),z_=t=>Array.isArray(t),xo=t=>typeof t=="string",Pee=t=>Array.isArray(t)&&t.every(xo),V2=t=>xo(t)||Array.isArray(t)&&t.every(xo),_4=t=>t==null||"number|boolean|function".includes(typeof t)?!1:Array.isArray(t)||typeof t=="string"||typeof t.length=="number"}}),n4,TNe=We({"src/lib/utils/exit-codes.ts"(){n4=(t=>(t[t.SUCCESS=0]="SUCCESS",t[t.ERROR=1]="ERROR",t[t.NOT_FOUND=-2]="NOT_FOUND",t[t.UNCLEAN=128]="UNCLEAN",t))(n4||{})}}),F_,wNe=We({"src/lib/utils/git-output-streams.ts"(){F_=class{constructor(t,e){this.stdOut=t,this.stdErr=e}asStrings(){return new F_(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),Ut,kp,SNe=We({"src/lib/utils/line-parser.ts"(){Ut=class{constructor(t,e){this.matches=[],this.parse=(r,n)=>(this.resetMatches(),this._regExp.every((i,o)=>this.addMatch(i,o,r(o)))?this.useMatches(n,this.prepareMatches())!==!1:!1),this._regExp=Array.isArray(t)?t:[t],e&&(this.useMatches=e)}useMatches(t,e){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(t,e,r){let n=r&&t.exec(r);return n&&this.pushMatch(e,n),!!n}pushMatch(t,e){this.matches.push(...e.slice(1))}},kp=class extends Ut{addMatch(t,e,r){return/^remote:\s/.test(String(r))&&super.addMatch(t,e,r)}pushMatch(t,e){(t>0||e.length>1)&&super.pushMatch(t,e)}}}});function Mee(...t){let e=process.cwd(),r=Object.assign(Aa({baseDir:e},Fee),...t.filter(n=>typeof n=="object"&&n));return r.baseDir=r.baseDir||e,r.trimmed=r.trimmed===!0,r}var Fee,ENe=We({"src/lib/utils/simple-git-options.ts"(){Fee={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:!1}}});function b4(t,e=[]){return v4(t)?Object.keys(t).reduce((r,n)=>{let i=t[n];return G2(i)?r.push(i):y4(i,["boolean"])?r.push(n+"="+i):r.push(n),r},e):e}function gs(t,e=0,r=!1){let n=[];for(let i=0,o=e<0?t.length:e;i<o;i++)"string|number".includes(typeof t[i])&&n.push(String(t[i]));return b4(x4(t),n),r||n.push(...CNe(t)),n}function CNe(t){let e=typeof sm(t)=="function";return uu(sm(t,e?1:0),z_,[])}function x4(t){let e=Ree(sm(t));return uu(sm(t,e?1:0),v4)}function kn(t,e=!0){let r=Eee(sm(t));return e||Cee(r)?r:void 0}var DNe=We({"src/lib/utils/task-options.ts"(){Lee(),eD(),U_()}});function i4(t,e){return t(e.stdOut,e.stdErr)}function Vs(t,e,r,n=!0){return Np(r).forEach(i=>{for(let o=W_(i,n),s=0,a=o.length;s<a;s++){let l=(c=0)=>{if(!(s+c>=a))return o[s+c]};e.some(({parse:c})=>c(l,t))}}),t}var INe=We({"src/lib/utils/task-parser.ts"(){eD()}}),Uee={};Hn(Uee,{ExitCodes:()=>n4,GitOutputStreams:()=>F_,LineParser:()=>Ut,NOOP:()=>am,NULL:()=>Hg,RemoteLineParser:()=>kp,append:()=>vr,appendTaskOptions:()=>b4,asArray:()=>Np,asFunction:()=>Eee,asNumber:()=>an,asStringArray:()=>Aee,bufferToString:()=>M_,callTaskParser:()=>i4,createInstanceConfig:()=>Mee,delay:()=>r4,filterArray:()=>z_,filterFunction:()=>Ree,filterHasLength:()=>_4,filterPlainObject:()=>v4,filterPrimitives:()=>y4,filterString:()=>xo,filterStringArray:()=>Pee,filterStringOrStringArray:()=>V2,filterType:()=>uu,first:()=>Iee,folderExists:()=>g4,forEachLineWithContent:()=>h4,getTrailingOptions:()=>gs,including:()=>Nee,isUserFunction:()=>Cee,last:()=>sm,objectToString:()=>j_,parseStringResponse:()=>Vs,pick:()=>Oee,prefixedArray:()=>L_,remove:()=>Z2,splitOn:()=>Dee,toLinesWithContent:()=>W_,trailingFunctionArgument:()=>kn,trailingOptionsArgument:()=>x4});var kt=We({"src/lib/utils/index.ts"(){Lee(),TNe(),wNe(),SNe(),ENe(),DNe(),INe(),eD()}}),Bee={};Hn(Bee,{CheckRepoActions:()=>o4,checkIsBareRepoTask:()=>jee,checkIsRepoRootTask:()=>Wee,checkIsRepoTask:()=>kNe});function kNe(t){switch(t){case"bare":return jee();case"root":return Wee()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:tD,parser:T4}}function Wee(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:tD,parser(e){return/^\.(git)?$/.test(e.trim())}}}function jee(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:tD,parser:T4}}function NNe(t){return/(Not a git repository|Kein Git-Repository)/i.test(String(t))}var o4,tD,T4,zee=We({"src/lib/tasks/check-is-repo.ts"(){kt(),o4=(t=>(t.BARE="bare",t.IN_TREE="tree",t.IS_REPO_ROOT="root",t))(o4||{}),tD=({exitCode:t},e,r,n)=>{if(t===128&&NNe(e))return r(Buffer.from("false"));n(e)},T4=t=>t.trim()==="true"}});function ANe(t,e){let r=new $ee(t),n=t?qee:Hee;return W_(e).forEach(i=>{let o=i.replace(n,"");r.paths.push(o),(Gee.test(o)?r.folders:r.files).push(o)}),r}var $ee,Hee,qee,Gee,ONe=We({"src/lib/responses/CleanSummary.ts"(){kt(),$ee=class{constructor(t){this.dryRun=t,this.paths=[],this.files=[],this.folders=[]}},Hee=/^[a-z]+\s*/i,qee=/^[a-z]+\s+[a-z]+\s*/i,Gee=/\/$/}}),s4={};Hn(s4,{EMPTY_COMMANDS:()=>rD,adhocExecTask:()=>Vee,configurationErrorTask:()=>ys,isBufferTask:()=>Yee,isEmptyTask:()=>Xee,straightThroughBufferTask:()=>Kee,straightThroughStringTask:()=>zo});function Vee(t){return{commands:rD,format:"empty",parser:t}}function ys(t){return{commands:rD,format:"empty",parser(){throw typeof t=="string"?new wee(t):t}}}function zo(t,e=!1){return{commands:t,format:"utf-8",parser(r){return e?String(r).trim():r}}}function Kee(t){return{commands:t,format:"buffer",parser(e){return e}}}function Yee(t){return t.format==="buffer"}function Xee(t){return t.format==="empty"||!t.commands.length}var rD,$n=We({"src/lib/tasks/task.ts"(){See(),rD=[]}}),Jee={};Hn(Jee,{CONFIG_ERROR_INTERACTIVE_MODE:()=>w4,CONFIG_ERROR_MODE_REQUIRED:()=>S4,CONFIG_ERROR_UNKNOWN_OPTION:()=>E4,CleanOptions:()=>z2,cleanTask:()=>Qee,cleanWithOptionsTask:()=>RNe,isCleanOptionsArray:()=>PNe});function RNe(t,e){let{cleanMode:r,options:n,valid:i}=LNe(t);return r?i.options?(n.push(...e),n.some(UNe)?ys(w4):Qee(r,n)):ys(E4+JSON.stringify(t)):ys(S4)}function Qee(t,e){return{commands:["clean",`-${t}`,...e],format:"utf-8",parser(n){return ANe(t==="n",n)}}}function PNe(t){return Array.isArray(t)&&t.every(e=>C4.has(e))}function LNe(t){let e,r=[],n={cleanMode:!1,options:!0};return t.replace(/[^a-z]i/g,"").split("").forEach(i=>{MNe(i)?(e=i,n.cleanMode=!0):n.options=n.options&&FNe(r[r.length]=`-${i}`)}),{cleanMode:e,options:r,valid:n}}function MNe(t){return t==="f"||t==="n"}function FNe(t){return/^-[a-z]$/i.test(t)&&C4.has(t.charAt(1))}function UNe(t){return/^-[^\-]/.test(t)?t.indexOf("i")>0:t==="--interactive"}var w4,S4,E4,z2,C4,Zee=We({"src/lib/tasks/clean.ts"(){ONe(),kt(),$n(),w4="Git clean interactive mode is not supported",S4='Git clean mode parameter ("n" or "f") is required',E4="Git clean unknown option found in: ",z2=(t=>(t.DRY_RUN="n",t.FORCE="f",t.IGNORED_INCLUDED="x",t.IGNORED_ONLY="X",t.EXCLUDING="e",t.QUIET="q",t.RECURSIVE="d",t))(z2||{}),C4=new Set(["i",...Aee(Object.values(z2))])}});function BNe(t){let e=new tte;for(let r of ete(t))e.addValue(r.file,String(r.key),r.value);return e}function WNe(t,e){let r=null,n=[],i=new Map;for(let o of ete(t,e))o.key===e&&(n.push(r=o.value),i.has(o.file)||i.set(o.file,[]),i.get(o.file).push(r));return{key:e,paths:Array.from(i.keys()),scopes:i,value:r,values:n}}function jNe(t){return t.replace(/^(file):/,"")}function*ete(t,e=null){let r=t.split("\0");for(let n=0,i=r.length-1;n<i;){let o=jNe(r[n++]),s=r[n++],a=e;if(s.includes(`
`)){let l=Dee(s,`
`);a=l[0],s=l[1]}yield{file:o,key:a,value:s}}}var tte,zNe=We({"src/lib/responses/ConfigList.ts"(){kt(),tte=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce((t,e)=>Object.assign(t,this.values[e]),{})),this._all}addFile(t){if(!(t in this.values)){let e=sm(this.files);this.values[t]=e?Object.create(this.values[e]):{},this.files.push(t)}return this.values[t]}addValue(t,e,r){let n=this.addFile(t);n.hasOwnProperty(e)?Array.isArray(n[e])?n[e].push(r):n[e]=[n[e],r]:n[e]=r,this._all=void 0}}}});function J5(t,e){return typeof t=="string"&&a4.hasOwnProperty(t)?t:e}function $Ne(t,e,r,n){let i=["config",`--${n}`];return r&&i.push("--add"),i.push(t,e),{commands:i,format:"utf-8",parser(o){return o}}}function HNe(t,e){let r=["config","--null","--show-origin","--get-all",t];return e&&r.splice(1,0,`--${e}`),{commands:r,format:"utf-8",parser(n){return WNe(n,t)}}}function qNe(t){let e=["config","--list","--show-origin","--null"];return t&&e.push(`--${t}`),{commands:e,format:"utf-8",parser(r){return BNe(r)}}}function GNe(){return{addConfig(t,e,...r){return this._runTask($Ne(t,e,r[0]===!0,J5(r[1],"local")),kn(arguments))},getConfig(t,e){return this._runTask(HNe(t,J5(e,void 0)),kn(arguments))},listConfig(...t){return this._runTask(qNe(J5(t[0],void 0)),kn(arguments))}}}var a4,rte=We({"src/lib/tasks/config.ts"(){zNe(),kt(),a4=(t=>(t.system="system",t.global="global",t.local="local",t.worktree="worktree",t))(a4||{})}});function VNe(...t){return new ite().param(...t)}function KNe(t){let e=new Set,r={};return h4(t,n=>{let[i,o,s]=n.split(Hg);e.add(i),(r[i]=r[i]||[]).push({line:an(o),path:i,preview:s})}),{paths:e,results:r}}function YNe(){return{grep(t){let e=kn(arguments),r=gs(arguments);for(let i of nte)if(r.includes(i))return this._runTask(ys(`git.grep: use of "${i}" is not supported.`),e);typeof t=="string"&&(t=VNe().param(t));let n=["grep","--null","-n","--full-name",...r,...t];return this._runTask({commands:n,format:"utf-8",parser(i){return KNe(i)}},e)}}}var nte,O_,KZ,ite,ote=We({"src/lib/tasks/grep.ts"(){kt(),$n(),nte=["-h"],O_=Symbol("grepQuery"),ite=class{constructor(){this[KZ]=[]}*[(KZ=O_,Symbol.iterator)](){for(let t of this[O_])yield t}and(...t){return t.length&&this[O_].push("--and","(",...L_(t,"-e"),")"),this}param(...t){return this[O_].push(...L_(t,"-e")),this}}}}),ste={};Hn(ste,{ResetMode:()=>$2,getResetMode:()=>JNe,resetTask:()=>XNe});function XNe(t,e){let r=["reset"];return ate(t)&&r.push(`--${t}`),r.push(...e),zo(r)}function JNe(t){if(ate(t))return t;switch(typeof t){case"string":case"undefined":return"soft"}}function ate(t){return lte.includes(t)}var $2,lte,ute=We({"src/lib/tasks/reset.ts"(){$n(),$2=(t=>(t.MIXED="mixed",t.SOFT="soft",t.HARD="hard",t.MERGE="merge",t.KEEP="keep",t))($2||{}),lte=Array.from(Object.values($2))}});function QNe(){return(0,K2.default)("simple-git")}function YZ(t,e,r){return!e||!String(e).replace(/\s*/,"")?r?(n,...i)=>{t(n,...i),r(n,...i)}:t:(n,...i)=>{t(`%s ${n}`,e,...i),r&&r(n,...i)}}function ZNe(t,e,{namespace:r}){if(typeof t=="string")return t;let n=e&&e.namespace||"";return n.startsWith(r)?n.substr(r.length+1):n||r}function D4(t,e,r,n=QNe()){let i=t&&`[${t}]`||"",o=[],s=typeof e=="string"?n.extend(e):e,a=ZNe(uu(e,xo),s,n);return c(r);function l(p,f){return vr(o,D4(t,a.replace(/^[^:]+/,p),f,n))}function c(p){let f=p&&`[${p}]`||"",m=s&&YZ(s,f)||am,g=YZ(n,`${i} ${f}`,m);return Object.assign(s?m:g,{label:t,sibling:l,info:g,step:c})}}var cte=We({"src/lib/git-logger.ts"(){kt(),K2.default.formatters.L=t=>String(_4(t)?t.length:"-"),K2.default.formatters.B=t=>Buffer.isBuffer(t)?t.toString("utf8"):j_(t)}}),W2,l4,eAe=We({"src/lib/runners/tasks-pending-queue.ts"(){Ap(),cte(),W2=class{constructor(t="GitExecutor"){this.logLabel=t,this._queue=new Map}withProgress(t){return this._queue.get(t)}createProgress(t){let e=W2.getName(t.commands[0]),r=D4(this.logLabel,e);return{task:t,logger:r,name:e}}push(t){let e=this.createProgress(t);return e.logger("Adding task to the queue, commands = %o",t.commands),this._queue.set(t,e),e}fatal(t){for(let[e,{logger:r}]of Array.from(this._queue.entries()))e===t.task?(r.info("Failed %o",t),r("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):r.info("A fatal exception occurred in a previous task, the queue has been purged: %o",t.message),this.complete(e);if(this._queue.size!==0)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(t){this.withProgress(t)&&this._queue.delete(t)}attempt(t){let e=this.withProgress(t);if(!e)throw new kc(void 0,"TasksPendingQueue: attempt called for an unknown task");return e.logger("Starting task"),e}static getName(t="empty"){return`task:${t}:${++W2.counter}`}},l4=W2,l4.counter=0}});function zg(t,e){return{method:Iee(t.commands)||"",commands:e}}function tAe(t,e){return r=>{e("[ERROR] child process exception %o",r),t.push(Buffer.from(String(r.stack),"ascii"))}}function XZ(t,e,r,n){return i=>{r("%s received %L bytes",e,i),n("%B",i),t.push(i)}}var u4,rAe=We({"src/lib/runners/git-executor-chain.ts"(){Ap(),$n(),kt(),eAe(),u4=class{constructor(t,e,r){this._executor=t,this._scheduler=e,this._plugins=r,this._chain=Promise.resolve(),this._queue=new l4}get binary(){return this._executor.binary}get cwd(){return this._cwd||this._executor.cwd}set cwd(t){this._cwd=t}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(t){return this._queue.push(t),this._chain=this._chain.then(()=>this.attemptTask(t))}attemptTask(t){return R_(this,null,function*(){let e=yield this._scheduler.next(),r=()=>this._queue.complete(t);try{let{logger:n}=this._queue.attempt(t);return yield Xee(t)?this.attemptEmptyTask(t,n):this.attemptRemoteTask(t,n)}catch(n){throw this.onFatalException(t,n)}finally{r(),e()}})}onFatalException(t,e){let r=e instanceof kc?Object.assign(e,{task:t}):new kc(t,e&&String(e));return this._chain=Promise.resolve(),this._queue.fatal(r),r}attemptRemoteTask(t,e){return R_(this,null,function*(){let r=this._plugins.exec("spawn.args",[...t.commands],zg(t,t.commands)),n=yield this.gitResponse(t,this.binary,r,this.outputHandler,e.step("SPAWN")),i=yield this.handleTaskData(t,r,n,e.step("HANDLE"));return e("passing response to task's parser as a %s",t.format),Yee(t)?i4(t.parser,i):i4(t.parser,i.asStrings())})}attemptEmptyTask(t,e){return R_(this,null,function*(){return e("empty task bypassing child process to call to task's parser"),t.parser(this)})}handleTaskData(t,e,r,n){let{exitCode:i,rejection:o,stdOut:s,stdErr:a}=r;return new Promise((l,c)=>{n("Preparing to handle process response exitCode=%d stdOut=",i);let{error:p}=this._plugins.exec("task.error",{error:o},Aa(Aa({},zg(t,e)),r));if(p&&t.onError)return n.info("exitCode=%s handling with custom error handler"),t.onError(r,p,f=>{n.info("custom error handler treated as success"),n("custom error returned a %s",j_(f)),l(new F_(Array.isArray(f)?Buffer.concat(f):f,Buffer.concat(a)))},c);if(p)return n.info("handling as error: exitCode=%s stdErr=%s rejection=%o",i,a.length,o),c(p);n.info("retrieving task output complete"),l(new F_(Buffer.concat(s),Buffer.concat(a)))})}gitResponse(t,e,r,n,i){return R_(this,null,function*(){let o=i.sibling("output"),s=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},zg(t,t.commands));return new Promise(a=>{let l=[],c=[];i.info("%s %o",e,r),i("%O",s);let p=this._beforeSpawn(t,r);if(p)return a({stdOut:l,stdErr:c,exitCode:9901,rejection:p});this._plugins.exec("spawn.before",void 0,P_(Aa({},zg(t,r)),{kill(m){p=m||p}}));let f=pW(e,r,s);f.stdout.on("data",XZ(l,"stdOut",i,o.step("stdOut"))),f.stderr.on("data",XZ(c,"stdErr",i,o.step("stdErr"))),f.on("error",tAe(c,i)),n&&(i("Passing child process stdOut/stdErr to custom outputHandler"),n(e,f.stdout,f.stderr,[...r])),this._plugins.exec("spawn.after",void 0,P_(Aa({},zg(t,r)),{spawned:f,close(m,g){a({stdOut:l,stdErr:c,exitCode:m,rejection:p||g})},kill(m){f.killed||(p=m,f.kill("SIGINT"))}}))})})}_beforeSpawn(t,e){let r;return this._plugins.exec("spawn.before",void 0,P_(Aa({},zg(t,e)),{kill(n){r=n||r}})),r}}}}),dte={};Hn(dte,{GitExecutor:()=>pte});var pte,nAe=We({"src/lib/runners/git-executor.ts"(){rAe(),pte=class{constructor(t="git",e,r,n){this.binary=t,this.cwd=e,this._scheduler=r,this._plugins=n,this._chain=new u4(this,this._scheduler,this._plugins)}chain(){return new u4(this,this._scheduler,this._plugins)}push(t){return this._chain.push(t)}}}});function iAe(t,e,r=am){let n=o=>{r(null,o)},i=o=>{o?.task===t&&r(o instanceof B_?oAe(o):o,void 0)};e.then(n,i)}function oAe(t){let e=n=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${n} should be GitResponseError.git.${n}, this will no longer be available in version 3`),e=am};return Object.create(t,Object.getOwnPropertyNames(t.git).reduce(r,{}));function r(n,i){return i in t||(n[i]={enumerable:!1,configurable:!1,get(){return e(i),t.git[i]}}),n}}var sAe=We({"src/lib/task-callback.ts"(){qg(),kt()}});function JZ(t,e){return Vee(r=>{if(!g4(t))throw new Error(`Git.cwd: cannot change to non-directory "${t}"`);return(e||r).cwd=t})}var aAe=We({"src/lib/tasks/change-working-directory.ts"(){kt(),$n()}});function Q5(t){let e=["checkout",...t];return e[1]==="-b"&&e.includes("-B")&&(e[1]=Z2(e,"-B")),zo(e)}function lAe(){return{checkout(){return this._runTask(Q5(gs(arguments,1)),kn(arguments))},checkoutBranch(t,e){return this._runTask(Q5(["-b",t,e,...gs(arguments)]),kn(arguments))},checkoutLocalBranch(t){return this._runTask(Q5(["-b",t,...gs(arguments)]),kn(arguments))}}}var uAe=We({"src/lib/tasks/checkout.ts"(){kt(),$n()}});function cAe(t){return Vs({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},fte,t)}var fte,dAe=We({"src/lib/parsers/parse-commit.ts"(){kt(),fte=[new Ut(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(t,[e,r,n])=>{t.branch=e,t.commit=n,t.root=!!r}),new Ut(/\s*Author:\s(.+)/i,(t,[e])=>{let r=e.split("<"),n=r.pop();!n||!n.includes("@")||(t.author={email:n.substr(0,n.length-1),name:r.join("<").trim()})}),new Ut(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(t,[e,r,n])=>{t.summary.changes=parseInt(e,10)||0,t.summary.insertions=parseInt(r,10)||0,t.summary.deletions=parseInt(n,10)||0}),new Ut(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(t,[e,r,n])=>{t.summary.changes=parseInt(e,10)||0;let i=parseInt(r,10)||0;n==="-"?t.summary.deletions=i:n==="+"&&(t.summary.insertions=i)})]}});function pAe(t,e,r){return{commands:["-c","core.abbrev=40","commit",...L_(t,"-m"),...e,...r],format:"utf-8",parser:cAe}}function fAe(){return{commit(e,...r){let n=kn(arguments),i=t(e)||pAe(Np(e),Np(uu(r[0],V2,[])),[...uu(r[1],z_,[]),...gs(arguments,0,!0)]);return this._runTask(i,n)}};function t(e){return!V2(e)&&ys("git.commit: requires the commit message to be supplied as a string/string[]")}}var mAe=We({"src/lib/tasks/commit.ts"(){dAe(),kt(),$n()}});function hAe(){return{firstCommit(){return this._runTask(zo(["rev-list","--max-parents=0","HEAD"],!0),kn(arguments))}}}var gAe=We({"src/lib/tasks/first-commit.ts"(){kt(),$n()}});function yAe(t,e){let r=["hash-object",t];return e&&r.push("-w"),zo(r,!0)}var vAe=We({"src/lib/tasks/hash-object.ts"(){$n()}});function _Ae(t,e,r){let n=String(r).trim(),i;if(i=mte.exec(n))return new H2(t,e,!1,i[1]);if(i=hte.exec(n))return new H2(t,e,!0,i[1]);let o="",s=n.split(" ");for(;s.length;)if(s.shift()==="in"){o=s.join(" ");break}return new H2(t,e,/^re/i.test(n),o)}var H2,mte,hte,bAe=We({"src/lib/responses/InitSummary.ts"(){H2=class{constructor(t,e,r,n){this.bare=t,this.path=e,this.existing=r,this.gitDir=n}},mte=/^Init.+ repository in (.+)$/,hte=/^Rein.+ in (.+)$/}});function xAe(t){return t.includes(I4)}function TAe(t=!1,e,r){let n=["init",...r];return t&&!xAe(n)&&n.splice(1,0,I4),{commands:n,format:"utf-8",parser(i){return _Ae(n.includes("--bare"),e,i)}}}var I4,wAe=We({"src/lib/tasks/init.ts"(){bAe(),I4="--bare"}});function k4(t){for(let e=0;e<t.length;e++){let r=N4.exec(t[e]);if(r)return`--${r[1]}`}return""}function SAe(t){return N4.test(t)}var N4,$_=We({"src/lib/args/log-format.ts"(){N4=/^--(stat|numstat|name-only|name-status)(=|$)/}}),gte,EAe=We({"src/lib/responses/DiffSummary.ts"(){gte=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});function yte(t=""){let e=vte[t];return r=>Vs(new gte,e,r,!1)}var Z5,QZ,ZZ,eee,vte,_te=We({"src/lib/parsers/parse-diff-summary.ts"(){$_(),EAe(),kt(),Z5=[new Ut(/(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,(t,[e,r,n=""])=>{t.files.push({file:e.trim(),changes:an(r),insertions:n.replace(/[^+]/g,"").length,deletions:n.replace(/[^-]/g,"").length,binary:!1})}),new Ut(/(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,(t,[e,r,n])=>{t.files.push({file:e.trim(),before:an(r),after:an(n),binary:!0})}),new Ut(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,(t,[e,r])=>{let n=/(\d+) i/.exec(r),i=/(\d+) d/.exec(r);t.changed=an(e),t.insertions=an(n?.[1]),t.deletions=an(i?.[1])})],QZ=[new Ut(/(\d+)\t(\d+)\t(.+)$/,(t,[e,r,n])=>{let i=an(e),o=an(r);t.changed++,t.insertions+=i,t.deletions+=o,t.files.push({file:n,changes:i+o,insertions:i,deletions:o,binary:!1})}),new Ut(/-\t-\t(.+)$/,(t,[e])=>{t.changed++,t.files.push({file:e,after:0,before:0,binary:!0})})],ZZ=[new Ut(/(.+)$/,(t,[e])=>{t.changed++,t.files.push({file:e,changes:0,insertions:0,deletions:0,binary:!1})})],eee=[new Ut(/([ACDMRTUXB])\s*(.+)$/,(t,[e,r])=>{t.changed++,t.files.push({file:r,changes:0,insertions:0,deletions:0,binary:!1})})],vte={"":Z5,"--stat":Z5,"--numstat":QZ,"--name-status":eee,"--name-only":ZZ}}});function CAe(t,e){return e.reduce((r,n,i)=>(r[n]=t[i]||"",r),Object.create({diff:null}))}function bte(t=R4,e=xte,r=""){let n=yte(r);return function(i){let o=W_(i,!0,A4).map(function(s){let a=s.trim().split(O4),l=CAe(a[0].trim().split(t),e);return a.length>1&&a[1].trim()&&(l.diff=n(a[1])),l});return{all:o,latest:o.length&&o[0]||null,total:o.length}}}var A4,O4,R4,xte,Tte=We({"src/lib/parsers/parse-list-log-summary.ts"(){kt(),_te(),$_(),A4="\xF2\xF2\xF2\xF2\xF2\xF2 ",O4=" \xF2\xF2",R4=" \xF2 ",xte=["hash","date","message","refs","author_name","author_email"]}}),wte={};Hn(wte,{diffSummaryTask:()=>DAe,validateLogFormatConfig:()=>nD});function DAe(t){let e=k4(t),r=["diff"];return e===""&&(e="--stat",r.push("--stat=4096")),r.push(...t),nD(r)||{commands:r,format:"utf-8",parser:yte(e)}}function nD(t){let e=t.filter(SAe);if(e.length>1)return ys(`Summary flags are mutually exclusive - pick one of ${e.join(",")}`);if(e.length&&t.includes("-z"))return ys(`Summary flag ${e} parsing is not compatible with null termination option '-z'`)}var P4=We({"src/lib/tasks/diff.ts"(){$_(),_te(),$n()}});function IAe(t,e){let r=[],n=[];return Object.keys(t).forEach(i=>{r.push(i),n.push(String(t[i]))}),[r,n.join(e)]}function kAe(t){return Object.keys(t).reduce((e,r)=>(r in c4||(e[r]=t[r]),e),{})}function Ste(t={},e=[]){let r=uu(t.splitter,xo,R4),n=!y4(t.format)&&t.format?t.format:{hash:"%H",date:t.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:t.multiLine?"%B":"%b",author_name:t.mailMap!==!1?"%aN":"%an",author_email:t.mailMap!==!1?"%aE":"%ae"},[i,o]=IAe(n,r),s=[],a=[`--pretty=format:${A4}${o}${O4}`,...e],l=t.n||t["max-count"]||t.maxCount;if(l&&a.push(`--max-count=${l}`),t.from||t.to){let c=t.symmetric!==!1?"...":"..";s.push(`${t.from||""}${c}${t.to||""}`)}return xo(t.file)&&a.push("--follow",xNe(t.file)),b4(kAe(t),a),{fields:i,splitter:r,commands:[...a,...s]}}function NAe(t,e,r){let n=bte(t,e,k4(r));return{commands:["log",...r],format:"utf-8",parser:n}}function AAe(){return{log(...r){let n=kn(arguments),i=Ste(x4(arguments),uu(arguments[0],z_)),o=e(...r)||nD(i.commands)||t(i);return this._runTask(o,n)}};function t(r){return NAe(r.splitter,r.fields,r.commands)}function e(r,n){return xo(r)&&xo(n)&&ys("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}}var c4,Ete=We({"src/lib/tasks/log.ts"(){$_(),U_(),Tte(),kt(),$n(),P4(),c4=(t=>(t[t["--pretty"]=0]="--pretty",t[t["max-count"]=1]="max-count",t[t.maxCount=2]="maxCount",t[t.n=3]="n",t[t.file=4]="file",t[t.format=5]="format",t[t.from=6]="from",t[t.to=7]="to",t[t.splitter=8]="splitter",t[t.symmetric=9]="symmetric",t[t.mailMap=10]="mailMap",t[t.multiLine=11]="multiLine",t[t.strictDate=12]="strictDate",t))(c4||{})}}),q2,Cte,OAe=We({"src/lib/responses/MergeSummary.ts"(){q2=class{constructor(t,e=null,r){this.reason=t,this.file=e,this.meta=r}toString(){return`${this.file}:${this.reason}`}},Cte=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}}}),d4,Dte,RAe=We({"src/lib/responses/PullSummary.ts"(){d4=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},Dte=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});function e4(t){return t.objects=t.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function tee(t){let e=/^\s*(\d+)/.exec(t),r=/delta (\d+)/i.exec(t);return{count:an(e&&e[1]||"0"),delta:an(r&&r[1]||"0")}}var Ite,PAe=We({"src/lib/parsers/parse-remote-objects.ts"(){kt(),Ite=[new kp(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(t,[e,r])=>{let n=e.toLowerCase(),i=e4(t.remoteMessages);Object.assign(i,{[n]:an(r)})}),new kp(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(t,[e,r])=>{let n=e.toLowerCase(),i=e4(t.remoteMessages);Object.assign(i,{[n]:an(r)})}),new kp(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(t,[e,r,n])=>{let i=e4(t.remoteMessages);i.total=tee(e),i.reused=tee(r),i.packReused=an(n)})]}});function kte(t,e){return Vs({remoteMessages:new Ate},Nte,e)}var Nte,Ate,Ote=We({"src/lib/parsers/parse-remote-messages.ts"(){kt(),PAe(),Nte=[new kp(/^remote:\s*(.+)$/,(t,[e])=>(t.remoteMessages.all.push(e.trim()),!1)),...Ite,new kp([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(t,[e])=>{t.remoteMessages.pullRequestUrl=e}),new kp([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(t,[e,r,n])=>{t.remoteMessages.vulnerabilities={count:an(e),summary:r,url:n}})],Ate=class{constructor(){this.all=[]}}}});function LAe(t,e){let r=Vs(new Dte,Rte,[t,e]);return r.message&&r}var ree,nee,iee,oee,Rte,see,L4,Pte=We({"src/lib/parsers/parse-pull.ts"(){RAe(),kt(),Ote(),ree=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,nee=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,iee=/^(create|delete) mode \d+ (.+)/,oee=[new Ut(ree,(t,[e,r,n])=>{t.files.push(e),r&&(t.insertions[e]=r.length),n&&(t.deletions[e]=n.length)}),new Ut(nee,(t,[e,,r,,n])=>r!==void 0||n!==void 0?(t.summary.changes=+e||0,t.summary.insertions=+r||0,t.summary.deletions=+n||0,!0):!1),new Ut(iee,(t,[e,r])=>{vr(t.files,r),vr(e==="create"?t.created:t.deleted,r)})],Rte=[new Ut(/^from\s(.+)$/i,(t,[e])=>void(t.remote=e)),new Ut(/^fatal:\s(.+)$/,(t,[e])=>void(t.message=e)),new Ut(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,(t,[e,r,n,i])=>{t.branch.local=n,t.hash.local=e,t.branch.remote=i,t.hash.remote=r})],see=(t,e)=>Vs(new d4,oee,[t,e]),L4=(t,e)=>Object.assign(new d4,see(t,e),kte(t,e))}}),aee,Lte,lee,MAe=We({"src/lib/parsers/parse-merge.ts"(){OAe(),kt(),Pte(),aee=[new Ut(/^Auto-merging\s+(.+)$/,(t,[e])=>{t.merges.push(e)}),new Ut(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(t,[e,r])=>{t.conflicts.push(new q2(e,r))}),new Ut(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(t,[e,r,n])=>{t.conflicts.push(new q2(e,r,{deleteRef:n}))}),new Ut(/^CONFLICT\s+\((.+)\):/,(t,[e])=>{t.conflicts.push(new q2(e,null))}),new Ut(/^Automatic merge failed;\s+(.+)$/,(t,[e])=>{t.result=e})],Lte=(t,e)=>Object.assign(lee(t,e),L4(t,e)),lee=t=>Vs(new Cte,aee,t)}});function uee(t){return t.length?{commands:["merge",...t],format:"utf-8",parser(e,r){let n=Lte(e,r);if(n.failed)throw new B_(n);return n}}:ys("Git.merge requires at least one option")}var FAe=We({"src/lib/tasks/merge.ts"(){qg(),MAe(),$n()}});function UAe(t,e,r){let n=r.includes("deleted"),i=r.includes("tag")||/^refs\/tags/.test(t),o=!r.includes("new");return{deleted:n,tag:i,branch:!i,new:!o,alreadyUpdated:o,local:t,remote:e}}var cee,Mte,dee,BAe=We({"src/lib/parsers/parse-push.ts"(){kt(),Ote(),cee=[new Ut(/^Pushing to (.+)$/,(t,[e])=>{t.repo=e}),new Ut(/^updating local tracking ref '(.+)'/,(t,[e])=>{t.ref=P_(Aa({},t.ref||{}),{local:e})}),new Ut(/^[=*-]\s+([^:]+):(\S+)\s+\[(.+)]$/,(t,[e,r,n])=>{t.pushed.push(UAe(e,r,n))}),new Ut(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(t,[e,r,n])=>{t.branch=P_(Aa({},t.branch||{}),{local:e,remote:r,remoteName:n})}),new Ut(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(t,[e,r,n,i])=>{t.update={head:{local:e,remote:r},hash:{from:n,to:i}}})],Mte=(t,e)=>{let r=dee(t,e),n=kte(t,e);return Aa(Aa({},r),n)},dee=(t,e)=>Vs({pushed:[]},cee,[t,e])}}),Fte={};Hn(Fte,{pushTagsTask:()=>WAe,pushTask:()=>M4});function WAe(t={},e){return vr(e,"--tags"),M4(t,e)}function M4(t={},e){let r=["push",...e];return t.branch&&r.splice(1,0,t.branch),t.remote&&r.splice(1,0,t.remote),Z2(r,"-v"),vr(r,"--verbose"),vr(r,"--porcelain"),{commands:r,format:"utf-8",parser:Mte}}var Ute=We({"src/lib/tasks/push.ts"(){BAe(),kt()}});function jAe(){return{showBuffer(){let t=["show",...gs(arguments,1)];return t.includes("--binary")||t.splice(1,0,"--binary"),this._runTask(Kee(t),kn(arguments))},show(){let t=["show",...gs(arguments,1)];return this._runTask(zo(t),kn(arguments))}}}var zAe=We({"src/lib/tasks/show.ts"(){kt(),$n()}}),pee,Bte,$Ae=We({"src/lib/responses/FileStatusSummary.ts"(){pee=/^(.+) -> (.+)$/,Bte=class{constructor(t,e,r){if(this.path=t,this.index=e,this.working_dir=r,e+r==="R"){let n=pee.exec(t)||[null,t,t];this.from=n[1]||"",this.path=n[2]||""}}}}});function fee(t){let[e,r]=t.split(Hg);return{from:r||e,to:e}}function Gs(t,e,r){return[`${t}${e}`,r]}function t4(t,...e){return e.map(r=>Gs(t,r,(n,i)=>vr(n.conflicted,i)))}function HAe(t,e){let r=e.trim();switch(" "){case r.charAt(2):return n(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return n(" ",r.charAt(0),r.substr(2));default:return}function n(i,o,s){let a=`${i}${o}`,l=Wte.get(a);l&&l(t,s),a!=="##"&&a!=="!!"&&t.files.push(new Bte(s.replace(/\0.+$/,""),i,o))}}var mee,Wte,jte,qAe=We({"src/lib/responses/StatusSummary.ts"(){kt(),$Ae(),mee=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>!this.files.length}},Wte=new Map([Gs(" ","A",(t,e)=>vr(t.created,e)),Gs(" ","D",(t,e)=>vr(t.deleted,e)),Gs(" ","M",(t,e)=>vr(t.modified,e)),Gs("A"," ",(t,e)=>vr(t.created,e)&&vr(t.staged,e)),Gs("A","M",(t,e)=>vr(t.created,e)&&vr(t.staged,e)&&vr(t.modified,e)),Gs("D"," ",(t,e)=>vr(t.deleted,e)&&vr(t.staged,e)),Gs("M"," ",(t,e)=>vr(t.modified,e)&&vr(t.staged,e)),Gs("M","M",(t,e)=>vr(t.modified,e)&&vr(t.staged,e)),Gs("R"," ",(t,e)=>{vr(t.renamed,fee(e))}),Gs("R","M",(t,e)=>{let r=fee(e);vr(t.renamed,r),vr(t.modified,r.to)}),Gs("!","!",(t,e)=>{vr(t.ignored=t.ignored||[],e)}),Gs("?","?",(t,e)=>vr(t.not_added,e)),...t4("A","A","U"),...t4("D","D","U"),...t4("U","A","D","U"),["##",(t,e)=>{let r=/ahead (\d+)/,n=/behind (\d+)/,i=/^(.+?(?=(?:\.{3}|\s|$)))/,o=/\.{3}(\S*)/,s=/\son\s([\S]+)$/,a;a=r.exec(e),t.ahead=a&&+a[1]||0,a=n.exec(e),t.behind=a&&+a[1]||0,a=i.exec(e),t.current=a&&a[1],a=o.exec(e),t.tracking=a&&a[1],a=s.exec(e),t.current=a&&a[1]||t.current,t.detached=/\(no branch\)/.test(e)}]]),jte=function(t){let e=t.split(Hg),r=new mee;for(let n=0,i=e.length;n<i;){let o=e[n++].trim();o&&(o.charAt(0)==="R"&&(o+=Hg+(e[n++]||"")),HAe(r,o))}return r}}});function GAe(t){return{format:"utf-8",commands:["status","--porcelain","-b","-u","--null",...t.filter(r=>!zte.includes(r))],parser(r){return jte(r)}}}var zte,VAe=We({"src/lib/tasks/status.ts"(){qAe(),zte=["--null","-z"]}});function Y2(t=0,e=0,r=0,n="",i=!0){return Object.defineProperty({major:t,minor:e,patch:r,agent:n,installed:i},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:!1,enumerable:!1})}function KAe(){return Y2(0,0,0,"",!1)}function YAe(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:XAe,onError(t,e,r,n){if(t.exitCode===-2)return r(Buffer.from(F4));n(e)}})}}}function XAe(t){return t===F4?KAe():Vs(Y2(0,0,0,t),$te,t)}var F4,$te,JAe=We({"src/lib/tasks/version.ts"(){kt(),F4="installed=false",$te=[new Ut(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,(t,[e,r,n,i=""])=>{Object.assign(t,Y2(an(e),an(r),an(n),i))}),new Ut(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,(t,[e,r,n,i=""])=>{Object.assign(t,Y2(an(e),an(r),n,i))})]}}),Hte={};Hn(Hte,{SimpleGitApi:()=>p4});var p4,QAe=We({"src/lib/simple-git-api.ts"(){sAe(),aAe(),uAe(),mAe(),rte(),gAe(),ote(),vAe(),wAe(),Ete(),FAe(),Ute(),zAe(),VAe(),$n(),JAe(),kt(),p4=class{constructor(t){this._executor=t}_runTask(t,e){let r=this._executor.chain(),n=r.push(t);return e&&iAe(t,n,e),Object.create(this,{then:{value:n.then.bind(n)},catch:{value:n.catch.bind(n)},_executor:{value:r}})}add(t){return this._runTask(zo(["add",...Np(t)]),kn(arguments))}cwd(t){let e=kn(arguments);return typeof t=="string"?this._runTask(JZ(t,this._executor),e):typeof t?.path=="string"?this._runTask(JZ(t.path,t.root&&this._executor||void 0),e):this._runTask(ys("Git.cwd: workingDirectory must be supplied as a string"),e)}hashObject(t,e){return this._runTask(yAe(t,e===!0),kn(arguments))}init(t){return this._runTask(TAe(t===!0,this._executor.cwd,gs(arguments)),kn(arguments))}merge(){return this._runTask(uee(gs(arguments)),kn(arguments))}mergeFromTo(t,e){return xo(t)&&xo(e)?this._runTask(uee([t,e,...gs(arguments)]),kn(arguments,!1)):this._runTask(ys("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(t){return this._executor.outputHandler=t,this}push(){let t=M4({remote:uu(arguments[0],xo),branch:uu(arguments[1],xo)},gs(arguments));return this._runTask(t,kn(arguments))}stash(){return this._runTask(zo(["stash",...gs(arguments)]),kn(arguments))}status(){return this._runTask(GAe(gs(arguments)),kn(arguments))}},Object.assign(p4.prototype,lAe(),fAe(),GNe(),hAe(),YNe(),AAe(),jAe(),YAe())}}),qte={};Hn(qte,{Scheduler:()=>Vte});var hee,Vte,ZAe=We({"src/lib/runners/scheduler.ts"(){kt(),cte(),hee=(()=>{let t=0;return()=>{t++;let{promise:e,done:r}=(0,Gte.createDeferred)();return{promise:e,done:r,id:t}}})(),Vte=class{constructor(t=2){this.concurrency=t,this.logger=D4("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",t)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let t=vr(this.running,this.pending.shift());this.logger("Attempting id=%s",t.id),t.done(()=>{this.logger("Completing id=",t.id),Z2(this.running,t),this.schedule()})}next(){let{promise:t,id:e}=vr(this.pending,hee());return this.logger("Scheduling id=%s",e),this.schedule(),t}}}}),Kte={};Hn(Kte,{applyPatchTask:()=>eOe});function eOe(t,e){return zo(["apply",...e,...t])}var tOe=We({"src/lib/tasks/apply-patch.ts"(){$n()}});function rOe(t,e){return{branch:t,hash:e,success:!0}}function nOe(t){return{branch:t,hash:null,success:!1}}var Yte,iOe=We({"src/lib/responses/BranchDeleteSummary.ts"(){Yte=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});function Xte(t,e){return e===1&&f4.test(t)}var gee,f4,yee,iD,oOe=We({"src/lib/parsers/parse-branch-delete.ts"(){iOe(),kt(),gee=/(\S+)\s+\(\S+\s([^)]+)\)/,f4=/^error[^']+'([^']+)'/m,yee=[new Ut(gee,(t,[e,r])=>{let n=rOe(e,r);t.all.push(n),t.branches[e]=n}),new Ut(f4,(t,[e])=>{let r=nOe(e);t.errors.push(r),t.all.push(r),t.branches[e]=r})],iD=(t,e)=>Vs(new Yte,yee,[t,e])}}),Jte,sOe=We({"src/lib/responses/BranchSummary.ts"(){Jte=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(t,e,r,n,i){t==="*"&&(this.detached=e,this.current=r),this.all.push(r),this.branches[r]={current:t==="*",linkedWorkTree:t==="+",name:r,commit:n,label:i}}}}});function vee(t){return t?t.charAt(0):""}function Qte(t){return Vs(new Jte,Zte,t)}var Zte,aOe=We({"src/lib/parsers/parse-branch.ts"(){sOe(),kt(),Zte=[new Ut(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(t,[e,r,n,i])=>{t.push(vee(e),!0,r,n,i)}),new Ut(/^([*+]\s)?(\S+)\s+([a-z0-9]+)\s?(.*)$/s,(t,[e,r,n,i])=>{t.push(vee(e),!1,r,n,i)})]}}),ere={};Hn(ere,{branchLocalTask:()=>uOe,branchTask:()=>lOe,containsDeleteBranchCommand:()=>tre,deleteBranchTask:()=>dOe,deleteBranchesTask:()=>cOe});function tre(t){let e=["-d","-D","--delete"];return t.some(r=>e.includes(r))}function lOe(t){let e=tre(t),r=["branch",...t];return r.length===1&&r.push("-a"),r.includes("-v")||r.splice(1,0,"-v"),{format:"utf-8",commands:r,parser(n,i){return e?iD(n,i).all[0]:Qte(n)}}}function uOe(){return{format:"utf-8",commands:["branch","-v"],parser:Qte}}function cOe(t,e=!1){return{format:"utf-8",commands:["branch","-v",e?"-D":"-d",...t],parser(r,n){return iD(r,n)},onError({exitCode:r,stdOut:n},i,o,s){if(!Xte(String(i),r))return s(i);o(n)}}}function dOe(t,e=!1){let r={format:"utf-8",commands:["branch","-v",e?"-D":"-d",t],parser(n,i){return iD(n,i).branches[t]},onError({exitCode:n,stdErr:i,stdOut:o},s,a,l){if(!Xte(String(s),n))return l(s);throw new B_(r.parser(M_(o),M_(i)),String(s))}};return r}var pOe=We({"src/lib/tasks/branch.ts"(){qg(),oOe(),aOe(),kt()}}),rre,fOe=We({"src/lib/responses/CheckIgnore.ts"(){rre=t=>t.split(/\n/g).map(e=>e.trim()).filter(e=>!!e)}}),nre={};Hn(nre,{checkIgnoreTask:()=>mOe});function mOe(t){return{commands:["check-ignore",...t],format:"utf-8",parser:rre}}var hOe=We({"src/lib/tasks/check-ignore.ts"(){fOe()}}),ire={};Hn(ire,{cloneMirrorTask:()=>yOe,cloneTask:()=>ore});function gOe(t){return/^--upload-pack(=|$)/.test(t)}function ore(t,e,r){let n=["clone",...r];return xo(t)&&n.push(t),xo(e)&&n.push(e),n.find(gOe)?ys("git.fetch: potential exploit argument blocked."):zo(n)}function yOe(t,e,r){return vr(r,"--mirror"),ore(t,e,r)}var vOe=We({"src/lib/tasks/clone.ts"(){$n(),kt()}});function _Oe(t,e){return Vs({raw:t,remote:null,branches:[],tags:[],updated:[],deleted:[]},sre,[t,e])}var sre,bOe=We({"src/lib/parsers/parse-fetch.ts"(){kt(),sre=[new Ut(/From (.+)$/,(t,[e])=>{t.remote=e}),new Ut(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(t,[e,r])=>{t.branches.push({name:e,tracking:r})}),new Ut(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(t,[e,r])=>{t.tags.push({name:e,tracking:r})}),new Ut(/- \[deleted]\s+\S+\s*-> (.+)$/,(t,[e])=>{t.deleted.push({tracking:e})}),new Ut(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,(t,[e,r,n,i])=>{t.updated.push({name:n,tracking:i,to:r,from:e})})]}}),are={};Hn(are,{fetchTask:()=>TOe});function xOe(t){return/^--upload-pack(=|$)/.test(t)}function TOe(t,e,r){let n=["fetch",...r];return t&&e&&n.push(t,e),n.find(xOe)?ys("git.fetch: potential exploit argument blocked."):{commands:n,format:"utf-8",parser:_Oe}}var wOe=We({"src/lib/tasks/fetch.ts"(){bOe(),$n()}});function SOe(t){return Vs({moves:[]},lre,t)}var lre,EOe=We({"src/lib/parsers/parse-move.ts"(){kt(),lre=[new Ut(/^Renaming (.+) to (.+)$/,(t,[e,r])=>{t.moves.push({from:e,to:r})})]}}),ure={};Hn(ure,{moveTask:()=>COe});function COe(t,e){return{commands:["mv","-v",...Np(t),e],format:"utf-8",parser:SOe}}var DOe=We({"src/lib/tasks/move.ts"(){EOe(),kt()}}),cre={};Hn(cre,{pullTask:()=>IOe});function IOe(t,e,r){let n=["pull",...r];return t&&e&&n.splice(1,0,t,e),{commands:n,format:"utf-8",parser(i,o){return L4(i,o)},onError(i,o,s,a){let l=LAe(M_(i.stdOut),M_(i.stdErr));if(l)return a(new B_(l));a(o)}}}var kOe=We({"src/lib/tasks/pull.ts"(){qg(),Pte(),kt()}});function NOe(t){let e={};return dre(t,([r])=>e[r]={name:r}),Object.values(e)}function AOe(t){let e={};return dre(t,([r,n,i])=>{e.hasOwnProperty(r)||(e[r]={name:r,refs:{fetch:"",push:""}}),i&&n&&(e[r].refs[i.replace(/[^a-z]/g,"")]=n)}),Object.values(e)}function dre(t,e){h4(t,r=>e(r.split(/\s+/)))}var OOe=We({"src/lib/responses/GetRemoteSummary.ts"(){kt()}}),pre={};Hn(pre,{addRemoteTask:()=>ROe,getRemotesTask:()=>POe,listRemotesTask:()=>LOe,remoteTask:()=>MOe,removeRemoteTask:()=>FOe});function ROe(t,e,r=[]){return zo(["remote","add",...r,t,e])}function POe(t){let e=["remote"];return t&&e.push("-v"),{commands:e,format:"utf-8",parser:t?AOe:NOe}}function LOe(t=[]){let e=[...t];return e[0]!=="ls-remote"&&e.unshift("ls-remote"),zo(e)}function MOe(t=[]){let e=[...t];return e[0]!=="remote"&&e.unshift("remote"),zo(e)}function FOe(t){return zo(["remote","remove",t])}var UOe=We({"src/lib/tasks/remote.ts"(){OOe(),$n()}}),fre={};Hn(fre,{stashListTask:()=>BOe});function BOe(t={},e){let r=Ste(t),n=["stash","list",...r.commands,...e],i=bte(r.splitter,r.fields,k4(n));return nD(n)||{commands:n,format:"utf-8",parser:i}}var WOe=We({"src/lib/tasks/stash-list.ts"(){$_(),Tte(),P4(),Ete()}}),mre={};Hn(mre,{addSubModuleTask:()=>jOe,initSubModuleTask:()=>zOe,subModuleTask:()=>oD,updateSubModuleTask:()=>$Oe});function jOe(t,e){return oD(["add",t,e])}function zOe(t){return oD(["init",...t])}function oD(t){let e=[...t];return e[0]!=="submodule"&&e.unshift("submodule"),zo(e)}function $Oe(t){return oD(["update",...t])}var HOe=We({"src/lib/tasks/sub-module.ts"(){$n()}});function qOe(t,e){let r=isNaN(t),n=isNaN(e);return r!==n?r?1:-1:r?hre(t,e):0}function hre(t,e){return t===e?0:t>e?1:-1}function GOe(t){return t.trim()}function j2(t){return typeof t=="string"&&parseInt(t.replace(/^\D+/g,""),10)||0}var _ee,gre,VOe=We({"src/lib/responses/TagList.ts"(){_ee=class{constructor(t,e){this.all=t,this.latest=e}},gre=function(t,e=!1){let r=t.split(`
`).map(GOe).filter(Boolean);e||r.sort(function(i,o){let s=i.split("."),a=o.split(".");if(s.length===1||a.length===1)return qOe(j2(s[0]),j2(a[0]));for(let l=0,c=Math.max(s.length,a.length);l<c;l++){let p=hre(j2(s[l]),j2(a[l]));if(p)return p}return 0});let n=e?r[0]:[...r].reverse().find(i=>i.indexOf(".")>=0);return new _ee(r,n)}}}),yre={};Hn(yre,{addAnnotatedTagTask:()=>XOe,addTagTask:()=>YOe,tagListTask:()=>KOe});function KOe(t=[]){let e=t.some(r=>/^--sort=/.test(r));return{format:"utf-8",commands:["tag","-l",...t],parser(r){return gre(r,e)}}}function YOe(t){return{format:"utf-8",commands:["tag",t],parser(){return{name:t}}}}function XOe(t,e){return{format:"utf-8",commands:["tag","-a","-m",e,t],parser(){return{name:t}}}}var JOe=We({"src/lib/tasks/tag.ts"(){VOe()}}),QOe=_Ne({"src/git.js"(t,e){var{GitExecutor:r}=(nAe(),In(dte)),{SimpleGitApi:n}=(QAe(),In(Hte)),{Scheduler:i}=(ZAe(),In(qte)),{configurationErrorTask:o}=($n(),In(s4)),{asArray:s,filterArray:a,filterPrimitives:l,filterString:c,filterStringOrStringArray:p,filterType:f,getTrailingOptions:m,trailingFunctionArgument:g,trailingOptionsArgument:v}=(kt(),In(Uee)),{applyPatchTask:_}=(tOe(),In(Kte)),{branchTask:S,branchLocalTask:T,deleteBranchesTask:w,deleteBranchTask:E}=(pOe(),In(ere)),{checkIgnoreTask:I}=(hOe(),In(nre)),{checkIsRepoTask:N}=(zee(),In(Bee)),{cloneTask:C,cloneMirrorTask:k}=(vOe(),In(ire)),{cleanWithOptionsTask:U,isCleanOptionsArray:$}=(Zee(),In(Jee)),{diffSummaryTask:G}=(P4(),In(wte)),{fetchTask:K}=(wOe(),In(are)),{moveTask:X}=(DOe(),In(ure)),{pullTask:te}=(kOe(),In(cre)),{pushTagsTask:ne}=(Ute(),In(Fte)),{addRemoteTask:H,getRemotesTask:re,listRemotesTask:W,remoteTask:q,removeRemoteTask:se}=(UOe(),In(pre)),{getResetMode:J,resetTask:ye}=(ute(),In(ste)),{stashListTask:Ne}=(WOe(),In(fre)),{addSubModuleTask:ae,initSubModuleTask:Se,subModuleTask:Re,updateSubModuleTask:Pe}=(HOe(),In(mre)),{addAnnotatedTagTask:Oe,addTagTask:ct,tagListTask:mt}=(JOe(),In(yre)),{straightThroughBufferTask:wt,straightThroughStringTask:Me}=($n(),In(s4));function ue(ce,xe){this._executor=new r(ce.binary,ce.baseDir,new i(ce.maxConcurrentProcesses),xe),this._trimmed=ce.trimmed}(ue.prototype=Object.create(n.prototype)).constructor=ue,ue.prototype.customBinary=function(ce){return this._executor.binary=ce,this},ue.prototype.env=function(ce,xe){return arguments.length===1&&typeof ce=="object"?this._executor.env=ce:(this._executor.env=this._executor.env||{})[ce]=xe,this},ue.prototype.stashList=function(ce){return this._runTask(Ne(v(arguments)||{},a(ce)&&ce||[]),g(arguments))};function Te(ce,xe,Ae,M){return typeof Ae!="string"?o(`git.${ce}() requires a string 'repoPath'`):xe(Ae,f(M,c),m(arguments))}ue.prototype.clone=function(){return this._runTask(Te("clone",C,...arguments),g(arguments))},ue.prototype.mirror=function(){return this._runTask(Te("mirror",k,...arguments),g(arguments))},ue.prototype.mv=function(ce,xe){return this._runTask(X(ce,xe),g(arguments))},ue.prototype.checkoutLatestTag=function(ce){var xe=this;return this.pull(function(){xe.tags(function(Ae,M){xe.checkout(M.latest,ce)})})},ue.prototype.pull=function(ce,xe,Ae,M){return this._runTask(te(f(ce,c),f(xe,c),m(arguments)),g(arguments))},ue.prototype.fetch=function(ce,xe){return this._runTask(K(f(ce,c),f(xe,c),m(arguments)),g(arguments))},ue.prototype.silent=function(ce){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},ue.prototype.tags=function(ce,xe){return this._runTask(mt(m(arguments)),g(arguments))},ue.prototype.rebase=function(){return this._runTask(Me(["rebase",...m(arguments)]),g(arguments))},ue.prototype.reset=function(ce){return this._runTask(ye(J(ce),m(arguments)),g(arguments))},ue.prototype.revert=function(ce){let xe=g(arguments);return typeof ce!="string"?this._runTask(o("Commit must be a string"),xe):this._runTask(Me(["revert",...m(arguments,0,!0),ce]),xe)},ue.prototype.addTag=function(ce){let xe=typeof ce=="string"?ct(ce):o("Git.addTag requires a tag name");return this._runTask(xe,g(arguments))},ue.prototype.addAnnotatedTag=function(ce,xe){return this._runTask(Oe(ce,xe),g(arguments))},ue.prototype.deleteLocalBranch=function(ce,xe,Ae){return this._runTask(E(ce,typeof xe=="boolean"?xe:!1),g(arguments))},ue.prototype.deleteLocalBranches=function(ce,xe,Ae){return this._runTask(w(ce,typeof xe=="boolean"?xe:!1),g(arguments))},ue.prototype.branch=function(ce,xe){return this._runTask(S(m(arguments)),g(arguments))},ue.prototype.branchLocal=function(ce){return this._runTask(T(),g(arguments))},ue.prototype.raw=function(ce){let xe=!Array.isArray(ce),Ae=[].slice.call(xe?arguments:ce,0);for(let Ve=0;Ve<Ae.length&&xe;Ve++)if(!l(Ae[Ve])){Ae.splice(Ve,Ae.length-Ve);break}Ae.push(...m(arguments,0,!0));var M=g(arguments);return Ae.length?this._runTask(Me(Ae,this._trimmed),M):this._runTask(o("Raw: must supply one or more command to execute"),M)},ue.prototype.submoduleAdd=function(ce,xe,Ae){return this._runTask(ae(ce,xe),g(arguments))},ue.prototype.submoduleUpdate=function(ce,xe){return this._runTask(Pe(m(arguments,!0)),g(arguments))},ue.prototype.submoduleInit=function(ce,xe){return this._runTask(Se(m(arguments,!0)),g(arguments))},ue.prototype.subModule=function(ce,xe){return this._runTask(Re(m(arguments)),g(arguments))},ue.prototype.listRemote=function(){return this._runTask(W(m(arguments)),g(arguments))},ue.prototype.addRemote=function(ce,xe,Ae){return this._runTask(H(ce,xe,m(arguments)),g(arguments))},ue.prototype.removeRemote=function(ce,xe){return this._runTask(se(ce),g(arguments))},ue.prototype.getRemotes=function(ce,xe){return this._runTask(re(ce===!0),g(arguments))},ue.prototype.remote=function(ce,xe){return this._runTask(q(m(arguments)),g(arguments))},ue.prototype.tag=function(ce,xe){let Ae=m(arguments);return Ae[0]!=="tag"&&Ae.unshift("tag"),this._runTask(Me(Ae),g(arguments))},ue.prototype.updateServerInfo=function(ce){return this._runTask(Me(["update-server-info"]),g(arguments))},ue.prototype.pushTags=function(ce,xe){let Ae=ne({remote:f(ce,c)},m(arguments));return this._runTask(Ae,g(arguments))},ue.prototype.rm=function(ce){return this._runTask(Me(["rm","-f",...s(ce)]),g(arguments))},ue.prototype.rmKeepLocal=function(ce){return this._runTask(Me(["rm","--cached",...s(ce)]),g(arguments))},ue.prototype.catFile=function(ce,xe){return this._catFile("utf-8",arguments)},ue.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},ue.prototype._catFile=function(ce,xe){var Ae=g(xe),M=["cat-file"],Ve=xe[0];if(typeof Ve=="string")return this._runTask(o("Git.catFile: options must be supplied as an array of strings"),Ae);Array.isArray(Ve)&&M.push.apply(M,Ve);let De=ce==="buffer"?wt(M):Me(M);return this._runTask(De,Ae)},ue.prototype.diff=function(ce,xe){let Ae=c(ce)?o("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):Me(["diff",...m(arguments)]);return this._runTask(Ae,g(arguments))},ue.prototype.diffSummary=function(){return this._runTask(G(m(arguments,1)),g(arguments))},ue.prototype.applyPatch=function(ce){let xe=p(ce)?_(s(ce),m([].slice.call(arguments,1))):o("git.applyPatch requires one or more string patches as the first argument");return this._runTask(xe,g(arguments))},ue.prototype.revparse=function(){let ce=["rev-parse",...m(arguments,!0)];return this._runTask(Me(ce,!0),g(arguments))},ue.prototype.clean=function(ce,xe,Ae){let M=$(ce),Ve=M&&ce.join("")||f(ce,c)||"",De=m([].slice.call(arguments,M?1:0));return this._runTask(U(Ve,De),g(arguments))},ue.prototype.exec=function(ce){let xe={commands:[],format:"utf-8",parser(){typeof ce=="function"&&ce()}};return this._runTask(xe)},ue.prototype.clearQueue=function(){return this},ue.prototype.checkIgnore=function(ce,xe){return this._runTask(I(s(f(ce,p,[]))),g(arguments))},ue.prototype.checkIsRepo=function(ce,xe){return this._runTask(N(f(ce,c)),g(arguments))},e.exports=ue}});U_();Ap();var ZOe=class extends kc{constructor(t,e){super(void 0,e),this.config=t}};Ap();Ap();var om=class extends kc{constructor(t,e,r){super(t,r),this.task=t,this.plugin=e,Object.setPrototypeOf(this,new.target.prototype)}};qg();See();zee();Zee();rte();ote();ute();function eRe(t){return t?[{type:"spawn.before",action(n,i){t.aborted&&i.kill(new om(void 0,"abort","Abort already signaled"))}},{type:"spawn.after",action(n,i){function o(){i.kill(new om(void 0,"abort","Abort signal received"))}t.addEventListener("abort",o),i.spawned.on("close",()=>t.removeEventListener("abort",o))}}]:void 0}function tRe(t){return typeof t=="string"&&t.trim().toLowerCase()==="-c"}function rRe(t,e){if(tRe(t)&&/^\s*protocol(.[a-z]+)?.allow/.test(e))throw new om(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}function nRe(t,e){if(/^\s*--(upload|receive)-pack/.test(t))throw new om(void 0,"unsafe","Use of --upload-pack or --receive-pack is not permitted without enabling allowUnsafePack");if(e==="clone"&&/^\s*-u\b/.test(t))throw new om(void 0,"unsafe","Use of clone with option -u is not permitted without enabling allowUnsafePack");if(e==="push"&&/^\s*--exec\b/.test(t))throw new om(void 0,"unsafe","Use of push with option --exec is not permitted without enabling allowUnsafePack")}function iRe({allowUnsafeProtocolOverride:t=!1,allowUnsafePack:e=!1}={}){return{type:"spawn.args",action(r,n){return r.forEach((i,o)=>{let s=o<r.length?r[o+1]:"";t||rRe(i,s),e||nRe(i,n.method)}),r}}}kt();function oRe(t){let e=L_(t,"-c");return{type:"spawn.args",action(r){return[...e,...r]}}}kt();var bee=(0,$g.deferred)().promise;function sRe({onClose:t=!0,onExit:e=50}={}){function r(){let i=-1,o={close:(0,$g.deferred)(),closeTimeout:(0,$g.deferred)(),exit:(0,$g.deferred)(),exitTimeout:(0,$g.deferred)()},s=Promise.race([t===!1?bee:o.closeTimeout.promise,e===!1?bee:o.exitTimeout.promise]);return n(t,o.close,o.closeTimeout),n(e,o.exit,o.exitTimeout),{close(a){i=a,o.close.done()},exit(a){i=a,o.exit.done()},get exitCode(){return i},result:s}}function n(i,o,s){i!==!1&&(i===!0?o.promise:o.promise.then(()=>r4(i))).then(s.done)}return{type:"spawn.after",action(i,o){return R_(this,arguments,function*(s,{spawned:a,close:l}){var c,p;let f=r(),m=!0,g=()=>void(m=!1);(c=a.stdout)==null||c.on("data",g),(p=a.stderr)==null||p.on("data",g),a.on("error",g),a.on("close",v=>f.close(v)),a.on("exit",v=>f.exit(v));try{yield f.result,m&&(yield r4(50)),l(f.exitCode)}catch(v){l(f.exitCode,v)}})}}}Ap();function aRe(t){return!!(t.exitCode&&t.stdErr.length)}function lRe(t){return Buffer.concat([...t.stdOut,...t.stdErr])}function uRe(t=!1,e=aRe,r=lRe){return(n,i)=>!t&&n||!e(i)?n:r(i)}function xee(t){return{type:"task.error",action(e,r){let n=t(e.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});return Buffer.isBuffer(n)?{error:new kc(void 0,n.toString("utf-8"))}:{error:n}}}}kt();var cRe=class{constructor(){this.plugins=new Set}add(t){let e=[];return Np(t).forEach(r=>r&&this.plugins.add(vr(e,r))),()=>{e.forEach(r=>this.plugins.delete(r))}}exec(t,e,r){let n=e,i=Object.freeze(Object.create(r));for(let o of this.plugins)o.type===t&&(n=o.action(n,i));return n}};kt();function dRe(t){let e="--progress",r=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(o,s){return r.includes(s.method)?Nee(o,e):o}},{type:"spawn.after",action(o,s){var a;s.commands.includes(e)&&((a=s.spawned.stderr)==null||a.on("data",l=>{let c=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(l.toString("utf8"));c&&t({method:s.method,stage:pRe(c[1]),progress:an(c[2]),processed:an(c[3]),total:an(c[4])})}))}}]}function pRe(t){return String(t.toLowerCase().split(" ",1))||"unknown"}kt();function fRe(t){let e=Oee(t,["uid","gid"]);return{type:"spawn.options",action(r){return Aa(Aa({},e),r)}}}function mRe({block:t,stdErr:e=!0,stdOut:r=!0}){if(t>0)return{type:"spawn.after",action(n,i){var o,s;let a;function l(){a&&clearTimeout(a),a=setTimeout(p,t)}function c(){var f,m;(f=i.spawned.stdout)==null||f.off("data",l),(m=i.spawned.stderr)==null||m.off("data",l),i.spawned.off("exit",c),i.spawned.off("close",c),a&&clearTimeout(a)}function p(){c(),i.kill(new om(void 0,"timeout","block timeout reached"))}r&&((o=i.spawned.stdout)==null||o.on("data",l)),e&&((s=i.spawned.stderr)==null||s.on("data",l)),i.spawned.on("exit",c),i.spawned.on("close",c),l()}}}U_();function hRe(){return{type:"spawn.args",action(t){let e=[],r;function n(i){(r=r||[]).push(...i)}for(let i=0;i<t.length;i++){let o=t[i];if(G2(o)){n(VZ(o));continue}if(o==="--"){n(t.slice(i+1).flatMap(s=>G2(s)&&VZ(s)||s));break}e.push(o)}return r?[...e,"--",...r.map(String)]:e}}}kt();var gRe=QOe();function yRe(t,e){let r=new cRe,n=Mee(t&&(typeof t=="string"?{baseDir:t}:t)||{},e);if(!g4(n.baseDir))throw new ZOe(n,"Cannot use simple-git on a directory that does not exist");return Array.isArray(n.config)&&r.add(oRe(n.config)),r.add(iRe(n.unsafe)),r.add(hRe()),r.add(sRe(n.completion)),n.abort&&r.add(eRe(n.abort)),n.progress&&r.add(dRe(n.progress)),n.timeout&&r.add(mRe(n.timeout)),n.spawnOptions&&r.add(fRe(n.spawnOptions)),r.add(xee(uRe(!0))),n.errors&&r.add(xee(n.errors)),new gRe(n,r)}qg();var U4=yRe;xr();function B4(t){br(t)&&(ff(t).forEach((e,r)=>{let n=`${t}/${e}`;jv(n).isDirectory()?B4(n):mR(n)}),fR(t))}var sD=class{constructor(e){this.logs=[];this._maxSize=e,Ce(this)}add(e){this.logs.length>=this._maxSize&&this.logs.pop(),this.logs.unshift({date:Date.now(),msg:e})}};var aD=class{constructor(e,r){this.st=e;this.config=r;this.status="Unknown";this.lastFetchAt=0;this.nextFetchAt=0;this.originCommitsCount=0;this.headCommitsCount=0;this.mainBranchName="";this.git=null;this.currentAction=null;this.logs=[];this.resetAllGitInfos=()=>{this.mainBranchName="",this.headCommitsCount=0,this.originCommitsCount=0,this._stopPeriodicUpdateCheck()};this.updateInfos=async()=>{try{if(this.currentAction="updateInfos",!br(this.config.absFolderPath)){this.status="DoesNotExist",this.resetAllGitInfos(),this.log(`\u274C folder ${this.config.absFolderPath} could not be found`);return}if(!jv(this.config.absFolderPath).isDirectory()){this.status="NotADirectory",this.resetAllGitInfos(),this.log(`\u274C folder ${this.config.absFolderPath} is not a directory`);return}let e=this.git;if(e==null&&(this.git=U4(this.config.absFolderPath),e=this.git),!this._isGitFolder()){this.status="FolderWithoutGit",this.resetAllGitInfos(),this.log("\u274C not a git folder");return}let n=await e.raw(["symbolic-ref","HEAD"]);if(n==null){this.status="FolderWithGitButWithProblems",this.resetAllGitInfos(),this.log("\u274C no remote branch found");return}let i=n.slice(11).trim();if(!i){this.status="FolderWithGitButWithProblems",this.resetAllGitInfos(),this.log("\u274C Couldn't determine the default branch.");return}let o=i,s=await l("HEAD"),a=await l(`origin/${o}`);try{_r(()=>{this.mainBranchName=o,this.headCommitsCount=s,this.originCommitsCount=a,this.status="FolderWithGit"})}catch(c){this.log("\u274C updateInfos failed",c),_r(()=>{this.status="FolderWithGitButWithProblems"}),this.resetAllGitInfos();return}this._hasPeriodicUpdateCheck()||this._startPeriodicUpdateCheck();async function l(c){return e==null?0:(await e.log([c])).all.length}}catch(e){this.log("\u274C updateInfos failed",e)}finally{this.currentAction=null}};this.checkForUpdatesNow=async()=>{if(this.git!=null){this.commandErrors.clear();try{if(await this.updateInfos(),this.status!=="FolderWithGit")return;await this.git.fetch(),this._bumpLastFetchAt(),await this.updateInfos()}catch(e){this.error(`updates check failed: ${e.message}`)}}};this._bumpLastFetchAt=()=>{let e=this.config.absFolderPath+"/.git/FETCH_HEAD";if(br(e)){let n=new Date;hR(e,n,n)}};this.install=async()=>{if(this.git!=null)throw new Error("install: git is not null");if(br(this.config.absFolderPath))throw new Error("install: folder already exists");if(this.currentAction!=null)throw new Error("install: already installing");if(!this.config.canBeUninstalled)throw new Error("install: cannot be installed");this.currentAction="installing";let e=yr(this.absPath,"..");lo(e,{recursive:!0});let r=`git clone ${this.config.gitURLToFetchUpdatesFrom} --depth 1`;console.log("[\u{1F49D}] actionpack: installing with cmd:",r);let n=await new Promise((i,o)=>{pf(r,{cwd:e},(s,a)=>{if(console.log(a),s)return this.logs.push(s.message),console.log("[\u{1F49D}] actionpack install failure",s),o(s);console.log("[\u{1F49D}] actionpack installed"),i(!0)})});this.currentAction=null,this.updateInfos()};this.uninstall=()=>{if(this._stopPeriodicUpdateCheck(),!br(this.config.absFolderPath)){this.status="DoesNotExist",this.log(`\u274C folder ${this.config.absFolderPath} could not be found`);return}if(!this.config.canBeUninstalled){this.log("\u274C folder cannot be uninstalled");return}window.confirm(`Are you sure you want to delete ${this.relPath}?`)&&(B4(this.absPath),this.git=null,this.status="DoesNotExist"),this.updateInfos()};this._renderVersion=e=>`v${e.toString()}`;this.lastPullAttempt=null;this._hasPeriodicUpdateCheck=()=>{let e=globalThis;return(e.__UPDATERCACHE__??={})[this.config.absFolderPath]!=null};this._stopPeriodicUpdateCheck=()=>{let e=globalThis,r=e.__UPDATERCACHE__??={};r[this.config.absFolderPath]&&clearInterval(r[this.config.absFolderPath]),r[this.config.absFolderPath]=null};this._registerPeriodicUpdateCheck=e=>{let r=globalThis,n=r.__UPDATERCACHE__??={};n[this.config.absFolderPath]&&clearInterval(n[this.config.absFolderPath]),n[this.config.absFolderPath]=e};this._startPeriodicUpdateCheck=async()=>{let e=this.git;if(e==null)return;let r=60*1e3,n=Date.now();this._stopPeriodicUpdateCheck();let i=this.config.absFolderPath+"/.git/FETCH_HEAD",o=br(i),s;if(o){let m=mf(i);s=m.mtime.getTime(),this.log("Last fetch was on:",Ja(m.mtime))}else s=0;this.lastFetchAt=s;let a=this.st.configFile.value.checkUpdateEveryMinutes??5;this.log(`checking for updates every ${a} minutes`);let l=a*r,p=n-s>a*r?Math.floor(Math.random()*1e3*1):a*r-(n-s);this.nextFetchAt=n+p,this.log(`udpate checking will start in ${Math.round(p/1e3)} seconds`),await new Promise(m=>setTimeout(m,p));let f=setInterval(async()=>{this.nextFetchAt=Date.now()+l,await e.fetch(),this.checkForUpdatesNow()},l);this._registerPeriodicUpdateCheck(f)};this.lastLogs=new sD(100);this.log=(...e)=>{this.lastLogs.add(e.join(" "))};this.error=(...e)=>{console.error(`[\u{1F680}] (${this.relPath||"root"})`,...e)};this._gitInit=async()=>{if(this.currentAction!=null)throw new Error("updater is already already running");try{if(this.log("starting git init"),this.currentAction="git init",this.st.githubUsername==null){this.log("\u274C github username not set when runnign git init");return}await U4(this.config.absFolderPath).init(),this.status="FolderWithGit"}catch(e){this.log("\u274C git init failed",e)}finally{this.currentAction=null}};this._isGitFolder=()=>{let e=yr(this.config.absFolderPath,".git");return br(e)};this.commandErrors=new Map;this.relPath=$r(df(this.st.rootPath,r.absFolderPath)),this.absPath=r.absFolderPath,this.updateInfos(),Ce(this)}get currentVersion(){return this._renderVersion(this.headCommitsCount)}get nextVersion(){return this._renderVersion(this.originCommitsCount)}get hasUpdateAvailable(){return!(this.originCommitsCount<=this.headCommitsCount)}updateToLastCommitAvailable(){let e=Date.now();return new Promise((r,n)=>{this.log("UPDATING...");let i=`git pull origin ${this.mainBranchName}`;pf(i,{cwd:this.config.absFolderPath},(o,s,a)=>{if(o)return this.lastPullAttempt={attemptedAt:e,status:"failure",gitPullTrace:o.message,gitPullStdout:s,gitPullStrderr:a},n(o);let l={attemptedAt:e,status:"success",gitPullTrace:"success",gitPullStdout:s,gitPullStrderr:a};if(this.lastPullAttempt=l,!this.config.runNpmInstallAfterUpdate)return this.log("UPDATED"),r();pf("npm install",(c,p,f)=>(l.npmInstallStdout=p,l.npmInstallStrderr=f,c?(l.status="failure",l.npmInstallTrace=c.message,n(c)):(l.status="success",l.npmInstallTrace="success",this.log("UPDATED"),r())))})})}get hasErrors(){return this.commandErrors.size>0}};var lD=class{constructor(e){this.st=e;this.toggleDevTools=()=>{try{let e=!!this.st.configFile.value.preferDevToolsOpen;this.st.configFile.update({preferDevToolsOpen:!e}),window.require("electron").ipcRenderer.send("toggle-devtools")}catch(e){console.error("\u274C failed to toggle DevTools",e)}};this.openDevTools=(e=!1)=>{try{this.st.configFile.update({preferDevToolsOpen:!0}),window.require("electron").ipcRenderer.send("open-devtools")}catch(r){console.error("\u274C failed to open DevTools",r)}};this.closeDevTools=(e=!1)=>{try{this.st.configFile.update({preferDevToolsOpen:!1}),window.require("electron").ipcRenderer.send("close-devtools")}catch(r){console.error("\u274C failed to close DevTools",r)}};window.require("electron").ipcRenderer.on("filedownloaded",(n,i)=>{e.db.media_images.create({infos:{type:"image-local",absPath:ur(i.absolutePath)}})})}};xr();var vre=ie(NL(),1),uD=class t{constructor(){this.tags=[];this.tagsByCategory={};this.aliases={};this.parseRow=e=>({text:e[0],category:parseInt(e[1]),count:parseInt(e[2]),aliases:e[3]?.split(",")??[]});if(t._instance)throw new Error("DanbooruTags is a singleton");t._instance=this;let e=Pn("completions/danbooru.csv","utf-8"),r=(0,vre.parse)(e,{delimiter:",",header:!1});r.errors.length>0&&console.warn(r.errors);let i=r.data.map(this.parseRow);this.tags=i,console.log(`[\u{1F3F7}\uFE0F] DanBooru: ${this.tags.length} tags parsed`)}static{this.build=()=>(t._instance||(t._instance=new t),t._instance)}autocomplete(){}};xr();var Vi=window.require("cluster"),Gg=Vi,DTt=Vi._events,ITt=Vi._eventsCount,kTt=Vi._maxListeners,NTt=Vi.isWorker,ATt=Vi.isMaster,OTt=Vi.isPrimary,RTt=Vi.Worker,PTt=Vi.workers,LTt=Vi.settings,MTt=Vi.SCHED_NONE,FTt=Vi.SCHED_RR,UTt=Vi.schedulingPolicy,BTt=Vi.setupPrimary,WTt=Vi.setupMaster,jTt=Vi.fork,zTt=Vi.disconnect;var Nc;(function(t){t[t.TRACE=0]="TRACE",t[t.DEBUG=1]="DEBUG",t[t.INFORMATION=2]="INFORMATION",t[t.WARNING=3]="WARNING",t[t.ERROR=4]="ERROR",t[t.FAILURE=5]="FAILURE"})(Nc||(Nc={}));var cD=class{constructor(e){this._dir=e?.dir??process.cwd(),this._tag=e?.tag?e.tag.startsWith(".")?e.tag:`.${e.tag}`:"",this._ext=e?.ext?e.ext.startsWith(".")?e.ext:`.${e.ext}`:".log",this._utc=e?.utc??!1,this._stack=e?.stack??!1,this._stdout=e?.stdout??!1,this._level=e?.level??Nc.INFORMATION,this._cluster=e?.cluster??"",this._cluster&&Gg.isPrimary&&Gg.on("message",(r,n)=>{n.__logfile_service===this._cluster&&this.log(`<${r.id.toString().padStart(3,"0")}:${r.process.pid?.toString().padStart(6,"0")}> ${n.text}`,...n.values)})}log(e,...r){if(Gg.isPrimary||!this._cluster){let n=new Date,i=this._utc?[n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]:[n.getFullYear(),n.getMonth()+1,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()],o=2;if(this._lastEntryTimer){o=0;for(let a=0;a<6;++a)if(i[a]!==this._lastEntryTimer[a]){o=a<3?2:1;break}}if(o>1){this._stream&&!this._stream.writableEnded&&this._stream.end();let a=`${this._dir}/${i[0].toString()}-${i[1].toString().padStart(2,"0")}-${i[2].toString().padStart(2,"0")}${this._tag}`+(Gg.isWorker?`.${Gg.worker?.id.toString().padStart(3,"0")}${this._ext}`:this._ext);this._stream=yt.createWriteStream(a,{flags:"a"}),this._stream.on("error",l=>{this._lastEntryTimer=void 0,process.stderr.write(`|${n.toISOString()}|
failure to write entry: ${JSON.stringify(r)}
...on error: ${l}
`)})}if(o>0){let a=`|${i[3].toString().padStart(2,"0")}:${i[4].toString().padStart(2,"0")}:${i[5].toString().padStart(2,"0")}|
`;this._stream?.write(a),this._stdout&&process.stdout.write(a)}let s=`|${i[6].toString().padStart(3,"0")}| ${e}
${r.map(a=>`${this.toString(a)}
`).join("")}`;this._stream?.write(s),this._stdout&&process.stdout.write(s),this._lastEntryTimer=i}else process.send({__logfile_service:this._cluster,text:e,values:r.map(n=>this.toString(n))})}trace(e,...r){this._level===Nc.TRACE&&this.log(e,...r)}debug(e,...r){this._level<=Nc.DEBUG&&this.log(e,...r)}info(e,...r){this._level<=Nc.INFORMATION&&this.log(e,...r)}warn(e,...r){this._level<=Nc.WARNING&&this.log(e,...r)}error(e,...r){this._level<=Nc.ERROR&&this.log(e,...r)}fail(e,...r){this.log(e,...r)}get directory(){return this._dir}get tag(){return this._tag}get extension(){return this._ext}get utc(){return this._utc}get stack(){return this._stack}get stdout(){return this._stdout}get level(){return this._level}get cluster(){return this._cluster}toString(e){return typeof e=="string"?e:e.message||e.name?this._stack&&e.stack?`${e.message??e.name??e}
${e.stack}`:`${e.message??e.name}`:JSON.stringify(e)}};var gl=new cD({tag:"debug",utc:!1});var dD=class{constructor(e){this.st=e;this.user=null;this.session=null;this.logout=async()=>{gl.info("[\u{1F511} AUTH] logging out..."),await this.auth.signOut(),this.user=null,this.session=null,this.authTable.delete(ES("current"))};this.tryToRestoreAuthFromDB=async()=>{gl.info("[\u{1F511} AUTH] restoring session from DB...");let e=this.st.db.auths.get(ES("current"));e!=null&&await this.authFrom({access_token:e.data.access_token,refresh_token:e.data.refresh_token})};this.startLoginFlowWithGithub=async()=>{gl.info("[\u{1F511} AUTH] starting login flow...");let{data:e,error:r}=await this.st.supabase.auth.signInWithOAuth({provider:"github",options:{skipBrowserRedirect:!0,redirectTo:"http://localhost:8788/public/misc/cb.html",queryParams:{prompt:"login"}}});if(e.url==null)return gl.error("[\u{1F511} AUTH] \u274C invalid auth url; aborting"),null;window.open(e.url,"_blank",["nodeIntegration=no"].join(","))?.addEventListener("message",async i=>{gl.info("[\u{1F511} AUTH] \u{1F7E2} callback received from sub-window..."),console.log("[\u{1F459}]",i);let o=i.data,s=o.pageHref;console.log("[\u{1F459}]",o.pageHref);let a=new URL(s.replace("#","?")).searchParams,l={expires_at:a.get("expires_at"),expires_in:a.get("expires_in"),provider_token:a.get("provider_token"),refresh_token:a.get("refresh_token"),token_type:a.get("token_type"),access_token:a.get("access_token")};if(console.log("[\u{1F459}] event:",l),l.access_token==null)throw new Error("[\u{1F511} AUTH] \u274C failure: payload.access_token is null");if(l.refresh_token==null)throw new Error("[\u{1F511} AUTH] \u274C failure: payload.refresh_token is null");await this.authFrom({access_token:l.access_token,refresh_token:l.refresh_token})})};this.authFrom=async e=>{gl.info("[\u{1F511} AUTH] setting session to",e);let r=await this.auth.setSession({access_token:e.access_token,refresh_token:e.refresh_token});if(gl.info("[\u{1F511} AUTH] auth result:",r),r.error){gl.error(`[\u{1F511} AUTH] \u274C failure: ${r.error}`),console.error("[\u{1F511} AUTH] \u274C failure",r.error);return}let n=r.data.user,i=r.data.session;if(n==null)throw new Error("[\u{1F511} AUTH] \u274C failure: user is null");if(i==null)throw new Error("[\u{1F511} AUTH] \u274C failure: session is null");console.log("[\u{1F511} AUTH] \u{1F7E2} success."),_r(()=>{this.storeSessionInfoInDB(i),this.user=r.data.user,this.session=r.data.session})};this.storeSessionInfoInDB=e=>{let r={id:ES("current")};e.access_token&&(r.access_token=e.access_token),e.expires_at&&(r.expires_at=e.expires_at),e.expires_in&&(r.expires_in=e.expires_in),e.provider_refresh_token&&(r.provider_refresh_token=e.provider_refresh_token),e.provider_token&&(r.provider_token=e.provider_token),e.refresh_token&&(r.refresh_token=e.refresh_token),e.token_type&&(r.token_type=e.token_type),this.authTable.upsert(r),gl.info("[\u{1F511} AUTH] \u2705 auth saved to DB:",r)};this.auth=this.st.supabase.auth,Ce(this),this.tryToRestoreAuthFromDB(),this.auth.onAuthStateChange((r,n)=>{gl.info(`[\u{1F511} AUTH] \u{1F682}\u{1F682}\u{1F682}: ${r}`,n),n!=null&&this.storeSessionInfoInDB(n)})}get authTable(){return this.st.db.auths}get isConnected(){return this.user!=null}get email(){return this.user?.email}get avatar(){return this.user?.identities?.[0]?.identity_data?.avatar_url}get username(){return this.user?.identities?.[0]?.identity_data?.user_name??this.user?.email??this.user?.id??"anonymous"}};xr();var Ere=ie(Sre(),1);var fD=class{constructor(e){this.st=e;this.upload_FileAtAbsolutePath=async e=>{let r=fW((0,Ere.lookup)(e)),n=new Blob([Pn(e)],{type:r});return await this.upload_Blob(n)};this.upload_dataURL=async e=>{let r=e.split(";")[0].split(":")[1];console.log("[\u2B06\uFE0F] upload_dataURL",r);let n=new Blob([Buffer.from(e.split(",")[1],"base64")],{type:r});return await this.upload_Blob(n)};this.upload_NativeFile=async e=>{let r=new Blob([await e.arrayBuffer()],{type:e.type});return await this.upload_Blob(r)};this.upload_ImageAtURL=async e=>{let r=await this.st.getUrlAsBlob(e);return this.upload_Blob(r)};this.upload_Asset=async e=>{let r=ur(ao.join(this.st.rootPath,e));return this.st.uploader.upload_FileAtAbsolutePath(r)};this.upload_Blob=async e=>{console.warn("[\u2B06\uFE0F] upload_Blob");let n=`${await EQ(e)}.png`;if(this.st.schema.hasImage(n))return console.log("[\u2B06\uFE0F] image already exists on current ComfyUI instance"),{name:n,type:"input",subfolder:""};let i=new FormData;i.set("image",e,n);let o=this.st.getServerHostHTTP()+"/upload/image",a=await(await fetch(o,{method:"POST",body:i})).json();if(console.log({"resp.data":a}),a.name==null)throw new Error("upload failed");return this.st.schema.unsafely_addImageInSchemaWithoutReloading(a.name),a}}};var Cre=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Promise.resolve().then(()=>(Op(),Kg)).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};var q_=class extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}},mD=class extends q_{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},hD=class extends q_{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},gD=class extends q_{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var kRe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{c(n.next(p))}catch(f){s(f)}}function l(p){try{c(n.throw(p))}catch(f){s(f)}}function c(p){p.done?o(p.value):i(p.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},G_=class{constructor(e,{headers:r={},customFetch:n}={}){this.url=e,this.headers=r,this.fetch=Cre(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return kRe(this,void 0,void 0,function*(){try{let{headers:i,method:o,body:s}=r,a={},l;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=s):typeof s=="string"?(a["Content-Type"]="text/plain",l=s):typeof FormData<"u"&&s instanceof FormData?l=s:(a["Content-Type"]="application/json",l=JSON.stringify(s)));let c=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:l}).catch(g=>{throw new mD(g)}),p=c.headers.get("x-relay-error");if(p&&p==="true")throw new hD(c);if(!c.ok)throw new gD(c);let f=((n=c.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield c.json():f==="application/octet-stream"?m=yield c.blob():f==="multipart/form-data"?m=yield c.formData():m=yield c.text(),{data:m,error:null}}catch(i){return{data:null,error:i}}})}};Op();var Yg=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=H_:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let n=this.fetch,i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var s,a,l;let c=null,p=null,f=null,m=o.status,g=o.statusText;if(o.ok){if(this.method!=="HEAD"){let T=await o.text();T===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=T:p=JSON.parse(T))}let _=(s=this.headers.Prefer)===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),S=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");_&&S&&S.length>1&&(f=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(c={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,f=null,m=406,g="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{let _=await o.text();try{c=JSON.parse(_),Array.isArray(c)&&o.status===404&&(p=[],c=null,m=200,g="OK")}catch{o.status===404&&_===""?(m=204,g="No Content"):c={message:_}}if(c&&this.isMaybeSingle&&(!((l=c?.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,m=200,g="OK"),c&&this.shouldThrowOnError)throw c}return{error:c,data:p,count:f,status:m,statusText:g}});return this.shouldThrowOnError||(i=i.catch(o=>{var s,a,l;return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:`${(a=o?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}};var Xg=class extends Yg{select(e){let r=!1,n=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:o=i}={}){let s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){let i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:i=n}={}){let o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(s,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var a;let l=[e?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${c}"; options=${l};`,s==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};var Oa=class extends Xg{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){let n=r.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");let s=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${o}fts${s}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){let i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};var Jg=class{constructor(e,{headers:r={},schema:n,fetch:i}){this.url=e,this.headers=r,this.schema=n,this.fetch=i}select(e,{head:r=!1,count:n}={}){let i=r?"HEAD":"GET",o=!1,s=(e??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",s),n&&(this.headers.Prefer=`count=${n}`),new Oa({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){let i="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){let s=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(s.length>0){let a=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Oa({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:o=!0}={}){let s="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){let l=e.reduce((c,p)=>c.concat(Object.keys(p)),[]);if(l.length>0){let c=[...new Set(l)].map(p=>`"${p}"`);this.url.searchParams.set("columns",c.join(","))}}return new Oa({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){let n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),this.headers.Prefer=i.join(","),new Oa({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Oa({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var Dre="1.9.0";var Ire={"X-Client-Info":`postgrest-js/${Dre}`};var Qg=class t{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ire),r),this.schemaName=n,this.fetch=i}from(e){let r=new URL(`${this.url}/${e}`);return new Jg(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new t(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,count:i}={}){let o,s=new URL(`${this.url}/rpc/${e}`),a;n?(o="HEAD",Object.entries(r).forEach(([c,p])=>{s.searchParams.append(c,`${p}`)})):(o="POST",a=r);let l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new Oa({method:o,url:s,headers:l,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}};var kre="2.9.0";var Nre={"X-Client-Info":`realtime-js/${kre}`},Are="1.0.0",vD=1e4,Ore=1e3,Zg;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Zg||(Zg={}));var _s;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(_s||(_s={}));var Ks;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ks||(Ks={}));var yD;(function(t){t.websocket="websocket"})(yD||(yD={}));var Rp;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Rp||(Rp={}));var lm=class{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var V_=class{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){let i=r.getUint8(1),o=r.getUint8(2),s=this.HEADER_LENGTH+2,a=n.decode(e.slice(s,s+i));s=s+i;let l=n.decode(e.slice(s,s+o));s=s+o;let c=JSON.parse(n.decode(e.slice(s,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}};var um=class{constructor(e,r,n={},i=vD){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var j4;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(j4||(j4={}));var ey=class t{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=t.syncState(this.state,i,o,s),this.pendingDiffs.forEach(l=>{this.state=t.syncDiff(this.state,l,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=t.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){let o=this.cloneDeep(e),s=this.transformState(r),a={},l={};return this.map(o,(c,p)=>{s[c]||(l[c]=p)}),this.map(s,(c,p)=>{let f=o[c];if(f){let m=p.map(S=>S.presence_ref),g=f.map(S=>S.presence_ref),v=p.filter(S=>g.indexOf(S.presence_ref)<0),_=f.filter(S=>m.indexOf(S.presence_ref)<0);v.length>0&&(a[c]=v),_.length>0&&(l[c]=_)}else a[c]=p}),this.syncDiff(o,{joins:a,leaves:l},n,i)}static syncDiff(e,r,n,i){let{joins:o,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var c;let p=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),p.length>0){let f=e[a].map(g=>g.presence_ref),m=p.filter(g=>f.indexOf(g.presence_ref)<0);e[a].unshift(...m)}n(a,p,l)}),this.map(s,(a,l)=>{let c=e[a];if(!c)return;let p=l.map(f=>f.presence_ref);c=c.filter(f=>p.indexOf(f.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{let i=e[n];return"metas"in i?r[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Vr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Vr||(Vr={}));var $4=(t,e,r={})=>{var n;let i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((o,s)=>(o[s]=NRe(s,t,e,i),o),{})},NRe=(t,e,r,n)=>{let i=e.find(a=>a.name===t),o=i?.type,s=r[t];return o&&!n.includes(o)?Rre(o,s):z4(s)},Rre=(t,e)=>{if(t.charAt(0)==="_"){let r=t.slice(1,t.length);return PRe(e,r)}switch(t){case Vr.bool:return ARe(e);case Vr.float4:case Vr.float8:case Vr.int2:case Vr.int4:case Vr.int8:case Vr.numeric:case Vr.oid:return ORe(e);case Vr.json:case Vr.jsonb:return RRe(e);case Vr.timestamp:return LRe(e);case Vr.abstime:case Vr.date:case Vr.daterange:case Vr.int4range:case Vr.int8range:case Vr.money:case Vr.reltime:case Vr.text:case Vr.time:case Vr.timestamptz:case Vr.timetz:case Vr.tsrange:case Vr.tstzrange:return z4(e);default:return z4(e)}},z4=t=>t,ARe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ORe=t=>{if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return e}return t},RRe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},PRe=(t,e)=>{if(typeof t!="string")return t;let r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o,s=t.slice(1,r);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>Rre(e,a))}return t},LRe=t=>typeof t=="string"?t.replace(" ","T"):t;var H4;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(H4||(H4={}));var q4;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(q4||(q4={}));var G4;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(G4||(G4={}));var ty=class t{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=_s.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},r.config),this.timeout=this.socket.timeout,this.joinPush=new um(this,Ks.join,this.params,this.timeout),this.rejoinTimer=new lm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_s.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_s.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=_s.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_s.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ks.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new ey(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:o,presence:s}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));let a={},l={broadcast:o,presence:s,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(c=>c.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",({postgres_changes:c})=>{var p;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{let f=this.bindings.postgres_changes,m=(p=f?.length)!==null&&p!==void 0?p:0,g=[];for(let v=0;v<m;v++){let _=f[v],{filter:{event:S,schema:T,table:w,filter:E}}=_,I=c&&c[v];if(I&&I.event===S&&I.schema===T&&I.table===w&&I.filter===E)g.push(Object.assign(Object.assign({},_),{id:I.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){let{event:o,payload:s}=e,a={method:"POST",headers:{apikey:(n=this.socket.accessToken)!==null&&n!==void 0?n:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,l;let c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=_s.leaving;let r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ks.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{let i=new um(this,Ks.leave,{},e);i.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,r,n){let i=new AbortController,o=setTimeout(()=>i.abort(),n),s=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(o),s}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new um(this,e,r,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,o;let s=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:p}=Ks;if(n&&[a,l,c,p].indexOf(s)>=0&&n!==this._joinRef())return;let m=this._onMessage(s,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var v,_,S;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((S=(_=g.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===s}).map(g=>g.callback(m,n)):(o=this.bindings[s])===null||o===void 0||o.filter(g=>{var v,_,S,T,w,E;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in g){let I=g.id,N=(v=g.filter)===null||v===void 0?void 0:v.event;return I&&((_=r.ids)===null||_===void 0?void 0:_.includes(I))&&(N==="*"||N?.toLocaleLowerCase()===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{let I=(w=(T=g?.filter)===null||T===void 0?void 0:T.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return I==="*"||I===((E=r?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===s}).map(g=>{if(typeof m=="object"&&"ids"in m){let v=m.data,{schema:_,table:S,commit_timestamp:T,type:w,errors:E}=v;m=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:T,eventType:w,new:{},old:{},errors:E}),this._getPayloadRecords(v))}g.callback(m,n)})}_isClosed(){return this.state===_s.closed}_isJoined(){return this.state===_s.joined}_isJoining(){return this.state===_s.joining}_isLeaving(){return this.state===_s.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){let i=e.toLocaleLowerCase(),o={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,r){let n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&t.isEqual(i.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(let n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ks.close,{},e)}_onError(e){this._on(Ks.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_s.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=$4(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=$4(e.columns,e.old_record)),r}};var FRe=()=>{},Mre=typeof WebSocket<"u",URe=Mre?WebSocket:Lre(),ry=class{constructor(e,r){var n;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=Nre,this.params={},this.timeout=vD,this.transport=URe,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=FRe,this.conn=null,this.sendBuffer=[],this.serializer=new V_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...a)=>Promise.resolve().then(()=>(Op(),Kg)).then(({default:l})=>l(...a)):s=fetch,(...a)=>s(...a)},this.endPoint=`${e}/${yD.websocket}`,r?.params&&(this.params=r.params),r?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r?.timeout&&(this.timeout=r.timeout),r?.logger&&(this.logger=r.logger),r?.transport&&(this.transport=r.transport),r?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);let i=(n=r?.params)===null||n===void 0?void 0:n.apikey;i&&(this.accessToken=i),this.reconnectAfterMs=r?.reconnectAfterMs?r.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=r?.encode?r.encode:(o,s)=>s(JSON.stringify(o)),this.decode=r?.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new lm(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r?.fetch)}connect(){this.conn||(Mre?this.conn=new this.transport(this._endPointURL()):this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers}),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){let r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){let e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Zg.connecting:return Rp.Connecting;case Zg.open:return Rp.Open;case Zg.closing:return Rp.Closing;default:return Rp.Closed}}isConnected(){return this.connectionState()===Rp.Open}channel(e,r={config:{}}){let n=new ty(`realtime:${e}`,r,this);return this.channels.push(n),n}push(e){let{topic:r,event:n,payload:i,ref:o}=e,s=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(e){this.accessToken=e,this.channels.forEach(r=>{e&&r.updateJoinPayload({access_token:e}),r.joinedOnce&&r._isJoined()&&r._push(Ks.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Are}))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:i,payload:o,ref:s}=r;(s&&s===this.pendingHeartbeatRef||i===o?.type)&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${i} ${s&&"("+s+")"||""}`,o),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,o,s)),this.stateChangeCallbacks.message.forEach(a=>a(r))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ks.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;let n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Ore,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}};var ny=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Ci(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var _D=class extends ny{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}},K_=class extends ny{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}};var BRe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{c(n.next(p))}catch(f){s(f)}}function l(p){try{c(n.throw(p))}catch(f){s(f)}}function c(p){p.done?o(p.value):i(p.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},bD=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Promise.resolve().then(()=>(Op(),Kg)).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Fre=()=>BRe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>(Op(),Kg))).Response:Response});var iy=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{c(n.next(p))}catch(f){s(f)}}function l(p){try{c(n.throw(p))}catch(f){s(f)}}function c(p){p.done?o(p.value):i(p.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},V4=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),WRe=(t,e)=>iy(void 0,void 0,void 0,function*(){let r=yield Fre();t instanceof r?t.json().then(n=>{e(new _D(V4(n),t.status||500))}).catch(n=>{e(new K_(V4(n),n))}):e(new K_(V4(t),t))}),jRe=(t,e,r,n)=>{let i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};function xD(t,e,r,n,i,o){return iy(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(r,jRe(e,n,i,o)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>WRe(l,a))})})}function Y_(t,e,r,n){return iy(this,void 0,void 0,function*(){return xD(t,"GET",e,r,n)})}function cu(t,e,r,n,i){return iy(this,void 0,void 0,function*(){return xD(t,"POST",e,n,i,r)})}function Ure(t,e,r,n,i){return iy(this,void 0,void 0,function*(){return xD(t,"PUT",e,n,i,r)})}function TD(t,e,r,n,i){return iy(this,void 0,void 0,function*(){return xD(t,"DELETE",e,n,i,r)})}var Ra=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{c(n.next(p))}catch(f){s(f)}}function l(p){try{c(n.throw(p))}catch(f){s(f)}}function c(p){p.done?o(p.value):i(p.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},zRe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bre={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},X_=class{constructor(e,r={},n,i){this.url=e,this.headers=r,this.bucketId=n,this.fetch=bD(i)}uploadOrUpdate(e,r,n,i){return Ra(this,void 0,void 0,function*(){try{let o,s=Object.assign(Object.assign({},Bre),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",s.cacheControl)):(o=n,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType);let l=this._removeEmptyFolders(r),c=this._getFinalPath(l),p=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:o,headers:a},s?.duplex?{duplex:s.duplex}:{})),f=yield p.json();return p.ok?{data:{path:l,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(o){if(Ci(o))return{data:null,error:o};throw o}})}upload(e,r,n){return Ra(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return Ra(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(e),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",r);try{let l,c=Object.assign({upsert:Bre.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,p["cache-control"]=`max-age=${c.cacheControl}`,p["content-type"]=c.contentType);let f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:p}),m=yield f.json();return f.ok?{data:{path:o,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(Ci(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return Ra(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),n=yield cu(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:this.headers}),i=new URL(this.url+n.url),o=i.searchParams.get("token");if(!o)throw new ny("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(r){if(Ci(r))return{data:null,error:r};throw r}})}update(e,r,n){return Ra(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r){return Ra(this,void 0,void 0,function*(){try{return{data:yield cu(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers}),error:null}}catch(n){if(Ci(n))return{data:null,error:n};throw n}})}copy(e,r){return Ra(this,void 0,void 0,function*(){try{return{data:{path:(yield cu(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers})).Key},error:null}}catch(n){if(Ci(n))return{data:null,error:n};throw n}})}createSignedUrl(e,r,n){return Ra(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield cu(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(Ci(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return Ra(this,void 0,void 0,function*(){try{let i=yield cu(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(Ci(i))return{data:null,error:i};throw i}})}download(e,r){return Ra(this,void 0,void 0,function*(){let i=typeof r?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(r?.transform||{}),s=o?`?${o}`:"";try{let a=this._getFinalPath(e);return{data:yield(yield Y_(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ci(a))return{data:null,error:a};throw a}})}getPublicUrl(e,r){let n=this._getFinalPath(e),i=[],o=r?.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&i.push(o);let a=typeof r?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(r?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(e){return Ra(this,void 0,void 0,function*(){try{return{data:yield TD(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(Ci(r))return{data:null,error:r};throw r}})}list(e,r,n){return Ra(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},zRe),r),{prefix:e||""});return{data:yield cu(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Ci(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}};var Wre="2.5.5";var jre={"X-Client-Info":`storage-js/${Wre}`};var oy=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{c(n.next(p))}catch(f){s(f)}}function l(p){try{c(n.throw(p))}catch(f){s(f)}}function c(p){p.done?o(p.value):i(p.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},J_=class{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},jre),r),this.fetch=bD(n)}listBuckets(){return oy(this,void 0,void 0,function*(){try{return{data:yield Y_(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ci(e))return{data:null,error:e};throw e}})}getBucket(e){return oy(this,void 0,void 0,function*(){try{return{data:yield Y_(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(Ci(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return oy(this,void 0,void 0,function*(){try{return{data:yield cu(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ci(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return oy(this,void 0,void 0,function*(){try{return{data:yield Ure(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ci(n))return{data:null,error:n};throw n}})}emptyBucket(e){return oy(this,void 0,void 0,function*(){try{return{data:yield cu(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Ci(r))return{data:null,error:r};throw r}})}deleteBucket(e){return oy(this,void 0,void 0,function*(){try{return{data:yield TD(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(Ci(r))return{data:null,error:r};throw r}})}};var Q_=class extends J_{constructor(e,r={},n){super(e,r,n)}from(e){return new X_(this.url,this.headers,e,this.fetch)}};var zre="2.39.0";var Z_="";typeof Deno<"u"?Z_="deno":typeof document<"u"?Z_="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Z_="react-native":Z_="node";var $re={"X-Client-Info":`supabase-js-${Z_}/${zre}`};Op();var $Re=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{c(n.next(p))}catch(f){s(f)}}function l(p){try{c(n.throw(p))}catch(f){s(f)}}function c(p){p.done?o(p.value):i(p.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},HRe=t=>{let e;return t?e=t:typeof fetch>"u"?e=H_:e=fetch,(...r)=>e(...r)},qRe=()=>typeof Headers>"u"?W4:Headers,Hre=(t,e,r)=>{let n=HRe(r),i=qRe();return(o,s)=>$Re(void 0,void 0,void 0,function*(){var a;let l=(a=yield e())!==null&&a!==void 0?a:t,c=new i(s?.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},s),{headers:c}))})};function qre(t){return t.replace(/\/$/,"")}function Gre(t,e){let{db:r,auth:n,realtime:i,global:o}=t,{db:s,auth:a,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},s),r),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),o)}}function Vre(t){return Math.round(Date.now()/1e3)+t}function Kre(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}var du=()=>typeof document<"u",cm={tested:!1,writable:!1},Pp=()=>{if(!du())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(cm.tested)return cm.writable;let t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),cm.tested=!0,cm.writable=!0}catch{cm.tested=!0,cm.writable=!1}return cm.writable};function wD(t){let e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}var SD=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Promise.resolve().then(()=>(Op(),Kg)).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Yre=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Lp=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},tb=async(t,e)=>{let r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ED=async(t,e)=>{await t.removeItem(e)};function GRe(t){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",n,i,o,s,a,l,c,p=0;for(t=t.replace("-","+").replace("_","/");p<t.length;)s=e.indexOf(t.charAt(p++)),a=e.indexOf(t.charAt(p++)),l=e.indexOf(t.charAt(p++)),c=e.indexOf(t.charAt(p++)),n=s<<2|a>>4,i=(a&15)<<4|l>>2,o=(l&3)<<6|c,r=r+String.fromCharCode(n),l!=64&&i!=0&&(r=r+String.fromCharCode(i)),c!=64&&o!=0&&(r=r+String.fromCharCode(o));return r}var eb=class t{constructor(){this.promise=new t.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}};eb.promiseConstructor=Promise;function K4(t){let e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=t.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");let n=r[1];return JSON.parse(GRe(n))}async function Xre(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Jre(t,e){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{let s=await t(o);if(!e(o,null,s)){n(s);return}}catch(s){if(!e(o,s)){i(s);return}}})()})}function VRe(t){return("0"+t.toString(16)).substr(-2)}function dm(){let e=new Uint32Array(56);if(typeof crypto>"u"){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length,i="";for(let o=0;o<56;o++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,VRe).join("")}async function KRe(t){let r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}function YRe(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pm(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;let r=await KRe(t);return YRe(r)}var rb=class extends Error{constructor(e,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r}};function rr(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}var CD=class extends rb{constructor(e,r){super(e,r),this.name="AuthApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}};function Qre(t){return rr(t)&&t.name==="AuthApiError"}var sy=class extends rb{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}},Ac=class extends rb{constructor(e,r,n){super(e),this.name=r,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Oc=class extends Ac{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}},ay=class extends Ac{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}},fm=class extends Ac{constructor(e){super(e,"AuthInvalidCredentialsError",400)}},mm=class extends Ac{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},nb=class extends Ac{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},ly=class extends Ac{constructor(e,r){super(e,"AuthRetryableFetchError",r)}};function ID(t){return rr(t)&&t.name==="AuthRetryableFetchError"}var DD=class extends Ac{constructor(e,r,n){super(e,"AuthWeakPasswordError",r),this.reasons=n}};var XRe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},uy=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),JRe=[502,503,504];async function Zre(t){if(!Yre(t))throw new ly(uy(t),0);if(JRe.includes(t.status))throw new ly(uy(t),t.status);let e;try{e=await t.json()}catch(r){throw new sy(uy(r),r)}throw typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reduce((r,n)=>r&&typeof n=="string",!0)?new DD(uy(e),t.status,e.weak_password.reasons):new CD(uy(e),t.status||500)}var QRe=(t,e,r,n)=>{let i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function sr(t,e,r,n){var i;let o=Object.assign({},n?.headers);n?.jwt&&(o.Authorization=`Bearer ${n.jwt}`);let s=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(s.redirect_to=n.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await ZRe(t,e,r+a,{headers:o,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function ZRe(t,e,r,n,i,o){let s=QRe(e,n,i,o),a;try{a=await t(r,s)}catch(l){throw console.error(l),new ly(uy(l),0)}if(a.ok||await Zre(a),n?.noResolveJson)return a;try{return await a.json()}catch(l){await Zre(l)}}function Rc(t){var e;let r=null;ePe(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Vre(t.expires_in)));let n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function pu(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function ene(t){return{data:t,error:null}}function tne(t){let{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o}=t,s=XRe(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o},l=Object.assign({},s);return{data:{properties:a,user:l},error:null}}function rne(t){return t}function ePe(t){return t.access_token&&t.refresh_token&&t.expires_in}var tPe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},cy=class{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=SD(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await sr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(rr(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await sr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:pu})}catch(n){if(rr(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{let{options:r}=e,n=tPe(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await sr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:tne,redirectTo:r?.redirectTo})}catch(r){if(rr(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await sr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:pu})}catch(r){if(rr(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,o,s,a,l;try{let c={nextPage:null,lastPage:0,total:0},p=await sr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:rne});if(p.error)throw p.error;let f=await p.json(),m=(s=p.headers.get("x-total-count"))!==null&&s!==void 0?s:0,g=(l=(a=p.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{let _=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(v.split(";")[1].split("=")[1]);c[`${S}Page`]=_}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(rr(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await sr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:pu})}catch(r){if(rr(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await sr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:pu})}catch(n){if(rr(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){try{return await sr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:pu})}catch(n){if(rr(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{let{data:r,error:n}=await sr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(rr(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await sr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(rr(r))return{data:null,error:r};throw r}}};var kD="2.59.0";var nne="http://localhost:9999",ine="supabase.auth.token";var one={"X-Client-Info":`gotrue-js/${kD}`},Y4=10;var sne={getItem:t=>Pp()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Pp()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Pp()&&globalThis.localStorage.removeItem(t)}};function X4(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function ane(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var rPe={debug:!!(globalThis&&Pp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},ND=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}};ane();var nPe={url:nne,storageKey:ine,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:one,flowType:"implicit",debug:!1},ib=30*1e3,lne=3;async function iPe(t,e,r){return await r()}var hm=class t{constructor(e){var r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=t.nextInstanceID,t.nextInstanceID+=1,this.instanceID>0&&du()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let n=Object.assign(Object.assign({},nPe),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new cy({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=SD(n.fetch),this.lock=n.lock||iPe,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Pp()?this.storage=sne:(this.memoryStorage={},this.storage=X4(this.memoryStorage)):(this.memoryStorage={},this.storage=X4(this.memoryStorage)),du()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${kD}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{let e=du()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:r,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),await this._removeSession(),{error:n};let{session:i,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return rr(e)?{error:e}:{error:new sy("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var r,n,i;try{await this._removeSession();let o;if("email"in e){let{email:p,password:f,options:m}=e,g=null,v=null;if(this.flowType==="pkce"){let _=dm();await Lp(this.storage,`${this.storageKey}-code-verifier`,_),g=await pm(_),v=_===g?"plain":"s256"}o=await sr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:p,password:f,data:(r=m?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:v},xform:Rc})}else if("phone"in e){let{phone:p,password:f,options:m}=e;o=await sr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:f,data:(n=m?.data)!==null&&n!==void 0?n:{},channel:(i=m?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Rc})}else throw new fm("You must provide either an email or phone number and a password");let{data:s,error:a}=o;if(a||!s)return{data:{user:null,session:null},error:a};let l=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(rr(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{await this._removeSession();let r;if("email"in e){let{email:o,password:s,options:a}=e;r=await sr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Rc})}else if("phone"in e){let{phone:o,password:s,options:a}=e;r=await sr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Rc})}else throw new fm("You must provide either an email or phone number and a password");let{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ay}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:{user:n.user,session:n.session},error:i})}catch(r){if(rr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,i,o;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){let[r,n]=(await tb(this.storage,`${this.storageKey}-code-verifier`)).split("/"),{data:i,error:o}=await sr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Rc});return await ED(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ay}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{let{options:r,provider:n,token:i,access_token:o,nonce:s}=e,a=await sr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:s,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Rc}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ay}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(rr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,i,o,s;try{if(await this._removeSession(),"email"in e){let{email:a,options:l}=e,c=null,p=null;if(this.flowType==="pkce"){let m=dm();await Lp(this.storage,`${this.storageKey}-code-verifier`,m),c=await pm(m),p=m===c?"plain":"s256"}let{error:f}=await sr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:p},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){let{phone:a,options:l}=e,{data:c,error:p}=await sr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(o=l?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(s=l?.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:c?.message_id},error:p}}throw new fm("You must provide either an email or phone number.")}catch(a){if(rr(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var r,n;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let i,o;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);let{data:s,error:a}=await sr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Rc});if(a)throw a;if(!s)throw new Error("An error occurred on token verification.");let l=s.session,c=s.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(rr(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,n,i;try{await this._removeSession();let o=null,s=null;if(this.flowType==="pkce"){let a=dm();await Lp(this.storage,`${this.storageKey}-code-verifier`,a),o=await pm(a),s=a===o?"plain":"s256"}return await sr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:s}),headers:this.headers,xform:ene})}catch(o){if(rr(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Oc;let{error:i}=await sr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(rr(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();let r=`${this.url}/resend`;if("email"in e){let{email:n,type:i,options:o}=e,{error:s}=await sr(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in e){let{phone:n,type:i,options:o}=e,{data:s,error:a}=await sr(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:s?.message_id},error:a}}throw new fm("You must provide either an email or phone number and a type")}catch(r){if(rr(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){let i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=await tb(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let n=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n)return{data:{session:e},error:null};let{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await sr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:pu}):await this._useSession(async r=>{var n,i;let{data:o,error:s}=r;if(s)throw s;return await sr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:pu})})}catch(r){if(rr(r))return{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{let{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new Oc;let s=i.session,a=null,l=null;if(this.flowType==="pkce"&&e.email!=null){let f=dm();await Lp(this.storage,`${this.storageKey}-code-verifier`,f),a=await pm(f),l=f===a?"plain":"s256"}let{data:c,error:p}=await sr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:s.access_token,xform:pu});if(p)throw p;return s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(n){if(rr(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return K4(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Oc;let r=Date.now()/1e3,n=r,i=!0,o=null,s=K4(e.access_token);if(s.exp&&(n=s.exp,i=n<=r),i){let{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{let{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(rr(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){let{data:s,error:a}=r;if(a)throw a;e=(n=s.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new Oc;let{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(rr(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e){try{if(!du())throw new mm("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new mm("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new nb("Not a valid PKCE flow url.");let r=wD(window.location.href);if(e){if(!r.code)throw new nb("No code detected.");let{data:w,error:E}=await this._exchangeCodeForSession(r.code);if(E)throw E;let I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:w.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new mm(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});let{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:s,expires_in:a,expires_at:l,token_type:c}=r;if(!o||!a||!s||!c)throw new mm("No session defined in URL");let p=Math.round(Date.now()/1e3),f=parseInt(a),m=p+f;l&&(m=parseInt(l));let g=m-p;g*1e3<=ib&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);let v=m-f;p-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,p):p-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",v,m,p);let{data:_,error:S}=await this._getUser(o);if(S)throw S;let T={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:f,expires_at:m,refresh_token:s,token_type:c,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:r.type},error:null}}catch(r){if(rr(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){let e=wD(window.location.href);return!!(du()&&(e.access_token||e.error_description))}async _isPKCEFlow(){let e=wD(window.location.href),r=await tb(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;let{data:i,error:o}=r;if(o)return{error:o};let s=(n=i.session)===null||n===void 0?void 0:n.access_token;if(s){let{error:a}=await this.admin.signOut(s,e);if(a&&!(Qre(a)&&(a.status===404||a.status===401)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ED(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){let r=Kre(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{let{data:{session:o},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;if(this.flowType==="pkce"){let o=dm();await Lp(this.storage,`${this.storageKey}-code-verifier`,`${o}/PASSWORD_RECOVERY`),n=await pm(o),i=o===n?"plain":"s256"}try{return await sr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(rr(o))return{data:null,error:o};throw o}}async _refreshAccessToken(e){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let n=Date.now();return await Jre(async i=>(await Xre(i*200),this._debug(r,"refreshing attempt",i),await sr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Rc})),(i,o,s)=>s&&s.error&&ID(s.error)&&Date.now()+(i+1)*200-n<ib)}catch(n){if(this._debug(r,"error",n),rr(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){let n=await this._getUrlForProvider(e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),du()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let n=await tb(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}let i=Math.round(Date.now()/1e3),o=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<i+Y4;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Y4}s`),o){if(this.autoRefreshToken&&n.refresh_token){let{error:s}=await this._callRefreshToken(n.refresh_token);s&&(console.error(s),ID(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Oc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new eb;let{data:o,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!o.session)throw new Oc;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(i,"error",o),rr(o)){let s={session:null,error:o};return ID(o)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){let i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});let o=[],s=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(l){o.push(l)}});if(await Promise.all(s),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),Lp(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ED(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&du()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),ib);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async r=>{let{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let i=Math.floor((n.expires_at*1e3-e)/ib);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ib}ms, refresh threshold is ${lne} ticks`),i<=lne&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ND)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!du()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r){let n=[`provider=${encodeURIComponent(e)}`];if(r?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){let i=dm();await Lp(this.storage,`${this.storageKey}-code-verifier`,i);let o=await pm(i),s=i===o?"plain":"s256";this._debug("PKCE","code verifier",`${i.substring(0,5)}...`,"code challenge",o,"method",s);let a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(s)}`});n.push(a.toString())}if(r?.queryParams){let i=new URLSearchParams(r.queryParams);n.push(i.toString())}return`${this.url}/authorize?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;let{data:i,error:o}=r;return o?{data:null,error:o}:await sr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(rr(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;let{data:o,error:s}=r;if(s)return{data:null,error:s};let{data:a,error:l}=await sr(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(!((i=a?.totp)===null||i===void 0)&&i.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(r){if(rr(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;let{data:i,error:o}=r;if(o)return{data:null,error:o};let{data:s,error:a}=await sr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:a})})}catch(r){if(rr(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;let{data:i,error:o}=r;return o?{data:null,error:o}:await sr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(rr(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){let{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){let{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};let n=e?.factors||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified");return{data:{all:n,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;let{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let s=this._decodeJWT(i.access_token),a=null;s.aal&&(a=s.aal);let l=a;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");let p=s.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:p},error:null}}))}};hm.nextInstanceID=0;var AD=class extends hm{constructor(e){super(e)}};var oPe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{c(n.next(p))}catch(f){s(f)}}function l(p){try{c(n.throw(p))}catch(f){s(f)}}function c(p){p.done?o(p.value):i(p.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},sPe={headers:$re},aPe={schema:"public"},lPe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uPe={},ob=class{constructor(e,r,n){var i,o,s,a,l,c,p,f;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");let m=qre(e);this.realtimeUrl=`${m}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${m}/auth/v1`,this.storageUrl=`${m}/storage/v1`,this.functionsUrl=`${m}/functions/v1`;let g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,v={db:aPe,realtime:uPe,auth:Object.assign(Object.assign({},lPe),{storageKey:g}),global:sPe},_=Gre(n??{},v);this.storageKey=(o=(i=_.auth)===null||i===void 0?void 0:i.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=(s=_.global)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=_.auth)!==null&&l!==void 0?l:{},this.headers,(c=_.global)===null||c===void 0?void 0:c.fetch),this.fetch=Hre(r,this._getAccessToken.bind(this),(p=_.global)===null||p===void 0?void 0:p.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},_.realtime)),this.rest=new Qg(`${m}/rest/v1`,{headers:this.headers,schema:(f=_.db)===null||f===void 0?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new G_(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Q_(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return oPe(this,void 0,void 0,function*(){let{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:o,flowType:s,debug:a},l,c){let p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new AD({url:this.authUrl,headers:Object.assign(Object.assign({},p),l),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,flowType:s,debug:a,fetch:c})}_initRealtimeClient(e){return new ry(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var une=(t,e,r)=>new ob(t,e,r);var cne=()=>{let t="https://app.cushystudio.com",e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhjYmF3ZG11cG5sdnF0eWF1YnZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDE5MDAxMzQsImV4cCI6MjAxNzQ3NjEzNH0.uqeWM2KalDxBD2Z52hrXlRLueDziW1_jaUXdmmFyIpQ";if(e==null)throw new Error("foobar");return une(t,e)};var OD=class{constructor(e){this.rootPath=e;this.currentPromptFocused=null;this.__TEMPT__maxStepsToShow=10;this.resolveFromRoot=e=>ur(yr(this.rootPath,e));this.resolve=(e,r)=>ur(yr(e,r));this.uid=vt();this._udpateTime=()=>{let e=Date.now();this.liveTime=Math.round(e/1e3)};this.liveTime=(()=>{let e=this.hotReloadPersistentCache;return e.liveTimeInterval!=null&&clearInterval(e.liveTimeInterval),e.liveTimeInterval=setInterval(()=>this._udpateTime,1e3),Date.now()})();this.restart=()=>{window.location.reload()};this.fullReset_eraseConfigAndSchemaFilesAndDB=()=>{this.configFile.erase(),this.typecheckingConfig.erase(),this.db.erase(),this.restart()};this.partialReset_eraseConfigAndSchemaFiles=()=>{this.configFile.erase(),this.typecheckingConfig.erase(),this.restart()};this.comfySessionId="temp";this.status=null;this.graphHovered=null;this.sid=null;this.comfyStatus=null;this.hovered=null;this.danbooru=uD.build();this.userTags=CE.build();this.actionTags=[];this.getConfigValue=e=>this.configFile.value[e];this.setConfigValue=(e,r)=>this.configFile.update({[e]:r});this.isConfigValueEq=(e,r)=>this.configFile.value[e]===r;this.droppedFiles=[];this._allPublishedApps=null;this.fetcAllPublishedApps=async()=>{let e=await this.supabase.from("published_apps").select("*");return this._allPublishedApps=e,e};this.closeFullLibrary=()=>this.layout.fullPageComp=null;this.openFullLibrary=()=>this.layout.fullPageComp={props:{},panel:"CardPicker3UI"};this.toggleFullLibrary=()=>{this.layout.fullPageComp==null||this.layout.fullPageComp.panel!=="CardPicker3UI"?this.layout.fullPageComp={props:{},panel:"CardPicker3UI"}:this.layout.fullPageComp=null};this.stopCurrentPrompt=async()=>{let e=`${this.getServerHostHTTP()}/interrupt`,r=await fetch(e,{method:"POST"});console.log("\u{1F525} INTERRUPTED.")};this.getProject=()=>{if(this.db.projects.size>0)return this.db.projects.firstOrCrash();console.log("[\u{1F6CB}\uFE0F] creating project");let e=this.db.graphs.create({comfyPromptJSON:{},metadata:{}}),r=jX("library/CushyStudio/default/SDUI.ts");return this.db.projects.create({rootGraphID:e.id,name:"new project",currentApp:r})};this.draftsFolded=!1;this.allOpenDrafts=new SE({remoteTable:()=>this.db.drafts,remoteQuery:()=>({isOpened:1})});this.fixEnumValue=(e,r,n)=>{let i=this.schema.knownEnumsByName.get(r)?.values??[];if(i.length==0)return n?{finalValue:null,isSubstitute:e!=null,candidateValue:e}:{finalValue:e??"\u274C no value",ENUM_HAS_NO_VALUES:!0,isSubstitute:e!=null,candidateValue:e};if(e==null)return n?{finalValue:null,isSubstitute:!1,candidateValue:e}:{finalValue:i[0],isSubstitute:!0,candidateValue:e};if(i.includes(e))return{finalValue:e,isSubstitute:!1,candidateValue:e};let o=i.map(l=>l.toString()),s=vX(e.toString(),o),a=o.indexOf(s);if(a===-1)throw new Error("\u274C THE IMPOSSIBLE HAPPENED IN 'FixEnumValue'");return{finalValue:i[a],isSubstitute:!0,candidateValue:e}};this.comfyUIIframeRef=(0,dne.createRef)();this.expandNodes=!1;this.updateTsConfig=()=>{console.log("[\u{1F37B}] FIXUP TSConfig");let e=fL;this.configFile.value.enableTypeCheckingBuiltInApps&&(e.push("library/built-in"),e.push("library/sdk-examples"));let r=this.typecheckingConfig.value;e.every(i=>r.include.includes(i))||this.typecheckingConfig.update(i=>{let o=i.include;for(let s of e)o.includes(s)||(console.log("[\u{1F459}] adding",s),o.push(s))})};this.hosts=new Un({table:()=>this.db.hosts,where:()=>({})});this.getWSUrl=()=>this.mainHost.getServerHostHTTP();this._pendingMsgs=new Map;this.activePromptID=null;this.temporize=(e,r)=>{this.activePromptID=e;let n=this.db.comfy_prompts.get(e);if(n==null){let i=this._pendingMsgs.get(e);i?i.push(r):this._pendingMsgs.set(e,[r]);return}n.onPromptRelatedMessage(r)};this.latentPreview=null;this.onMessage=e=>{if(e.data instanceof ArrayBuffer){let i=new DataView(e.data).getUint32(0),o=e.data.slice(4);switch(i){case 1:let a=new DataView(e.data).getUint32(0),l;switch(a){case 1:default:l="image/jpeg";break;case 2:l="image/png"}let c=new Blob([o.slice(4)],{type:l}),p=URL.createObjectURL(c);this.latentPreview={blob:c,url:p,receivedAt:Date.now()};break;default:throw new Error(`Unknown binary websocket message of type ${i}`)}return}let r=JSON.parse(e.data);if(r.type==="status"){r.data.sid&&(this.comfySessionId=r.data.sid),this.status=r.data.status;return}if(r.type==="progress"){let n=this.activePromptID;if(n==null){console.log("\u274C received a 'progress' msg, but activePromptID is not set");return}this.temporize(n,r);return}if(r.type==="execution_start"||r.type==="execution_cached"||r.type==="execution_error"||r.type==="executing"||r.type==="executed"){this.temporize(r.data.prompt_id,r);return}throw gr(r),console.log("\u274C","Unknown message:",r),new Error("Unknown message type: "+JSON.stringify(r))};this.getUrlAsBlob=async e=>await(await fetch(e,{headers:{"Content-Type":"image/png"},method:"GET"})).blob();this.CRITICAL_ERROR=null;this.schemaRetrievalLogs=[];this.focusedStepOutput=null;this.focusedStepID=null;this.readJSON=(e,r)=>{if(console.log(e),!br(e)){if(r!=null)return r;throw new Error(`file does not exist ${e}`)}let i=Pn(e,"utf8");return JSON.parse(i)};this.readTextFile=(e,r)=>br(e)?Pn(e).toString():r;console.log("[\u{1F6CB}\uFE0F] starting Cushy"),this.cacheFolderPath=this.resolve(this.rootPath,$r("outputs")),this.primarySdkDtsPath=this.resolve(this.rootPath,$r("schema/global.d.ts")),this.outputFolderPath=this.cacheFolderPath,this.libraryFolderPathRel=$r("library"),this.libraryFolderPathAbs=this.resolve(this.rootPath,this.libraryFolderPathRel),this.typecheckingConfig=yX(),this.configFile=gX(),this.updateTsConfig(),this.db=new BC(this),this.supabase=cne(),this.electronUtils=new lD(this),this.shortcuts=new BS(_X,this,{name:vt()}),console.log(`[\u{1F6CB}\uFE0F] ${this.shortcuts.shortcuts.length} shortcuts loaded`),this.uploader=new fD(this),this.layout=new L2(this),this.themeMgr=new EE(this),this.updater=new aD(this,{absFolderPath:this.rootPath,shouldAutoUpdate:!0,runNpmInstallAfterUpdate:!0,canBeUninstalled:!1,gitURLToFetchUpdatesFrom:"rvion/CushyStudio",repositoryName:"CushyStudio",userName:"rvion"}),this.importer=new jC(this),this.library=new wE(this),this.project=this.getProject(),this.auth=new dD(this),this.virtualHostBase,this.virtualHostFull,this.mainHost.CONNECT(),Ce(this,{comfyUIIframeRef:!1,wildcards:!1})}get hotReloadPersistentCache(){let e=globalThis;return e.__hotReloadPersistentCache==null&&(e.__hotReloadPersistentCache={}),e.__hotReloadPersistentCache}get wildcards(){let e=this.resolveFromRoot($r("src/widgets/prompter/nodes/wildcards/wildcards.json")),r=this.readJSON(e);return Object.defineProperty(this,"wildcards",{value:r}),r}get schema(){return this.mainHost.schema}get showPreviewInFullScreen(){return this.configFile.value.showPreviewInFullScreen??!1}set showPreviewInFullScreen(e){this.configFile.update({showPreviewInFullScreen:e})}get galleryHoverOpacity(){return this.configFile.value.galleryHoverOpacity??.9}set galleryHoverOpacity(e){this.configFile.update({galleryHoverOpacity:e})}get preferedFormLayout(){return this.configFile.value.preferedFormLayout??"auto"}set preferedFormLayout(e){this.configFile.update({preferedFormLayout:e})}get gallerySizeStr(){return`${this.gallerySize}px`}set gallerySize(e){this.configFile.update({galleryImageSize:e})}get gallerySize(){return this.configFile.value.galleryImageSize??48}get historySizeStr(){return`${this.historySize}px`}set historySize(e){this.configFile.update({historyAppSize:e})}get historySize(){return this.configFile.value.historyAppSize??32}get latentSizeStr(){return`${this.latentSize}%`}set latentSize(e){this.configFile.update({latentPreviewSize:e})}get latentSize(){return this.configFile.value.latentPreviewSize??25}get githubUsername(){return this.configFile.value.githubUsername}get favoriteApps(){return this.configFile.value.favoriteApps??[]}get showPreviewInPanel(){return this.configFile.value.showPreviewInPanel??!0}set showPreviewInPanel(e){this.configFile.update({showPreviewInPanel:e})}get currentDraft(){return this.project.draft.item}set currentDraft(e){this.project.update({currentDraftID:e&&e.id}),e?.file?.load(),this.closeFullLibrary()}get mainComfyHostID(){return this.configFile.value.mainComfyHostID??X0}get virtualHostBase(){return this.db.hosts.upsert({id:eg(X0),hostname:"localhost",useHttps:0,port:8188,name:"virtual-ComfyUI-base",isLocal:1,isVirtual:1})}get virtualHostFull(){return this.db.hosts.upsert({id:eg(hX),hostname:"localhost",useHttps:0,port:8188,name:"virtual-ComfyUI-full",isLocal:1,isVirtual:1})}get ws(){return this.mainHost.ws}get mainHost(){return this.db.hosts.get(this.mainComfyHostID)??this.virtualHostBase}getServerHostHTTP(){return this.mainHost.getServerHostHTTP()}get schemaStatusEmoji(){return this.schema.nodes.length>10?"\u{1F7E2}":"\u{1F534}"}get focusedStepL(){return this.focusedStepID?this.db.steps.get(this.focusedStepID)??this.db.steps.last():this.db.steps.last()}get imageToDisplay(){let e=this.configFile.value.galleryMaxImages??20;return this.db.media_images.getLastN(e)}writeBinaryFile(e,r){let n=yr(e,"..");lo(n,{recursive:!0}),en(e,r)}writeTextFile(e,r){let n=yr(e,"..");lo(n,{recursive:!0}),en(e,r,"utf-8")}};var cPe=ur(process.cwd()),fne=F(()=>{console.log("[\u{1F6CB}\uFE0F] rendering CushyStudio");let t=(0,pne.useMemo)(()=>_r(()=>new OD(cPe)),[]);return P(BA.Provider,{value:t,children:[h(wC,{}),h(_U,{backend:iB,children:h(sT,{children:h(fX,{})})})]})});var dPe=document.getElementById("root");mne.default.createRoot(dPe).render(h(fne,{}));
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-reconciler/cjs/react-reconciler.production.min.js:
  (**
   * @license React
   * react-reconciler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-reconciler/cjs/react-reconciler-constants.production.min.js:
  (**
   * @license React
   * react-reconciler-constants.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

papaparse/papaparse.min.js:
  (* @license
  Papa Parse
  v5.4.1
  https://github.com/mholt/PapaParse
  License: MIT
  *)

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
